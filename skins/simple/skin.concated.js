!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(T){T.ui=T.ui||{},T.ui.version="1.12.1";var t,e,i,o,n=0,a=Array.prototype.slice;T.cleanData=(o=T.cleanData,function(t){var e,i,n;for(n=0;null!=(i=t[n]);n++)try{(e=T._data(i,"events"))&&e.remove&&T(i).triggerHandler("remove")}catch(t){}o(t)}),T.widget=function(t,i,e){var n,o,r,s={},a=t.split(".")[0],l=a+"-"+(t=t.split(".")[1]);return e||(e=i,i=T.Widget),T.isArray(e)&&(e=T.extend.apply(null,[{}].concat(e))),T.expr[":"][l.toLowerCase()]=function(t){return!!T.data(t,l)},T[a]=T[a]||{},n=T[a][t],o=T[a][t]=function(t,e){return this._createWidget?void(arguments.length&&this._createWidget(t,e)):new o(t,e)},T.extend(o,n,{version:e.version,_proto:T.extend({},e),_childConstructors:[]}),(r=new i).options=T.widget.extend({},r.options),T.each(e,function(e,r){return T.isFunction(r)?void(s[e]=function(){function n(){return i.prototype[e].apply(this,arguments)}function o(t){return i.prototype[e].apply(this,t)}return function(){var t,e=this._super,i=this._superApply;return this._super=n,this._superApply=o,t=r.apply(this,arguments),this._super=e,this._superApply=i,t}}()):void(s[e]=r)}),o.prototype=T.widget.extend(r,{widgetEventPrefix:n&&r.widgetEventPrefix||t},s,{constructor:o,namespace:a,widgetName:t,widgetFullName:l}),n?(T.each(n._childConstructors,function(t,e){var i=e.prototype;T.widget(i.namespace+"."+i.widgetName,o,e._proto)}),delete n._childConstructors):i._childConstructors.push(o),T.widget.bridge(t,o),o},T.widget.extend=function(t){for(var e,i,n=a.call(arguments,1),o=0,r=n.length;o<r;o++)for(e in n[o])i=n[o][e],n[o].hasOwnProperty(e)&&void 0!==i&&(t[e]=T.isPlainObject(i)?T.isPlainObject(t[e])?T.widget.extend({},t[e],i):T.widget.extend({},i):i);return t},T.widget.bridge=function(r,e){var s=e.prototype.widgetFullName||r;T.fn[r]=function(i){var t="string"==typeof i,n=a.call(arguments,1),o=this;return t?this.length||"instance"!==i?this.each(function(){var t,e=T.data(this,s);return"instance"===i?(o=e,!1):e?T.isFunction(e[i])&&"_"!==i.charAt(0)?(t=e[i].apply(e,n))!==e&&void 0!==t?(o=t&&t.jquery?o.pushStack(t.get()):t,!1):void 0:T.error("no such method '"+i+"' for "+r+" widget instance"):T.error("cannot call methods on "+r+" prior to initialization; attempted to call method '"+i+"'")}):o=void 0:(n.length&&(i=T.widget.extend.apply(null,[i].concat(n))),this.each(function(){var t=T.data(this,s);t?(t.option(i||{}),t._init&&t._init()):T.data(this,s,new e(i,this))})),o}},T.Widget=function(){},T.Widget._childConstructors=[],T.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(t,e){e=T(e||this.defaultElement||this)[0],this.element=T(e),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=T(),this.hoverable=T(),this.focusable=T(),this.classesElementLookup={},e!==this&&(T.data(e,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===e&&this.destroy()}}),this.document=T(e.style?e.ownerDocument:e.document||e),this.window=T(this.document[0].defaultView||this.document[0].parentWindow)),this.options=T.widget.extend({},this.options,this._getCreateOptions(),t),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:T.noop,_create:T.noop,_init:T.noop,destroy:function(){var i=this;this._destroy(),T.each(this.classesElementLookup,function(t,e){i._removeClass(e,t)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:T.noop,widget:function(){return this.element},option:function(t,e){var i,n,o,r=t;if(0===arguments.length)return T.widget.extend({},this.options);if("string"==typeof t)if(r={},t=(i=t.split(".")).shift(),i.length){for(n=r[t]=T.widget.extend({},this.options[t]),o=0;i.length-1>o;o++)n[i[o]]=n[i[o]]||{},n=n[i[o]];if(t=i.pop(),1===arguments.length)return void 0===n[t]?null:n[t];n[t]=e}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];r[t]=e}return this._setOptions(r),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return"classes"===t&&this._setOptionClasses(e),this.options[t]=e,"disabled"===t&&this._setOptionDisabled(e),this},_setOptionClasses:function(t){var e,i,n;for(e in t)n=this.classesElementLookup[e],t[e]!==this.options.classes[e]&&n&&n.length&&(i=T(n.get()),this._removeClass(n,e),i.addClass(this._classes({element:i,keys:e,classes:t,add:!0})))},_setOptionDisabled:function(t){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!t),t&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(o){function t(t,e){var i,n;for(n=0;t.length>n;n++)i=s.classesElementLookup[t[n]]||T(),i=o.add?T(T.unique(i.get().concat(o.element.get()))):T(i.not(o.element).get()),s.classesElementLookup[t[n]]=i,r.push(t[n]),e&&o.classes[t[n]]&&r.push(o.classes[t[n]])}var r=[],s=this;return o=T.extend({element:this.element,classes:this.options.classes||{}},o),this._on(o.element,{remove:"_untrackClassesElement"}),o.keys&&t(o.keys.match(/\S+/g)||[],!0),o.extra&&t(o.extra.match(/\S+/g)||[]),r.join(" ")},_untrackClassesElement:function(i){var n=this;T.each(n.classesElementLookup,function(t,e){-1!==T.inArray(i.target,e)&&(n.classesElementLookup[t]=T(e.not(i.target).get()))})},_removeClass:function(t,e,i){return this._toggleClass(t,e,i,!1)},_addClass:function(t,e,i){return this._toggleClass(t,e,i,!0)},_toggleClass:function(t,e,i,n){n="boolean"==typeof n?n:i;var o="string"==typeof t||null===t,r={extra:o?e:i,keys:o?t:e,element:o?this.element:t,add:n};return r.element.toggleClass(this._classes(r),n),this},_on:function(s,a,t){var l,c=this;"boolean"!=typeof s&&(t=a,a=s,s=!1),t?(a=l=T(a),this.bindings=this.bindings.add(a)):(t=a,a=this.element,l=this.widget()),T.each(t,function(t,e){function i(){return s||!0!==c.options.disabled&&!T(this).hasClass("ui-state-disabled")?("string"==typeof e?c[e]:e).apply(c,arguments):void 0}"string"!=typeof e&&(i.guid=e.guid=e.guid||i.guid||T.guid++);var n=t.match(/^([\w:-]*)\s*(.*)$/),o=n[1]+c.eventNamespace,r=n[2];r?l.on(o,r,i):a.on(o,i)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.off(e).off(e),this.bindings=T(this.bindings.not(t).get()),this.focusable=T(this.focusable.not(t).get()),this.hoverable=T(this.hoverable.not(t).get())},_delay:function(t,e){var i=this;return setTimeout(function(){return("string"==typeof t?i[t]:t).apply(i,arguments)},e||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){this._addClass(T(t.currentTarget),null,"ui-state-hover")},mouseleave:function(t){this._removeClass(T(t.currentTarget),null,"ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){this._addClass(T(t.currentTarget),null,"ui-state-focus")},focusout:function(t){this._removeClass(T(t.currentTarget),null,"ui-state-focus")}})},_trigger:function(t,e,i){var n,o,r=this.options[t];if(i=i||{},(e=T.Event(e)).type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),e.target=this.element[0],o=e.originalEvent)for(n in o)n in e||(e[n]=o[n]);return this.element.trigger(e,i),!(T.isFunction(r)&&!1===r.apply(this.element[0],[e].concat(i))||e.isDefaultPrevented())}},T.each({show:"fadeIn",hide:"fadeOut"},function(r,s){T.Widget.prototype["_"+r]=function(e,t,i){"string"==typeof t&&(t={effect:t});var n,o=t?!0===t||"number"==typeof t?s:t.effect||s:r;"number"==typeof(t=t||{})&&(t={duration:t}),n=!T.isEmptyObject(t),t.complete=i,t.delay&&e.delay(t.delay),n&&T.effects&&T.effects.effect[o]?e[r](t):o!==r&&e[o]?e[o](t.duration,t.easing,i):e.queue(function(t){T(this)[r](),i&&i.call(e[0]),t()})}}),T.widget,function(){function k(t,e,i){return[parseFloat(t[0])*(l.test(t[0])?e/100:1),parseFloat(t[1])*(l.test(t[1])?i/100:1)]}function x(t,e){return parseInt(T.css(t,e),10)||0}var o,C=Math.max,D=Math.abs,n=/left|center|right/,r=/top|center|bottom/,s=/[\+\-]\d+(\.[\d]+)?%?/,a=/^\w+/,l=/%$/,c=T.fn.position;T.position={scrollbarWidth:function(){if(void 0!==o)return o;var t,e,i=T("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),n=i.children()[0];return T("body").append(i),t=n.offsetWidth,i.css("overflow","scroll"),t===(e=n.offsetWidth)&&(e=i[0].clientWidth),i.remove(),o=t-e},getScrollInfo:function(t){var e=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),i=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),n="scroll"===e||"auto"===e&&t.width<t.element[0].scrollWidth;return{width:"scroll"===i||"auto"===i&&t.height<t.element[0].scrollHeight?T.position.scrollbarWidth():0,height:n?T.position.scrollbarWidth():0}},getWithinInfo:function(t){var e=T(t||window),i=T.isWindow(e[0]),n=!!e[0]&&9===e[0].nodeType;return{element:e,isWindow:i,isDocument:n,offset:!i&&!n?T(t).offset():{left:0,top:0},scrollLeft:e.scrollLeft(),scrollTop:e.scrollTop(),width:e.outerWidth(),height:e.outerHeight()}}},T.fn.position=function(h){if(!h||!h.of)return c.apply(this,arguments);h=T.extend({},h);var d,f,p,m,g,t,e,i,v=T(h.of),y=T.position.getWithinInfo(h.within),b=T.position.getScrollInfo(y),_=(h.collision||"flip").split(" "),w={};return t=9===(i=(e=v)[0]).nodeType?{width:e.width(),height:e.height(),offset:{top:0,left:0}}:T.isWindow(i)?{width:e.width(),height:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()},v[0].preventDefault&&(h.at="left top"),f=t.width,p=t.height,m=t.offset,g=T.extend({},m),T.each(["my","at"],function(){var t,e,i=(h[this]||"").split(" ");1===i.length&&(i=n.test(i[0])?i.concat(["center"]):r.test(i[0])?["center"].concat(i):["center","center"]),i[0]=n.test(i[0])?i[0]:"center",i[1]=r.test(i[1])?i[1]:"center",t=s.exec(i[0]),e=s.exec(i[1]),w[this]=[t?t[0]:0,e?e[0]:0],h[this]=[a.exec(i[0])[0],a.exec(i[1])[0]]}),1===_.length&&(_[1]=_[0]),"right"===h.at[0]?g.left+=f:"center"===h.at[0]&&(g.left+=f/2),"bottom"===h.at[1]?g.top+=p:"center"===h.at[1]&&(g.top+=p/2),d=k(w.at,f,p),g.left+=d[0],g.top+=d[1],this.each(function(){var i,t,s=T(this),a=s.outerWidth(),l=s.outerHeight(),e=x(this,"marginLeft"),n=x(this,"marginTop"),o=a+e+x(this,"marginRight")+b.width,r=l+n+x(this,"marginBottom")+b.height,c=T.extend({},g),u=k(w.my,s.outerWidth(),s.outerHeight());"right"===h.my[0]?c.left-=a:"center"===h.my[0]&&(c.left-=a/2),"bottom"===h.my[1]?c.top-=l:"center"===h.my[1]&&(c.top-=l/2),c.left+=u[0],c.top+=u[1],i={marginLeft:e,marginTop:n},T.each(["left","top"],function(t,e){T.ui.position[_[t]]&&T.ui.position[_[t]][e](c,{targetWidth:f,targetHeight:p,elemWidth:a,elemHeight:l,collisionPosition:i,collisionWidth:o,collisionHeight:r,offset:[d[0]+u[0],d[1]+u[1]],my:h.my,at:h.at,within:y,elem:s})}),h.using&&(t=function(t){var e=m.left-c.left,i=e+f-a,n=m.top-c.top,o=n+p-l,r={target:{element:v,left:m.left,top:m.top,width:f,height:p},element:{element:s,left:c.left,top:c.top,width:a,height:l},horizontal:i<0?"left":0<e?"right":"center",vertical:o<0?"top":0<n?"bottom":"middle"};f<a&&f>D(e+i)&&(r.horizontal="center"),p<l&&p>D(n+o)&&(r.vertical="middle"),r.important=C(D(e),D(i))>C(D(n),D(o))?"horizontal":"vertical",h.using.call(this,t,r)}),s.offset(T.extend(c,{using:t}))})},T.ui.position={fit:{left:function(t,e){var i,n=e.within,o=n.isWindow?n.scrollLeft:n.offset.left,r=n.width,s=t.left-e.collisionPosition.marginLeft,a=o-s,l=s+e.collisionWidth-r-o;e.collisionWidth>r?0<a&&l<=0?(i=t.left+a+e.collisionWidth-r-o,t.left+=a-i):t.left=0<l&&a<=0?o:l<a?o+r-e.collisionWidth:o:0<a?t.left+=a:0<l?t.left-=l:t.left=C(t.left-s,t.left)},top:function(t,e){var i,n=e.within,o=n.isWindow?n.scrollTop:n.offset.top,r=e.within.height,s=t.top-e.collisionPosition.marginTop,a=o-s,l=s+e.collisionHeight-r-o;e.collisionHeight>r?0<a&&l<=0?(i=t.top+a+e.collisionHeight-r-o,t.top+=a-i):t.top=0<l&&a<=0?o:l<a?o+r-e.collisionHeight:o:0<a?t.top+=a:0<l?t.top-=l:t.top=C(t.top-s,t.top)}},flip:{left:function(t,e){var i,n,o=e.within,r=o.offset.left+o.scrollLeft,s=o.width,a=o.isWindow?o.scrollLeft:o.offset.left,l=t.left-e.collisionPosition.marginLeft,c=l-a,u=l+e.collisionWidth-s-a,h="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,d="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,f=-2*e.offset[0];c<0?((i=t.left+h+d+f+e.collisionWidth-s-r)<0||D(c)>i)&&(t.left+=h+d+f):0<u&&((0<(n=t.left-e.collisionPosition.marginLeft+h+d+f-a)||u>D(n))&&(t.left+=h+d+f))},top:function(t,e){var i,n,o=e.within,r=o.offset.top+o.scrollTop,s=o.height,a=o.isWindow?o.scrollTop:o.offset.top,l=t.top-e.collisionPosition.marginTop,c=l-a,u=l+e.collisionHeight-s-a,h="top"===e.my[1]?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,d="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,f=-2*e.offset[1];c<0?((n=t.top+h+d+f+e.collisionHeight-s-r)<0||D(c)>n)&&(t.top+=h+d+f):0<u&&((0<(i=t.top-e.collisionPosition.marginTop+h+d+f-a)||u>D(i))&&(t.top+=h+d+f))}},flipfit:{left:function(){T.ui.position.flip.left.apply(this,arguments),T.ui.position.fit.left.apply(this,arguments)},top:function(){T.ui.position.flip.top.apply(this,arguments),T.ui.position.fit.top.apply(this,arguments)}}}}(),T.ui.position,T.extend(T.expr[":"],{data:T.expr.createPseudo?T.expr.createPseudo(function(e){return function(t){return!!T.data(t,e)}}):function(t,e,i){return!!T.data(t,i[3])}}),T.fn.extend({disableSelection:(i="onselectstart"in document.createElement("div")?"selectstart":"mousedown",function(){return this.on(i+".ui-disableSelection",function(t){t.preventDefault()})}),enableSelection:function(){return this.off(".ui-disableSelection")}}),T.ui.focusable=function(t,e){var i,n,o,r,s,a=t.nodeName.toLowerCase();return"area"===a?(n=(i=t.parentNode).name,!(!t.href||!n||"map"!==i.nodeName.toLowerCase())&&(0<(o=T("img[usemap='#"+n+"']")).length&&o.is(":visible"))):(/^(input|select|textarea|button|object)$/.test(a)?(r=!t.disabled)&&((s=T(t).closest("fieldset")[0])&&(r=!s.disabled)):r="a"===a&&t.href||e,r&&T(t).is(":visible")&&function(t){for(var e=t.css("visibility");"inherit"===e;)e=(t=t.parent()).css("visibility");return"hidden"!==e}(T(t)))},T.extend(T.expr[":"],{focusable:function(t){return T.ui.focusable(t,null!=T.attr(t,"tabindex"))}}),T.ui.focusable,T.fn.form=function(){return"string"==typeof this[0].form?this.closest("form"):T(this[0].form)},T.ui.formResetMixin={_formResetHandler:function(){var e=T(this);setTimeout(function(){var t=e.data("ui-form-reset-instances");T.each(t,function(){this.refresh()})})},_bindFormResetHandler:function(){if(this.form=this.element.form(),this.form.length){var t=this.form.data("ui-form-reset-instances")||[];t.length||this.form.on("reset.ui-form-reset",this._formResetHandler),t.push(this),this.form.data("ui-form-reset-instances",t)}},_unbindFormResetHandler:function(){if(this.form.length){var t=this.form.data("ui-form-reset-instances");t.splice(T.inArray(this,t),1),t.length?this.form.data("ui-form-reset-instances",t):this.form.removeData("ui-form-reset-instances").off("reset.ui-form-reset")}}},"1.7"===T.fn.jquery.substring(0,3)&&(T.each(["Width","Height"],function(t,i){function n(t,e,i,n){return T.each(o,function(){e-=parseFloat(T.css(t,"padding"+this))||0,i&&(e-=parseFloat(T.css(t,"border"+this+"Width"))||0),n&&(e-=parseFloat(T.css(t,"margin"+this))||0)}),e}var o="Width"===i?["Left","Right"]:["Top","Bottom"],r=i.toLowerCase(),s={innerWidth:T.fn.innerWidth,innerHeight:T.fn.innerHeight,outerWidth:T.fn.outerWidth,outerHeight:T.fn.outerHeight};T.fn["inner"+i]=function(t){return void 0===t?s["inner"+i].call(this):this.each(function(){T(this).css(r,n(this,t)+"px")})},T.fn["outer"+i]=function(t,e){return"number"!=typeof t?s["outer"+i].call(this,t):this.each(function(){T(this).css(r,n(this,t,!0,e)+"px")})}}),T.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),T.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38},T.ui.escapeSelector=(e=/([!"#$%&'()*+,./:;<=>?@[\]^`{|}~])/g,function(t){return t.replace(e,"\\$1")}),T.fn.labels=function(){var t,e,i,n,o;return this[0].labels&&this[0].labels.length?this.pushStack(this[0].labels):(n=this.eq(0).parents("label"),(i=this.attr("id"))&&(o=(t=this.eq(0).parents().last()).add(t.length?t.siblings():this.siblings()),e="label[for='"+T.ui.escapeSelector(i)+"']",n=n.add(o.find(e).addBack(e))),this.pushStack(n))},T.fn.scrollParent=function(t){var e=this.css("position"),i="absolute"===e,n=t?/(auto|scroll|hidden)/:/(auto|scroll)/,o=this.parents().filter(function(){var t=T(this);return(!i||"static"!==t.css("position"))&&n.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==e&&o.length?o:T(this[0].ownerDocument||document)},T.extend(T.expr[":"],{tabbable:function(t){var e=T.attr(t,"tabindex"),i=null!=e;return(!i||0<=e)&&T.ui.focusable(t,i)}}),T.fn.extend({uniqueId:(t=0,function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++t)})}),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&T(this).removeAttr("id")})}}),T.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());var r=!1;T(document).on("mouseup",function(){r=!1}),T.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.on("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).on("click."+this.widgetName,function(t){return!0===T.data(t.target,e.widgetName+".preventClickEvent")?(T.removeData(t.target,e.widgetName+".preventClickEvent"),t.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!r){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var e=this,i=1===t.which,n=!("string"!=typeof this.options.cancel||!t.target.nodeName)&&T(t.target).closest(this.options.cancel).length;return i&&!n&&this._mouseCapture(t)&&(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){e.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(t),!this._mouseStarted)?t.preventDefault():(!0===T.data(t.target,this.widgetName+".preventClickEvent")&&T.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return e._mouseMove(t)},this._mouseUpDelegate=function(t){return e._mouseUp(t)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),r=!0)),!0}},_mouseMove:function(t){if(this._mouseMoved){if(T.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button)return this._mouseUp(t);if(!t.which)if(t.originalEvent.altKey||t.originalEvent.ctrlKey||t.originalEvent.metaKey||t.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(t)}return(t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,t),this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&T.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,r=!1,t.preventDefault()},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),T.ui.plugin={add:function(t,e,i){var n,o=T.ui[t].prototype;for(n in i)o.plugins[n]=o.plugins[n]||[],o.plugins[n].push([e,i[n]])},call:function(t,e,i,n){var o,r=t.plugins[e];if(r&&(n||t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType))for(o=0;r.length>o;o++)t.options[r[o][0]]&&r[o][1].apply(t.element,i)}},T.ui.safeActiveElement=function(e){var i;try{i=e.activeElement}catch(t){i=e.body}return i||(i=e.body),i.nodeName||(i=e.body),i},T.ui.safeBlur=function(t){t&&"body"!==t.nodeName.toLowerCase()&&T(t).trigger("blur")},T.widget("ui.draggable",T.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(t,e){this._super(t,e),"handle"===t&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?void(this.destroyOnClear=!0):(this._removeHandleClassName(),void this._mouseDestroy())},_mouseCapture:function(t){var e=this.options;return!(this.helper||e.disabled||0<T(t.target).closest(".ui-resizable-handle").length)&&(this.handle=this._getHandle(t),!!this.handle&&(this._blurActiveElement(t),this._blockFrames(!0===e.iframeFix?"iframe":e.iframeFix),!0))},_blockFrames:function(t){this.iframeBlocks=this.document.find(t).map(function(){var t=T(this);return T("<div>").css("position","absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(t){var e=T.ui.safeActiveElement(this.document[0]);T(t.target).closest(e).length||T.ui.safeBlur(e)},_mouseStart:function(t){var e=this.options;return this.helper=this._createHelper(t),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),T.ui.ddmanager&&(T.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=0<this.helper.parents().filter(function(){return"fixed"===T(this).css("position")}).length,this.positionAbs=this.element.offset(),this._refreshOffsets(t),this.originalPosition=this.position=this._generatePosition(t,!1),this.originalPageX=t.pageX,this.originalPageY=t.pageY,e.cursorAt&&this._adjustOffsetFromHelper(e.cursorAt),this._setContainment(),!1===this._trigger("start",t)?(this._clear(),!1):(this._cacheHelperProportions(),T.ui.ddmanager&&!e.dropBehaviour&&T.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),T.ui.ddmanager&&T.ui.ddmanager.dragStart(this,t),!0)},_refreshOffsets:function(t){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:t.pageX-this.offset.left,top:t.pageY-this.offset.top}},_mouseDrag:function(t,e){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t,!0),this.positionAbs=this._convertPositionTo("absolute"),!e){var i=this._uiHash();if(!1===this._trigger("drag",t,i))return this._mouseUp(new T.Event("mouseup",t)),!1;this.position=i.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",T.ui.ddmanager&&T.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var e=this,i=!1;return T.ui.ddmanager&&!this.options.dropBehaviour&&(i=T.ui.ddmanager.drop(this,t)),this.dropped&&(i=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!i||"valid"===this.options.revert&&i||!0===this.options.revert||T.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)?T(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==e._trigger("stop",t)&&e._clear()}):!1!==this._trigger("stop",t)&&this._clear(),!1},_mouseUp:function(t){return this._unblockFrames(),T.ui.ddmanager&&T.ui.ddmanager.dragStop(this,t),this.handleElement.is(t.target)&&this.element.trigger("focus"),T.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new T.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(t){return!this.options.handle||!!T(t.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(t){var e=this.options,i=T.isFunction(e.helper),n=i?T(e.helper.apply(this.element[0],[t])):"clone"===e.helper?this.element.clone().removeAttr("id"):this.element;return n.parents("body").length||n.appendTo("parent"===e.appendTo?this.element[0].parentNode:e.appendTo),i&&n[0]===this.element[0]&&this._setPositionRelative(),n[0]===this.element[0]||/(fixed|absolute)/.test(n.css("position"))||n.css("position","absolute"),n},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),T.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_isRootNode:function(t){return/(html|body)/i.test(t.tagName)||t===this.document[0]},_getParentOffset:function(){var t=this.offsetParent.offset(),e=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==e&&T.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var t=this.element.position(),e=this._isRootNode(this.scrollParent[0]);return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+(e?0:this.scrollParent.scrollTop()),left:t.left-(parseInt(this.helper.css("left"),10)||0)+(e?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,e,i,n=this.options,o=this.document[0];return this.relativeContainer=null,n.containment?"window"===n.containment?void(this.containment=[T(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,T(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,T(window).scrollLeft()+T(window).width()-this.helperProportions.width-this.margins.left,T(window).scrollTop()+(T(window).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===n.containment?void(this.containment=[0,0,T(o).width()-this.helperProportions.width-this.margins.left,(T(o).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):n.containment.constructor===Array?void(this.containment=n.containment):("parent"===n.containment&&(n.containment=this.helper[0].parentNode),void((i=(e=T(n.containment))[0])&&(t=/(scroll|auto)/.test(e.css("overflow")),this.containment=[(parseInt(e.css("borderLeftWidth"),10)||0)+(parseInt(e.css("paddingLeft"),10)||0),(parseInt(e.css("borderTopWidth"),10)||0)+(parseInt(e.css("paddingTop"),10)||0),(t?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(e.css("borderRightWidth"),10)||0)-(parseInt(e.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(e.css("borderBottomWidth"),10)||0)-(parseInt(e.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=e))):void(this.containment=null)},_convertPositionTo:function(t,e){e||(e=this.position);var i="absolute"===t?1:-1,n=this._isRootNode(this.scrollParent[0]);return{top:e.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.offset.scroll.top:n?0:this.offset.scroll.top)*i,left:e.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.offset.scroll.left:n?0:this.offset.scroll.left)*i}},_generatePosition:function(t,e){var i,n,o,r,s=this.options,a=this._isRootNode(this.scrollParent[0]),l=t.pageX,c=t.pageY;return a&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),e&&(this.containment&&(i=this.relativeContainer?(n=this.relativeContainer.offset(),[this.containment[0]+n.left,this.containment[1]+n.top,this.containment[2]+n.left,this.containment[3]+n.top]):this.containment,t.pageX-this.offset.click.left<i[0]&&(l=i[0]+this.offset.click.left),t.pageY-this.offset.click.top<i[1]&&(c=i[1]+this.offset.click.top),t.pageX-this.offset.click.left>i[2]&&(l=i[2]+this.offset.click.left),t.pageY-this.offset.click.top>i[3]&&(c=i[3]+this.offset.click.top)),s.grid&&(o=s.grid[1]?this.originalPageY+Math.round((c-this.originalPageY)/s.grid[1])*s.grid[1]:this.originalPageY,c=i?o-this.offset.click.top>=i[1]||o-this.offset.click.top>i[3]?o:o-this.offset.click.top>=i[1]?o-s.grid[1]:o+s.grid[1]:o,r=s.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/s.grid[0])*s.grid[0]:this.originalPageX,l=i?r-this.offset.click.left>=i[0]||r-this.offset.click.left>i[2]?r:r-this.offset.click.left>=i[0]?r-s.grid[0]:r+s.grid[0]:r),"y"===s.axis&&(l=this.originalPageX),"x"===s.axis&&(c=this.originalPageY)),{top:c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:a?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:a?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(t,e,i){return i=i||this._uiHash(),T.ui.plugin.call(this,t,[e,i,this],!0),/^(drag|start|stop)/.test(t)&&(this.positionAbs=this._convertPositionTo("absolute"),i.offset=this.positionAbs),T.Widget.prototype._trigger.call(this,t,e,i)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),T.ui.plugin.add("draggable","connectToSortable",{start:function(e,t,i){var n=T.extend({},t,{item:i.element});i.sortables=[],T(i.options.connectToSortable).each(function(){var t=T(this).sortable("instance");t&&!t.options.disabled&&(i.sortables.push(t),t.refreshPositions(),t._trigger("activate",e,n))})},stop:function(e,t,i){var n=T.extend({},t,{item:i.element});i.cancelHelperRemoval=!1,T.each(i.sortables,function(){var t=this;t.isOver?(t.isOver=0,i.cancelHelperRemoval=!0,t.cancelHelperRemoval=!1,t._storedCSS={position:t.placeholder.css("position"),top:t.placeholder.css("top"),left:t.placeholder.css("left")},t._mouseStop(e),t.options.helper=t.options._helper):(t.cancelHelperRemoval=!0,t._trigger("deactivate",e,n))})},drag:function(i,n,o){T.each(o.sortables,function(){var t=!1,e=this;e.positionAbs=o.positionAbs,e.helperProportions=o.helperProportions,e.offset.click=o.offset.click,e._intersectsWith(e.containerCache)&&(t=!0,T.each(o.sortables,function(){return this.positionAbs=o.positionAbs,this.helperProportions=o.helperProportions,this.offset.click=o.offset.click,this!==e&&this._intersectsWith(this.containerCache)&&T.contains(e.element[0],this.element[0])&&(t=!1),t})),t?(e.isOver||(e.isOver=1,o._parent=n.helper.parent(),e.currentItem=n.helper.appendTo(e.element).data("ui-sortable-item",!0),e.options._helper=e.options.helper,e.options.helper=function(){return n.helper[0]},i.target=e.currentItem[0],e._mouseCapture(i,!0),e._mouseStart(i,!0,!0),e.offset.click.top=o.offset.click.top,e.offset.click.left=o.offset.click.left,e.offset.parent.left-=o.offset.parent.left-e.offset.parent.left,e.offset.parent.top-=o.offset.parent.top-e.offset.parent.top,o._trigger("toSortable",i),o.dropped=e.element,T.each(o.sortables,function(){this.refreshPositions()}),o.currentItem=o.element,e.fromOutside=o),e.currentItem&&(e._mouseDrag(i),n.position=e.position)):e.isOver&&(e.isOver=0,e.cancelHelperRemoval=!0,e.options._revert=e.options.revert,e.options.revert=!1,e._trigger("out",i,e._uiHash(e)),e._mouseStop(i,!0),e.options.revert=e.options._revert,e.options.helper=e.options._helper,e.placeholder&&e.placeholder.remove(),n.helper.appendTo(o._parent),o._refreshOffsets(i),n.position=o._generatePosition(i,!0),o._trigger("fromSortable",i),o.dropped=!1,T.each(o.sortables,function(){this.refreshPositions()}))})}}),T.ui.plugin.add("draggable","cursor",{start:function(t,e,i){var n=T("body"),o=i.options;n.css("cursor")&&(o._cursor=n.css("cursor")),n.css("cursor",o.cursor)},stop:function(t,e,i){var n=i.options;n._cursor&&T("body").css("cursor",n._cursor)}}),T.ui.plugin.add("draggable","opacity",{start:function(t,e,i){var n=T(e.helper),o=i.options;n.css("opacity")&&(o._opacity=n.css("opacity")),n.css("opacity",o.opacity)},stop:function(t,e,i){var n=i.options;n._opacity&&T(e.helper).css("opacity",n._opacity)}}),T.ui.plugin.add("draggable","scroll",{start:function(t,e,i){i.scrollParentNotHidden||(i.scrollParentNotHidden=i.helper.scrollParent(!1)),i.scrollParentNotHidden[0]!==i.document[0]&&"HTML"!==i.scrollParentNotHidden[0].tagName&&(i.overflowOffset=i.scrollParentNotHidden.offset())},drag:function(t,e,i){var n=i.options,o=!1,r=i.scrollParentNotHidden[0],s=i.document[0];r!==s&&"HTML"!==r.tagName?(n.axis&&"x"===n.axis||(i.overflowOffset.top+r.offsetHeight-t.pageY<n.scrollSensitivity?r.scrollTop=o=r.scrollTop+n.scrollSpeed:t.pageY-i.overflowOffset.top<n.scrollSensitivity&&(r.scrollTop=o=r.scrollTop-n.scrollSpeed)),n.axis&&"y"===n.axis||(i.overflowOffset.left+r.offsetWidth-t.pageX<n.scrollSensitivity?r.scrollLeft=o=r.scrollLeft+n.scrollSpeed:t.pageX-i.overflowOffset.left<n.scrollSensitivity&&(r.scrollLeft=o=r.scrollLeft-n.scrollSpeed))):(n.axis&&"x"===n.axis||(t.pageY-T(s).scrollTop()<n.scrollSensitivity?o=T(s).scrollTop(T(s).scrollTop()-n.scrollSpeed):T(window).height()-(t.pageY-T(s).scrollTop())<n.scrollSensitivity&&(o=T(s).scrollTop(T(s).scrollTop()+n.scrollSpeed))),n.axis&&"y"===n.axis||(t.pageX-T(s).scrollLeft()<n.scrollSensitivity?o=T(s).scrollLeft(T(s).scrollLeft()-n.scrollSpeed):T(window).width()-(t.pageX-T(s).scrollLeft())<n.scrollSensitivity&&(o=T(s).scrollLeft(T(s).scrollLeft()+n.scrollSpeed)))),!1!==o&&T.ui.ddmanager&&!n.dropBehaviour&&T.ui.ddmanager.prepareOffsets(i,t)}}),T.ui.plugin.add("draggable","snap",{start:function(t,e,i){var n=i.options;i.snapElements=[],T(n.snap.constructor!==String?n.snap.items||":data(ui-draggable)":n.snap).each(function(){var t=T(this),e=t.offset();this!==i.element[0]&&i.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:e.top,left:e.left})})},drag:function(t,e,i){var n,o,r,s,a,l,c,u,h,d,f=i.options,p=f.snapTolerance,m=e.offset.left,g=m+i.helperProportions.width,v=e.offset.top,y=v+i.helperProportions.height;for(h=i.snapElements.length-1;0<=h;h--)l=(a=i.snapElements[h].left-i.margins.left)+i.snapElements[h].width,u=(c=i.snapElements[h].top-i.margins.top)+i.snapElements[h].height,g<a-p||l+p<m||y<c-p||u+p<v||!T.contains(i.snapElements[h].item.ownerDocument,i.snapElements[h].item)?(i.snapElements[h].snapping&&i.options.snap.release&&i.options.snap.release.call(i.element,t,T.extend(i._uiHash(),{snapItem:i.snapElements[h].item})),i.snapElements[h].snapping=!1):("inner"!==f.snapMode&&(n=p>=Math.abs(c-y),o=p>=Math.abs(u-v),r=p>=Math.abs(a-g),s=p>=Math.abs(l-m),n&&(e.position.top=i._convertPositionTo("relative",{top:c-i.helperProportions.height,left:0}).top),o&&(e.position.top=i._convertPositionTo("relative",{top:u,left:0}).top),r&&(e.position.left=i._convertPositionTo("relative",{top:0,left:a-i.helperProportions.width}).left),s&&(e.position.left=i._convertPositionTo("relative",{top:0,left:l}).left)),d=n||o||r||s,"outer"!==f.snapMode&&(n=p>=Math.abs(c-v),o=p>=Math.abs(u-y),r=p>=Math.abs(a-m),s=p>=Math.abs(l-g),n&&(e.position.top=i._convertPositionTo("relative",{top:c,left:0}).top),o&&(e.position.top=i._convertPositionTo("relative",{top:u-i.helperProportions.height,left:0}).top),r&&(e.position.left=i._convertPositionTo("relative",{top:0,left:a}).left),s&&(e.position.left=i._convertPositionTo("relative",{top:0,left:l-i.helperProportions.width}).left)),!i.snapElements[h].snapping&&(n||o||r||s||d)&&i.options.snap.snap&&i.options.snap.snap.call(i.element,t,T.extend(i._uiHash(),{snapItem:i.snapElements[h].item})),i.snapElements[h].snapping=n||o||r||s||d)}}),T.ui.plugin.add("draggable","stack",{start:function(t,e,i){var n,o=i.options,r=T.makeArray(T(o.stack)).sort(function(t,e){return(parseInt(T(t).css("zIndex"),10)||0)-(parseInt(T(e).css("zIndex"),10)||0)});r.length&&(n=parseInt(T(r[0]).css("zIndex"),10)||0,T(r).each(function(t){T(this).css("zIndex",n+t)}),this.css("zIndex",n+r.length))}}),T.ui.plugin.add("draggable","zIndex",{start:function(t,e,i){var n=T(e.helper),o=i.options;n.css("zIndex")&&(o._zIndex=n.css("zIndex")),n.css("zIndex",o.zIndex)},stop:function(t,e,i){var n=i.options;n._zIndex&&T(e.helper).css("zIndex",n._zIndex)}}),T.ui.draggable,T.widget("ui.droppable",{version:"1.12.1",widgetEventPrefix:"drop",options:{accept:"*",addClasses:!0,greedy:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t,e=this.options,i=e.accept;this.isover=!1,this.isout=!0,this.accept=T.isFunction(i)?i:function(t){return t.is(i)},this.proportions=function(){return arguments.length?void(t=arguments[0]):t||(t={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight})},this._addToManager(e.scope),e.addClasses&&this._addClass("ui-droppable")},_addToManager:function(t){T.ui.ddmanager.droppables[t]=T.ui.ddmanager.droppables[t]||[],T.ui.ddmanager.droppables[t].push(this)},_splice:function(t){for(var e=0;t.length>e;e++)t[e]===this&&t.splice(e,1)},_destroy:function(){var t=T.ui.ddmanager.droppables[this.options.scope];this._splice(t)},_setOption:function(t,e){if("accept"===t)this.accept=T.isFunction(e)?e:function(t){return t.is(e)};else if("scope"===t){var i=T.ui.ddmanager.droppables[this.options.scope];this._splice(i),this._addToManager(e)}this._super(t,e)},_activate:function(t){var e=T.ui.ddmanager.current;this._addActiveClass(),e&&this._trigger("activate",t,this.ui(e))},_deactivate:function(t){var e=T.ui.ddmanager.current;this._removeActiveClass(),e&&this._trigger("deactivate",t,this.ui(e))},_over:function(t){var e=T.ui.ddmanager.current;e&&(e.currentItem||e.element)[0]!==this.element[0]&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this._addHoverClass(),this._trigger("over",t,this.ui(e)))},_out:function(t){var e=T.ui.ddmanager.current;e&&(e.currentItem||e.element)[0]!==this.element[0]&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this._removeHoverClass(),this._trigger("out",t,this.ui(e)))},_drop:function(e,t){var i=t||T.ui.ddmanager.current,n=!1;return!(!i||(i.currentItem||i.element)[0]===this.element[0])&&(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var t=T(this).droppable("instance");return t.options.greedy&&!t.options.disabled&&t.options.scope===i.options.scope&&t.accept.call(t.element[0],i.currentItem||i.element)&&l(i,T.extend(t,{offset:t.element.offset()}),t.options.tolerance,e)?!(n=!0):void 0}),!n&&(!!this.accept.call(this.element[0],i.currentItem||i.element)&&(this._removeActiveClass(),this._removeHoverClass(),this._trigger("drop",e,this.ui(i)),this.element)))},ui:function(t){return{draggable:t.currentItem||t.element,helper:t.helper,position:t.position,offset:t.positionAbs}},_addHoverClass:function(){this._addClass("ui-droppable-hover")},_removeHoverClass:function(){this._removeClass("ui-droppable-hover")},_addActiveClass:function(){this._addClass("ui-droppable-active")},_removeActiveClass:function(){this._removeClass("ui-droppable-active")}});var l=T.ui.intersect=function(){function d(t,e,i){return e<=t&&t<e+i}return function(t,e,i,n){if(!e.offset)return!1;var o=(t.positionAbs||t.position.absolute).left+t.margins.left,r=(t.positionAbs||t.position.absolute).top+t.margins.top,s=o+t.helperProportions.width,a=r+t.helperProportions.height,l=e.offset.left,c=e.offset.top,u=l+e.proportions().width,h=c+e.proportions().height;switch(i){case"fit":return l<=o&&s<=u&&c<=r&&a<=h;case"intersect":return o+t.helperProportions.width/2>l&&u>s-t.helperProportions.width/2&&r+t.helperProportions.height/2>c&&h>a-t.helperProportions.height/2;case"pointer":return d(n.pageY,c,e.proportions().height)&&d(n.pageX,l,e.proportions().width);case"touch":return(c<=r&&r<=h||c<=a&&a<=h||r<c&&h<a)&&(l<=o&&o<=u||l<=s&&s<=u||o<l&&u<s);default:return!1}}}();!(T.ui.ddmanager={current:null,droppables:{default:[]},prepareOffsets:function(t,e){var i,n,o=T.ui.ddmanager.droppables[t.options.scope]||[],r=e?e.type:null,s=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();t:for(i=0;o.length>i;i++)if(!(o[i].options.disabled||t&&!o[i].accept.call(o[i].element[0],t.currentItem||t.element))){for(n=0;s.length>n;n++)if(s[n]===o[i].element[0]){o[i].proportions().height=0;continue t}o[i].visible="none"!==o[i].element.css("display"),o[i].visible&&("mousedown"===r&&o[i]._activate.call(o[i],e),o[i].offset=o[i].element.offset(),o[i].proportions({width:o[i].element[0].offsetWidth,height:o[i].element[0].offsetHeight}))}},drop:function(t,e){var i=!1;return T.each((T.ui.ddmanager.droppables[t.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&l(t,this,this.options.tolerance,e)&&(i=this._drop.call(this,e)||i),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,e)))}),i},dragStart:function(t,e){t.element.parentsUntil("body").on("scroll.droppable",function(){t.options.refreshPositions||T.ui.ddmanager.prepareOffsets(t,e)})},drag:function(r,s){r.options.refreshPositions&&T.ui.ddmanager.prepareOffsets(r,s),T.each(T.ui.ddmanager.droppables[r.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var t,e,i,n=l(r,this,this.options.tolerance,s),o=!n&&this.isover?"isout":n&&!this.isover?"isover":null;o&&(this.options.greedy&&(e=this.options.scope,(i=this.element.parents(":data(ui-droppable)").filter(function(){return T(this).droppable("instance").options.scope===e})).length&&((t=T(i[0]).droppable("instance")).greedyChild="isover"===o)),t&&"isover"===o&&(t.isover=!1,t.isout=!0,t._out.call(t,s)),this[o]=!0,this["isout"===o?"isover":"isout"]=!1,this["isover"===o?"_over":"_out"].call(this,s),t&&"isout"===o&&(t.isout=!1,t.isover=!0,t._over.call(t,s)))}})},dragStop:function(t,e){t.element.parentsUntil("body").off("scroll.droppable"),t.options.refreshPositions||T.ui.ddmanager.prepareOffsets(t,e)}})!==T.uiBackCompat&&T.widget("ui.droppable",T.ui.droppable,{options:{hoverClass:!1,activeClass:!1},_addActiveClass:function(){this._super(),this.options.activeClass&&this.element.addClass(this.options.activeClass)},_removeActiveClass:function(){this._super(),this.options.activeClass&&this.element.removeClass(this.options.activeClass)},_addHoverClass:function(){this._super(),this.options.hoverClass&&this.element.addClass(this.options.hoverClass)},_removeHoverClass:function(){this._super(),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass)}}),T.ui.droppable,T.widget("ui.resizable",T.ui.mouse,{version:"1.12.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(t){return parseFloat(t)||0},_isNumber:function(t){return!isNaN(parseFloat(t))},_hasScroll:function(t,e){if("hidden"===T(t).css("overflow"))return!1;var i=e&&"left"===e?"scrollLeft":"scrollTop",n=!1;return 0<t[i]||(t[i]=1,n=0<t[i],t[i]=0,n)},_create:function(){var t,e=this.options,i=this;this._addClass("ui-resizable"),T.extend(this,{_aspectRatio:!!e.aspectRatio,aspectRatio:e.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:e.helper||e.ghost||e.animate?e.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(T("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,t={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")},this.element.css(t),this.originalElement.css("margin",0),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css(t),this._proportionallyResize()),this._setupHandles(),e.autoHide&&T(this.element).on("mouseenter",function(){e.disabled||(i._removeClass("ui-resizable-autohide"),i._handles.show())}).on("mouseleave",function(){e.disabled||i.resizing||(i._addClass("ui-resizable-autohide"),i._handles.hide())}),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,e=function(t){T(t).removeData("resizable").removeData("ui-resizable").off(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(e(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),e(this.originalElement),this},_setOption:function(t,e){switch(this._super(t,e),t){case"handles":this._removeHandles(),this._setupHandles()}},_setupHandles:function(){var t,e,i,n,o,r=this.options,s=this;if(this.handles=r.handles||(T(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=T(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),i=this.handles.split(","),this.handles={},e=0;i.length>e;e++)n="ui-resizable-"+(t=T.trim(i[e])),o=T("<div>"),this._addClass(o,"ui-resizable-handle "+n),o.css({zIndex:r.zIndex}),this.handles[t]=".ui-resizable-"+t,this.element.append(o);this._renderAxis=function(t){var e,i,n,o;for(e in t=t||this.element,this.handles)this.handles[e].constructor===String?this.handles[e]=this.element.children(this.handles[e]).first().show():(this.handles[e].jquery||this.handles[e].nodeType)&&(this.handles[e]=T(this.handles[e]),this._on(this.handles[e],{mousedown:s._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(i=T(this.handles[e],this.element),o=/sw|ne|nw|se|n|s/.test(e)?i.outerHeight():i.outerWidth(),n=["padding",/ne|nw|n/.test(e)?"Top":/se|sw|s/.test(e)?"Bottom":/^e$/.test(e)?"Right":"Left"].join(""),t.css(n,o),this._proportionallyResize()),this._handles=this._handles.add(this.handles[e])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.on("mouseover",function(){s.resizing||(this.className&&(o=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),s.axis=o&&o[1]?o[1]:"se")}),r.autoHide&&(this._handles.hide(),this._addClass("ui-resizable-autohide"))},_removeHandles:function(){this._handles.remove()},_mouseCapture:function(t){var e,i,n=!1;for(e in this.handles)((i=T(this.handles[e])[0])===t.target||T.contains(i,t.target))&&(n=!0);return!this.options.disabled&&n},_mouseStart:function(t){var e,i,n,o=this.options,r=this.element;return this.resizing=!0,this._renderProxy(),e=this._num(this.helper.css("left")),i=this._num(this.helper.css("top")),o.containment&&(e+=T(o.containment).scrollLeft()||0,i+=T(o.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:e,top:i},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:r.width(),height:r.height()},this.originalSize=this._helper?{width:r.outerWidth(),height:r.outerHeight()}:{width:r.width(),height:r.height()},this.sizeDiff={width:r.outerWidth()-r.width(),height:r.outerHeight()-r.height()},this.originalPosition={left:e,top:i},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio="number"==typeof o.aspectRatio?o.aspectRatio:this.originalSize.width/this.originalSize.height||1,n=T(".ui-resizable-"+this.axis).css("cursor"),T("body").css("cursor","auto"===n?this.axis+"-resize":n),this._addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var e,i,n=this.originalMousePosition,o=this.axis,r=t.pageX-n.left||0,s=t.pageY-n.top||0,a=this._change[o];return this._updatePrevProperties(),a&&(e=a.apply(this,[t,r,s]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(e=this._updateRatio(e,t)),e=this._respectSize(e,t),this._updateCache(e),this._propagate("resize",t),i=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),T.isEmptyObject(i)||(this._updatePrevProperties(),this._trigger("resize",t,this.ui()),this._applyChanges())),!1},_mouseStop:function(t){this.resizing=!1;var e,i,n,o,r,s,a,l=this.options,c=this;return this._helper&&(n=(i=(e=this._proportionallyResizeElements).length&&/textarea/i.test(e[0].nodeName))&&this._hasScroll(e[0],"left")?0:c.sizeDiff.height,o=i?0:c.sizeDiff.width,r={width:c.helper.width()-o,height:c.helper.height()-n},s=parseFloat(c.element.css("left"))+(c.position.left-c.originalPosition.left)||null,a=parseFloat(c.element.css("top"))+(c.position.top-c.originalPosition.top)||null,l.animate||this.element.css(T.extend(r,{top:a,left:s})),c.helper.height(c.size.height),c.helper.width(c.size.width),this._helper&&!l.animate&&this._proportionallyResize()),T("body").css("cursor","auto"),this._removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var t={};return this.position.top!==this.prevPosition.top&&(t.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(t.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(t.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(t.height=this.size.height+"px"),this.helper.css(t),t},_updateVirtualBoundaries:function(t){var e,i,n,o,r,s=this.options;r={minWidth:this._isNumber(s.minWidth)?s.minWidth:0,maxWidth:this._isNumber(s.maxWidth)?s.maxWidth:1/0,minHeight:this._isNumber(s.minHeight)?s.minHeight:0,maxHeight:this._isNumber(s.maxHeight)?s.maxHeight:1/0},(this._aspectRatio||t)&&(e=r.minHeight*this.aspectRatio,n=r.minWidth/this.aspectRatio,i=r.maxHeight*this.aspectRatio,o=r.maxWidth/this.aspectRatio,e>r.minWidth&&(r.minWidth=e),n>r.minHeight&&(r.minHeight=n),r.maxWidth>i&&(r.maxWidth=i),r.maxHeight>o&&(r.maxHeight=o)),this._vBoundaries=r},_updateCache:function(t){this.offset=this.helper.offset(),this._isNumber(t.left)&&(this.position.left=t.left),this._isNumber(t.top)&&(this.position.top=t.top),this._isNumber(t.height)&&(this.size.height=t.height),this._isNumber(t.width)&&(this.size.width=t.width)},_updateRatio:function(t){var e=this.position,i=this.size,n=this.axis;return this._isNumber(t.height)?t.width=t.height*this.aspectRatio:this._isNumber(t.width)&&(t.height=t.width/this.aspectRatio),"sw"===n&&(t.left=e.left+(i.width-t.width),t.top=null),"nw"===n&&(t.top=e.top+(i.height-t.height),t.left=e.left+(i.width-t.width)),t},_respectSize:function(t){var e=this._vBoundaries,i=this.axis,n=this._isNumber(t.width)&&e.maxWidth&&e.maxWidth<t.width,o=this._isNumber(t.height)&&e.maxHeight&&e.maxHeight<t.height,r=this._isNumber(t.width)&&e.minWidth&&e.minWidth>t.width,s=this._isNumber(t.height)&&e.minHeight&&e.minHeight>t.height,a=this.originalPosition.left+this.originalSize.width,l=this.originalPosition.top+this.originalSize.height,c=/sw|nw|w/.test(i),u=/nw|ne|n/.test(i);return r&&(t.width=e.minWidth),s&&(t.height=e.minHeight),n&&(t.width=e.maxWidth),o&&(t.height=e.maxHeight),r&&c&&(t.left=a-e.minWidth),n&&c&&(t.left=a-e.maxWidth),s&&u&&(t.top=l-e.minHeight),o&&u&&(t.top=l-e.maxHeight),t.width||t.height||t.left||!t.top?t.width||t.height||t.top||!t.left||(t.left=null):t.top=null,t},_getPaddingPlusBorderDimensions:function(t){for(var e=0,i=[],n=[t.css("borderTopWidth"),t.css("borderRightWidth"),t.css("borderBottomWidth"),t.css("borderLeftWidth")],o=[t.css("paddingTop"),t.css("paddingRight"),t.css("paddingBottom"),t.css("paddingLeft")];e<4;e++)i[e]=parseFloat(n[e])||0,i[e]+=parseFloat(o[e])||0;return{height:i[0]+i[2],width:i[1]+i[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var t,e=0,i=this.helper||this.element;this._proportionallyResizeElements.length>e;e++)t=this._proportionallyResizeElements[e],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(t)),t.css({height:i.height()-this.outerDimensions.height||0,width:i.width()-this.outerDimensions.width||0})},_renderProxy:function(){var t=this.element,e=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||T("<div style='overflow:hidden;'></div>"),this._addClass(this.helper,this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++e.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(t,e){return{width:this.originalSize.width+e}},w:function(t,e){var i=this.originalSize;return{left:this.originalPosition.left+e,width:i.width-e}},n:function(t,e,i){var n=this.originalSize;return{top:this.originalPosition.top+i,height:n.height-i}},s:function(t,e,i){return{height:this.originalSize.height+i}},se:function(t,e,i){return T.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,e,i]))},sw:function(t,e,i){return T.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,e,i]))},ne:function(t,e,i){return T.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,e,i]))},nw:function(t,e,i){return T.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,e,i]))}},_propagate:function(t,e){T.ui.plugin.call(this,t,[e,this.ui()]),"resize"!==t&&this._trigger(t,e,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),T.ui.plugin.add("resizable","animate",{stop:function(e){var i=T(this).resizable("instance"),t=i.options,n=i._proportionallyResizeElements,o=n.length&&/textarea/i.test(n[0].nodeName),r=o&&i._hasScroll(n[0],"left")?0:i.sizeDiff.height,s=o?0:i.sizeDiff.width,a={width:i.size.width-s,height:i.size.height-r},l=parseFloat(i.element.css("left"))+(i.position.left-i.originalPosition.left)||null,c=parseFloat(i.element.css("top"))+(i.position.top-i.originalPosition.top)||null;i.element.animate(T.extend(a,c&&l?{top:c,left:l}:{}),{duration:t.animateDuration,easing:t.animateEasing,step:function(){var t={width:parseFloat(i.element.css("width")),height:parseFloat(i.element.css("height")),top:parseFloat(i.element.css("top")),left:parseFloat(i.element.css("left"))};n&&n.length&&T(n[0]).css({width:t.width,height:t.height}),i._updateCache(t),i._propagate("resize",e)}})}}),T.ui.plugin.add("resizable","containment",{start:function(){var i,n,t,e,o,r,s,a=T(this).resizable("instance"),l=a.options,c=a.element,u=l.containment,h=u instanceof T?u.get(0):/parent/.test(u)?c.parent().get(0):u;h&&(a.containerElement=T(h),/document/.test(u)||u===document?(a.containerOffset={left:0,top:0},a.containerPosition={left:0,top:0},a.parentData={element:T(document),left:0,top:0,width:T(document).width(),height:T(document).height()||document.body.parentNode.scrollHeight}):(i=T(h),n=[],T(["Top","Right","Left","Bottom"]).each(function(t,e){n[t]=a._num(i.css("padding"+e))}),a.containerOffset=i.offset(),a.containerPosition=i.position(),a.containerSize={height:i.innerHeight()-n[3],width:i.innerWidth()-n[1]},t=a.containerOffset,e=a.containerSize.height,o=a.containerSize.width,r=a._hasScroll(h,"left")?h.scrollWidth:o,s=a._hasScroll(h)?h.scrollHeight:e,a.parentData={element:h,left:t.left,top:t.top,width:r,height:s}))},resize:function(t){var e,i,n,o,r=T(this).resizable("instance"),s=r.options,a=r.containerOffset,l=r.position,c=r._aspectRatio||t.shiftKey,u={top:0,left:0},h=r.containerElement,d=!0;h[0]!==document&&/static/.test(h.css("position"))&&(u=a),l.left<(r._helper?a.left:0)&&(r.size.width=r.size.width+(r._helper?r.position.left-a.left:r.position.left-u.left),c&&(r.size.height=r.size.width/r.aspectRatio,d=!1),r.position.left=s.helper?a.left:0),l.top<(r._helper?a.top:0)&&(r.size.height=r.size.height+(r._helper?r.position.top-a.top:r.position.top),c&&(r.size.width=r.size.height*r.aspectRatio,d=!1),r.position.top=r._helper?a.top:0),n=r.containerElement.get(0)===r.element.parent().get(0),o=/relative|absolute/.test(r.containerElement.css("position")),r.offset.top=n&&o?(r.offset.left=r.parentData.left+r.position.left,r.parentData.top+r.position.top):(r.offset.left=r.element.offset().left,r.element.offset().top),e=Math.abs(r.sizeDiff.width+(r._helper?r.offset.left-u.left:r.offset.left-a.left)),i=Math.abs(r.sizeDiff.height+(r._helper?r.offset.top-u.top:r.offset.top-a.top)),e+r.size.width>=r.parentData.width&&(r.size.width=r.parentData.width-e,c&&(r.size.height=r.size.width/r.aspectRatio,d=!1)),i+r.size.height>=r.parentData.height&&(r.size.height=r.parentData.height-i,c&&(r.size.width=r.size.height*r.aspectRatio,d=!1)),d||(r.position.left=r.prevPosition.left,r.position.top=r.prevPosition.top,r.size.width=r.prevSize.width,r.size.height=r.prevSize.height)},stop:function(){var t=T(this).resizable("instance"),e=t.options,i=t.containerOffset,n=t.containerPosition,o=t.containerElement,r=T(t.helper),s=r.offset(),a=r.outerWidth()-t.sizeDiff.width,l=r.outerHeight()-t.sizeDiff.height;t._helper&&!e.animate&&/relative/.test(o.css("position"))&&T(this).css({left:s.left-n.left-i.left,width:a,height:l}),t._helper&&!e.animate&&/static/.test(o.css("position"))&&T(this).css({left:s.left-n.left-i.left,width:a,height:l})}}),T.ui.plugin.add("resizable","alsoResize",{start:function(){var t=T(this).resizable("instance").options;T(t.alsoResize).each(function(){var t=T(this);t.data("ui-resizable-alsoresize",{width:parseFloat(t.width()),height:parseFloat(t.height()),left:parseFloat(t.css("left")),top:parseFloat(t.css("top"))})})},resize:function(t,i){var e=T(this).resizable("instance"),n=e.options,o=e.originalSize,r=e.originalPosition,s={height:e.size.height-o.height||0,width:e.size.width-o.width||0,top:e.position.top-r.top||0,left:e.position.left-r.left||0};T(n.alsoResize).each(function(){var t=T(this),n=T(this).data("ui-resizable-alsoresize"),o={},e=t.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];T.each(e,function(t,e){var i=(n[e]||0)+(s[e]||0);i&&0<=i&&(o[e]=i||null)}),t.css(o)})},stop:function(){T(this).removeData("ui-resizable-alsoresize")}}),T.ui.plugin.add("resizable","ghost",{start:function(){var t=T(this).resizable("instance"),e=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:e.height,width:e.width,margin:0,left:0,top:0}),t._addClass(t.ghost,"ui-resizable-ghost"),!1!==T.uiBackCompat&&"string"==typeof t.options.ghost&&t.ghost.addClass(this.options.ghost),t.ghost.appendTo(t.helper)},resize:function(){var t=T(this).resizable("instance");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=T(this).resizable("instance");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),T.ui.plugin.add("resizable","grid",{resize:function(){var t,e=T(this).resizable("instance"),i=e.options,n=e.size,o=e.originalSize,r=e.originalPosition,s=e.axis,a="number"==typeof i.grid?[i.grid,i.grid]:i.grid,l=a[0]||1,c=a[1]||1,u=Math.round((n.width-o.width)/l)*l,h=Math.round((n.height-o.height)/c)*c,d=o.width+u,f=o.height+h,p=i.maxWidth&&d>i.maxWidth,m=i.maxHeight&&f>i.maxHeight,g=i.minWidth&&i.minWidth>d,v=i.minHeight&&i.minHeight>f;i.grid=a,g&&(d+=l),v&&(f+=c),p&&(d-=l),m&&(f-=c),/^(se|s|e)$/.test(s)?(e.size.width=d,e.size.height=f):/^(ne)$/.test(s)?(e.size.width=d,e.size.height=f,e.position.top=r.top-h):/^(sw)$/.test(s)?(e.size.width=d,e.size.height=f,e.position.left=r.left-u):((f-c<=0||d-l<=0)&&(t=e._getPaddingPlusBorderDimensions(this)),e.position.top=0<f-c?(e.size.height=f,r.top-h):(f=c-t.height,e.size.height=f,r.top+o.height-f),e.position.left=0<d-l?(e.size.width=d,r.left-u):(d=l-t.width,e.size.width=d,r.left+o.width-d))}}),T.ui.resizable,T.widget("ui.selectable",T.ui.mouse,{version:"1.12.1",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var n=this;this._addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){n.elementPos=T(n.element[0]).offset(),n.selectees=T(n.options.filter,n.element[0]),n._addClass(n.selectees,"ui-selectee"),n.selectees.each(function(){var t=T(this),e=t.offset(),i={left:e.left-n.elementPos.left,top:e.top-n.elementPos.top};T.data(this,"selectable-item",{element:this,$element:t,left:i.left,top:i.top,right:i.left+t.outerWidth(),bottom:i.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this._mouseInit(),this.helper=T("<div>"),this._addClass(this.helper,"ui-selectable-helper")},_destroy:function(){this.selectees.removeData("selectable-item"),this._mouseDestroy()},_mouseStart:function(i){var n=this,t=this.options;this.opos=[i.pageX,i.pageY],this.elementPos=T(this.element[0]).offset(),this.options.disabled||(this.selectees=T(t.filter,this.element[0]),this._trigger("start",i),T(t.appendTo).append(this.helper),this.helper.css({left:i.pageX,top:i.pageY,width:0,height:0}),t.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var t=T.data(this,"selectable-item");t.startselected=!0,i.metaKey||i.ctrlKey||(n._removeClass(t.$element,"ui-selected"),t.selected=!1,n._addClass(t.$element,"ui-unselecting"),t.unselecting=!0,n._trigger("unselecting",i,{unselecting:t.element}))}),T(i.target).parents().addBack().each(function(){var t,e=T.data(this,"selectable-item");return e?(t=!i.metaKey&&!i.ctrlKey||!e.$element.hasClass("ui-selected"),n._removeClass(e.$element,t?"ui-unselecting":"ui-selected")._addClass(e.$element,t?"ui-selecting":"ui-unselecting"),e.unselecting=!t,e.selecting=t,(e.selected=t)?n._trigger("selecting",i,{selecting:e.element}):n._trigger("unselecting",i,{unselecting:e.element}),!1):void 0}))},_mouseDrag:function(n){if(this.dragged=!0,!this.options.disabled){var t,o=this,r=this.options,s=this.opos[0],a=this.opos[1],l=n.pageX,c=n.pageY;return l<s&&(t=l,l=s,s=t),c<a&&(t=c,c=a,a=t),this.helper.css({left:s,top:a,width:l-s,height:c-a}),this.selectees.each(function(){var t=T.data(this,"selectable-item"),e=!1,i={};t&&t.element!==o.element[0]&&(i.left=t.left+o.elementPos.left,i.right=t.right+o.elementPos.left,i.top=t.top+o.elementPos.top,i.bottom=t.bottom+o.elementPos.top,"touch"===r.tolerance?e=!(i.left>l||s>i.right||i.top>c||a>i.bottom):"fit"===r.tolerance&&(e=i.left>s&&l>i.right&&i.top>a&&c>i.bottom),e?(t.selected&&(o._removeClass(t.$element,"ui-selected"),t.selected=!1),t.unselecting&&(o._removeClass(t.$element,"ui-unselecting"),t.unselecting=!1),t.selecting||(o._addClass(t.$element,"ui-selecting"),t.selecting=!0,o._trigger("selecting",n,{selecting:t.element}))):(t.selecting&&((n.metaKey||n.ctrlKey)&&t.startselected?(o._removeClass(t.$element,"ui-selecting"),t.selecting=!1,o._addClass(t.$element,"ui-selected"),t.selected=!0):(o._removeClass(t.$element,"ui-selecting"),t.selecting=!1,t.startselected&&(o._addClass(t.$element,"ui-unselecting"),t.unselecting=!0),o._trigger("unselecting",n,{unselecting:t.element}))),t.selected&&(n.metaKey||n.ctrlKey||t.startselected||(o._removeClass(t.$element,"ui-selected"),t.selected=!1,o._addClass(t.$element,"ui-unselecting"),t.unselecting=!0,o._trigger("unselecting",n,{unselecting:t.element})))))}),!1}},_mouseStop:function(e){var i=this;return this.dragged=!1,T(".ui-unselecting",this.element[0]).each(function(){var t=T.data(this,"selectable-item");i._removeClass(t.$element,"ui-unselecting"),t.unselecting=!1,t.startselected=!1,i._trigger("unselected",e,{unselected:t.element})}),T(".ui-selecting",this.element[0]).each(function(){var t=T.data(this,"selectable-item");i._removeClass(t.$element,"ui-selecting")._addClass(t.$element,"ui-selected"),t.selecting=!1,t.selected=!0,t.startselected=!0,i._trigger("selected",e,{selected:t.element})}),this._trigger("stop",e),this.helper.remove(),!1}}),T.widget("ui.sortable",T.ui.mouse,{version:"1.12.1",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(t,e,i){return e<=t&&t<e+i},_isFloating:function(t){return/left|right/.test(t.css("float"))||/inline|table-cell/.test(t.css("display"))},_create:function(){this.containerCache={},this._addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(t,e){this._super(t,e),"handle"===t&&this._setHandleClassName()},_setHandleClassName:function(){var t=this;this._removeClass(this.element.find(".ui-sortable-handle"),"ui-sortable-handle"),T.each(this.items,function(){t._addClass(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item,"ui-sortable-handle")})},_destroy:function(){this._mouseDestroy();for(var t=this.items.length-1;0<=t;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(t,e){var i=null,n=!1,o=this;return!this.reverting&&(!this.options.disabled&&"static"!==this.options.type&&(this._refreshItems(t),T(t.target).parents().each(function(){return T.data(this,o.widgetName+"-item")===o?(i=T(this),!1):void 0}),T.data(t.target,o.widgetName+"-item")===o&&(i=T(t.target)),!!i&&(!(this.options.handle&&!e&&(T(this.options.handle,i).find("*").addBack().each(function(){this===t.target&&(n=!0)}),!n))&&(this.currentItem=i,this._removeCurrentsFromItems(),!0))))},_mouseStart:function(t,e,i){var n,o,r=this.options;if((this.currentContainer=this).refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},T.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,r.cursorAt&&this._adjustOffsetFromHelper(r.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),r.containment&&this._setContainment(),r.cursor&&"auto"!==r.cursor&&(o=this.document.find("body"),this.storedCursor=o.css("cursor"),o.css("cursor",r.cursor),this.storedStylesheet=T("<style>*{ cursor: "+r.cursor+" !important; }</style>").appendTo(o)),r.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",r.opacity)),r.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",r.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!i)for(n=this.containers.length-1;0<=n;n--)this.containers[n]._trigger("activate",t,this._uiHash(this));return T.ui.ddmanager&&(T.ui.ddmanager.current=this),T.ui.ddmanager&&!r.dropBehaviour&&T.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this._addClass(this.helper,"ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var e,i,n,o,r=this.options,s=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<r.scrollSensitivity?this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop+r.scrollSpeed:t.pageY-this.overflowOffset.top<r.scrollSensitivity&&(this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop-r.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<r.scrollSensitivity?this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft+r.scrollSpeed:t.pageX-this.overflowOffset.left<r.scrollSensitivity&&(this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft-r.scrollSpeed)):(t.pageY-this.document.scrollTop()<r.scrollSensitivity?s=this.document.scrollTop(this.document.scrollTop()-r.scrollSpeed):this.window.height()-(t.pageY-this.document.scrollTop())<r.scrollSensitivity&&(s=this.document.scrollTop(this.document.scrollTop()+r.scrollSpeed)),t.pageX-this.document.scrollLeft()<r.scrollSensitivity?s=this.document.scrollLeft(this.document.scrollLeft()-r.scrollSpeed):this.window.width()-(t.pageX-this.document.scrollLeft())<r.scrollSensitivity&&(s=this.document.scrollLeft(this.document.scrollLeft()+r.scrollSpeed))),!1!==s&&T.ui.ddmanager&&!r.dropBehaviour&&T.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),e=this.items.length-1;0<=e;e--)if(n=(i=this.items[e]).item[0],(o=this._intersectsWithPointer(i))&&i.instance===this.currentContainer&&n!==this.currentItem[0]&&this.placeholder[1===o?"next":"prev"]()[0]!==n&&!T.contains(this.placeholder[0],n)&&("semi-dynamic"!==this.options.type||!T.contains(this.element[0],n))){if(this.direction=1===o?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(i))break;this._rearrange(t,i),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),T.ui.ddmanager&&T.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,e){if(t){if(T.ui.ddmanager&&!this.options.dropBehaviour&&T.ui.ddmanager.drop(this,t),this.options.revert){var i=this,n=this.placeholder.offset(),o=this.options.axis,r={};o&&"x"!==o||(r.left=n.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),o&&"y"!==o||(r.top=n.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,T(this.helper).animate(r,parseInt(this.options.revert,10)||500,function(){i._clear(t)})}else this._clear(t,e);return!1}},cancel:function(){if(this.dragging){this._mouseUp(new T.Event("mouseup",{target:null})),"original"===this.options.helper?(this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")):this.currentItem.show();for(var t=this.containers.length-1;0<=t;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),T.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?T(this.domPosition.prev).after(this.currentItem):T(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(e){var t=this._getItemsAsjQuery(e&&e.connected),i=[];return e=e||{},T(t).each(function(){var t=(T(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[\-=_](.+)/);t&&i.push((e.key||t[1]+"[]")+"="+(e.key&&e.expression?t[1]:t[2]))}),!i.length&&e.key&&i.push(e.key+"="),i.join("&")},toArray:function(t){var e=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},e.each(function(){i.push(T(t.item||this).attr(t.attribute||"id")||"")}),i},_intersectsWith:function(t){var e=this.positionAbs.left,i=e+this.helperProportions.width,n=this.positionAbs.top,o=n+this.helperProportions.height,r=t.left,s=r+t.width,a=t.top,l=a+t.height,c=this.offset.click.top,u=this.offset.click.left,h="x"===this.options.axis||a<n+c&&n+c<l,d="y"===this.options.axis||r<e+u&&e+u<s,f=h&&d;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]?f:e+this.helperProportions.width/2>r&&s>i-this.helperProportions.width/2&&n+this.helperProportions.height/2>a&&l>o-this.helperProportions.height/2},_intersectsWithPointer:function(t){var e,i,n="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),o="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width);return!!(n&&o)&&(e=this._getDragVerticalDirection(),i=this._getDragHorizontalDirection(),this.floating?"right"===i||"down"===e?2:1:e&&("down"===e?2:1))},_intersectsWithSides:function(t){var e=this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),i=this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),n=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return this.floating&&o?"right"===o&&i||"left"===o&&!i:n&&("down"===n&&e||"up"===n&&!e)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return 0!==t&&(0<t?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return 0!==t&&(0<t?"right":"left")},refresh:function(t){return this._refreshItems(t),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var t=this.options;return t.connectWith.constructor===String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(t){function e(){s.push(this)}var i,n,o,r,s=[],a=[],l=this._connectWith();if(l&&t)for(i=l.length-1;0<=i;i--)for(n=(o=T(l[i],this.document[0])).length-1;0<=n;n--)(r=T.data(o[n],this.widgetFullName))&&r!==this&&!r.options.disabled&&a.push([T.isFunction(r.options.items)?r.options.items.call(r.element):T(r.options.items,r.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),r]);for(a.push([T.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):T(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),i=a.length-1;0<=i;i--)a[i][0].each(e);return T(s)},_removeCurrentsFromItems:function(){var i=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=T.grep(this.items,function(t){for(var e=0;i.length>e;e++)if(i[e]===t.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var e,i,n,o,r,s,a,l,c=this.items,u=[[T.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):T(this.options.items,this.element),this]],h=this._connectWith();if(h&&this.ready)for(e=h.length-1;0<=e;e--)for(i=(n=T(h[e],this.document[0])).length-1;0<=i;i--)(o=T.data(n[i],this.widgetFullName))&&o!==this&&!o.options.disabled&&(u.push([T.isFunction(o.options.items)?o.options.items.call(o.element[0],t,{item:this.currentItem}):T(o.options.items,o.element),o]),this.containers.push(o));for(e=u.length-1;0<=e;e--)for(r=u[e][1],i=0,l=(s=u[e][0]).length;i<l;i++)(a=T(s[i])).data(this.widgetName+"-item",r),c.push({item:a,instance:r,width:0,height:0,left:0,top:0})},refreshPositions:function(t){var e,i,n,o;for(this.floating=!!this.items.length&&("x"===this.options.axis||this._isFloating(this.items[0].item)),this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset()),e=this.items.length-1;0<=e;e--)(i=this.items[e]).instance!==this.currentContainer&&this.currentContainer&&i.item[0]!==this.currentItem[0]||(n=this.options.toleranceElement?T(this.options.toleranceElement,i.item):i.item,t||(i.width=n.outerWidth(),i.height=n.outerHeight()),o=n.offset(),i.left=o.left,i.top=o.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(e=this.containers.length-1;0<=e;e--)o=this.containers[e].element.offset(),this.containers[e].containerCache.left=o.left,this.containers[e].containerCache.top=o.top,this.containers[e].containerCache.width=this.containers[e].element.outerWidth(),this.containers[e].containerCache.height=this.containers[e].element.outerHeight();return this},_createPlaceholder:function(i){var n,o=(i=i||this).options;o.placeholder&&o.placeholder.constructor!==String||(n=o.placeholder,o.placeholder={element:function(){var t=i.currentItem[0].nodeName.toLowerCase(),e=T("<"+t+">",i.document[0]);return i._addClass(e,"ui-sortable-placeholder",n||i.currentItem[0].className)._removeClass(e,"ui-sortable-helper"),"tbody"===t?i._createTrPlaceholder(i.currentItem.find("tr").eq(0),T("<tr>",i.document[0]).appendTo(e)):"tr"===t?i._createTrPlaceholder(i.currentItem,e):"img"===t&&e.attr("src",i.currentItem.attr("src")),n||e.css("visibility","hidden"),e},update:function(t,e){(!n||o.forcePlaceholderSize)&&(e.height()||e.height(i.currentItem.innerHeight()-parseInt(i.currentItem.css("paddingTop")||0,10)-parseInt(i.currentItem.css("paddingBottom")||0,10)),e.width()||e.width(i.currentItem.innerWidth()-parseInt(i.currentItem.css("paddingLeft")||0,10)-parseInt(i.currentItem.css("paddingRight")||0,10)))}}),i.placeholder=T(o.placeholder.element.call(i.element,i.currentItem)),i.currentItem.after(i.placeholder),o.placeholder.update(i,i.placeholder)},_createTrPlaceholder:function(t,e){var i=this;t.children().each(function(){T("<td>&#160;</td>",i.document[0]).attr("colspan",T(this).attr("colspan")||1).appendTo(e)})},_contactContainers:function(t){var e,i,n,o,r,s,a,l,c,u,h=null,d=null;for(e=this.containers.length-1;0<=e;e--)if(!T.contains(this.currentItem[0],this.containers[e].element[0]))if(this._intersectsWith(this.containers[e].containerCache)){if(h&&T.contains(this.containers[e].element[0],h.element[0]))continue;h=this.containers[e],d=e}else this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",t,this._uiHash(this)),this.containers[e].containerCache.over=0);if(h)if(1===this.containers.length)this.containers[d].containerCache.over||(this.containers[d]._trigger("over",t,this._uiHash(this)),this.containers[d].containerCache.over=1);else{for(n=1e4,o=null,r=(c=h.floating||this._isFloating(this.currentItem))?"left":"top",s=c?"width":"height",u=c?"pageX":"pageY",i=this.items.length-1;0<=i;i--)T.contains(this.containers[d].element[0],this.items[i].item[0])&&this.items[i].item[0]!==this.currentItem[0]&&(a=this.items[i].item.offset()[r],l=!1,t[u]-a>this.items[i][s]/2&&(l=!0),n>Math.abs(t[u]-a)&&(n=Math.abs(t[u]-a),o=this.items[i],this.direction=l?"up":"down"));if(!o&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[d])return void(this.currentContainer.containerCache.over||(this.containers[d]._trigger("over",t,this._uiHash()),this.currentContainer.containerCache.over=1));o?this._rearrange(t,o,null,!0):this._rearrange(t,null,this.containers[d].element,!0),this._trigger("change",t,this._uiHash()),this.containers[d]._trigger("change",t,this._uiHash(this)),this.currentContainer=this.containers[d],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[d]._trigger("over",t,this._uiHash(this)),this.containers[d].containerCache.over=1}},_createHelper:function(t){var e=this.options,i=T.isFunction(e.helper)?T(e.helper.apply(this.element[0],[t,this.currentItem])):"clone"===e.helper?this.currentItem.clone():this.currentItem;return i.parents("body").length||T("parent"!==e.appendTo?e.appendTo:this.currentItem[0].parentNode)[0].appendChild(i[0]),i[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!i[0].style.width||e.forceHelperSize)&&i.width(this.currentItem.width()),(!i[0].style.height||e.forceHelperSize)&&i.height(this.currentItem.height()),i},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),T.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&T.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&T.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,e,i,n=this.options;"parent"===n.containment&&(n.containment=this.helper[0].parentNode),("document"===n.containment||"window"===n.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===n.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===n.containment?this.document.height()||document.body.parentNode.scrollHeight:this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(n.containment)||(t=T(n.containment)[0],e=T(n.containment).offset(),i="hidden"!==T(t).css("overflow"),this.containment=[e.left+(parseInt(T(t).css("borderLeftWidth"),10)||0)+(parseInt(T(t).css("paddingLeft"),10)||0)-this.margins.left,e.top+(parseInt(T(t).css("borderTopWidth"),10)||0)+(parseInt(T(t).css("paddingTop"),10)||0)-this.margins.top,e.left+(i?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(T(t).css("borderLeftWidth"),10)||0)-(parseInt(T(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,e.top+(i?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(T(t).css("borderTopWidth"),10)||0)-(parseInt(T(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,e){e||(e=this.position);var i="absolute"===t?1:-1,n="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&T.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(n[0].tagName);return{top:e.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():o?0:n.scrollTop())*i,left:e.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():o?0:n.scrollLeft())*i}},_generatePosition:function(t){var e,i,n=this.options,o=t.pageX,r=t.pageY,s="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&T.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(s[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(o=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(r=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(o=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(r=this.containment[3]+this.offset.click.top)),n.grid&&(e=this.originalPageY+Math.round((r-this.originalPageY)/n.grid[1])*n.grid[1],r=this.containment?e-this.offset.click.top>=this.containment[1]&&e-this.offset.click.top<=this.containment[3]?e:e-this.offset.click.top>=this.containment[1]?e-n.grid[1]:e+n.grid[1]:e,i=this.originalPageX+Math.round((o-this.originalPageX)/n.grid[0])*n.grid[0],o=this.containment?i-this.offset.click.left>=this.containment[0]&&i-this.offset.click.left<=this.containment[2]?i:i-this.offset.click.left>=this.containment[0]?i-n.grid[0]:i+n.grid[0]:i)),{top:r-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():a?0:s.scrollTop()),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():a?0:s.scrollLeft())}},_rearrange:function(t,e,i,n){i?i[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?e.item[0]:e.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var o=this.counter;this._delay(function(){o===this.counter&&this.refreshPositions(!n)})},_clear:function(t,e){function i(e,i,n){return function(t){n._trigger(e,t,i._uiHash(i))}}this.reverting=!1;var n,o=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(n in this._storedCSS)("auto"===this._storedCSS[n]||"static"===this._storedCSS[n])&&(this._storedCSS[n]="");this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!e&&o.push(function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||e||o.push(function(t){this._trigger("update",t,this._uiHash())}),this!==this.currentContainer&&(e||(o.push(function(t){this._trigger("remove",t,this._uiHash())}),o.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),o.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),n=this.containers.length-1;0<=n;n--)e||o.push(i("deactivate",this,this.containers[n])),this.containers[n].containerCache.over&&(o.push(i("out",this,this.containers[n])),this.containers[n].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,e||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!e){for(n=0;o.length>n;n++)o[n].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){!1===T.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(t){var e=t||this;return{helper:e.helper,placeholder:e.placeholder||T([]),position:e.position,originalPosition:e.originalPosition,offset:e.positionAbs,item:e.currentItem,sender:t?t.element:null}}}),T.widget("ui.accordion",{version:"1.12.1",options:{active:0,animate:{},classes:{"ui-accordion-header":"ui-corner-top","ui-accordion-header-collapsed":"ui-corner-all","ui-accordion-content":"ui-corner-bottom"},collapsible:!1,event:"click",header:"> li > :first-child, > :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var t=this.options;this.prevShow=this.prevHide=T(),this._addClass("ui-accordion","ui-widget ui-helper-reset"),this.element.attr("role","tablist"),t.collapsible||!1!==t.active&&null!=t.active||(t.active=0),this._processPanels(),t.active<0&&(t.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():T()}},_createIcons:function(){var t,e,i=this.options.icons;i&&(t=T("<span>"),this._addClass(t,"ui-accordion-header-icon","ui-icon "+i.header),t.prependTo(this.headers),e=this.active.children(".ui-accordion-header-icon"),this._removeClass(e,i.header)._addClass(e,null,i.activeHeader)._addClass(this.headers,"ui-accordion-icons"))},_destroyIcons:function(){this._removeClass(this.headers,"ui-accordion-icons"),this.headers.children(".ui-accordion-header-icon").remove()},_destroy:function(){var t;this.element.removeAttr("role"),this.headers.removeAttr("role aria-expanded aria-selected aria-controls tabIndex").removeUniqueId(),this._destroyIcons(),t=this.headers.next().css("display","").removeAttr("role aria-hidden aria-labelledby").removeUniqueId(),"content"!==this.options.heightStyle&&t.css("height","")},_setOption:function(t,e){return"active"===t?void this._activate(e):("event"===t&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(e)),this._super(t,e),"collapsible"!==t||e||!1!==this.options.active||this._activate(0),void("icons"===t&&(this._destroyIcons(),e&&this._createIcons())))},_setOptionDisabled:function(t){this._super(t),this.element.attr("aria-disabled",t),this._toggleClass(null,"ui-state-disabled",!!t),this._toggleClass(this.headers.add(this.headers.next()),null,"ui-state-disabled",!!t)},_keydown:function(t){if(!t.altKey&&!t.ctrlKey){var e=T.ui.keyCode,i=this.headers.length,n=this.headers.index(t.target),o=!1;switch(t.keyCode){case e.RIGHT:case e.DOWN:o=this.headers[(n+1)%i];break;case e.LEFT:case e.UP:o=this.headers[(n-1+i)%i];break;case e.SPACE:case e.ENTER:this._eventHandler(t);break;case e.HOME:o=this.headers[0];break;case e.END:o=this.headers[i-1]}o&&(T(t.target).attr("tabIndex",-1),T(o).attr("tabIndex",0),T(o).trigger("focus"),t.preventDefault())}},_panelKeyDown:function(t){t.keyCode===T.ui.keyCode.UP&&t.ctrlKey&&T(t.currentTarget).prev().trigger("focus")},refresh:function(){var t=this.options;this._processPanels(),!1===t.active&&!0===t.collapsible||!this.headers.length?(t.active=!1,this.active=T()):!1===t.active?this._activate(0):this.active.length&&!T.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(t.active=!1,this.active=T()):this._activate(Math.max(0,t.active-1)):t.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){var t=this.headers,e=this.panels;this.headers=this.element.find(this.options.header),this._addClass(this.headers,"ui-accordion-header ui-accordion-header-collapsed","ui-state-default"),this.panels=this.headers.next().filter(":not(.ui-accordion-content-active)").hide(),this._addClass(this.panels,"ui-accordion-content","ui-helper-reset ui-widget-content"),e&&(this._off(t.not(this.headers)),this._off(e.not(this.panels)))},_refresh:function(){var i,t=this.options,e=t.heightStyle,n=this.element.parent();this.active=this._findActive(t.active),this._addClass(this.active,"ui-accordion-header-active","ui-state-active")._removeClass(this.active,"ui-accordion-header-collapsed"),this._addClass(this.active.next(),"ui-accordion-content-active"),this.active.next().show(),this.headers.attr("role","tab").each(function(){var t=T(this),e=t.uniqueId().attr("id"),i=t.next(),n=i.uniqueId().attr("id");t.attr("aria-controls",n),i.attr("aria-labelledby",e)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(t.event),"fill"===e?(i=n.height(),this.element.siblings(":visible").each(function(){var t=T(this),e=t.css("position");"absolute"!==e&&"fixed"!==e&&(i-=t.outerHeight(!0))}),this.headers.each(function(){i-=T(this).outerHeight(!0)}),this.headers.next().each(function(){T(this).height(Math.max(0,i-T(this).innerHeight()+T(this).height()))}).css("overflow","auto")):"auto"===e&&(i=0,this.headers.next().each(function(){var t=T(this).is(":visible");t||T(this).show(),i=Math.max(i,T(this).css("height","").height()),t||T(this).hide()}).height(i))},_activate:function(t){var e=this._findActive(t)[0];e!==this.active[0]&&(e=e||this.active[0],this._eventHandler({target:e,currentTarget:e,preventDefault:T.noop}))},_findActive:function(t){return"number"==typeof t?this.headers.eq(t):T()},_setupEvents:function(t){var i={keydown:"_keydown"};t&&T.each(t.split(" "),function(t,e){i[e]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,i),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(t){var e,i,n=this.options,o=this.active,r=T(t.currentTarget),s=r[0]===o[0],a=s&&n.collapsible,l=a?T():r.next(),c=o.next(),u={oldHeader:o,oldPanel:c,newHeader:a?T():r,newPanel:l};t.preventDefault(),s&&!n.collapsible||!1===this._trigger("beforeActivate",t,u)||(n.active=!a&&this.headers.index(r),this.active=s?T():r,this._toggle(u),this._removeClass(o,"ui-accordion-header-active","ui-state-active"),n.icons&&(e=o.children(".ui-accordion-header-icon"),this._removeClass(e,null,n.icons.activeHeader)._addClass(e,null,n.icons.header)),s||(this._removeClass(r,"ui-accordion-header-collapsed")._addClass(r,"ui-accordion-header-active","ui-state-active"),n.icons&&(i=r.children(".ui-accordion-header-icon"),this._removeClass(i,null,n.icons.header)._addClass(i,null,n.icons.activeHeader)),this._addClass(r.next(),"ui-accordion-content-active")))},_toggle:function(t){var e=t.newPanel,i=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=e,this.prevHide=i,this.options.animate?this._animate(e,i,t):(i.hide(),e.show(),this._toggleComplete(t)),i.attr({"aria-hidden":"true"}),i.prev().attr({"aria-selected":"false","aria-expanded":"false"}),e.length&&i.length?i.prev().attr({tabIndex:-1,"aria-expanded":"false"}):e.length&&this.headers.filter(function(){return 0===parseInt(T(this).attr("tabIndex"),10)}).attr("tabIndex",-1),e.attr("aria-hidden","false").prev().attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_animate:function(t,i,e){var n,o,r,s=this,a=0,l=t.css("box-sizing"),c=t.length&&(!i.length||t.index()<i.index()),u=this.options.animate||{},h=c&&u.down||u,d=function(){s._toggleComplete(e)};return"number"==typeof h&&(r=h),"string"==typeof h&&(o=h),o=o||h.easing||u.easing,r=r||h.duration||u.duration,i.length?t.length?(n=t.show().outerHeight(),i.animate(this.hideProps,{duration:r,easing:o,step:function(t,e){e.now=Math.round(t)}}),void t.hide().animate(this.showProps,{duration:r,easing:o,complete:d,step:function(t,e){e.now=Math.round(t),"height"!==e.prop?"content-box"===l&&(a+=e.now):"content"!==s.options.heightStyle&&(e.now=Math.round(n-i.outerHeight()-a),a=0)}})):i.animate(this.hideProps,r,o,d):t.animate(this.showProps,r,o,d)},_toggleComplete:function(t){var e=t.oldPanel,i=e.prev();this._removeClass(e,"ui-accordion-content-active"),this._removeClass(i,"ui-accordion-header-active")._addClass(i,"ui-accordion-header-collapsed"),e.length&&(e.parent()[0].className=e.parent()[0].className),this._trigger("activate",null,t)}}),T.widget("ui.menu",{version:"1.12.1",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-caret-1-e"},items:"> *",menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().attr({role:this.options.role,tabIndex:0}),this._addClass("ui-menu","ui-widget ui-widget-content"),this._on({"mousedown .ui-menu-item":function(t){t.preventDefault()},"click .ui-menu-item":function(t){var e=T(t.target),i=T(T.ui.safeActiveElement(this.document[0]));!this.mouseHandled&&e.not(".ui-state-disabled").length&&(this.select(t),t.isPropagationStopped()||(this.mouseHandled=!0),e.has(".ui-menu").length?this.expand(t):!this.element.is(":focus")&&i.closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){if(!this.previousFilter){var e=T(t.target).closest(".ui-menu-item"),i=T(t.currentTarget);e[0]===i[0]&&(this._removeClass(i.siblings().children(".ui-state-active"),null,"ui-state-active"),this.focus(t,i))}},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(t,e){var i=this.active||this.element.find(this.options.items).eq(0);e||this.focus(t,i)},blur:function(t){this._delay(function(){!T.contains(this.element[0],T.ui.safeActiveElement(this.document[0]))&&this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(t){this._closeOnDocumentClick(t)&&this.collapseAll(t),this.mouseHandled=!1}})},_destroy:function(){var t=this.element.find(".ui-menu-item").removeAttr("role aria-disabled").children(".ui-menu-item-wrapper").removeUniqueId().removeAttr("tabIndex role aria-haspopup");this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeAttr("role aria-labelledby aria-expanded aria-hidden aria-disabled tabIndex").removeUniqueId().show(),t.children().each(function(){var t=T(this);t.data("ui-menu-submenu-caret")&&t.remove()})},_keydown:function(t){var e,i,n,o,r=!0;switch(t.keyCode){case T.ui.keyCode.PAGE_UP:this.previousPage(t);break;case T.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case T.ui.keyCode.HOME:this._move("first","first",t);break;case T.ui.keyCode.END:this._move("last","last",t);break;case T.ui.keyCode.UP:this.previous(t);break;case T.ui.keyCode.DOWN:this.next(t);break;case T.ui.keyCode.LEFT:this.collapse(t);break;case T.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case T.ui.keyCode.ENTER:case T.ui.keyCode.SPACE:this._activate(t);break;case T.ui.keyCode.ESCAPE:this.collapse(t);break;default:r=!1,i=this.previousFilter||"",o=!1,n=96<=t.keyCode&&t.keyCode<=105?""+(t.keyCode-96):String.fromCharCode(t.keyCode),clearTimeout(this.filterTimer),n===i?o=!0:n=i+n,e=this._filterMenuItems(n),(e=o&&-1!==e.index(this.active.next())?this.active.nextAll(".ui-menu-item"):e).length||(n=String.fromCharCode(t.keyCode),e=this._filterMenuItems(n)),e.length?(this.focus(t,e),this.previousFilter=n,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter}r&&t.preventDefault()},_activate:function(t){this.active&&!this.active.is(".ui-state-disabled")&&(this.active.children("[aria-haspopup='true']").length?this.expand(t):this.select(t))},refresh:function(){var t,e,i,n,o=this,r=this.options.icons.submenu,s=this.element.find(this.options.menus);this._toggleClass("ui-menu-icons",null,!!this.element.find(".ui-icon").length),e=s.filter(":not(.ui-menu)").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=T(this),e=t.prev(),i=T("<span>").data("ui-menu-submenu-caret",!0);o._addClass(i,"ui-menu-icon","ui-icon "+r),e.attr("aria-haspopup","true").prepend(i),t.attr("aria-labelledby",e.attr("id"))}),this._addClass(e,"ui-menu","ui-widget ui-widget-content ui-front"),(t=s.add(this.element).find(this.options.items)).not(".ui-menu-item").each(function(){var t=T(this);o._isDivider(t)&&o._addClass(t,"ui-menu-divider","ui-widget-content")}),n=(i=t.not(".ui-menu-item, .ui-menu-divider")).children().not(".ui-menu").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),this._addClass(i,"ui-menu-item")._addClass(n,"ui-menu-item-wrapper"),t.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!T.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(t,e){if("icons"===t){var i=this.element.find(".ui-menu-icon");this._removeClass(i,null,this.options.icons.submenu)._addClass(i,null,e.submenu)}this._super(t,e)},_setOptionDisabled:function(t){this._super(t),this.element.attr("aria-disabled",t+""),this._toggleClass(null,"ui-state-disabled",!!t)},focus:function(t,e){var i,n,o;this.blur(t,t&&"focus"===t.type),this._scrollIntoView(e),this.active=e.first(),n=this.active.children(".ui-menu-item-wrapper"),this._addClass(n,null,"ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",n.attr("id")),o=this.active.parent().closest(".ui-menu-item").children(".ui-menu-item-wrapper"),this._addClass(o,null,"ui-state-active"),t&&"keydown"===t.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),(i=e.children(".ui-menu")).length&&t&&/^mouse/.test(t.type)&&this._startOpening(i),this.activeMenu=e.parent(),this._trigger("focus",t,{item:e})},_scrollIntoView:function(t){var e,i,n,o,r,s;this._hasScroll()&&(e=parseFloat(T.css(this.activeMenu[0],"borderTopWidth"))||0,i=parseFloat(T.css(this.activeMenu[0],"paddingTop"))||0,n=t.offset().top-this.activeMenu.offset().top-e-i,o=this.activeMenu.scrollTop(),r=this.activeMenu.height(),s=t.outerHeight(),n<0?this.activeMenu.scrollTop(o+n):r<n+s&&this.activeMenu.scrollTop(o+n-r+s))},blur:function(t,e){e||clearTimeout(this.timer),this.active&&(this._removeClass(this.active.children(".ui-menu-item-wrapper"),null,"ui-state-active"),this._trigger("blur",t,{item:this.active}),this.active=null)},_startOpening:function(t){clearTimeout(this.timer),"true"===t.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(t)},this.delay))},_open:function(t){var e=T.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(e)},collapseAll:function(e,i){clearTimeout(this.timer),this.timer=this._delay(function(){var t=i?this.element:T(e&&e.target).closest(this.element.find(".ui-menu"));t.length||(t=this.element),this._close(t),this.blur(e),this._removeClass(t.find(".ui-state-active"),null,"ui-state-active"),this.activeMenu=t},this.delay)},_close:function(t){t||(t=this.active?this.active.parent():this.element),t.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false")},_closeOnDocumentClick:function(t){return!T(t.target).closest(".ui-menu").length},_isDivider:function(t){return!/[^\-\u2014\u2013\s]/.test(t.text())},collapse:function(t){var e=this.active&&this.active.parent().closest(".ui-menu-item",this.element);e&&e.length&&(this._close(),this.focus(t,e))},expand:function(t){var e=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();e&&e.length&&(this._open(e.parent()),this._delay(function(){this.focus(t,e)}))},next:function(t){this._move("next","first",t)},previous:function(t){this._move("prev","last",t)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(t,e,i){var n;this.active&&(n="first"===t||"last"===t?this.active["first"===t?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[t+"All"](".ui-menu-item").eq(0)),n&&n.length&&this.active||(n=this.activeMenu.find(this.options.items)[e]()),this.focus(i,n)},nextPage:function(t){var e,i,n;return this.active?void(this.isLastItem()||(this._hasScroll()?(i=this.active.offset().top,n=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return(e=T(this)).offset().top-i-n<0}),this.focus(t,e)):this.focus(t,this.activeMenu.find(this.options.items)[this.active?"last":"first"]()))):void this.next(t)},previousPage:function(t){var e,i,n;return this.active?void(this.isFirstItem()||(this._hasScroll()?(i=this.active.offset().top,n=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return 0<(e=T(this)).offset().top-i+n}),this.focus(t,e)):this.focus(t,this.activeMenu.find(this.options.items).first()))):void this.next(t)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||T(t.target).closest(".ui-menu-item");var e={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,e)},_filterMenuItems:function(t){var e=t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),i=RegExp("^"+e,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return i.test(T.trim(T(this).children(".ui-menu-item-wrapper").text()))})}}),T.widget("ui.autocomplete",{version:"1.12.1",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var i,n,o,t=this.element[0].nodeName.toLowerCase(),e="textarea"===t,r="input"===t;this.isMultiLine=e||!r&&this._isContentEditable(this.element),this.valueMethod=this.element[e||r?"val":"text"],this.isNewMenu=!0,this._addClass("ui-autocomplete-input"),this.element.attr("autocomplete","off"),this._on(this.element,{keydown:function(t){if(this.element.prop("readOnly"))n=o=i=!0;else{n=o=i=!1;var e=T.ui.keyCode;switch(t.keyCode){case e.PAGE_UP:i=!0,this._move("previousPage",t);break;case e.PAGE_DOWN:i=!0,this._move("nextPage",t);break;case e.UP:i=!0,this._keyEvent("previous",t);break;case e.DOWN:i=!0,this._keyEvent("next",t);break;case e.ENTER:this.menu.active&&(i=!0,t.preventDefault(),this.menu.select(t));break;case e.TAB:this.menu.active&&this.menu.select(t);break;case e.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(t),t.preventDefault());break;default:n=!0,this._searchTimeout(t)}}},keypress:function(t){if(i)return i=!1,void((!this.isMultiLine||this.menu.element.is(":visible"))&&t.preventDefault());if(!n){var e=T.ui.keyCode;switch(t.keyCode){case e.PAGE_UP:this._move("previousPage",t);break;case e.PAGE_DOWN:this._move("nextPage",t);break;case e.UP:this._keyEvent("previous",t);break;case e.DOWN:this._keyEvent("next",t)}}},input:function(t){return o?(o=!1,void t.preventDefault()):void this._searchTimeout(t)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(t){return this.cancelBlur?void delete this.cancelBlur:(clearTimeout(this.searching),this.close(t),void this._change(t))}}),this._initSource(),this.menu=T("<ul>").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance"),this._addClass(this.menu.element,"ui-autocomplete","ui-front"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,this.element[0]!==T.ui.safeActiveElement(this.document[0])&&this.element.trigger("focus")})},menufocus:function(t,e){var i,n;return this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type))?(this.menu.blur(),void this.document.one("mousemove",function(){T(t.target).trigger(t.originalEvent)})):(n=e.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",t,{item:n})&&t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(n.value),void((i=e.item.attr("aria-label")||n.value)&&T.trim(i).length&&(this.liveRegion.children().hide(),T("<div>").text(i).appendTo(this.liveRegion))))},menuselect:function(t,e){var i=e.item.data("ui-autocomplete-item"),n=this.previous;this.element[0]!==T.ui.safeActiveElement(this.document[0])&&(this.element.trigger("focus"),this.previous=n,this._delay(function(){this.previous=n,this.selectedItem=i})),!1!==this._trigger("select",t,{item:i})&&this._value(i.value),this.term=this._value(),this.close(t),this.selectedItem=i}}),this.liveRegion=T("<div>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(t,e){this._super(t,e),"source"===t&&this._initSource(),"appendTo"===t&&this.menu.element.appendTo(this._appendTo()),"disabled"===t&&e&&this.xhr&&this.xhr.abort()},_isEventTargetInWidget:function(t){var e=this.menu.element[0];return t.target===this.element[0]||t.target===e||T.contains(e,t.target)},_closeOnClickOutside:function(t){this._isEventTargetInWidget(t)||this.close()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?T(t):this.document.find(t).eq(0)),t&&t[0]||(t=this.element.closest(".ui-front, dialog")),t.length||(t=this.document[0].body),t},_initSource:function(){var i,n,o=this;T.isArray(this.options.source)?(i=this.options.source,this.source=function(t,e){e(T.ui.autocomplete.filter(i,t.term))}):"string"==typeof this.options.source?(n=this.options.source,this.source=function(t,e){o.xhr&&o.xhr.abort(),o.xhr=T.ajax({url:n,data:t,dataType:"json",success:function(t){e(t)},error:function(){e([])}})}):this.source=this.options.source},_searchTimeout:function(n){clearTimeout(this.searching),this.searching=this._delay(function(){var t=this.term===this._value(),e=this.menu.element.is(":visible"),i=n.altKey||n.ctrlKey||n.metaKey||n.shiftKey;(!t||t&&!e&&!i)&&(this.selectedItem=null,this.search(null,n))},this.options.delay)},search:function(t,e){return t=null!=t?t:this._value(),this.term=this._value(),t.length<this.options.minLength?this.close(e):!1!==this._trigger("search",e)?this._search(t):void 0},_search:function(t){this.pending++,this._addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:t},this._response())},_response:function(){var e=++this.requestIndex;return T.proxy(function(t){e===this.requestIndex&&this.__response(t),this.pending--,this.pending||this._removeClass("ui-autocomplete-loading")},this)},__response:function(t){t&&(t=this._normalize(t)),this._trigger("response",null,{content:t}),!this.options.disabled&&t&&t.length&&!this.cancelSearch?(this._suggest(t),this._trigger("open")):this._close()},close:function(t){this.cancelSearch=!0,this._close(t)},_close:function(t){this._off(this.document,"mousedown"),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",t))},_change:function(t){this.previous!==this._value()&&this._trigger("change",t,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:T.map(t,function(t){return"string"==typeof t?{label:t,value:t}:T.extend({},t,{label:t.label||t.value,value:t.value||t.label})})},_suggest:function(t){var e=this.menu.element.empty();this._renderMenu(e,t),this.isNewMenu=!0,this.menu.refresh(),e.show(),this._resizeMenu(),e.position(T.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(),this._on(this.document,{mousedown:"_closeOnClickOutside"})},_resizeMenu:function(){var t=this.menu.element;t.outerWidth(Math.max(t.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(i,t){var n=this;T.each(t,function(t,e){n._renderItemData(i,e)})},_renderItemData:function(t,e){return this._renderItem(t,e).data("ui-autocomplete-item",e)},_renderItem:function(t,e){return T("<li>").append(T("<div>").text(e.label)).appendTo(t)},_move:function(t,e){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(t)||this.menu.isLastItem()&&/^next/.test(t)?(this.isMultiLine||this._value(this.term),void this.menu.blur()):void this.menu[t](e):void this.search(null,e)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(t,e){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(t,e),e.preventDefault())},_isContentEditable:function(t){if(!t.length)return!1;var e=t.prop("contentEditable");return"inherit"===e?this._isContentEditable(t.parent()):"true"===e}}),T.extend(T.ui.autocomplete,{escapeRegex:function(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,e){var i=RegExp(T.ui.autocomplete.escapeRegex(e),"i");return T.grep(t,function(t){return i.test(t.label||t.value||t)})}}),T.widget("ui.autocomplete",T.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(t){return t+(1<t?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(t){var e;this._superApply(arguments),this.options.disabled||this.cancelSearch||(e=t&&t.length?this.options.messages.results(t.length):this.options.messages.noResults,this.liveRegion.children().hide(),T("<div>").text(e).appendTo(this.liveRegion))}}),T.ui.autocomplete,T.widget("ui.checkboxradio",[T.ui.formResetMixin,{version:"1.12.1",options:{disabled:null,label:null,icon:!0,classes:{"ui-checkboxradio-label":"ui-corner-all","ui-checkboxradio-icon":"ui-corner-all"}},_getCreateOptions:function(){var t,e,i=this,n=this._super()||{};return this._readType(),e=this.element.labels(),this.label=T(e[e.length-1]),this.label.length||T.error("No label found for checkboxradio widget"),this.originalLabel="",this.label.contents().not(this.element[0]).each(function(){i.originalLabel+=3===this.nodeType?T(this).text():this.outerHTML}),this.originalLabel&&(n.label=this.originalLabel),null!=(t=this.element[0].disabled)&&(n.disabled=t),n},_create:function(){var t=this.element[0].checked;this._bindFormResetHandler(),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled),this._setOption("disabled",this.options.disabled),this._addClass("ui-checkboxradio","ui-helper-hidden-accessible"),this._addClass(this.label,"ui-checkboxradio-label","ui-button ui-widget"),"radio"===this.type&&this._addClass(this.label,"ui-checkboxradio-radio-label"),this.options.label&&this.options.label!==this.originalLabel?this._updateLabel():this.originalLabel&&(this.options.label=this.originalLabel),this._enhance(),t&&(this._addClass(this.label,"ui-checkboxradio-checked","ui-state-active"),this.icon&&this._addClass(this.icon,null,"ui-state-hover")),this._on({change:"_toggleClasses",focus:function(){this._addClass(this.label,null,"ui-state-focus ui-visual-focus")},blur:function(){this._removeClass(this.label,null,"ui-state-focus ui-visual-focus")}})},_readType:function(){var t=this.element[0].nodeName.toLowerCase();this.type=this.element[0].type,"input"===t&&/radio|checkbox/.test(this.type)||T.error("Can't create checkboxradio on element.nodeName="+t+" and element.type="+this.type)},_enhance:function(){this._updateIcon(this.element[0].checked)},widget:function(){return this.label},_getRadioGroup:function(){var t=this.element[0].name,e="input[name='"+T.ui.escapeSelector(t)+"']";return t?(this.form.length?T(this.form[0].elements).filter(e):T(e).filter(function(){return 0===T(this).form().length})).not(this.element):T([])},_toggleClasses:function(){var t=this.element[0].checked;this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",t),this.options.icon&&"checkbox"===this.type&&this._toggleClass(this.icon,null,"ui-icon-check ui-state-checked",t)._toggleClass(this.icon,null,"ui-icon-blank",!t),"radio"===this.type&&this._getRadioGroup().each(function(){var t=T(this).checkboxradio("instance");t&&t._removeClass(t.label,"ui-checkboxradio-checked","ui-state-active")})},_destroy:function(){this._unbindFormResetHandler(),this.icon&&(this.icon.remove(),this.iconSpace.remove())},_setOption:function(t,e){return"label"!==t||e?(this._super(t,e),"disabled"===t?(this._toggleClass(this.label,null,"ui-state-disabled",e),void(this.element[0].disabled=e)):void this.refresh()):void 0},_updateIcon:function(t){var e="ui-icon ui-icon-background ";this.options.icon?(this.icon||(this.icon=T("<span>"),this.iconSpace=T("<span> </span>"),this._addClass(this.iconSpace,"ui-checkboxradio-icon-space")),"checkbox"===this.type?(e+=t?"ui-icon-check ui-state-checked":"ui-icon-blank",this._removeClass(this.icon,null,t?"ui-icon-blank":"ui-icon-check")):e+="ui-icon-blank",this._addClass(this.icon,"ui-checkboxradio-icon",e),t||this._removeClass(this.icon,null,"ui-icon-check ui-state-checked"),this.icon.prependTo(this.label).after(this.iconSpace)):void 0!==this.icon&&(this.icon.remove(),this.iconSpace.remove(),delete this.icon)},_updateLabel:function(){var t=this.label.contents().not(this.element[0]);this.icon&&(t=t.not(this.icon[0])),this.iconSpace&&(t=t.not(this.iconSpace[0])),t.remove(),this.label.append(this.options.label)},refresh:function(){var t=this.element[0].checked,e=this.element[0].disabled;this._updateIcon(t),this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",t),null!==this.options.label&&this._updateLabel(),e!==this.options.disabled&&this._setOptions({disabled:e})}}]),T.ui.checkboxradio;var s=/ui-corner-([a-z]){2,6}/g;T.widget("ui.controlgroup",{version:"1.12.1",defaultElement:"<div>",options:{direction:"horizontal",disabled:null,onlyVisible:!0,items:{button:"input[type=button], input[type=submit], input[type=reset], button, a",controlgroupLabel:".ui-controlgroup-label",checkboxradio:"input[type='checkbox'], input[type='radio']",selectmenu:"select",spinner:".ui-spinner-input"}},_create:function(){this._enhance()},_enhance:function(){this.element.attr("role","toolbar"),this.refresh()},_destroy:function(){this._callChildMethod("destroy"),this.childWidgets.removeData("ui-controlgroup-data"),this.element.removeAttr("role"),this.options.items.controlgroupLabel&&this.element.find(this.options.items.controlgroupLabel).find(".ui-controlgroup-label-contents").contents().unwrap()},_initWidgets:function(){var s=this,a=[];T.each(this.options.items,function(o,t){var e,r={};return t?"controlgroupLabel"===o?((e=s.element.find(t)).each(function(){var t=T(this);t.children(".ui-controlgroup-label-contents").length||t.contents().wrapAll("<span class='ui-controlgroup-label-contents'></span>")}),s._addClass(e,null,"ui-widget ui-widget-content ui-state-default"),void(a=a.concat(e.get()))):void(T.fn[o]&&(r=s["_"+o+"Options"]?s["_"+o+"Options"]("middle"):{classes:{}},s.element.find(t).each(function(){var t=T(this),e=t[o]("instance"),i=T.widget.extend({},r);if("button"!==o||!t.parent(".ui-spinner").length){e||(e=t[o]()[o]("instance")),e&&(i.classes=s._resolveClassesValues(i.classes,e)),t[o](i);var n=t[o]("widget");T.data(n[0],"ui-controlgroup-data",e||t[o]("instance")),a.push(n[0])}}))):void 0}),this.childWidgets=T(T.unique(a)),this._addClass(this.childWidgets,"ui-controlgroup-item")},_callChildMethod:function(e){this.childWidgets.each(function(){var t=T(this).data("ui-controlgroup-data");t&&t[e]&&t[e]()})},_updateCornerClass:function(t,e){var i=this._buildSimpleOptions(e,"label").classes.label;this._removeClass(t,null,"ui-corner-top ui-corner-bottom ui-corner-left ui-corner-right ui-corner-all"),this._addClass(t,null,i)},_buildSimpleOptions:function(t,e){var i="vertical"===this.options.direction,n={classes:{}};return n.classes[e]={middle:"",first:"ui-corner-"+(i?"top":"left"),last:"ui-corner-"+(i?"bottom":"right"),only:"ui-corner-all"}[t],n},_spinnerOptions:function(t){var e=this._buildSimpleOptions(t,"ui-spinner");return e.classes["ui-spinner-up"]="",e.classes["ui-spinner-down"]="",e},_buttonOptions:function(t){return this._buildSimpleOptions(t,"ui-button")},_checkboxradioOptions:function(t){return this._buildSimpleOptions(t,"ui-checkboxradio-label")},_selectmenuOptions:function(t){var e="vertical"===this.options.direction;return{width:!!e&&"auto",classes:{middle:{"ui-selectmenu-button-open":"","ui-selectmenu-button-closed":""},first:{"ui-selectmenu-button-open":"ui-corner-"+(e?"top":"tl"),"ui-selectmenu-button-closed":"ui-corner-"+(e?"top":"left")},last:{"ui-selectmenu-button-open":e?"":"ui-corner-tr","ui-selectmenu-button-closed":"ui-corner-"+(e?"bottom":"right")},only:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"}}[t]}},_resolveClassesValues:function(i,n){var o={};return T.each(i,function(t){var e=n.options.classes[t]||"";e=T.trim(e.replace(s,"")),o[t]=(e+" "+i[t]).replace(/\s+/g," ")}),o},_setOption:function(t,e){return"direction"===t&&this._removeClass("ui-controlgroup-"+this.options.direction),this._super(t,e),"disabled"===t?void this._callChildMethod(e?"disable":"enable"):void this.refresh()},refresh:function(){var o,r=this;this._addClass("ui-controlgroup ui-controlgroup-"+this.options.direction),"horizontal"===this.options.direction&&this._addClass(null,"ui-helper-clearfix"),this._initWidgets(),o=this.childWidgets,this.options.onlyVisible&&(o=o.filter(":visible")),o.length&&(T.each(["first","last"],function(t,e){var i=o[e]().data("ui-controlgroup-data");if(i&&r["_"+i.widgetName+"Options"]){var n=r["_"+i.widgetName+"Options"](1===o.length?"only":e);n.classes=r._resolveClassesValues(n.classes,i),i.element[i.widgetName](n)}else r._updateCornerClass(o[e](),e)}),this._callChildMethod("refresh"))}}),T.widget("ui.slider",T.ui.mouse,{version:"1.12.1",widgetEventPrefix:"slide",options:{animate:!1,classes:{"ui-slider":"ui-corner-all","ui-slider-handle":"ui-corner-all","ui-slider-range":"ui-corner-all ui-widget-header"},distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this._addClass("ui-slider ui-slider-"+this.orientation,"ui-widget ui-widget-content"),this._refresh(),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var t,e,i=this.options,n=this.element.find(".ui-slider-handle"),o=[];for(e=i.values&&i.values.length||1,n.length>e&&(n.slice(e).remove(),n=n.slice(0,e)),t=n.length;t<e;t++)o.push("<span tabindex='0'></span>");this.handles=n.add(T(o.join("")).appendTo(this.element)),this._addClass(this.handles,"ui-slider-handle","ui-state-default"),this.handle=this.handles.eq(0),this.handles.each(function(t){T(this).data("ui-slider-handle-index",t).attr("tabIndex",0)})},_createRange:function(){var t=this.options;t.range?(!0===t.range&&(t.values?t.values.length&&2!==t.values.length?t.values=[t.values[0],t.values[0]]:T.isArray(t.values)&&(t.values=t.values.slice(0)):t.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?(this._removeClass(this.range,"ui-slider-range-min ui-slider-range-max"),this.range.css({left:"",bottom:""})):(this.range=T("<div>").appendTo(this.element),this._addClass(this.range,"ui-slider-range")),("min"===t.range||"max"===t.range)&&this._addClass(this.range,"ui-slider-range-"+t.range)):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this._mouseDestroy()},_mouseCapture:function(t){var e,i,n,o,r,s,a,l=this,c=this.options;return!c.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),e={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(e),n=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var e=Math.abs(i-l.values(t));(e<n||n===e&&(t===l._lastChangedValue||l.values(t)===c.min))&&(n=e,o=T(this),r=t)}),!1!==this._start(t,r)&&(this._mouseSliding=!0,this._handleIndex=r,this._addClass(o,null,"ui-state-active"),o.trigger("focus"),s=o.offset(),a=!T(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=a?{left:0,top:0}:{left:t.pageX-s.left-o.width()/2,top:t.pageY-s.top-o.height()/2-(parseInt(o.css("borderTopWidth"),10)||0)-(parseInt(o.css("borderBottomWidth"),10)||0)+(parseInt(o.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,r,i),this._animateOff=!0))},_mouseStart:function(){return!0},_mouseDrag:function(t){var e={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(e);return this._slide(t,this._handleIndex,i),!1},_mouseStop:function(t){return this._removeClass(this.handles,null,"ui-state-active"),this._mouseSliding=!1,this._stop(t,this._handleIndex),this._change(t,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(t){var e,i,n,o;return 1<(i=("horizontal"===this.orientation?(e=this.elementSize.width,t.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(e=this.elementSize.height,t.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)))/e)&&(i=1),i<0&&(i=0),"vertical"===this.orientation&&(i=1-i),n=this._valueMax()-this._valueMin(),o=this._valueMin()+i*n,this._trimAlignValue(o)},_uiHash:function(t,e,i){var n={handle:this.handles[t],handleIndex:t,value:void 0!==e?e:this.value()};return this._hasMultipleValues()&&(n.value=void 0!==e?e:this.values(t),n.values=i||this.values()),n},_hasMultipleValues:function(){return this.options.values&&this.options.values.length},_start:function(t,e){return this._trigger("start",t,this._uiHash(e))},_slide:function(t,e,i){var n,o=this.value(),r=this.values();this._hasMultipleValues()&&(n=this.values(e?0:1),o=this.values(e),2===this.options.values.length&&!0===this.options.range&&(i=0===e?Math.min(n,i):Math.max(n,i)),r[e]=i),i!==o&&(!1!==this._trigger("slide",t,this._uiHash(e,i,r))&&(this._hasMultipleValues()?this.values(e,i):this.value(i)))},_stop:function(t,e){this._trigger("stop",t,this._uiHash(e))},_change:function(t,e){this._keySliding||this._mouseSliding||(this._lastChangedValue=e,this._trigger("change",t,this._uiHash(e)))},value:function(t){return arguments.length?(this.options.value=this._trimAlignValue(t),this._refreshValue(),void this._change(null,0)):this._value()},values:function(t,e){var i,n,o;if(1<arguments.length)return this.options.values[t]=this._trimAlignValue(e),this._refreshValue(),void this._change(null,t);if(!arguments.length)return this._values();if(!T.isArray(t))return this._hasMultipleValues()?this._values(t):this.value();for(i=this.options.values,n=t,o=0;i.length>o;o+=1)i[o]=this._trimAlignValue(n[o]),this._change(null,o);this._refreshValue()},_setOption:function(t,e){var i,n=0;switch("range"===t&&!0===this.options.range&&("min"===e?(this.options.value=this._values(0),this.options.values=null):"max"===e&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),T.isArray(this.options.values)&&(n=this.options.values.length),this._super(t,e),t){case"orientation":this._detectOrientation(),this._removeClass("ui-slider-horizontal ui-slider-vertical")._addClass("ui-slider-"+this.orientation),this._refreshValue(),this.options.range&&this._refreshRange(e),this.handles.css("horizontal"===e?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),i=n-1;0<=i;i--)this._change(null,i);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_setOptionDisabled:function(t){this._super(t),this._toggleClass(null,"ui-state-disabled",!!t)},_value:function(){var t=this.options.value;return this._trimAlignValue(t)},_values:function(t){var e,i,n;if(arguments.length)return e=this.options.values[t],this._trimAlignValue(e);if(this._hasMultipleValues()){for(i=this.options.values.slice(),n=0;i.length>n;n+=1)i[n]=this._trimAlignValue(i[n]);return i}return[]},_trimAlignValue:function(t){if(this._valueMin()>=t)return this._valueMin();if(t>=this._valueMax())return this._valueMax();var e=0<this.options.step?this.options.step:1,i=(t-this._valueMin())%e,n=t-i;return 2*Math.abs(i)>=e&&(n+=0<i?e:-e),parseFloat(n.toFixed(5))},_calculateNewMax:function(){var t=this.options.max,e=this._valueMin(),i=this.options.step;(t=Math.round((t-e)/i)*i+e)>this.options.max&&(t-=i),this.max=parseFloat(t.toFixed(this._precision()))},_precision:function(){var t=this._precisionOf(this.options.step);return null!==this.options.min&&(t=Math.max(t,this._precisionOf(this.options.min))),t},_precisionOf:function(t){var e=""+t,i=e.indexOf(".");return-1===i?0:e.length-i-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshRange:function(t){"vertical"===t&&this.range.css({width:"",left:""}),"horizontal"===t&&this.range.css({height:"",bottom:""})},_refreshValue:function(){var e,i,t,n,o,r=this.options.range,s=this.options,a=this,l=!this._animateOff&&s.animate,c={};this._hasMultipleValues()?this.handles.each(function(t){i=(a.values(t)-a._valueMin())/(a._valueMax()-a._valueMin())*100,c["horizontal"===a.orientation?"left":"bottom"]=i+"%",T(this).stop(1,1)[l?"animate":"css"](c,s.animate),!0===a.options.range&&("horizontal"===a.orientation?(0===t&&a.range.stop(1,1)[l?"animate":"css"]({left:i+"%"},s.animate),1===t&&a.range[l?"animate":"css"]({width:i-e+"%"},{queue:!1,duration:s.animate})):(0===t&&a.range.stop(1,1)[l?"animate":"css"]({bottom:i+"%"},s.animate),1===t&&a.range[l?"animate":"css"]({height:i-e+"%"},{queue:!1,duration:s.animate}))),e=i}):(t=this.value(),n=this._valueMin(),o=this._valueMax(),i=o!==n?(t-n)/(o-n)*100:0,c["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[l?"animate":"css"](c,s.animate),"min"===r&&"horizontal"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({width:i+"%"},s.animate),"max"===r&&"horizontal"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({width:100-i+"%"},s.animate),"min"===r&&"vertical"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({height:i+"%"},s.animate),"max"===r&&"vertical"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({height:100-i+"%"},s.animate))},_handleEvents:{keydown:function(t){var e,i,n,o=T(t.target).data("ui-slider-handle-index");switch(t.keyCode){case T.ui.keyCode.HOME:case T.ui.keyCode.END:case T.ui.keyCode.PAGE_UP:case T.ui.keyCode.PAGE_DOWN:case T.ui.keyCode.UP:case T.ui.keyCode.RIGHT:case T.ui.keyCode.DOWN:case T.ui.keyCode.LEFT:if(t.preventDefault(),!this._keySliding&&(this._keySliding=!0,this._addClass(T(t.target),null,"ui-state-active"),!1===this._start(t,o)))return}switch(n=this.options.step,e=i=this._hasMultipleValues()?this.values(o):this.value(),t.keyCode){case T.ui.keyCode.HOME:i=this._valueMin();break;case T.ui.keyCode.END:i=this._valueMax();break;case T.ui.keyCode.PAGE_UP:i=this._trimAlignValue(e+(this._valueMax()-this._valueMin())/this.numPages);break;case T.ui.keyCode.PAGE_DOWN:i=this._trimAlignValue(e-(this._valueMax()-this._valueMin())/this.numPages);break;case T.ui.keyCode.UP:case T.ui.keyCode.RIGHT:if(e===this._valueMax())return;i=this._trimAlignValue(e+n);break;case T.ui.keyCode.DOWN:case T.ui.keyCode.LEFT:if(e===this._valueMin())return;i=this._trimAlignValue(e-n)}this._slide(t,o,i)},keyup:function(t){var e=T(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,e),this._change(t,e),this._removeClass(T(t.target),null,"ui-state-active"))}}})}),function(e){function i(t,e){if(!(1<t.originalEvent.touches.length)){var i=t.originalEvent.changedTouches[0],n=document.createEvent("MouseEvents");n.initMouseEvent(e,!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),t.target.dispatchEvent(n)}}if(e.support.touch="ontouchend"in document,e.support.touch){var n,t=e.ui.mouse.prototype,o=t._mouseInit,r=t._mouseDestroy;t._touchStart=function(t){!n&&this._mouseCapture(t.originalEvent.changedTouches[0])&&(n=!0,this._touchMoved=!1,i(t,"mouseover"),i(t,"mousemove"),i(t,"mousedown"))},t._touchMove=function(t){n&&(this._touchMoved=!0,i(t,"mousemove"))},t._touchEnd=function(t){n&&(i(t,"mouseup"),i(t,"mouseout"),n=!1)},t._mouseInit=function(){var t=this;t.element.bind({touchstart:e.proxy(t,"_touchStart"),touchmove:e.proxy(t,"_touchMove"),touchend:e.proxy(t,"_touchEnd")}),o.call(t)},t._mouseDestroy=function(){var t=this;t.element.unbind({touchstart:e.proxy(t,"_touchStart"),touchmove:e.proxy(t,"_touchMove"),touchend:e.proxy(t,"_touchEnd")}),r.call(t)}}}(jQuery),function(f){var p=f.ui.ddmanager.prepareOffsets;f.ui.ddmanager.prepareOffsets=function(t){p.apply(this,arguments);for(var e,i=f.ui.ddmanager.droppables[t.options.scope]||[],n=0;n<i.length;n++)if((e=i[n].document[0])!==document){var o=f((e.defaultView||e.parentWindow).frameElement),r=o.offset(),s=i[n].element,a={top:o.contents().scrollTop(),left:o.contents().scrollLeft()};a.right=a.left+o.width(),a.bottom=a.top+o.height();var l=s.offset();if(l.right=l.left+s.outerWidth(),l.bottom=l.top+s.outerHeight(),a.right<l.left||a.left>l.right||a.bottom<l.top||a.top>l.bottom){i[n].proportions().height=0;continue}var c=l.top-o.contents().scrollTop();c=c<0?0:c;var u=l.left-o.contents().scrollLeft();u=u<0?0:u;var h=l.top+s.height()-o.contents().scrollTop();h=h>o.height()?o.height():h;var d=l.left+s.width()-o.contents().scrollLeft();d=d>o.width()?o.width():d,i[n].offset.top=r.top+c,i[n].offset.left=r.left+u,i[n].proportions({width:d-u,height:h-c})}},f.ui.plugin.add("draggable","iframeScroll",{drag:function(o,t,r){var s=r.options,e=!0===s.iframeFix?"iframe":s.iframeFix;r.document.find(e).each(function(){var t,e=!1,i=f(this),n=i.offset();n.width=i.width(),n.height=i.height(),n.left<o.pageX&&o.pageX<n.left+n.width&&n.top<o.pageY&&o.pageY<n.top+s.scrollSensitivity&&(e=(t=i.contents()).scrollTop(t.scrollTop()-s.scrollSpeed)),n.left<o.pageX&&o.pageX<n.left+n.width&&n.top+n.height-s.scrollSensitivity<o.pageY&&o.pageY<n.top+n.height&&(e=(t=i.contents()).scrollTop(t.scrollTop()+s.scrollSpeed)),n.left<o.pageX&&o.pageX<n.left+s.scrollSensitivity&&n.top<o.pageY&&o.pageY<n.top+n.height&&(e=(t=i.contents()).scrollLeft(t.scrollLeft()-s.scrollSpeed)),n.left+n.width-s.scrollSensitivity<o.pageX&&o.pageX<n.left+n.width&&n.top<o.pageY&&o.pageY<n.top+n.height&&(e=(t=i.contents()).scrollLeft(t.scrollLeft()+s.scrollSpeed)),!1!==e&&f.ui.ddmanager&&!s.dropBehaviour&&f.ui.ddmanager.prepareOffsets(r,o),clearTimeout(r.scrollTimer),r._mouseStarted&&(r.scrollTimer=setTimeout(function(){r._trigger("drag",o),f.ui.ddmanager&&f.ui.ddmanager.drag(r,o)},10))})},stop:function(t,e,i){clearInterval(i.scrollTimer)}})}(window.jQuery),function(r,a,t,w){"use strict";function l(t,e,i){return setTimeout(o(t,i),e)}function n(t,e,i){return!!Array.isArray(t)&&(s(t,i[e],i),!0)}function s(t,e,i){var n;if(t)if(t.forEach)t.forEach(e,i);else if(t.length!==w)for(n=0;n<t.length;)e.call(i,t[n],n,t),n++;else for(n in t)t.hasOwnProperty(n)&&e.call(i,t[n],n,t)}function e(n,t,e){var o="DEPRECATED METHOD: "+t+"\n"+e+" AT \n";return function(){var t=new Error("get-stack-trace"),e=t&&t.stack?t.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",i=r.console&&(r.console.warn||r.console.log);return i&&i.call(r.console,o,e),n.apply(this,arguments)}}function i(t,e,i){var n,o=e.prototype;(n=t.prototype=Object.create(o)).constructor=t,n._super=o,i&&G(n,i)}function o(t,e){return function(){return t.apply(e,arguments)}}function c(t,e){return typeof t==tt?t.apply(e&&e[0]||w,e):t}function u(t,e){return t===w?e:t}function h(e,t,i){s(p(t),function(t){e.addEventListener(t,i,!1)})}function d(e,t,i){s(p(t),function(t){e.removeEventListener(t,i,!1)})}function k(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function f(t,e){return-1<t.indexOf(e)}function p(t){return t.trim().split(/\s+/g)}function m(t,e,i){if(t.indexOf&&!i)return t.indexOf(e);for(var n=0;n<t.length;){if(i&&t[n][i]==e||!i&&t[n]===e)return n;n++}return-1}function g(t){return Array.prototype.slice.call(t,0)}function v(t,i,e){for(var n=[],o=[],r=0;r<t.length;){var s=i?t[r][i]:t[r];m(o,s)<0&&n.push(t[r]),o[r]=s,r++}return e&&(n=i?n.sort(function(t,e){return t[i]>e[i]}):n.sort()),n}function y(t,e){for(var i,n,o=e[0].toUpperCase()+e.slice(1),r=0;r<Z.length;){if((n=(i=Z[r])?i+o:e)in t)return n;r++}return w}function b(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||r}function _(e,t){var i=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){c(e.options.enable,[e])&&i.handler(t)},this.init()}function x(t,e,i){var n=i.pointers.length,o=i.changedPointers.length,r=e&ft&&n-o==0,s=e&(pt|mt)&&n-o==0;i.isFirst=!!r,i.isFinal=!!s,r&&(t.session={}),i.eventType=e,function(t,e){var i=t.session,n=e.pointers,o=n.length;i.firstInput||(i.firstInput=C(e)),1<o&&!i.firstMultiple?i.firstMultiple=C(e):1===o&&(i.firstMultiple=!1);var r=i.firstInput,s=i.firstMultiple,a=s?s.center:r.center,l=e.center=D(n);e.timeStamp=nt(),e.deltaTime=e.timeStamp-r.timeStamp,e.angle=S(a,l),e.distance=E(a,l),c=i,u=e,h=u.center,d=c.offsetDelta||{},f=c.prevDelta||{},p=c.prevInput||{},u.eventType!==ft&&p.eventType!==pt||(f=c.prevDelta={x:p.deltaX||0,y:p.deltaY||0},d=c.offsetDelta={x:h.x,y:h.y}),u.deltaX=f.x+(h.x-d.x),u.deltaY=f.y+(h.y-d.y),e.offsetDirection=O(e.deltaX,e.deltaY);var c,u,h,d,f,p;var m=T(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=m.x,e.overallVelocityY=m.y,e.overallVelocity=it(m.x)>it(m.y)?m.x:m.y,e.scale=s?(y=s.pointers,b=n,E(b[0],b[1],Dt)/E(y[0],y[1],Dt)):1,e.rotation=s?(g=s.pointers,v=n,S(v[1],v[0],Dt)+S(g[1],g[0],Dt)):0,e.maxPointers=i.prevInput?e.pointers.length>i.prevInput.maxPointers?e.pointers.length:i.prevInput.maxPointers:e.pointers.length,function(t,e){var i,n,o,r,s=t.lastInterval||e,a=e.timeStamp-s.timeStamp;if(e.eventType!=mt&&(dt<a||s.velocity===w)){var l=e.deltaX-s.deltaX,c=e.deltaY-s.deltaY,u=T(a,l,c);n=u.x,o=u.y,i=it(u.x)>it(u.y)?u.x:u.y,r=O(l,c),t.lastInterval=e}else i=s.velocity,n=s.velocityX,o=s.velocityY,r=s.direction;e.velocity=i,e.velocityX=n,e.velocityY=o,e.direction=r}(i,e);var g,v;var y,b;var _=t.element;k(e.srcEvent.target,_)&&(_=e.srcEvent.target),e.target=_}(t,i),t.emit("hammer.input",i),t.recognize(i),t.session.prevInput=i}function C(t){for(var e=[],i=0;i<t.pointers.length;)e[i]={clientX:et(t.pointers[i].clientX),clientY:et(t.pointers[i].clientY)},i++;return{timeStamp:nt(),pointers:e,center:D(e),deltaX:t.deltaX,deltaY:t.deltaY}}function D(t){var e=t.length;if(1===e)return{x:et(t[0].clientX),y:et(t[0].clientY)};for(var i=0,n=0,o=0;o<e;)i+=t[o].clientX,n+=t[o].clientY,o++;return{x:et(i/e),y:et(n/e)}}function T(t,e,i){return{x:e/t||0,y:i/t||0}}function O(t,e){return t===e?gt:it(t)>=it(e)?t<0?vt:yt:e<0?bt:_t}function E(t,e,i){i||(i=Ct);var n=e[i[0]]-t[i[0]],o=e[i[1]]-t[i[1]];return Math.sqrt(n*n+o*o)}function S(t,e,i){i||(i=Ct);var n=e[i[0]]-t[i[0]],o=e[i[1]]-t[i[1]];return 180*Math.atan2(o,n)/Math.PI}function M(){this.evEl=Ot,this.evWin=Et,this.pressed=!1,_.apply(this,arguments)}function I(){this.evEl=It,this.evWin=At,_.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function A(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,_.apply(this,arguments)}function P(){this.evTarget=jt,this.targetIds={},_.apply(this,arguments)}function N(){_.apply(this,arguments);var t=o(this.handler,this);this.touch=new P(this.manager,t),this.mouse=new M(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function j(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var i={x:e.clientX,y:e.clientY};this.lastTouches.push(i);var n=this.lastTouches;setTimeout(function(){var t=n.indexOf(i);-1<t&&n.splice(t,1)},Lt)}}function L(t,e){this.manager=t,this.set(e)}function F(t){this.options=G({},this.defaults,t||{}),this.id=st++,this.manager=null,this.options.enable=u(this.options.enable,!0),this.state=Wt,this.simultaneous={},this.requireFail=[]}function B(t){return 16&t?"cancel":8&t?"end":4&t?"move":2&t?"start":""}function q(t){return t==_t?"down":t==bt?"up":t==vt?"left":t==yt?"right":""}function V(t,e){var i=e.manager;return i?i.get(t):t}function R(){F.apply(this,arguments)}function H(){R.apply(this,arguments),this.pX=null,this.pY=null}function z(){R.apply(this,arguments)}function $(){F.apply(this,arguments),this._timer=null,this._input=null}function W(){R.apply(this,arguments)}function U(){R.apply(this,arguments)}function Q(){F.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Y(t,e){return(e=e||{}).recognizers=u(e.recognizers,Y.defaults.preset),new X(t,e)}function X(t,e){var i;this.options=G({},Y.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new((i=this).options.inputClass||(lt?I:ct?P:at?N:M))(i,x),this.touchAction=new L(this,this.options.touchAction),K(this,!0),s(this.options.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function K(i,n){var o,r=i.element;r.style&&(s(i.options.cssProps,function(t,e){o=y(r.style,e),r.style[o]=n?(i.oldCssProps[o]=r.style[o],t):i.oldCssProps[o]||""}),n||(i.oldCssProps={}))}var G,Z=["","webkit","Moz","MS","ms","o"],J=a.createElement("div"),tt="function",et=Math.round,it=Math.abs,nt=Date.now;G="function"!=typeof Object.assign?function(t){if(t===w||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),i=1;i<arguments.length;i++){var n=arguments[i];if(n!==w&&null!==n)for(var o in n)n.hasOwnProperty(o)&&(e[o]=n[o])}return e}:Object.assign;var ot=e(function(t,e,i){for(var n=Object.keys(e),o=0;o<n.length;)(!i||i&&t[n[o]]===w)&&(t[n[o]]=e[n[o]]),o++;return t},"extend","Use `assign`."),rt=e(function(t,e){return ot(t,e,!0)},"merge","Use `assign`."),st=1,at="ontouchstart"in r,lt=y(r,"PointerEvent")!==w,ct=at&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),ut="touch",ht="mouse",dt=25,ft=1,pt=4,mt=8,gt=1,vt=2,yt=4,bt=8,_t=16,wt=vt|yt,kt=bt|_t,xt=wt|kt,Ct=["x","y"],Dt=["clientX","clientY"];_.prototype={handler:function(){},init:function(){this.evEl&&h(this.element,this.evEl,this.domHandler),this.evTarget&&h(this.target,this.evTarget,this.domHandler),this.evWin&&h(b(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&d(this.element,this.evEl,this.domHandler),this.evTarget&&d(this.target,this.evTarget,this.domHandler),this.evWin&&d(b(this.element),this.evWin,this.domHandler)}};var Tt={mousedown:ft,mousemove:2,mouseup:pt},Ot="mousedown",Et="mousemove mouseup";i(M,_,{handler:function(t){var e=Tt[t.type];e&ft&&0===t.button&&(this.pressed=!0),2&e&&1!==t.which&&(e=pt),this.pressed&&(e&pt&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:ht,srcEvent:t}))}});var St={pointerdown:ft,pointermove:2,pointerup:pt,pointercancel:mt,pointerout:mt},Mt={2:ut,3:"pen",4:ht,5:"kinect"},It="pointerdown",At="pointermove pointerup pointercancel";r.MSPointerEvent&&!r.PointerEvent&&(It="MSPointerDown",At="MSPointerMove MSPointerUp MSPointerCancel"),i(I,_,{handler:function(t){var e=this.store,i=!1,n=t.type.toLowerCase().replace("ms",""),o=St[n],r=Mt[t.pointerType]||t.pointerType,s=r==ut,a=m(e,t.pointerId,"pointerId");o&ft&&(0===t.button||s)?a<0&&(e.push(t),a=e.length-1):o&(pt|mt)&&(i=!0),a<0||(e[a]=t,this.callback(this.manager,o,{pointers:e,changedPointers:[t],pointerType:r,srcEvent:t}),i&&e.splice(a,1))}});var Pt={touchstart:ft,touchmove:2,touchend:pt,touchcancel:mt};i(A,_,{handler:function(t){var e=Pt[t.type];if(e===ft&&(this.started=!0),this.started){var i=function(t,e){var i=g(t.touches),n=g(t.changedTouches);return e&(pt|mt)&&(i=v(i.concat(n),"identifier",!0)),[i,n]}.call(this,t,e);e&(pt|mt)&&i[0].length-i[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:ut,srcEvent:t})}}});var Nt={touchstart:ft,touchmove:2,touchend:pt,touchcancel:mt},jt="touchstart touchmove touchend touchcancel";i(P,_,{handler:function(t){var e=Nt[t.type],i=function(t,e){var i=g(t.touches),n=this.targetIds;if(e&(2|ft)&&1===i.length)return n[i[0].identifier]=!0,[i,i];var o,r,s=g(t.changedTouches),a=[],l=this.target;if(r=i.filter(function(t){return k(t.target,l)}),e===ft)for(o=0;o<r.length;)n[r[o].identifier]=!0,o++;for(o=0;o<s.length;)n[s[o].identifier]&&a.push(s[o]),e&(pt|mt)&&delete n[s[o].identifier],o++;return a.length?[v(r.concat(a),"identifier",!0),a]:void 0}.call(this,t,e);i&&this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:ut,srcEvent:t})}});var Lt=2500;i(N,_,{handler:function(t,e,i){var n=i.pointerType==ut,o=i.pointerType==ht;if(!(o&&i.sourceCapabilities&&i.sourceCapabilities.firesTouchEvents)){if(n)(function(t,e){t&ft?(this.primaryTouch=e.changedPointers[0].identifier,j.call(this,e)):t&(pt|mt)&&j.call(this,e)}).call(this,e,i);else if(o&&function(t){for(var e=t.srcEvent.clientX,i=t.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var o=this.lastTouches[n],r=Math.abs(e-o.x),s=Math.abs(i-o.y);if(r<=25&&s<=25)return!0}return!1}.call(this,i))return;this.callback(t,e,i)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Ft=y(J.style,"touchAction"),Bt=Ft!==w,qt="compute",Vt="manipulation",Rt="none",Ht="pan-x",zt="pan-y",$t=function(){if(!Bt)return!1;var e={},i=r.CSS&&r.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(t){e[t]=!i||r.CSS.supports("touch-action",t)}),e}();L.prototype={set:function(t){t==qt&&(t=this.compute()),Bt&&this.manager.element.style&&$t[t]&&(this.manager.element.style[Ft]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return s(this.manager.recognizers,function(t){c(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))}),function(t){if(f(t,Rt))return Rt;var e=f(t,Ht),i=f(t,zt);return e&&i?Rt:e||i?e?Ht:zt:f(t,Vt)?Vt:"auto"}(e.join(" "))},preventDefaults:function(t){var e=t.srcEvent,i=t.offsetDirection;if(!this.manager.session.prevented){var n=this.actions,o=f(n,Rt)&&!$t[Rt],r=f(n,zt)&&!$t[zt],s=f(n,Ht)&&!$t[Ht];if(o){var a=1===t.pointers.length,l=t.distance<2,c=t.deltaTime<250;if(a&&l&&c)return}return s&&r?void 0:o||r&&i&wt||s&&i&kt?this.preventSrc(e):void 0}e.preventDefault()},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var Wt=1;F.prototype={defaults:{},set:function(t){return G(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(n(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=V(t,this)).id]||(e[t.id]=t).recognizeWith(this),this},dropRecognizeWith:function(t){return n(t,"dropRecognizeWith",this)||(t=V(t,this),delete this.simultaneous[t.id]),this},requireFailure:function(t){if(n(t,"requireFailure",this))return this;var e=this.requireFail;return-1===m(e,t=V(t,this))&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(n(t,"dropRequireFailure",this))return this;t=V(t,this);var e=m(this.requireFail,t);return-1<e&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return 0<this.requireFail.length},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(e){function t(t){i.manager.emit(t,e)}var i=this,n=this.state;n<8&&t(i.options.event+B(n)),t(i.options.event),e.additionalEvent&&t(e.additionalEvent),8<=n&&t(i.options.event+B(n))},tryEmit:function(t){return this.canEmit()?this.emit(t):void(this.state=32)},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(32|Wt)))return!1;t++}return!0},recognize:function(t){var e=G({},t);return c(this.options.enable,[this,e])?(56&this.state&&(this.state=Wt),this.state=this.process(e),void(30&this.state&&this.tryEmit(e))):(this.reset(),void(this.state=32))},process:function(t){},getTouchAction:function(){},reset:function(){}},i(R,F,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,i=t.eventType,n=6&e,o=this.attrTest(t);return n&&(i&mt||!o)?16|e:n||o?i&pt?8|e:2&e?4|e:2:32}}),i(H,R,{defaults:{event:"pan",threshold:10,pointers:1,direction:xt},getTouchAction:function(){var t=this.options.direction,e=[];return t&wt&&e.push(zt),t&kt&&e.push(Ht),e},directionTest:function(t){var e=this.options,i=!0,n=t.distance,o=t.direction,r=t.deltaX,s=t.deltaY;return o&e.direction||(n=e.direction&wt?(o=0===r?gt:r<0?vt:yt,i=r!=this.pX,Math.abs(t.deltaX)):(o=0===s?gt:s<0?bt:_t,i=s!=this.pY,Math.abs(t.deltaY))),t.direction=o,i&&n>e.threshold&&o&e.direction},attrTest:function(t){return R.prototype.attrTest.call(this,t)&&(2&this.state||!(2&this.state)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=q(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),i(z,R,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Rt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||2&this.state)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),i($,F,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,o=t.deltaTime>e.time;if(this._input=t,!n||!i||t.eventType&(pt|mt)&&!o)this.reset();else if(t.eventType&ft)this.reset(),this._timer=l(function(){this.state=8,this.tryEmit()},e.time,this);else if(t.eventType&pt)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(t){8===this.state&&(t&&t.eventType&pt?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=nt(),this.manager.emit(this.options.event,this._input)))}}),i(W,R,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Rt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||2&this.state)}}),i(U,R,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:wt|kt,pointers:1},getTouchAction:function(){return H.prototype.getTouchAction.call(this)},attrTest:function(t){var e,i=this.options.direction;return i&(wt|kt)?e=t.overallVelocity:i&wt?e=t.overallVelocityX:i&kt&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&i&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&it(e)>this.options.velocity&&t.eventType&pt},emit:function(t){var e=q(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),i(Q,F,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Vt]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,o=t.deltaTime<e.time;if(this.reset(),t.eventType&ft&&0===this.count)return this.failTimeout();if(n&&o&&i){if(t.eventType!=pt)return this.failTimeout();var r=!this.pTime||t.timeStamp-this.pTime<e.interval,s=!this.pCenter||E(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,s&&r?this.count+=1:this.count=1,this._input=t,0===this.count%e.taps)return this.hasRequireFailures()?(this._timer=l(function(){this.state=8,this.tryEmit()},e.interval,this),2):8}return 32},failTimeout:function(){return this._timer=l(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Y.VERSION="2.0.8",Y.defaults={domEvents:!1,touchAction:qt,enable:!0,inputTarget:null,inputClass:null,preset:[[W,{enable:!1}],[z,{enable:!1},["rotate"]],[U,{direction:wt}],[H,{direction:wt},["swipe"]],[Q],[Q,{event:"doubletap",taps:2},["tap"]],[$]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};X.prototype={set:function(t){return G(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){this.touchAction.preventDefaults(t);var i,n=this.recognizers,o=e.curRecognizer;(!o||o&&8&o.state)&&(o=e.curRecognizer=null);for(var r=0;r<n.length;)i=n[r],2===e.stopped||o&&i!=o&&!i.canRecognizeWith(o)?i.reset():i.recognize(t),!o&&14&i.state&&(o=e.curRecognizer=i),r++}},get:function(t){if(t instanceof F)return t;for(var e=this.recognizers,i=0;i<e.length;i++)if(e[i].options.event==t)return e[i];return null},add:function(t){if(n(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),(t.manager=this).touchAction.update(),t},remove:function(t){if(n(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,i=m(e,t);-1!==i&&(e.splice(i,1),this.touchAction.update())}return this},on:function(t,e){if(t!==w&&e!==w){var i=this.handlers;return s(p(t),function(t){i[t]=i[t]||[],i[t].push(e)}),this}},off:function(t,e){if(t!==w){var i=this.handlers;return s(p(t),function(t){e?i[t]&&i[t].splice(m(i[t],e),1):delete i[t]}),this}},emit:function(t,e){var i,n,o;this.options.domEvents&&(i=t,n=e,(o=a.createEvent("Event")).initEvent(i,!0,!0),(o.gesture=n).target.dispatchEvent(o));var r=this.handlers[t]&&this.handlers[t].slice();if(r&&r.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var s=0;s<r.length;)r[s](e),s++}},destroy:function(){this.element&&K(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},G(Y,{INPUT_START:ft,INPUT_MOVE:2,INPUT_END:pt,INPUT_CANCEL:mt,STATE_POSSIBLE:Wt,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:gt,DIRECTION_LEFT:vt,DIRECTION_RIGHT:yt,DIRECTION_UP:bt,DIRECTION_DOWN:_t,DIRECTION_HORIZONTAL:wt,DIRECTION_VERTICAL:kt,DIRECTION_ALL:xt,Manager:X,Input:_,TouchAction:L,TouchInput:P,MouseInput:M,PointerEventInput:I,TouchMouseInput:N,SingleTouchInput:A,Recognizer:F,AttrRecognizer:R,Tap:Q,Pan:H,Swipe:U,Pinch:z,Rotate:W,Press:$,on:h,off:d,each:s,merge:rt,extend:ot,assign:G,inherit:i,bindFn:o,prefixed:y}),(void 0!==r?r:"undefined"!=typeof self?self:{}).Hammer=Y,"function"==typeof define&&define.amd?define(function(){return Y}):"undefined"!=typeof module&&module.exports?module.exports=Y:r.Hammer=Y}(window,document);"use strict";var jQuery;void 0===jQuery&&(jQuery="function"==typeof require?$=require("jquery"):$);(function(a){a.fn.qoobSelect=function(){a(this).each(function(){var t,e=!1,i=a(this),n=i.children("option"),o=i.find("option:selected").val()||i.find("option:first").val();t=void 0!==i.find("option:selected").data("icon")?'<i class="'+i.find("option:selected").data("icon")+'"></i>':(t=i.find("option:selected").html()||i.find("option:first").html()||"").replace(/"/g,"&quot;");var r=a('<ul class="qoob-select-dropdown"></ul>');i.wrap('<div class="qoob-select"></div>'),n.length&&n.each(function(){void 0!==a(this).data("title")?r.append(a('<li data-value="'+a(this).val()+'" title="'+a(this).data("title")+'"><span>'+a(this).html()+"</span></li>")):void 0!==a(this).data("icon")?r.append(a('<li data-value="'+a(this).val()+'" title="'+a(this).html()+'"><i class="'+a(this).data("icon")+'"></i></li>')):r.append(a('<li data-value="'+a(this).val()+'"><span>'+a(this).html()+"</span></li>"))});var s=a("<div />",{class:"qoob-selected-value","data-value":o,title:i.find("option:selected").html(),tabindex:0}).append(t);i.before(s),s.after(r),r.find("li").each(function(e){a(this).click(function(t){a(this).hasClass("disabled")||(r.find("li").removeClass("active"),a(this).toggleClass("active"),o=a(this).data("value"),s[0].dataset.value=o,s.html(a(this).html()),null!=a(this).prop("title")&&(s[0].title=a(this).prop("title")),i.find("option").eq(e).prop("selected",!0),r.trigger("close"),i.trigger("change")),t.stopPropagation()})}),s.on("click",function(){if(r.hasClass("active"))r.trigger("close");else if(!r.is(":visible")){r.trigger("open"),e=!0;var t=r.find("li").filter(function(){return a(this).data("value").toLowerCase()===o.toLowerCase()});a(t).addClass("selected"),a(t).prependTo(r)}}),r.on({open:function(){a(this).addClass("active"),a(this).slideDown({queue:!1,duration:300,easing:"easeOutCubic"}).animate({opacity:1},{queue:!1,duration:300,easing:"easeOutSine"})},close:function(){a(this).fadeOut(225),a(this).removeClass("active"),r.find(".selected").removeClass("selected")}}),s.on("blur",function(){r.trigger("close")}),r.hover(function(){e=!0},function(){e=!1}),a(window).one({click:function(){e||r.trigger("close")}})})}}(jQuery),void 0===jQuery)&&(jQuery="function"==typeof require?$=require("jquery"):$);!function(n){n(document).on("click",".qoob-dropdown-toggle",function(t){var e=n(this).parent(".qoob-dropdown"),i=e.find(".qoob-dropdown-content");n(".qoob-dropdown").each(function(t,e){n(e).find(".qoob-dropdown-content").trigger("hide")}),i.on({show:function(){e.addClass("active"),n(this).slideDown({queue:!1,duration:300,easing:"easeOutCubic"}).animate({opacity:1},{queue:!1,duration:300,easing:"easeOutSine"}),t.stopImmediatePropagation()},hide:function(){n(this).fadeOut(225),e.removeClass("active"),i.off("click show hide")},click:function(t){"a"===t.target.tagName.toLowerCase()&&n(this).trigger("hide")}}),i.is(":visible")?i.trigger("hide"):i.trigger("show"),n(window).one({click:function(t){0==n(t.target).parents(".qoob-dropdown-content").length&&i.trigger("hide")},blur:function(){i.trigger("hide")}})})}(jQuery),function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.device=e():t.device=e()}(this,function(){return function(i){function n(t){if(o[t])return o[t].exports;var e=o[t]={i:t,l:!1,exports:{}};return i[t].call(e.exports,e,e.exports,n),e.l=!0,e.exports}var o={};return n.m=i,n.c=o,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,i){t.exports=i(1)},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n,o,r,s,a,l,c,u,h,d,f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};o=window.device,n={},window.device=n,s=window.document.documentElement,d=window.navigator.userAgent.toLowerCase(),n.macos=function(){return a("mac")},n.ios=function(){return n.iphone()||n.ipod()||n.ipad()},n.iphone=function(){return!n.windows()&&a("iphone")},n.ipod=function(){return a("ipod")},n.ipad=function(){return a("ipad")},n.android=function(){return!n.windows()&&a("android")},n.androidPhone=function(){return n.android()&&a("mobile")},n.androidTablet=function(){return n.android()&&!a("mobile")},n.blackberry=function(){return a("blackberry")||a("bb10")||a("rim")},n.blackberryPhone=function(){return n.blackberry()&&!a("tablet")},n.blackberryTablet=function(){return n.blackberry()&&a("tablet")},n.windows=function(){return a("windows")},n.windowsPhone=function(){return n.windows()&&a("phone")},n.windowsTablet=function(){return n.windows()&&a("touch")&&!n.windowsPhone()},n.fxos=function(){return(a("(mobile;")||a("(tablet;"))&&a("; rv:")},n.fxosPhone=function(){return n.fxos()&&a("mobile")},n.fxosTablet=function(){return n.fxos()&&a("tablet")},n.meego=function(){return a("meego")},n.cordova=function(){return window.cordova&&"file:"===location.protocol},n.nodeWebkit=function(){return"object"===f(window.process)},n.mobile=function(){return n.androidPhone()||n.iphone()||n.ipod()||n.windowsPhone()||n.blackberryPhone()||n.fxosPhone()||n.meego()},n.tablet=function(){return n.ipad()||n.androidTablet()||n.blackberryTablet()||n.windowsTablet()||n.fxosTablet()},n.desktop=function(){return!n.tablet()&&!n.mobile()},n.television=function(){var t,e=["googletv","viera","smarttv","internet.tv","netcast","nettv","appletv","boxee","kylo","roku","dlnadoc","roku","pov_tv","hbbtv","ce-html"];for(t=0;t<e.length;){if(a(e[t]))return!0;t++}return!1},n.portrait=function(){return 1<window.innerHeight/window.innerWidth},n.landscape=function(){return window.innerHeight/window.innerWidth<1},n.noConflict=function(){return window.device=o,this},a=function(t){return-1!==d.indexOf(t)},c=function(t){var e;return e=new RegExp(t,"i"),s.className.match(e)},r=function(t){var e=null;c(t)||(e=s.className.replace(/^\s+|\s+$/g,""),s.className=e+" "+t)},h=function(t){c(t)&&(s.className=s.className.replace(" "+t,""))},n.ios()?n.ipad()?r("ios ipad tablet"):n.iphone()?r("ios iphone mobile"):n.ipod()&&r("ios ipod mobile"):n.macos()?r("macos desktop"):n.android()?r(n.androidTablet()?"android tablet":"android mobile"):n.blackberry()?r(n.blackberryTablet()?"blackberry tablet":"blackberry mobile"):n.windows()?r(n.windowsTablet()?"windows tablet":n.windowsPhone()?"windows mobile":"windows desktop"):n.fxos()?r(n.fxosTablet()?"fxos tablet":"fxos mobile"):n.meego()?r("meego mobile"):n.nodeWebkit()?r("node-webkit"):n.television()?r("television"):n.desktop()&&r("desktop"),n.cordova()&&r("cordova"),l=function(){n.landscape()?(h("portrait"),r("landscape")):(h("landscape"),r("portrait"))},u=Object.prototype.hasOwnProperty.call(window,"onorientationchange")?"orientationchange":"resize",window.addEventListener?window.addEventListener(u,l,!1):window.attachEvent?window.attachEvent(u,l):window[u]=l,l(),e.default=n}]).default}),function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).html2canvas=t()}}(function(){return function r(s,a,l){function c(i,t){if(!a[i]){if(!s[i]){var e="function"==typeof require&&require;if(!t&&e)return e(i,!0);if(u)return u(i,!0);var n=new Error("Cannot find module '"+i+"'");throw n.code="MODULE_NOT_FOUND",n}var o=a[i]={exports:{}};s[i][0].call(o.exports,function(t){var e=s[i][1][t];return c(e||t)},o,o.exports,r,s,a,l)}return a[i].exports}for(var u="function"==typeof require&&require,t=0;t<l.length;t++)c(l[t]);return c}({1:[function(t,A,P){(function(I){!function(t){function v(t){throw new RangeError(m[t])}function o(t,e){for(var i=t.length,n=[];i--;)n[i]=e(t[i]);return n}function e(t,e){var i=t.split("@"),n="";return 1<i.length&&(n=i[0]+"@",t=i[1]),n+o((t=t.replace(p,".")).split("."),e).join(".")}function y(t){for(var e,i,n=[],o=0,r=t.length;o<r;)55296<=(e=t.charCodeAt(o++))&&e<=56319&&o<r?56320==(64512&(i=t.charCodeAt(o++)))?n.push(((1023&e)<<10)+(1023&i)+65536):(n.push(e),o--):n.push(e);return n}function b(t){return o(t,function(t){var e="";return 65535<t&&(e+=M((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+M(t)}).join("")}function _(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function w(t,e,i){var n=0;for(t=i?S(t/h):t>>1,t+=S(t/e);g*D>>1<t;n+=x)t=S(t/g);return S(n+(g+1)*t/(t+u))}function i(t){var e,i,n,o,r,s,a,l,c,u,h,d=[],f=t.length,p=0,m=O,g=T;for((i=t.lastIndexOf(E))<0&&(i=0),n=0;n<i;++n)128<=t.charCodeAt(n)&&v("not-basic"),d.push(t.charCodeAt(n));for(o=0<i?i+1:0;o<f;){for(r=p,s=1,a=x;f<=o&&v("invalid-input"),h=t.charCodeAt(o++),(x<=(l=h-48<10?h-22:h-65<26?h-65:h-97<26?h-97:x)||l>S((k-p)/s))&&v("overflow"),p+=l*s,!(l<(c=a<=g?C:g+D<=a?D:a-g));a+=x)s>S(k/(u=x-c))&&v("overflow"),s*=u;g=w(p-r,e=d.length+1,0==r),S(p/e)>k-m&&v("overflow"),m+=S(p/e),p%=e,d.splice(p++,0,m)}return b(d)}function n(t){var e,i,n,o,r,s,a,l,c,u,h,d,f,p,m,g=[];for(d=(t=y(t)).length,e=O,r=T,s=i=0;s<d;++s)(h=t[s])<128&&g.push(M(h));for(n=o=g.length,o&&g.push(E);n<d;){for(a=k,s=0;s<d;++s)e<=(h=t[s])&&h<a&&(a=h);for(a-e>S((k-i)/(f=n+1))&&v("overflow"),i+=(a-e)*f,e=a,s=0;s<d;++s)if((h=t[s])<e&&++i>k&&v("overflow"),h==e){for(l=i,c=x;!(l<(u=c<=r?C:r+D<=c?D:c-r));c+=x)m=l-u,p=x-u,g.push(M(_(u+m%p,0))),l=S(m/p);g.push(M(_(l,0))),r=w(i,f,n==o),i=0,++n}++i,++e}return g.join("")}var r="object"==typeof P&&P&&!P.nodeType&&P,s="object"==typeof A&&A&&!A.nodeType&&A,a="object"==typeof I&&I;a.global!==a&&a.window!==a&&a.self!==a||(t=a);var l,c,k=2147483647,x=36,C=1,D=26,u=38,h=700,T=72,O=128,E="-",d=/^xn--/,f=/[^\x20-\x7E]/,p=/[\x2E\u3002\uFF0E\uFF61]/g,m={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},g=x-C,S=Math.floor,M=String.fromCharCode;if(l={version:"1.4.1",ucs2:{decode:y,encode:b},decode:i,encode:n,toASCII:function(t){return e(t,function(t){return f.test(t)?"xn--"+n(t):t})},toUnicode:function(t){return e(t,function(t){return d.test(t)?i(t.slice(4).toLowerCase()):t})}},r&&s)if(A.exports==r)s.exports=l;else for(c in l)l.hasOwnProperty(c)&&(r[c]=l[c]);else t.punycode=l}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(t,e,i){function o(t,e){for(var i=3===t.nodeType?document.createTextNode(t.nodeValue):t.cloneNode(!1),n=t.firstChild;n;)!0!==e&&1===n.nodeType&&"SCRIPT"===n.nodeName||i.appendChild(o(n,e)),n=n.nextSibling;return 1===t.nodeType&&(i._scrollTop=t.scrollTop,i._scrollLeft=t.scrollLeft,"CANVAS"===t.nodeName?function(e,t){try{t&&(t.width=e.width,t.height=e.height,t.getContext("2d").putImageData(e.getContext("2d").getImageData(0,0,e.width,e.height),0,0))}catch(t){r("Unable to copy canvas content from",e,t)}}(t,i):"TEXTAREA"!==t.nodeName&&"SELECT"!==t.nodeName||(i.value=t.value)),i}var r=t("./log");e.exports=function(r,t,e,i,s,a,l){var c=o(r.documentElement,s.javascriptEnabled),u=t.createElement("iframe");return u.className="html2canvas-container",u.style.visibility="hidden",u.style.position="fixed",u.style.left="-10000px",u.style.top="0px",u.style.border="0",u.width=e,u.height=i,u.scrolling="no",t.body.appendChild(u),new Promise(function(e){var t,i,n,o=u.contentWindow.document;u.contentWindow.onload=u.onload=function(){var t=setInterval(function(){0<o.body.childNodes.length&&(function t(e){if(1===e.nodeType){e.scrollTop=e._scrollTop,e.scrollLeft=e._scrollLeft;for(var i=e.firstChild;i;)t(i),i=i.nextSibling}}(o.documentElement),clearInterval(t),"view"===s.type&&(u.contentWindow.scrollTo(a,l),!/(iPad|iPhone|iPod)/g.test(navigator.userAgent)||u.contentWindow.scrollY===l&&u.contentWindow.scrollX===a||(o.documentElement.style.top=-l+"px",o.documentElement.style.left=-a+"px",o.documentElement.style.position="absolute")),e(u))},50)},o.open(),o.write("<!DOCTYPE html><html></html>"),i=a,n=l,!(t=r).defaultView||i===t.defaultView.pageXOffset&&n===t.defaultView.pageYOffset||t.defaultView.scrollTo(i,n),o.replaceChild(o.adoptNode(c),o.documentElement),o.close()})}},{"./log":13}],3:[function(t,e,i){function n(t){this.r=0,this.g=0,this.b=0,this.a=null,this.fromArray(t)||this.namedColor(t)||this.rgb(t)||this.rgba(t)||this.hex6(t)||this.hex3(t)}n.prototype.darken=function(t){var e=1-t;return new n([Math.round(this.r*e),Math.round(this.g*e),Math.round(this.b*e),this.a])},n.prototype.isTransparent=function(){return 0===this.a},n.prototype.isBlack=function(){return 0===this.r&&0===this.g&&0===this.b},n.prototype.fromArray=function(t){return Array.isArray(t)&&(this.r=Math.min(t[0],255),this.g=Math.min(t[1],255),this.b=Math.min(t[2],255),3<t.length&&(this.a=t[3])),Array.isArray(t)};var o=/^#([a-f0-9]{3})$/i;n.prototype.hex3=function(t){var e;return null!==(e=t.match(o))&&(this.r=parseInt(e[1][0]+e[1][0],16),this.g=parseInt(e[1][1]+e[1][1],16),this.b=parseInt(e[1][2]+e[1][2],16)),null!==e};var r=/^#([a-f0-9]{6})$/i;n.prototype.hex6=function(t){var e=null;return null!==(e=t.match(r))&&(this.r=parseInt(e[1].substring(0,2),16),this.g=parseInt(e[1].substring(2,4),16),this.b=parseInt(e[1].substring(4,6),16)),null!==e};var s=/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/;n.prototype.rgb=function(t){var e;return null!==(e=t.match(s))&&(this.r=Number(e[1]),this.g=Number(e[2]),this.b=Number(e[3])),null!==e};var a=/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d?\.?\d+)\s*\)$/;n.prototype.rgba=function(t){var e;return null!==(e=t.match(a))&&(this.r=Number(e[1]),this.g=Number(e[2]),this.b=Number(e[3]),this.a=Number(e[4])),null!==e},n.prototype.toString=function(){return null!==this.a&&1!==this.a?"rgba("+[this.r,this.g,this.b,this.a].join(",")+")":"rgb("+[this.r,this.g,this.b].join(",")+")"},n.prototype.namedColor=function(t){t=t.toLowerCase();var e=l[t];if(e)this.r=e[0],this.g=e[1],this.b=e[2];else if("transparent"===t)return this.r=this.g=this.b=this.a=0,!0;return!!e},n.prototype.isColor=!0;var l={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};e.exports=n},{}],4:[function(t,e,i){function n(t,e){var i,n,o=x++;if((e=e||{}).logging&&(y.options.logging=!0,y.options.start=Date.now()),e.async=void 0===e.async||e.async,e.allowTaint=void 0!==e.allowTaint&&e.allowTaint,e.removeContainer=void 0===e.removeContainer||e.removeContainer,e.javascriptEnabled=void 0!==e.javascriptEnabled&&e.javascriptEnabled,e.imageTimeout=void 0===e.imageTimeout?1e4:e.imageTimeout,e.renderer="function"==typeof e.renderer?e.renderer:m,e.strict=!!e.strict,"string"==typeof t){if("string"!=typeof e.proxy)return Promise.reject("Proxy must be used when rendering url");var r=null!=e.width?e.width:window.innerWidth,s=null!=e.height?e.height:window.innerHeight;return _((i=t,n=document.createElement("a"),n.href=i,n.href=n.href,n),e.proxy,document,r,s,e).then(function(t){return f(t.contentWindow.document.documentElement,t,e,r,s)})}var a,l,c,u,h,d=(void 0===t?[document.documentElement]:t.length?t:[t])[0];return d.setAttribute(k+o,o),(a=d.ownerDocument,l=e,c=d.ownerDocument.defaultView.innerWidth,u=d.ownerDocument.defaultView.innerHeight,h=o,b(a,a,c,u,l,a.defaultView.pageXOffset,a.defaultView.pageYOffset).then(function(t){y("Document cloned");var e=k+h,i="["+e+"='"+h+"']";a.querySelector(i).removeAttribute(e);var n=t.contentWindow,o=n.document.querySelector(i),r="function"==typeof l.onclone?Promise.resolve(l.onclone(n.document)):Promise.resolve(!0);return r.then(function(){return f(o,t,l,c,u)})})).then(function(t){return"function"==typeof e.onrendered&&(y("options.onrendered is deprecated, html2canvas returns a Promise containing the canvas"),e.onrendered(t)),t})}function f(r,s,a,t,e){var l=s.contentWindow,i=new p(l.document),n=new g(a,i),c=w(r),o="view"===a.type?t:c.right+1,u="view"===a.type?e:c.bottom+1,h=new a.renderer(o,u,n,a,document);return new v(r,h,i,n,a).ready.then(function(){var t,e;if(y("Finished rendering"),"view"===a.type)t=d(h.canvas,{width:h.canvas.width,height:h.canvas.height,top:0,left:0,x:0,y:0});else if(r===l.document.body||r===l.document.documentElement||null!=a.canvas)t=h.canvas;else if(a.scale){var i={width:null!=a.width?a.width:c.width,height:null!=a.height?a.height:c.height,top:c.top,left:c.left,x:0,y:0},n={};for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o]*a.scale);(t=d(h.canvas,n)).style.width=i.width+"px",t.style.height=i.height+"px"}else t=d(h.canvas,{width:null!=a.width?a.width:c.width,height:null!=a.height?a.height:c.height,top:c.top,left:c.left,x:0,y:0});return e=s,a.removeContainer&&(e.parentNode.removeChild(e),y("Cleaned up container")),t})}function d(t,e){var i=document.createElement("canvas"),n=Math.min(t.width-1,Math.max(0,e.left)),o=Math.min(t.width,Math.max(1,e.left+e.width)),r=Math.min(t.height-1,Math.max(0,e.top)),s=Math.min(t.height,Math.max(1,e.top+e.height));i.width=e.width,i.height=e.height;var a=o-n,l=s-r;return y("Cropping canvas at:","left:",e.left,"top:",e.top,"width:",a,"height:",l),y("Resulting crop with width",e.width,"and height",e.height,"with x",n,"and y",r),i.getContext("2d").drawImage(t,n,r,a,l,e.x,e.y,a,l),i}var p=t("./support"),m=t("./renderers/canvas"),g=t("./imageloader"),v=t("./nodeparser"),o=t("./nodecontainer"),y=t("./log"),r=t("./utils"),b=t("./clone"),_=t("./proxy").loadUrlDocument,w=r.getBounds,k="data-html2canvas-node",x=0;n.CanvasRenderer=m,n.NodeContainer=o,n.log=y,n.utils=r;var s="undefined"==typeof document||"function"!=typeof Object.create||"function"!=typeof document.createElement("canvas").getContext?function(){return Promise.reject("No canvas support")}:n;e.exports=s},{"./clone":2,"./imageloader":11,"./log":13,"./nodecontainer":14,"./nodeparser":15,"./proxy":16,"./renderers/canvas":20,"./support":22,"./utils":26}],5:[function(t,e,i){var n=t("./log"),o=t("./utils").smallImage;e.exports=function t(e){if(this.src=e,n("DummyImageContainer for",e),!this.promise||!this.image){n("Initiating DummyImageContainer"),t.prototype.image=new Image;var i=this.image;t.prototype.promise=new Promise(function(t,e){i.onload=t,i.onerror=e,i.src=o(),!0===i.complete&&t(i)})}}},{"./log":13,"./utils":26}],6:[function(t,e,i){var l=t("./utils").smallImage;e.exports=function(t,e){var i,n,o=document.createElement("div"),r=document.createElement("img"),s=document.createElement("span"),a="Hidden Text";o.style.visibility="hidden",o.style.fontFamily=t,o.style.fontSize=e,o.style.margin=0,o.style.padding=0,document.body.appendChild(o),r.src=l(),r.width=1,r.height=1,r.style.margin=0,r.style.padding=0,r.style.verticalAlign="baseline",s.style.fontFamily=t,s.style.fontSize=e,s.style.margin=0,s.style.padding=0,s.appendChild(document.createTextNode(a)),o.appendChild(s),o.appendChild(r),i=r.offsetTop-s.offsetTop+1,o.removeChild(s),o.appendChild(document.createTextNode(a)),o.style.lineHeight="normal",r.style.verticalAlign="super",n=r.offsetTop-o.offsetTop+1,document.body.removeChild(o),this.baseline=i,this.lineWidth=1,this.middle=n}},{"./utils":26}],7:[function(t,e,i){function n(){this.data={}}var o=t("./font");n.prototype.getMetrics=function(t,e){return void 0===this.data[t+"-"+e]&&(this.data[t+"-"+e]=new o(t,e)),this.data[t+"-"+e]},e.exports=n},{"./font":6}],8:[function(r,t,e){function i(e,t,i){this.image=null,this.src=e;var n=this,o=s(e);this.promise=(t?new Promise(function(t){"about:blank"===e.contentWindow.document.URL||null==e.contentWindow.document.documentElement?e.contentWindow.onload=e.onload=function(){t(e)}:t(e)}):this.proxyLoad(i.proxy,o,i)).then(function(t){return r("./core")(t.contentWindow.document.documentElement,{type:"view",width:t.width,height:t.height,proxy:i.proxy,javascriptEnabled:i.javascriptEnabled,removeContainer:i.removeContainer,allowTaint:i.allowTaint,imageTimeout:i.imageTimeout/2})}).then(function(t){return n.image=t})}var s=r("./utils").getBounds,o=r("./proxy").loadUrlDocument;i.prototype.proxyLoad=function(t,e,i){var n=this.src;return o(n.src,t,n.ownerDocument,e.width,e.height,i)},t.exports=i},{"./core":4,"./proxy":16,"./utils":26}],9:[function(t,e,i){function n(t){this.src=t.value,this.colorStops=[],this.type=null,this.x0=.5,this.y0=.5,this.x1=.5,this.y1=.5,this.promise=Promise.resolve(!0)}n.TYPES={LINEAR:1,RADIAL:2},n.REGEXP_COLORSTOP=/^\s*(rgba?\(\s*\d{1,3},\s*\d{1,3},\s*\d{1,3}(?:,\s*[0-9\.]+)?\s*\)|[a-z]{3,20}|#[a-f0-9]{3,6})(?:\s+(\d{1,3}(?:\.\d+)?)(%|px)?)?(?:\s|$)/i,e.exports=n},{}],10:[function(t,e,i){e.exports=function(i,n){this.src=i,this.image=new Image;var o=this;this.tainted=null,this.promise=new Promise(function(t,e){o.image.onload=t,o.image.onerror=e,n&&(o.image.crossOrigin="anonymous"),o.image.src=i,!0===o.image.complete&&t(o.image)})}},{}],11:[function(t,e,i){function n(t,e){this.link=null,this.options=t,this.support=e,this.origin=this.getOrigin(window.location.href)}var r=t("./log"),o=t("./imagecontainer"),s=t("./dummyimagecontainer"),a=t("./proxyimagecontainer"),l=t("./framecontainer"),c=t("./svgcontainer"),u=t("./svgnodecontainer"),h=t("./lineargradientcontainer"),d=t("./webkitgradientcontainer"),f=t("./utils").bind;n.prototype.findImages=function(t){var e=[];return t.reduce(function(t,e){switch(e.node.nodeName){case"IMG":return t.concat([{args:[e.node.src],method:"url"}]);case"svg":case"IFRAME":return t.concat([{args:[e.node],method:e.node.nodeName}])}return t},[]).forEach(this.addImage(e,this.loadImage),this),e},n.prototype.findBackgroundImage=function(t,e){return e.parseBackgroundImages().filter(this.hasImageBackground).forEach(this.addImage(t,this.loadImage),this),t},n.prototype.addImage=function(i,n){return function(e){e.args.forEach(function(t){this.imageExists(i,t)||(i.splice(0,0,n.call(this,e)),r("Added image #"+i.length,"string"==typeof t?t.substring(0,100):t))},this)}},n.prototype.hasImageBackground=function(t){return"none"!==t.method},n.prototype.loadImage=function(t){if("url"!==t.method)return"linear-gradient"===t.method?new h(t):"gradient"===t.method?new d(t):"svg"===t.method?new u(t.args[0],this.support.svg):"IFRAME"===t.method?new l(t.args[0],this.isSameOrigin(t.args[0].src),this.options):new s(t);var e=t.args[0];return!this.isSVG(e)||this.support.svg||this.options.allowTaint?e.match(/data:image\/.*;base64,/i)?new o(e.replace(/url\(['"]{0,}|['"]{0,}\)$/gi,""),!1):this.isSameOrigin(e)||!0===this.options.allowTaint||this.isSVG(e)?new o(e,!1):this.support.cors&&!this.options.allowTaint&&this.options.useCORS?new o(e,!0):this.options.proxy?new a(e,this.options.proxy):new s(e):new c(e)},n.prototype.isSVG=function(t){return"svg"===t.substring(t.length-3).toLowerCase()||c.prototype.isInline(t)},n.prototype.imageExists=function(t,e){return t.some(function(t){return t.src===e})},n.prototype.isSameOrigin=function(t){return this.getOrigin(t)===this.origin},n.prototype.getOrigin=function(t){var e=this.link||(this.link=document.createElement("a"));return e.href=t,e.href=e.href,e.protocol+e.hostname+e.port},n.prototype.getPromise=function(e){return this.timeout(e,this.options.imageTimeout).catch(function(){return new s(e.src).promise.then(function(t){e.image=t})})},n.prototype.get=function(e){var i=null;return this.images.some(function(t){return(i=t).src===e})?i:null},n.prototype.fetch=function(t){return this.images=t.reduce(f(this.findBackgroundImage,this),this.findImages(t)),this.images.forEach(function(e,i){e.promise.then(function(){r("Succesfully loaded image #"+(i+1),e)},function(t){r("Failed loading image #"+(i+1),e,t)})}),this.ready=Promise.all(this.images.map(this.getPromise,this)),r("Finished searching images"),this},n.prototype.timeout=function(i,n){var o,t=Promise.race([i.promise,new Promise(function(t,e){o=setTimeout(function(){r("Timed out loading image",i),e(i)},n)})]).then(function(t){return clearTimeout(o),t});return t.catch(function(){clearTimeout(o)}),t},e.exports=n},{"./dummyimagecontainer":5,"./framecontainer":8,"./imagecontainer":10,"./lineargradientcontainer":12,"./log":13,"./proxyimagecontainer":17,"./svgcontainer":23,"./svgnodecontainer":24,"./utils":26,"./webkitgradientcontainer":27}],12:[function(t,e,i){function n(t){o.apply(this,arguments),this.type=o.TYPES.LINEAR;var e=n.REGEXP_DIRECTION.test(t.args[0])||!o.REGEXP_COLORSTOP.test(t.args[0]);e?t.args[0].split(/\s+/).reverse().forEach(function(t,e){switch(t){case"left":this.x0=0,this.x1=1;break;case"top":this.y0=0,this.y1=1;break;case"right":this.x0=1,this.x1=0;break;case"bottom":this.y0=1,this.y1=0;break;case"to":var i=this.y0,n=this.x0;this.y0=this.y1,this.x0=this.x1,this.x1=n,this.y1=i;break;case"center":break;default:var o=.01*parseFloat(t,10);if(isNaN(o))break;0===e?(this.y0=o,this.y1=1-this.y0):(this.x0=o,this.x1=1-this.x0)}},this):(this.y0=0,this.y1=1),this.colorStops=t.args.slice(e?1:0).map(function(t){var e=t.match(o.REGEXP_COLORSTOP),i=+e[2],n=0===i?"%":e[3];return{color:new r(e[1]),stop:"%"===n?i/100:null}}),null===this.colorStops[0].stop&&(this.colorStops[0].stop=0),null===this.colorStops[this.colorStops.length-1].stop&&(this.colorStops[this.colorStops.length-1].stop=1),this.colorStops.forEach(function(i,n){null===i.stop&&this.colorStops.slice(n).some(function(t,e){return null!==t.stop&&(i.stop=(t.stop-this.colorStops[n-1].stop)/(e+1)+this.colorStops[n-1].stop,!0)},this)},this)}var o=t("./gradientcontainer"),r=t("./color");n.prototype=Object.create(o.prototype),n.REGEXP_DIRECTION=/^\s*(?:to|left|right|top|bottom|center|\d{1,3}(?:\.\d+)?%?)(?:\s|$)/i,e.exports=n},{"./color":3,"./gradientcontainer":9}],13:[function(t,e,i){var n=function(){n.options.logging&&window.console&&window.console.log&&Function.prototype.bind.call(window.console.log,window.console).apply(window.console,[Date.now()-n.options.start+"ms","html2canvas:"].concat([].slice.call(arguments,0)))};n.options={logging:!1},e.exports=n},{}],14:[function(t,e,i){function n(t,e){this.node=t,this.parent=e,this.stack=null,this.bounds=null,this.borders=null,this.clip=[],this.backgroundClip=[],this.offsetBounds=null,this.visible=null,this.computedStyles=null,this.colors={},this.styles={},this.backgroundImages=null,this.transformData=null,this.transformMatrix=null,this.isPseudoElement=!1,this.opacity=null}function l(t){return-1!==t.toString().indexOf("%")}function o(t){return t.replace("px","")}function r(t){return parseFloat(t)}var s=t("./color"),a=t("./utils"),c=a.getBounds,u=a.parseBackgrounds,h=a.offsetBounds;n.prototype.cloneTo=function(t){t.visible=this.visible,t.borders=this.borders,t.bounds=this.bounds,t.clip=this.clip,t.backgroundClip=this.backgroundClip,t.computedStyles=this.computedStyles,t.styles=this.styles,t.backgroundImages=this.backgroundImages,t.opacity=this.opacity},n.prototype.getOpacity=function(){return null===this.opacity?this.opacity=this.cssFloat("opacity"):this.opacity},n.prototype.assignStack=function(t){(this.stack=t).children.push(this)},n.prototype.isElementVisible=function(){return this.node.nodeType===Node.TEXT_NODE?this.parent.visible:"none"!==this.css("display")&&"hidden"!==this.css("visibility")&&!this.node.hasAttribute("data-html2canvas-ignore")&&("INPUT"!==this.node.nodeName||"hidden"!==this.node.getAttribute("type"))},n.prototype.css=function(t){return this.computedStyles||(this.computedStyles=this.isPseudoElement?this.parent.computedStyle(this.before?":before":":after"):this.computedStyle(null)),this.styles[t]||(this.styles[t]=this.computedStyles[t])},n.prototype.prefixedCss=function(e){var i=this.css(e);return void 0===i&&["webkit","moz","ms","o"].some(function(t){return void 0!==(i=this.css(t+e.substr(0,1).toUpperCase()+e.substr(1)))},this),void 0===i?null:i},n.prototype.computedStyle=function(t){return this.node.ownerDocument.defaultView.getComputedStyle(this.node,t)},n.prototype.cssInt=function(t){var e=parseInt(this.css(t),10);return isNaN(e)?0:e},n.prototype.color=function(t){return this.colors[t]||(this.colors[t]=new s(this.css(t)))},n.prototype.cssFloat=function(t){var e=parseFloat(this.css(t));return isNaN(e)?0:e},n.prototype.fontWeight=function(){var t=this.css("fontWeight");switch(parseInt(t,10)){case 401:t="bold";break;case 400:t="normal"}return t},n.prototype.parseClip=function(){var t=this.css("clip").match(this.CLIP);return t?{top:parseInt(t[1],10),right:parseInt(t[2],10),bottom:parseInt(t[3],10),left:parseInt(t[4],10)}:null},n.prototype.parseBackgroundImages=function(){return this.backgroundImages||(this.backgroundImages=u(this.css("backgroundImage")))},n.prototype.cssList=function(t,e){var i=(this.css(t)||"").split(",");return 1===(i=(i=i[e||0]||i[0]||"auto").trim().split(" ")).length&&(i=[i[0],l(i[0])?"auto":i[0]]),i},n.prototype.parseBackgroundSize=function(t,e,i){var n,o,r=this.cssList("backgroundSize",i);if(l(r[0]))n=t.width*parseFloat(r[0])/100;else{if(/contain|cover/.test(r[0])){var s=t.width/t.height,a=e.width/e.height;return s<a^"contain"===r[0]?{width:t.height*a,height:t.height}:{width:t.width,height:t.width/a}}n=parseInt(r[0],10)}return o="auto"===r[0]&&"auto"===r[1]?e.height:"auto"===r[1]?n/e.width*e.height:l(r[1])?t.height*parseFloat(r[1])/100:parseInt(r[1],10),"auto"===r[0]&&(n=o/e.height*e.width),{width:n,height:o}},n.prototype.parseBackgroundPosition=function(t,e,i,n){var o,r,s=this.cssList("backgroundPosition",i);return o=l(s[0])?(t.width-(n||e).width)*(parseFloat(s[0])/100):parseInt(s[0],10),r="auto"===s[1]?o/e.width*e.height:l(s[1])?(t.height-(n||e).height)*parseFloat(s[1])/100:parseInt(s[1],10),"auto"===s[0]&&(o=r/e.height*e.width),{left:o,top:r}},n.prototype.parseBackgroundRepeat=function(t){return this.cssList("backgroundRepeat",t)[0]},n.prototype.parseTextShadows=function(){var t=this.css("textShadow"),e=[];if(t&&"none"!==t)for(var i=t.match(this.TEXT_SHADOW_PROPERTY),n=0;i&&n<i.length;n++){var o=i[n].match(this.TEXT_SHADOW_VALUES);e.push({color:new s(o[0]),offsetX:o[1]?parseFloat(o[1].replace("px","")):0,offsetY:o[2]?parseFloat(o[2].replace("px","")):0,blur:o[3]?o[3].replace("px",""):0})}return e},n.prototype.parseTransform=function(){if(!this.transformData)if(this.hasTransform()){var t=this.parseBounds(),e=this.prefixedCss("transformOrigin").split(" ").map(o).map(r);e[0]+=t.left,e[1]+=t.top,this.transformData={origin:e,matrix:this.parseTransformMatrix()}}else this.transformData={origin:[0,0],matrix:[1,0,0,1,0,0]};return this.transformData},n.prototype.parseTransformMatrix=function(){if(!this.transformMatrix){var t=this.prefixedCss("transform"),e=t?function(t){if(t&&"matrix"===t[1])return t[2].split(",").map(function(t){return parseFloat(t.trim())});if(t&&"matrix3d"===t[1]){var e=t[2].split(",").map(function(t){return parseFloat(t.trim())});return[e[0],e[1],e[4],e[5],e[12],e[13]]}}(t.match(this.MATRIX_PROPERTY)):null;this.transformMatrix=e||[1,0,0,1,0,0]}return this.transformMatrix},n.prototype.inverseTransform=function(){var t,e,i,n,o,r,s,a,l=this.parseTransform();return{origin:l.origin,matrix:(t=l.matrix,e=t[0],i=t[2],n=t[4],o=t[1],r=t[3],s=t[5],a=e*r-i*o,[r,-o,-i,e,i*s-n*r,n*o-e*s].map(function(t){return t/a}))}},n.prototype.parseBounds=function(){return this.bounds||(this.bounds=this.hasTransform()?h(this.node):c(this.node))},n.prototype.hasTransform=function(){return"1,0,0,1,0,0"!==this.parseTransformMatrix().join(",")||this.parent&&this.parent.hasTransform()},n.prototype.getValue=function(){var t,e,i=this.node.value||"";return"SELECT"===this.node.tagName?(t=this.node,i=(e=t.options[t.selectedIndex||0])&&e.text||""):"password"===this.node.type&&(i=Array(i.length+1).join("")),0===i.length?this.node.placeholder||"":i},n.prototype.MATRIX_PROPERTY=/(matrix|matrix3d)\((.+)\)/,n.prototype.TEXT_SHADOW_PROPERTY=/((rgba|rgb)\([^\)]+\)(\s-?\d+px){0,})/g,n.prototype.TEXT_SHADOW_VALUES=/(-?\d+px)|(#.+)|(rgb\(.+\))|(rgba\(.+\))/g,n.prototype.CLIP=/^rect\((\d+)px,? (\d+)px,? (\d+)px,? (\d+)px\)$/,e.exports=n},{"./color":3,"./utils":26}],15:[function(t,e,i){function n(t,e,i,n,o){M("Starting NodeParser"),this.renderer=e,this.options=o,this.range=null,this.support=i,this.renderQueue=[],this.stack=new F(!0,1,t.ownerDocument,null);var r=new A(t,null);if(o.background&&e.rectangle(0,0,e.width,e.height,new L(o.background)),t===t.ownerDocument.documentElement){var s=new A(r.color("backgroundColor").isTransparent()?t.ownerDocument.body:t.ownerDocument.documentElement,null);e.rectangle(0,0,e.width,e.height,s.color("backgroundColor"))}r.visibile=r.isElementVisible(),this.createPseudoHideStyles(t.ownerDocument),this.disableAnimations(t.ownerDocument),this.nodes=S([r].concat(this.getChildren(r)).filter(function(t){return t.visible=t.isElementVisible()}).map(this.getPseudoElements,this)),this.fontMetrics=new j,M("Fetched nodes, total:",this.nodes.length),M("Calculate overflow clips"),this.calculateOverflowClips(),M("Start fetching images"),this.images=n.fetch(this.nodes.filter(C)),this.ready=this.images.ready.then(q(function(){return M("Images loaded, starting parsing"),M("Creating stacking contexts"),this.createStackingContexts(),M("Sorting stacking contexts"),this.sortStackingContexts(this.stack),this.parse(this.stack),M("Render queue created with "+this.renderQueue.length+" items"),new Promise(q(function(t){o.async?"function"==typeof o.async?o.async.call(this,this.renderQueue,t):0<this.renderQueue.length?(this.renderIndex=0,this.asyncRenderer(this.renderQueue,t)):t():(this.renderQueue.forEach(this.paint,this),t())},this))},this))}function o(t){return t.parent&&t.parent.clip.length}function u(){}function l(s,a,l,c){var u={top:a.top+s[0].width/2,right:a.right-s[1].width/2,bottom:a.bottom-s[2].width/2,left:a.left+s[3].width/2};return s.map(function(t,e){if(0<t.width){var i=a.left,n=a.top,o=a.width,r=a.height-s[2].width;switch(e){case 0:r=s[0].width,t.args=h({c1:[i,n],c2:[i+o,n],c3:[i+o-s[1].width,n+r],c4:[i+s[3].width,n+r]},c[0],c[1],l.topLeftOuter,l.topLeftInner,l.topRightOuter,l.topRightInner),t.pathArgs=f({c1:[u.left,u.top],c2:[u.right,u.top]},c[0],c[1],l.topLeft,l.topRight);break;case 1:i=a.left+a.width-s[1].width,o=s[1].width,t.args=h({c1:[i+o,n],c2:[i+o,n+r+s[2].width],c3:[i,n+r],c4:[i,n+s[0].width]},c[1],c[2],l.topRightOuter,l.topRightInner,l.bottomRightOuter,l.bottomRightInner),t.pathArgs=f({c1:[u.right,u.top],c2:[u.right,u.bottom]},c[1],c[2],l.topRight,l.bottomRight);break;case 2:n=n+a.height-s[2].width,r=s[2].width,t.args=h({c1:[i+o,n+r],c2:[i,n+r],c3:[i+s[3].width,n],c4:[i+o-s[3].width,n]},c[2],c[3],l.bottomRightOuter,l.bottomRightInner,l.bottomLeftOuter,l.bottomLeftInner),t.pathArgs=f({c1:[u.right,u.bottom],c2:[u.left,u.bottom]},c[2],c[3],l.bottomRight,l.bottomLeft);break;case 3:o=s[3].width,t.args=h({c1:[i,n+r+s[2].width],c2:[i,n],c3:[i+o,n+s[0].width],c4:[i+o,n+r]},c[3],c[0],l.bottomLeftOuter,l.bottomLeftInner,l.topLeftOuter,l.topLeftInner),t.pathArgs=f({c1:[u.left,u.bottom],c2:[u.left,u.top]},c[3],c[0],l.bottomLeft,l.topLeft)}}return t})}function b(t,e,i,n){var o=(Math.sqrt(2)-1)/3*4,r=i*o,s=n*o,a=t+i,l=e+n;return{topLeft:d({x:t,y:l},{x:t,y:l-s},{x:a-r,y:e},{x:a,y:e}),topRight:d({x:t,y:e},{x:t+r,y:e},{x:a,y:l-s},{x:a,y:l}),bottomRight:d({x:a,y:e},{x:a,y:e+s},{x:t+r,y:l},{x:t,y:l}),bottomLeft:d({x:a,y:l},{x:a-r,y:l},{x:t,y:e+s},{x:t,y:e})}}function c(t,e,i){var n=t.left,o=t.top,r=t.width,s=t.height,a=e[0][0]<r/2?e[0][0]:r/2,l=e[0][1]<s/2?e[0][1]:s/2,c=e[1][0]<r/2?e[1][0]:r/2,u=e[1][1]<s/2?e[1][1]:s/2,h=e[2][0]<r/2?e[2][0]:r/2,d=e[2][1]<s/2?e[2][1]:s/2,f=e[3][0]<r/2?e[3][0]:r/2,p=e[3][1]<s/2?e[3][1]:s/2,m=r-c,g=s-d,v=r-h,y=s-p;return{topLeft:b(n+i[3].width/2,o+i[0].width/2,Math.max(0,a-i[3].width/2),Math.max(0,l-i[0].width/2)).topLeft.subdivide(.5),topRight:b(n+Math.min(m,r+i[3].width/2),o+i[0].width/2,m>r+i[3].width/2?0:c-i[3].width/2,u-i[0].width/2).topRight.subdivide(.5),bottomRight:b(n+Math.min(v,r-i[3].width/2),o+Math.min(g,s+i[0].width/2),Math.max(0,h-i[1].width/2),d-i[2].width/2).bottomRight.subdivide(.5),bottomLeft:b(n+i[3].width/2,o+y,Math.max(0,f-i[3].width/2),p-i[2].width/2).bottomLeft.subdivide(.5),topLeftOuter:b(n,o,a,l).topLeft.subdivide(.5),topLeftInner:b(n+i[3].width,o+i[0].width,Math.max(0,a-i[3].width),Math.max(0,l-i[0].width)).topLeft.subdivide(.5),topRightOuter:b(n+m,o,c,u).topRight.subdivide(.5),topRightInner:b(n+Math.min(m,r+i[3].width),o+i[0].width,m>r+i[3].width?0:c-i[3].width,u-i[0].width).topRight.subdivide(.5),bottomRightOuter:b(n+v,o+g,h,d).bottomRight.subdivide(.5),bottomRightInner:b(n+Math.min(v,r-i[3].width),o+Math.min(g,s+i[0].width),Math.max(0,h-i[1].width),d-i[2].width).bottomRight.subdivide(.5),bottomLeftOuter:b(n,o+y,f,p).bottomLeft.subdivide(.5),bottomLeftInner:b(n+i[3].width,o+y,Math.max(0,f-i[3].width),p-i[2].width).bottomLeft.subdivide(.5)}}function d(a,l,c,u){var h=function(t,e,i){return{x:t.x+(e.x-t.x)*i,y:t.y+(e.y-t.y)*i}};return{start:a,startControl:l,endControl:c,end:u,subdivide:function(t){var e=h(a,l,t),i=h(l,c,t),n=h(c,u,t),o=h(e,i,t),r=h(i,n,t),s=h(o,r,t);return[d(a,e,o,s),d(s,r,n,u)]},curveTo:function(t){t.push(["bezierCurve",l.x,l.y,c.x,c.y,u.x,u.y])},curveToReversed:function(t){t.push(["bezierCurve",c.x,c.y,l.x,l.y,a.x,a.y])}}}function h(t,e,i,n,o,r,s){var a=[];return 0<e[0]||0<e[1]?(a.push(["line",n[1].start.x,n[1].start.y]),n[1].curveTo(a)):a.push(["line",t.c1[0],t.c1[1]]),0<i[0]||0<i[1]?(a.push(["line",r[0].start.x,r[0].start.y]),r[0].curveTo(a),a.push(["line",s[0].end.x,s[0].end.y]),s[0].curveToReversed(a)):(a.push(["line",t.c2[0],t.c2[1]]),a.push(["line",t.c3[0],t.c3[1]])),0<e[0]||0<e[1]?(a.push(["line",o[1].end.x,o[1].end.y]),o[1].curveToReversed(a)):a.push(["line",t.c4[0],t.c4[1]]),a}function f(t,e,i,n,o){var r=[];return 0<e[0]||0<e[1]?(r.push(["line",n[1].start.x,n[1].start.y]),n[1].curveTo(r)):r.push(["line",t.c1[0],t.c1[1]]),0<i[0]||0<i[1]?(r.push(["line",o[0].start.x,o[0].start.y]),o[0].curveTo(r)):r.push(["line",t.c2[0],t.c2[1]]),r}function s(t,e,i,n,o,r,s){0<e[0]||0<e[1]?(t.push(["line",n[0].start.x,n[0].start.y]),n[0].curveTo(t),n[1].curveTo(t)):t.push(["line",r,s]),(0<i[0]||0<i[1])&&t.push(["line",o[0].start.x,o[0].start.y])}function p(t){return t.cssInt("zIndex")<0}function m(t){return 0<t.cssInt("zIndex")}function g(t){return 0===t.cssInt("zIndex")}function v(t){return-1!==["inline","inline-block","inline-table"].indexOf(t.css("display"))}function y(t){return t instanceof F}function _(t){return 0<t.node.data.trim().length}function r(t){return t.nodeType===Node.TEXT_NODE||t.nodeType===Node.ELEMENT_NODE}function w(t){return"static"!==t.css("position")}function k(t){return"none"!==t.css("float")}function x(t){var e=this;return function(){return!t.apply(e,arguments)}}function C(t){return t.node.nodeType===Node.ELEMENT_NODE}function a(t){return!0===t.isPseudoElement}function D(t){return t.node.nodeType===Node.TEXT_NODE}function T(t){return parseInt(t,10)}function O(t){return t.width}function E(t){return t.node.nodeType!==Node.ELEMENT_NODE||-1===["SCRIPT","HEAD","TITLE","OBJECT","BR","OPTION"].indexOf(t.node.nodeName)}function S(t){return[].concat.apply([],t)}var M=t("./log"),I=t("punycode"),A=t("./nodecontainer"),P=t("./textcontainer"),N=t("./pseudoelementcontainer"),j=t("./fontmetrics"),L=t("./color"),F=t("./stackingcontext"),B=t("./utils"),q=B.bind,V=B.getBounds,R=B.parseBackgrounds,H=B.offsetBounds;n.prototype.calculateOverflowClips=function(){this.nodes.forEach(function(t){if(C(t)){a(t)&&t.appendToDOM(),t.borders=this.parseBorders(t);var e="hidden"===t.css("overflow")?[t.borders.clip]:[],i=t.parseClip();i&&-1!==["absolute","fixed"].indexOf(t.css("position"))&&e.push([["rect",t.bounds.left+i.left,t.bounds.top+i.top,i.right-i.left,i.bottom-i.top]]),t.clip=o(t)?t.parent.clip.concat(e):e,t.backgroundClip="hidden"!==t.css("overflow")?t.clip.concat([t.borders.clip]):t.clip,a(t)&&t.cleanDOM()}else D(t)&&(t.clip=o(t)?t.parent.clip:[]);a(t)||(t.bounds=null)},this)},n.prototype.asyncRenderer=function(t,e,i){i=i||Date.now(),this.paint(t[this.renderIndex++]),t.length===this.renderIndex?e():i+20>Date.now()?this.asyncRenderer(t,e,i):setTimeout(q(function(){this.asyncRenderer(t,e)},this),0)},n.prototype.createPseudoHideStyles=function(t){this.createStyles(t,"."+N.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+':before { content: "" !important; display: none !important; }.'+N.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER+':after { content: "" !important; display: none !important; }')},n.prototype.disableAnimations=function(t){this.createStyles(t,"* { -webkit-animation: none !important; -moz-animation: none !important; -o-animation: none !important; animation: none !important; -webkit-transition: none !important; -moz-transition: none !important; -o-transition: none !important; transition: none !important;}")},n.prototype.createStyles=function(t,e){var i=t.createElement("style");i.innerHTML=e,t.body.appendChild(i)},n.prototype.getPseudoElements=function(t){var e=[[t]];if(t.node.nodeType===Node.ELEMENT_NODE){var i=this.getPseudoElement(t,":before"),n=this.getPseudoElement(t,":after");i&&e.push(i),n&&e.push(n)}return S(e)},n.prototype.getPseudoElement=function(t,e){var i,n,o=t.computedStyle(e);if(!o||!o.content||"none"===o.content||"-moz-alt-content"===o.content||"none"===o.display)return null;for(var r=(i=o.content,n=void 0,(n=i.substr(0,1))===i.substr(i.length-1)&&n.match(/'|"/)?i.substr(1,i.length-2):i),s="url"===r.substr(0,3),a=document.createElement(s?"img":"html2canvaspseudoelement"),l=new N(a,t,e),c=o.length-1;0<=c;c--){var u=o.item(c).replace(/(\-[a-z])/g,function(t){return t.toUpperCase().replace("-","")});a.style[u]=o[u]}if(a.className=N.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+" "+N.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER,s)return a.src=R(r)[0].args[0],[l];var h=document.createTextNode(r);return a.appendChild(h),[l,new P(h,l)]},n.prototype.getChildren=function(i){return S([].filter.call(i.node.childNodes,r).map(function(t){var e=[t.nodeType===Node.TEXT_NODE?new P(t,i):new A(t,i)].filter(E);return t.nodeType===Node.ELEMENT_NODE&&e.length&&"TEXTAREA"!==t.tagName?e[0].isElementVisible()?e.concat(this.getChildren(e[0])):[]:e},this))},n.prototype.newStackingContext=function(t,e){var i=new F(e,t.getOpacity(),t.node,t.parent);t.cloneTo(i),(e?i.getParentStack(this):i.parent.stack).contexts.push(i),t.stack=i},n.prototype.createStackingContexts=function(){this.nodes.forEach(function(t){var e,i;C(t)&&(this.isRootElement(t)||t.getOpacity()<1||(i=(e=t).css("position"),"auto"!==(-1!==["absolute","relative","fixed"].indexOf(i)?e.css("zIndex"):"auto"))||this.isBodyWithTransparentRoot(t)||t.hasTransform())?this.newStackingContext(t,!0):C(t)&&(w(t)&&g(t)||-1!==["inline-block","inline-table"].indexOf(t.css("display"))||k(t))?this.newStackingContext(t,!1):t.assignStack(t.parent.stack)},this)},n.prototype.isBodyWithTransparentRoot=function(t){return"BODY"===t.node.nodeName&&t.parent.color("backgroundColor").isTransparent()},n.prototype.isRootElement=function(t){return null===t.parent},n.prototype.sortStackingContexts=function(t){var i;t.contexts.sort((i=t.contexts.slice(0),function(t,e){return t.cssInt("zIndex")+i.indexOf(t)/i.length-(e.cssInt("zIndex")+i.indexOf(e)/i.length)})),t.contexts.forEach(this.sortStackingContexts,this)},n.prototype.parseTextBounds=function(s){return function(t,e,i){if("none"!==s.parent.css("textDecoration").substr(0,4)||0!==t.trim().length){if(this.support.rangeBounds&&!s.parent.hasTransform()){var n=i.slice(0,e).join("").length;return this.getRangeBounds(s.node,n,t.length)}if(s.node&&"string"==typeof s.node.data){var o=s.node.splitText(t.length),r=this.getWrapperBounds(s.node,s.parent.hasTransform());return s.node=o,r}}else this.support.rangeBounds&&!s.parent.hasTransform()||(s.node=s.node.splitText(t.length));return{}}},n.prototype.getWrapperBounds=function(t,e){var i=t.ownerDocument.createElement("html2canvaswrapper"),n=t.parentNode,o=t.cloneNode(!0);i.appendChild(t.cloneNode(!0)),n.replaceChild(i,t);var r=e?H(i):V(i);return n.replaceChild(o,i),r},n.prototype.getRangeBounds=function(t,e,i){var n=this.range||(this.range=t.ownerDocument.createRange());return n.setStart(t,e),n.setEnd(t,e+i),n.getBoundingClientRect()},n.prototype.parse=function(t){var e=t.contexts.filter(p),i=t.children.filter(C),n=i.filter(x(k)),o=n.filter(x(w)).filter(x(v)),r=i.filter(x(w)).filter(k),s=n.filter(x(w)).filter(v),a=t.contexts.concat(n.filter(w)).filter(g),l=t.children.filter(D).filter(_),c=t.contexts.filter(m);e.concat(o).concat(r).concat(s).concat(a).concat(l).concat(c).forEach(function(t){this.renderQueue.push(t),y(t)&&(this.parse(t),this.renderQueue.push(new u))},this)},n.prototype.paint=function(t){try{t instanceof u?this.renderer.ctx.restore():D(t)?(a(t.parent)&&t.parent.appendToDOM(),this.paintText(t),a(t.parent)&&t.parent.cleanDOM()):this.paintNode(t)}catch(t){if(M(t),this.options.strict)throw t}},n.prototype.paintNode=function(t){y(t)&&(this.renderer.setOpacity(t.opacity),this.renderer.ctx.save(),t.hasTransform()&&this.renderer.setTransform(t.parseTransform())),"INPUT"===t.node.nodeName&&"checkbox"===t.node.type?this.paintCheckbox(t):"INPUT"===t.node.nodeName&&"radio"===t.node.type?this.paintRadio(t):this.paintElement(t)},n.prototype.paintElement=function(i){var n=i.parseBounds();this.renderer.clip(i.backgroundClip,function(){this.renderer.renderBackground(i,n,i.borders.borders.map(O))},this,i),this.renderer.mask(i.backgroundClip,function(){this.renderer.renderShadows(i,i.borders.clip)},this,i),this.renderer.clip(i.clip,function(){this.renderer.renderBorders(i.borders.borders)},this,i),this.renderer.clip(i.backgroundClip,function(){switch(i.node.nodeName){case"svg":case"IFRAME":var t=this.images.get(i.node);t?this.renderer.renderImage(i,n,i.borders,t):M("Error loading <"+i.node.nodeName+">",i.node);break;case"IMG":var e=this.images.get(i.node.src);e?this.renderer.renderImage(i,n,i.borders,e):M("Error loading <img>",i.node.src);break;case"CANVAS":this.renderer.renderImage(i,n,i.borders,{image:i.node});break;case"SELECT":case"INPUT":case"TEXTAREA":this.paintFormValue(i)}},this,i)},n.prototype.paintCheckbox=function(t){var e=t.parseBounds(),i=Math.min(e.width,e.height),n={width:i-1,height:i-1,top:e.top,left:e.left},o=[3,3],r=[o,o,o,o],s=[1,1,1,1].map(function(t){return{color:new L("#A5A5A5"),width:t}}),a=c(n,r,s);this.renderer.clip(t.backgroundClip,function(){this.renderer.rectangle(n.left+1,n.top+1,n.width-2,n.height-2,new L("#DEDEDE")),this.renderer.renderBorders(l(s,n,a,r)),t.node.checked&&(this.renderer.font(new L("#424242"),"normal","normal","bold",i-3+"px","arial"),this.renderer.text("",n.left+i/6,n.top+i-1))},this,t)},n.prototype.paintRadio=function(t){var e=t.parseBounds(),i=Math.min(e.width,e.height)-2;this.renderer.clip(t.backgroundClip,function(){this.renderer.circleStroke(e.left+1,e.top+1,i,new L("#DEDEDE"),1,new L("#A5A5A5")),t.node.checked&&this.renderer.circle(Math.ceil(e.left+i/4)+1,Math.ceil(e.top+i/4)+1,Math.floor(i/2),new L("#424242"))},this,t)},n.prototype.paintFormValue=function(e){var t=e.getValue();if(0<t.length){var i=e.node.ownerDocument,n=i.createElement("html2canvaswrapper");["lineHeight","textAlign","fontFamily","fontWeight","fontSize","color","paddingLeft","paddingTop","paddingRight","paddingBottom","width","height","borderLeftStyle","borderTopStyle","borderLeftWidth","borderTopWidth","boxSizing","whiteSpace","wordWrap"].forEach(function(t){try{n.style[t]=e.css(t)}catch(t){M("html2canvas: Parse: Exception caught in renderFormValue: "+t.message)}});var o=e.parseBounds();n.style.position="fixed",n.style.left=o.left+"px",n.style.top=o.top+"px",n.textContent=t,i.body.appendChild(n),this.paintText(new P(n.firstChild,e)),i.body.removeChild(n)}},n.prototype.paintText=function(i){i.applyTextTransform();var t,e=I.ucs2.decode(i.node.data),n=(!this.options.letterRendering||/^(normal|none|0px)$/.test(i.parent.css("letterSpacing")))&&(t=i.node.data,!/[^\u0000-\u00ff]/.test(t)),o=n?function(t){for(var e,i=[],n=0,o=!1;t.length;)r=t[n],-1!==[32,13,10,9,45].indexOf(r)===o?((e=t.splice(0,n)).length&&i.push(I.ucs2.encode(e)),o=!o,n=0):n++,n>=t.length&&(e=t.splice(0,n)).length&&i.push(I.ucs2.encode(e));var r;return i}(e):e.map(function(t){return I.ucs2.encode([t])});n||(i.parent.node.style.fontVariantLigatures="none");var r=i.parent.fontWeight(),s=i.parent.css("fontSize"),a=i.parent.css("fontFamily"),l=i.parent.parseTextShadows();this.renderer.font(i.parent.color("color"),i.parent.css("fontStyle"),i.parent.css("fontVariant"),r,s,a),l.length?this.renderer.fontShadow(l[0].color,l[0].offsetX,l[0].offsetY,l[0].blur):this.renderer.clearShadow(),this.renderer.clip(i.parent.clip,function(){o.map(this.parseTextBounds(i),this).forEach(function(t,e){t&&(this.renderer.text(o[e],t.left,t.bottom),this.renderTextDecoration(i.parent,t,this.fontMetrics.getMetrics(a,s)))},this)},this,i.parent)},n.prototype.renderTextDecoration=function(t,e,i){switch(t.css("textDecoration").split(" ")[0]){case"underline":this.renderer.rectangle(e.left,Math.round(e.top+i.baseline+i.lineWidth),e.width,1,t.color("color"));break;case"overline":this.renderer.rectangle(e.left,Math.round(e.top),e.width,1,t.color("color"));break;case"line-through":this.renderer.rectangle(e.left,Math.ceil(e.top+i.middle+i.lineWidth),e.width,1,t.color("color"))}};var z={inset:[["darken",.6],["darken",.1],["darken",.1],["darken",.6]]};n.prototype.parseBorders=function(r){var i,t=r.parseBounds(),e=(i=r,["TopLeft","TopRight","BottomRight","BottomLeft"].map(function(t){var e=i.css("border"+t+"Radius").split(" ");return e.length<=1&&(e[1]=e[0]),e.map(T)})),n=["Top","Right","Bottom","Left"].map(function(t,e){var i=r.css("border"+t+"Style"),n=r.color("border"+t+"Color");"inset"===i&&n.isBlack()&&(n=new L([255,255,255,n.a]));var o=z[i]?z[i][e]:null;return{width:r.cssInt("border"+t+"Width"),color:o?n[o[0]](o[1]):n,style:i,pathArgs:null,args:null}}),o=c(t,e,n);return{clip:this.parseBackgroundClip(r,o,n,e,t),borders:l(n,t,o,e)}},n.prototype.parseBackgroundClip=function(t,e,i,n,o){var r=[];switch(t.css("backgroundClip")){case"content-box":case"padding-box":s(r,n[0],n[1],e.topLeftInner,e.topRightInner,o.left+i[3].width,o.top+i[0].width),s(r,n[1],n[2],e.topRightInner,e.bottomRightInner,o.left+o.width-i[1].width,o.top+i[0].width),s(r,n[2],n[3],e.bottomRightInner,e.bottomLeftInner,o.left+o.width-i[1].width,o.top+o.height-i[2].width),s(r,n[3],n[0],e.bottomLeftInner,e.topLeftInner,o.left+i[3].width,o.top+o.height-i[2].width);break;default:s(r,n[0],n[1],e.topLeftOuter,e.topRightOuter,o.left,o.top),s(r,n[1],n[2],e.topRightOuter,e.bottomRightOuter,o.left+o.width,o.top),s(r,n[2],n[3],e.bottomRightOuter,e.bottomLeftOuter,o.left+o.width,o.top+o.height),s(r,n[3],n[0],e.bottomLeftOuter,e.topLeftOuter,o.left,o.top+o.height)}return r},e.exports=n},{"./color":3,"./fontmetrics":7,"./log":13,"./nodecontainer":14,"./pseudoelementcontainer":18,"./stackingcontext":21,"./textcontainer":25,"./utils":26,punycode:1}],16:[function(t,e,i){function a(t,e,i){var n="withCredentials"in new XMLHttpRequest;if(!e)return Promise.reject("No proxy configured");var o=l(n),r=c(e,t,o);return n?u(r):s(i,r,o).then(function(t){return f(t.content)})}function s(o,r,s){return new Promise(function(e,i){var t=o.createElement("script"),n=function(){delete window.html2canvas.proxy[s],o.body.removeChild(t)};window.html2canvas.proxy[s]=function(t){n(),e(t)},t.src=r,t.onerror=function(t){n(),i(t)},o.body.appendChild(t)})}function l(t){return t?"":"html2canvas_"+Date.now()+"_"+ ++o+"_"+Math.round(1e5*Math.random())}function c(t,e,i){return t+"?url="+encodeURIComponent(e)+(i.length?"&callback=html2canvas.proxy."+i:"")}var u=t("./xhr"),n=t("./utils"),h=t("./log"),d=t("./clone"),f=n.decode64,o=0;i.Proxy=a,i.ProxyURL=function(t,e,i){var n="crossOrigin"in new Image,o=l(n),r=c(e,t,o);return n?Promise.resolve(r):s(i,r,o).then(function(t){return"data:"+t.type+";base64,"+t.content})},i.loadUrlDocument=function(t,e,i,n,o,r){return new a(t,e,window.document).then((s=t,function(e){var i,t=new DOMParser;try{i=t.parseFromString(e,"text/html")}catch(t){h("DOMParser not supported, falling back to createHTMLDocument"),i=document.implementation.createHTMLDocument("");try{i.open(),i.write(e),i.close()}catch(t){h("createHTMLDocument write not supported, falling back to document.body.innerHTML"),i.body.innerHTML=e}}var n=i.querySelector("base");if(!n||!n.href.host){var o=i.createElement("base");o.href=s,i.head.insertBefore(o,i.head.firstChild)}return i})).then(function(t){return d(t,i,n,o,r,0,0)});var s}},{"./clone":2,"./log":13,"./utils":26,"./xhr":28}],17:[function(t,e,i){var r=t("./proxy").ProxyURL;e.exports=function(i,n){var t=document.createElement("a");t.href=i,i=t.href,this.src=i,this.image=new Image;var o=this;this.promise=new Promise(function(t,e){o.image.crossOrigin="Anonymous",o.image.onload=t,o.image.onerror=e,new r(i,n,document).then(function(t){o.image.src=t}).catch(e)})}},{"./proxy":16}],18:[function(t,e,i){function n(t,e,i){o.call(this,t,e),this.isPseudoElement=!0,this.before=":before"===i}var o=t("./nodecontainer");n.prototype.cloneTo=function(t){n.prototype.cloneTo.call(this,t),t.isPseudoElement=!0,t.before=this.before},(n.prototype=Object.create(o.prototype)).appendToDOM=function(){this.before?this.parent.node.insertBefore(this.node,this.parent.node.firstChild):this.parent.node.appendChild(this.node),this.parent.node.className+=" "+this.getHideClass()},n.prototype.cleanDOM=function(){this.node.parentNode.removeChild(this.node),this.parent.node.className=this.parent.node.className.replace(this.getHideClass(),"")},n.prototype.getHideClass=function(){return this["PSEUDO_HIDE_ELEMENT_CLASS_"+(this.before?"BEFORE":"AFTER")]},n.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE="___html2canvas___pseudoelement_before",n.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER="___html2canvas___pseudoelement_after",e.exports=n},{"./nodecontainer":14}],19:[function(t,e,i){function n(t,e,i,n,o){this.width=t,this.height=e,this.images=i,this.options=n,this.document=o}var l=t("./log");n.prototype.renderImage=function(t,e,i,n){var o=t.cssInt("paddingLeft"),r=t.cssInt("paddingTop"),s=t.cssInt("paddingRight"),a=t.cssInt("paddingBottom"),l=i.borders,c=e.width-(l[1].width+l[3].width+o+s),u=e.height-(l[0].width+l[2].width+r+a);this.drawImage(n,0,0,n.image.width||c,n.image.height||u,e.left+o+l[3].width,e.top+r+l[0].width,c,u)},n.prototype.renderBackground=function(t,e,i){0<e.height&&0<e.width&&(this.renderBackgroundColor(t,e),this.renderBackgroundImage(t,e,i))},n.prototype.renderBackgroundColor=function(t,e){var i=t.color("backgroundColor");i.isTransparent()||this.rectangle(e.left,e.top,e.width,e.height,i)},n.prototype.renderShadows=function(t,e){var i=t.css("boxShadow");if("none"!==i){var n=i.split(/,(?![^(]*\))/);this.shadow(e,n)}},n.prototype.renderBorders=function(t){t.forEach(this.renderBorder,this)},n.prototype.renderBorder=function(t){if(!t.color.isTransparent()&&null!==t.args)if("dashed"===t.style||"dotted"===t.style){var e="dashed"===t.style?3:t.width;this.ctx.setLineDash([e]),this.path(t.pathArgs),this.ctx.strokeStyle=t.color,this.ctx.lineWidth=t.width,this.ctx.stroke()}else this.drawShape(t.args,t.color)},n.prototype.renderBackgroundImage=function(r,s,a){r.parseBackgroundImages().reverse().forEach(function(t,e,i){switch(t.method){case"url":var n=this.images.get(t.args[0]);n?this.renderBackgroundRepeating(r,s,n,i.length-(e+1),a):l("Error loading background-image",t.args[0]);break;case"linear-gradient":case"gradient":var o=this.images.get(t.value);o?this.renderBackgroundGradient(o,s,a):l("Error loading background-image",t.args[0]);break;case"none":break;default:l("Unknown background-image type",t.args[0])}},this)},n.prototype.renderBackgroundRepeating=function(t,e,i,n,o){var r=t.parseBackgroundSize(e,i.image,n),s=t.parseBackgroundPosition(e,i.image,n,r);switch(t.parseBackgroundRepeat(n)){case"repeat-x":case"repeat no-repeat":this.backgroundRepeatShape(i,s,r,e,e.left+o[3],e.top+s.top+o[0],99999,r.height,o);break;case"repeat-y":case"no-repeat repeat":this.backgroundRepeatShape(i,s,r,e,e.left+s.left+o[3],e.top+o[0],r.width,99999,o);break;case"no-repeat":this.backgroundRepeatShape(i,s,r,e,e.left+s.left+o[3],e.top+s.top+o[0],r.width,r.height,o);break;default:this.renderBackgroundRepeat(i,s,r,{top:e.top,left:e.left},o[3],o[0])}},e.exports=n},{"./log":13}],20:[function(t,e,i){function n(t,e){r.apply(this,arguments),this.canvas=this.options.canvas||this.document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.options.canvas||(this.options.dpi&&(this.options.scale=this.options.dpi/96),this.options.scale?(this.canvas.style.width=t+"px",this.canvas.style.height=e+"px",this.canvas.width=Math.floor(t*this.options.scale),this.canvas.height=Math.floor(e*this.options.scale),this.ctx.scale(this.options.scale,this.options.scale)):(this.canvas.width=t,this.canvas.height=e)),this.taintCtx=this.document.createElement("canvas").getContext("2d"),this.ctx.textBaseline="bottom",this.variables={},a("Initialized CanvasRenderer with size",t,"x",e)}function o(t){return 0<t.length}var r=t("../renderer"),s=t("../lineargradientcontainer"),a=t("../log");(n.prototype=Object.create(r.prototype)).setFillStyle=function(t){return this.ctx.fillStyle="object"==typeof t&&t.isColor?t.toString():t,this.ctx},n.prototype.rectangle=function(t,e,i,n,o){this.setFillStyle(o).fillRect(t,e,i,n)},n.prototype.circle=function(t,e,i,n){this.setFillStyle(n),this.ctx.beginPath(),this.ctx.arc(t+i/2,e+i/2,i/2,0,2*Math.PI,!0),this.ctx.closePath(),this.ctx.fill()},n.prototype.circleStroke=function(t,e,i,n,o,r){this.circle(t,e,i,n),this.ctx.strokeStyle=r.toString(),this.ctx.stroke()},n.prototype.shadow=function(t,e){var i=this.setFillStyle("white");i.save(),this.shape(t),e.forEach(function(t){var e=function(t){var e={color:/^(#|rgb|hsl|(?!(inset|initial|inherit))\D+)/i,inset:/^inset/i,px:/px$/i},i=["x","y","blur","spread"],n=t.split(/ (?![^(]*\))/),o={};for(var r in e)o[r]=n.filter(e[r].test.bind(e[r])),o[r]=0===o[r].length?null:1===o[r].length?o[r][0]:o[r];for(var s=0;s<o.px.length;s++)o[i[s]]=parseInt(o.px[s]);return o}(t);e.inset||(i.shadowOffsetX=e.x,i.shadowOffsetY=e.y,i.shadowColor=e.color,i.shadowBlur=e.blur,i.fill())},this),i.restore()},n.prototype.drawShape=function(t,e){this.shape(t),this.setFillStyle(e).fill()},n.prototype.taints=function(e){if(null===e.tainted){this.taintCtx.drawImage(e.image,0,0);try{this.taintCtx.getImageData(0,0,1,1),e.tainted=!1}catch(t){this.taintCtx=document.createElement("canvas").getContext("2d"),e.tainted=!0}}return e.tainted},n.prototype.drawImage=function(t,e,i,n,o,r,s,a,l){this.taints(t)&&!this.options.allowTaint||this.ctx.drawImage(t.image,e,i,n,o,r,s,a,l)},n.prototype.clip=function(t,e,i,n){this.ctx.save(),n&&n.hasTransform()?(this.setTransform(n.inverseTransform()),t.filter(o).forEach(function(t){this.shape(t).clip()},this),this.setTransform(n.parseTransform())):t.filter(o).forEach(function(t){this.shape(t).clip()},this),e.call(i),this.ctx.restore()},n.prototype.mask=function(t,e,i,n){var o=t[t.length-1];if(o&&o.length){var r=[["rect",this.canvas.width,0,-this.canvas.width,this.canvas.height]].concat(o).concat([o[0]]);t=t.slice(0,-1).concat([r])}this.clip(t,e,i,n)},n.prototype.shape=function(t){return this.ctx.beginPath(),t.forEach(function(t,e){"rect"===t[0]?this.ctx.rect.apply(this.ctx,t.slice(1)):this.ctx[0===e?"moveTo":t[0]+"To"].apply(this.ctx,t.slice(1))},this),this.ctx.closePath(),this.ctx},n.prototype.path=function(t){return this.ctx.beginPath(),t.forEach(function(t,e){"rect"===t[0]?this.ctx.rect.apply(this.ctx,t.slice(1)):this.ctx[0===e?"moveTo":t[0]+"To"].apply(this.ctx,t.slice(1))},this),this.ctx},n.prototype.font=function(t,e,i,n,o,r){i=/^(normal|small-caps)$/i.test(i)?i:"",this.setFillStyle(t).font=[e,i,n,o,r].join(" ").split(",")[0]},n.prototype.fontShadow=function(t,e,i,n){this.setVariable("shadowColor",t.toString()).setVariable("shadowOffsetY",e).setVariable("shadowOffsetX",i).setVariable("shadowBlur",n)},n.prototype.clearShadow=function(){this.setVariable("shadowColor","rgba(0,0,0,0)")},n.prototype.setOpacity=function(t){this.ctx.globalAlpha=t},n.prototype.setTransform=function(t){this.ctx.translate(t.origin[0],t.origin[1]),this.ctx.transform.apply(this.ctx,t.matrix),this.ctx.translate(-t.origin[0],-t.origin[1])},n.prototype.setVariable=function(t,e){return this.variables[t]!==e&&(this.variables[t]=this.ctx[t]=e),this},n.prototype.text=function(t,e,i){this.ctx.fillText(t,e,i)},n.prototype.backgroundRepeatShape=function(t,e,i,n,o,r,s,a,l){var c=[["line",Math.round(o),Math.round(r)],["line",Math.round(o+s),Math.round(r)],["line",Math.round(o+s),Math.round(a+r)],["line",Math.round(o),Math.round(a+r)]];this.clip([c],function(){this.renderBackgroundRepeat(t,e,i,n,l[3],l[0])},this)},n.prototype.renderBackgroundRepeat=function(t,e,i,n,o,r){var s=Math.round(n.left+e.left+o),a=Math.round(n.top+e.top+r);this.setFillStyle(this.ctx.createPattern(this.resizeImage(t,i),"repeat")),this.ctx.translate(s,a),this.ctx.fill(),this.ctx.translate(-s,-a)},n.prototype.renderBackgroundGradient=function(t,e){if(t instanceof s){var i=this.ctx.createLinearGradient(e.left+e.width*t.x0,e.top+e.height*t.y0,e.left+e.width*t.x1,e.top+e.height*t.y1);t.colorStops.forEach(function(t){i.addColorStop(t.stop,t.color.toString())}),this.rectangle(e.left,e.top,e.width,e.height,i)}},n.prototype.resizeImage=function(t,e){var i=t.image;if(i.width===e.width&&i.height===e.height)return i;var n=document.createElement("canvas");return n.width=e.width,n.height=e.height,n.getContext("2d").drawImage(i,0,0,i.width,i.height,0,0,e.width,e.height),n},e.exports=n},{"../lineargradientcontainer":12,"../log":13,"../renderer":19}],21:[function(t,e,i){function n(t,e,i,n){o.call(this,i,n),this.ownStacking=t,this.contexts=[],this.children=[],this.opacity=(this.parent?this.parent.stack.opacity:1)*e}var o=t("./nodecontainer");(n.prototype=Object.create(o.prototype)).getParentStack=function(t){var e=this.parent?this.parent.stack:null;return e?e.ownStacking?e:e.getParentStack(t):t.stack},e.exports=n},{"./nodecontainer":14}],22:[function(t,e,i){function n(t){this.rangeBounds=this.testRangeBounds(t),this.cors=this.testCORS(),this.svg=this.testSVG()}n.prototype.testRangeBounds=function(t){var e,i,n=!1;return t.createRange&&((e=t.createRange()).getBoundingClientRect&&((i=t.createElement("boundtest")).style.height="123px",i.style.display="block",t.body.appendChild(i),e.selectNode(i),123===e.getBoundingClientRect().height&&(n=!0),t.body.removeChild(i))),n},n.prototype.testCORS=function(){return void 0!==(new Image).crossOrigin},n.prototype.testSVG=function(){var t=new Image,e=document.createElement("canvas"),i=e.getContext("2d");t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{i.drawImage(t,0,0),e.toDataURL()}catch(t){return!1}return!0},e.exports=n},{}],23:[function(t,e,i){function n(t){this.src=t,this.image=null;var i=this;this.promise=this.hasFabric().then(function(){return i.isInline(t)?Promise.resolve(i.inlineFormatting(t)):o(t)}).then(function(e){return new Promise(function(t){window.html2canvas.svg.fabric.loadSVGFromString(e,i.createCanvas.call(i,t))})})}var o=t("./xhr"),r=t("./utils").decode64;n.prototype.hasFabric=function(){return window.html2canvas.svg&&window.html2canvas.svg.fabric?Promise.resolve():Promise.reject(new Error("html2canvas.svg.js is not loaded, cannot render svg"))},n.prototype.inlineFormatting=function(t){return/^data:image\/svg\+xml;base64,/.test(t)?this.decode64(this.removeContentType(t)):this.removeContentType(t)},n.prototype.removeContentType=function(t){return t.replace(/^data:image\/svg\+xml(;base64)?,/,"")},n.prototype.isInline=function(t){return/^data:image\/svg\+xml/i.test(t)},n.prototype.createCanvas=function(n){var o=this;return function(t,e){var i=new window.html2canvas.svg.fabric.StaticCanvas("c");o.image=i.lowerCanvasEl,i.setWidth(e.width).setHeight(e.height).add(window.html2canvas.svg.fabric.util.groupSVGElements(t,e)).renderAll(),n(i.lowerCanvasEl)}},n.prototype.decode64=function(t){return"function"==typeof window.atob?window.atob(t):r(t)},e.exports=n},{"./utils":26,"./xhr":28}],24:[function(t,e,i){function n(i,t){this.src=i,this.image=null;var n=this;this.promise=t?new Promise(function(t,e){n.image=new Image,n.image.onload=t,n.image.onerror=e,n.image.src="data:image/svg+xml,"+(new XMLSerializer).serializeToString(i),!0===n.image.complete&&t(n.image)}):this.hasFabric().then(function(){return new Promise(function(t){window.html2canvas.svg.fabric.parseSVGDocument(i,n.createCanvas.call(n,t))})})}var o=t("./svgcontainer");n.prototype=Object.create(o.prototype),e.exports=n},{"./svgcontainer":23}],25:[function(t,e,i){function n(t,e){r.call(this,t,e)}function o(t,e,i){if(0<t.length)return e+i.toUpperCase()}var r=t("./nodecontainer");(n.prototype=Object.create(r.prototype)).applyTextTransform=function(){this.node.data=this.transform(this.parent.css("textTransform"))},n.prototype.transform=function(t){var e=this.node.data;switch(t){case"lowercase":return e.toLowerCase();case"capitalize":return e.replace(/(^|\s|:|-|\(|\))([a-z])/g,o);case"uppercase":return e.toUpperCase();default:return e}},e.exports=n},{"./nodecontainer":14}],26:[function(t,e,i){i.smallImage=function(){return"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"},i.bind=function(t,e){return function(){return t.apply(e,arguments)}},i.decode64=function(t){var e,i,n,o,r,s,a,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=t.length,u="";for(e=0;e<c;e+=4)r=l.indexOf(t[e])<<2|(i=l.indexOf(t[e+1]))>>4,s=(15&i)<<4|(n=l.indexOf(t[e+2]))>>2,a=(3&n)<<6|(o=l.indexOf(t[e+3])),u+=64===n?String.fromCharCode(r):64===o||-1===o?String.fromCharCode(r,s):String.fromCharCode(r,s,a);return u},i.getBounds=function(t){if(t.getBoundingClientRect){var e=t.getBoundingClientRect(),i=null==t.offsetWidth?e.width:t.offsetWidth;return{top:e.top,bottom:e.bottom||e.top+e.height,right:e.left+i,left:e.left,width:i,height:null==t.offsetHeight?e.height:t.offsetHeight}}return{}},i.offsetBounds=function(t){var e=t.offsetParent?i.offsetBounds(t.offsetParent):{top:0,left:0};return{top:t.offsetTop+e.top,bottom:t.offsetTop+t.offsetHeight+e.top,right:t.offsetLeft+e.left+t.offsetWidth,left:t.offsetLeft+e.left,width:t.offsetWidth,height:t.offsetHeight}},i.parseBackgrounds=function(t){var e,i,n,o,r,s,a,l=[],c=0,u=0,h=function(){e&&('"'===i.substr(0,1)&&(i=i.substr(1,i.length-2)),i&&a.push(i),"-"===e.substr(0,1)&&0<(o=e.indexOf("-",1)+1)&&(n=e.substr(0,o),e=e.substr(o)),l.push({prefix:n,method:e.toLowerCase(),value:r,args:a,image:null})),a=[],e=n=i=r=""};return a=[],e=n=i=r="",t.split("").forEach(function(t){if(!(0===c&&-1<" \r\n\t".indexOf(t))){switch(t){case'"':s?s===t&&(s=null):s=t;break;case"(":if(s)break;if(0===c)return c=1,void(r+=t);u++;break;case")":if(s)break;if(1===c){if(0===u)return c=0,r+=t,void h();u--}break;case",":if(s)break;if(0===c)return void h();if(1===c&&0===u&&!e.match(/^url$/i))return a.push(i),i="",void(r+=t)}r+=t,0===c?e+=t:i+=t}}),h(),l}},{}],27:[function(t,e,i){function n(t){o.apply(this,arguments),this.type="linear"===t.args[0]?o.TYPES.LINEAR:o.TYPES.RADIAL}var o=t("./gradientcontainer");n.prototype=Object.create(o.prototype),e.exports=n},{"./gradientcontainer":9}],28:[function(t,e,i){e.exports=function(n){return new Promise(function(t,e){var i=new XMLHttpRequest;i.open("GET",n),i.onload=function(){200===i.status?t(i.responseText):e(new Error(i.statusText))},i.onerror=function(){e(new Error("Network Error"))},i.send()})}},{}]},{},[4])(4)}),function(e){"function"==typeof define&&define.amd?define(["jquery"],function(t){return e(t)}):"object"==typeof module&&"object"==typeof module.exports?exports=e(require("jquery")):e(jQuery)}(function(e){function i(t){var e=7.5625,i=2.75;return t<1/i?e*t*t:t<2/i?e*(t-=1.5/i)*t+.75:t<2.5/i?e*(t-=2.25/i)*t+.9375:e*(t-=2.625/i)*t+.984375}e.easing.jswing=e.easing.swing;var n=Math.pow,o=Math.sqrt,r=Math.sin,s=Math.cos,a=Math.PI,l=1.70158,c=1.525*l,u=2*a/3,h=2*a/4.5;e.extend(e.easing,{def:"easeOutQuad",swing:function(t){return e.easing[e.easing.def](t)},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return 1-(1-t)*(1-t)},easeInOutQuad:function(t){return t<.5?2*t*t:1-n(-2*t+2,2)/2},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return 1-n(1-t,3)},easeInOutCubic:function(t){return t<.5?4*t*t*t:1-n(-2*t+2,3)/2},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return 1-n(1-t,4)},easeInOutQuart:function(t){return t<.5?8*t*t*t*t:1-n(-2*t+2,4)/2},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return 1-n(1-t,5)},easeInOutQuint:function(t){return t<.5?16*t*t*t*t*t:1-n(-2*t+2,5)/2},easeInSine:function(t){return 1-s(t*a/2)},easeOutSine:function(t){return r(t*a/2)},easeInOutSine:function(t){return-(s(a*t)-1)/2},easeInExpo:function(t){return 0===t?0:n(2,10*t-10)},easeOutExpo:function(t){return 1===t?1:1-n(2,-10*t)},easeInOutExpo:function(t){return 0===t?0:1===t?1:t<.5?n(2,20*t-10)/2:(2-n(2,-20*t+10))/2},easeInCirc:function(t){return 1-o(1-n(t,2))},easeOutCirc:function(t){return o(1-n(t-1,2))},easeInOutCirc:function(t){return t<.5?(1-o(1-n(2*t,2)))/2:(o(1-n(-2*t+2,2))+1)/2},easeInElastic:function(t){return 0===t?0:1===t?1:-n(2,10*t-10)*r((10*t-10.75)*u)},easeOutElastic:function(t){return 0===t?0:1===t?1:n(2,-10*t)*r((10*t-.75)*u)+1},easeInOutElastic:function(t){return 0===t?0:1===t?1:t<.5?-n(2,20*t-10)*r((20*t-11.125)*h)/2:n(2,-20*t+10)*r((20*t-11.125)*h)/2+1},easeInBack:function(t){return(l+1)*t*t*t-l*t*t},easeOutBack:function(t){return 1+(l+1)*n(t-1,3)+l*n(t-1,2)},easeInOutBack:function(t){return t<.5?n(2*t,2)*(7.189819*t-c)/2:(n(2*t-2,2)*((c+1)*(2*t-2)+c)+2)/2},easeInBounce:function(t){return 1-i(1-t)},easeOutBounce:i,easeInOutBounce:function(t){return t<.5?(1-i(1-2*t))/2:(1+i(2*t-1))/2}})}),Object.keys||(Object.keys=function(t){var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(i);return e}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t(require("jquery")):t(jQuery)}(function(w){function r(t,e){this.element=t;var i;i=w.cf._isValid(e)&&w.cf._isValid(e.language)?e.language:w.DateTimePicker.defaults.language,this.settings=w.extend({},w.DateTimePicker.defaults,w.DateTimePicker.i18n[i],e),this.options=e,this.oData=w.extend({},w.DateTimePicker.dataObject),this._defaults=w.DateTimePicker.defaults,this._name=w.DateTimePicker.name,this.init()}w.DateTimePicker=w.DateTimePicker||{name:"DateTimePicker",i18n:{},defaults:{mode:"date",defaultDate:null,dateSeparator:"-",timeSeparator:":",timeMeridiemSeparator:" ",dateTimeSeparator:" ",monthYearSeparator:" ",dateTimeFormat:"dd-MM-yyyy HH:mm",dateFormat:"dd-MM-yyyy",timeFormat:"HH:mm",maxDate:null,minDate:null,maxTime:null,minTime:null,maxDateTime:null,minDateTime:null,shortDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],fullDayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],fullMonthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],labels:null,minuteInterval:1,roundOffMinutes:!0,secondsInterval:1,roundOffSeconds:!0,showHeader:!0,titleContentDate:"Set Date",titleContentTime:"Set Time",titleContentDateTime:"Set Date & Time",buttonsToDisplay:["HeaderCloseButton","SetButton","ClearButton"],setButtonContent:"Set",clearButtonContent:"Clear",incrementButtonContent:"+",decrementButtonContent:"-",setValueInTextboxOnEveryClick:!1,readonlyInputs:!1,animationDuration:400,touchHoldInterval:300,captureTouchHold:!1,mouseHoldInterval:50,captureMouseHold:!1,isPopup:!0,parentElement:"body",isInline:!1,inputElement:null,language:"",init:null,addEventHandlers:null,beforeShow:null,afterShow:null,beforeHide:null,afterHide:null,buttonClicked:null,settingValueOfElement:null,formatHumanDate:null,parseDateTimeString:null,formatDateTimeString:null},dataObject:{dCurrentDate:new Date,iCurrentDay:0,iCurrentMonth:0,iCurrentYear:0,iCurrentHour:0,iCurrentMinutes:0,iCurrentSeconds:0,sCurrentMeridiem:"",iMaxNumberOfDays:0,sDateFormat:"",sTimeFormat:"",sDateTimeFormat:"",dMinValue:null,dMaxValue:null,sArrInputDateFormats:[],sArrInputTimeFormats:[],sArrInputDateTimeFormats:[],bArrMatchFormat:[],bDateMode:!1,bTimeMode:!1,bDateTimeMode:!1,oInputElement:null,iTabIndex:0,bElemFocused:!1,bIs12Hour:!1,sTouchButton:null,iTouchStart:null,oTimeInterval:null,bIsTouchDevice:"ontouchstart"in document.documentElement}},w.cf={_isValid:function(t){return null!=t&&""!==t},_compare:function(t,e){return!(!(null!=t)||!(null!=e)||t.toLowerCase()!==e.toLowerCase())}},w.fn.DateTimePicker=function(t){var e,i,n=w(this).data(),o=n?Object.keys(n):[];if("string"!=typeof t)return this.each(function(){w.removeData(this,"plugin_DateTimePicker"),w.data(this,"plugin_DateTimePicker")||w.data(this,"plugin_DateTimePicker",new r(this,t))});if(w.cf._isValid(n))if("destroy"===t)if(0<o.length){for(e in o)if(-1!==(i=o[e]).search("plugin_DateTimePicker")){w(document).unbind("click.DateTimePicker keydown.DateTimePicker keyup.DateTimePicker"),w(this).children().remove(),w(this).removeData(),w(this).unbind(),w(this).removeClass("dtpicker-overlay dtpicker-mobile dtpicker-inline"),n=n[i],console.log("Destroyed DateTimePicker Object"),console.log(n);break}}else console.log("No DateTimePicker Object Defined For This Element");else if("object"===t)if(0<o.length){for(e in o)if(-1!==(i=o[e]).search("plugin_DateTimePicker"))return n[i]}else console.log("No DateTimePicker Object Defined For This Element")},r.prototype={init:function(){var t=this;t._setDateFormatArray(),t._setTimeFormatArray(),t._setDateTimeFormatArray(),console.log(w(t.element).data("parentelement")+" "+w(t.element).attr("data-parentelement")),void 0!==w(t.element).data("parentelement")&&(t.settings.parentElement=w(t.element).data("parentelement")),t.settings.isPopup&&!t.settings.isInline&&(t._createPicker(),w(t.element).addClass("dtpicker-mobile")),t.settings.isInline&&(t._createPicker(),t._showPicker(t.settings.inputElement)),t.settings.init&&t.settings.init.call(t),t._addEventHandlersForInput()},_setDateFormatArray:function(){var t=this;t.oData.sArrInputDateFormats=[];var e="";e="dd"+t.settings.dateSeparator+"MM"+t.settings.dateSeparator+"yyyy",t.oData.sArrInputDateFormats.push(e),e="MM"+t.settings.dateSeparator+"dd"+t.settings.dateSeparator+"yyyy",t.oData.sArrInputDateFormats.push(e),e="yyyy"+t.settings.dateSeparator+"MM"+t.settings.dateSeparator+"dd",t.oData.sArrInputDateFormats.push(e),e="dd"+t.settings.dateSeparator+"MMM"+t.settings.dateSeparator+"yyyy",t.oData.sArrInputDateFormats.push(e),e="MM"+t.settings.monthYearSeparator+"yyyy",t.oData.sArrInputDateFormats.push(e),e="MMM"+t.settings.monthYearSeparator+"yyyy",t.oData.sArrInputDateFormats.push(e),e="MMMM"+t.settings.monthYearSeparator+"yyyy",t.oData.sArrInputDateFormats.push(e),e="yyyy"+t.settings.monthYearSeparator+"MM",t.oData.sArrInputDateFormats.push(e)},_setTimeFormatArray:function(){var t=this;t.oData.sArrInputTimeFormats=[];var e="";e="hh"+t.settings.timeSeparator+"mm"+t.settings.timeSeparator+"ss"+t.settings.timeMeridiemSeparator+"AA",t.oData.sArrInputTimeFormats.push(e),e="HH"+t.settings.timeSeparator+"mm"+t.settings.timeSeparator+"ss",t.oData.sArrInputTimeFormats.push(e),e="hh"+t.settings.timeSeparator+"mm"+t.settings.timeMeridiemSeparator+"AA",t.oData.sArrInputTimeFormats.push(e),e="HH"+t.settings.timeSeparator+"mm",t.oData.sArrInputTimeFormats.push(e)},_setDateTimeFormatArray:function(){var t=this;t.oData.sArrInputDateTimeFormats=[];var e="",i="",n="";e="dd"+t.settings.dateSeparator+"MM"+t.settings.dateSeparator+"yyyy",i="HH"+t.settings.timeSeparator+"mm"+t.settings.timeSeparator+"ss",n=e+t.settings.dateTimeSeparator+i,t.oData.sArrInputDateTimeFormats.push(n),e="dd"+t.settings.dateSeparator+"MM"+t.settings.dateSeparator+"yyyy",i="hh"+t.settings.timeSeparator+"mm"+t.settings.timeSeparator+"ss"+t.settings.timeMeridiemSeparator+"AA",n=e+t.settings.dateTimeSeparator+i,t.oData.sArrInputDateTimeFormats.push(n),e="MM"+t.settings.dateSeparator+"dd"+t.settings.dateSeparator+"yyyy",i="HH"+t.settings.timeSeparator+"mm"+t.settings.timeSeparator+"ss",n=e+t.settings.dateTimeSeparator+i,t.oData.sArrInputDateTimeFormats.push(n),e="MM"+t.settings.dateSeparator+"dd"+t.settings.dateSeparator+"yyyy",i="hh"+t.settings.timeSeparator+"mm"+t.settings.timeSeparator+"ss"+t.settings.timeMeridiemSeparator+"AA",n=e+t.settings.dateTimeSeparator+i,t.oData.sArrInputDateTimeFormats.push(n),e="yyyy"+t.settings.dateSeparator+"MM"+t.settings.dateSeparator+"dd",i="HH"+t.settings.timeSeparator+"mm"+t.settings.timeSeparator+"ss",n=e+t.settings.dateTimeSeparator+i,t.oData.sArrInputDateTimeFormats.push(n),e="yyyy"+t.settings.dateSeparator+"MM"+t.settings.dateSeparator+"dd",i="hh"+t.settings.timeSeparator+"mm"+t.settings.timeSeparator+"ss"+t.settings.timeMeridiemSeparator+"AA",n=e+t.settings.dateTimeSeparator+i,t.oData.sArrInputDateTimeFormats.push(n),e="dd"+t.settings.dateSeparator+"MMM"+t.settings.dateSeparator+"yyyy",i="hh"+t.settings.timeSeparator+"mm"+t.settings.timeSeparator+"ss",n=e+t.settings.dateTimeSeparator+i,t.oData.sArrInputDateTimeFormats.push(n),e="dd"+t.settings.dateSeparator+"MMM"+t.settings.dateSeparator+"yyyy",i="hh"+t.settings.timeSeparator+"mm"+t.settings.timeSeparator+"ss"+t.settings.timeMeridiemSeparator+"AA",n=e+t.settings.dateTimeSeparator+i,t.oData.sArrInputDateTimeFormats.push(n),e="dd"+t.settings.dateSeparator+"MM"+t.settings.dateSeparator+"yyyy",i="HH"+t.settings.timeSeparator+"mm",n=e+t.settings.dateTimeSeparator+i,t.oData.sArrInputDateTimeFormats.push(n),e="dd"+t.settings.dateSeparator+"MM"+t.settings.dateSeparator+"yyyy",i="hh"+t.settings.timeSeparator+"mm"+t.settings.timeMeridiemSeparator+"AA",n=e+t.settings.dateTimeSeparator+i,t.oData.sArrInputDateTimeFormats.push(n),e="MM"+t.settings.dateSeparator+"dd"+t.settings.dateSeparator+"yyyy",i="HH"+t.settings.timeSeparator+"mm",n=e+t.settings.dateTimeSeparator+i,t.oData.sArrInputDateTimeFormats.push(n),e="MM"+t.settings.dateSeparator+"dd"+t.settings.dateSeparator+"yyyy",i="hh"+t.settings.timeSeparator+"mm"+t.settings.timeMeridiemSeparator+"AA",n=e+t.settings.dateTimeSeparator+i,t.oData.sArrInputDateTimeFormats.push(n),e="yyyy"+t.settings.dateSeparator+"MM"+t.settings.dateSeparator+"dd",i="HH"+t.settings.timeSeparator+"mm",n=e+t.settings.dateTimeSeparator+i,t.oData.sArrInputDateTimeFormats.push(n),e="yyyy"+t.settings.dateSeparator+"MM"+t.settings.dateSeparator+"dd",i="hh"+t.settings.timeSeparator+"mm"+t.settings.timeMeridiemSeparator+"AA",n=e+t.settings.dateTimeSeparator+i,t.oData.sArrInputDateTimeFormats.push(n),e="dd"+t.settings.dateSeparator+"MMM"+t.settings.dateSeparator+"yyyy",i="hh"+t.settings.timeSeparator+"mm",n=e+t.settings.dateTimeSeparator+i,t.oData.sArrInputDateTimeFormats.push(n),e="dd"+t.settings.dateSeparator+"MMM"+t.settings.dateSeparator+"yyyy",i="hh"+t.settings.timeSeparator+"mm"+t.settings.timeMeridiemSeparator+"AA",n=e+t.settings.dateTimeSeparator+i,t.oData.sArrInputDateTimeFormats.push(n)},_matchFormat:function(t,e){var i=this;i.oData.bArrMatchFormat=[],i.oData.bDateMode=!1,i.oData.bTimeMode=!1,i.oData.bDateTimeMode=!1;var n,o=[];for(t=w.cf._isValid(t)?t:i.settings.mode,w.cf._compare(t,"date")?(e=w.cf._isValid(e)?e:i.oData.sDateFormat,i.oData.bDateMode=!0,o=i.oData.sArrInputDateFormats):w.cf._compare(t,"time")?(e=w.cf._isValid(e)?e:i.oData.sTimeFormat,i.oData.bTimeMode=!0,o=i.oData.sArrInputTimeFormats):w.cf._compare(t,"datetime")&&(e=w.cf._isValid(e)?e:i.oData.sDateTimeFormat,i.oData.bDateTimeMode=!0,o=i.oData.sArrInputDateTimeFormats),n=0;n<o.length;n++)i.oData.bArrMatchFormat.push(w.cf._compare(e,o[n]))},_setMatchFormat:function(t,e,i){0<t&&this._matchFormat(e,i)},_createPicker:function(){var e=this;e.settings.isInline?w(e.element).addClass("dtpicker-inline"):(w(e.element).addClass("dtpicker-overlay"),w(".dtpicker-overlay").click(function(t){e._hidePicker("")}));w(e.element).html("<div class='dtpicker-bg'><div class='dtpicker-cont'><div class='dtpicker-content'><div class='dtpicker-subcontent'></div></div></div></div>")},_addEventHandlersForInput:function(){var t=this;if(!t.settings.isInline){t.oData.oInputElement=null,w(t.settings.parentElement).find("input[type='date'], input[type='time'], input[type='datetime']").each(function(){w(this).attr("data-field",w(this).attr("type")),w(this).attr("type","text")});var e="[data-field='date'], [data-field='time'], [data-field='datetime']";w(t.settings.parentElement).off("focus",e,t._inputFieldFocus).on("focus",e,{obj:t},t._inputFieldFocus),w(t.settings.parentElement).off("click",e,t._inputFieldClick).on("click",e,{obj:t},t._inputFieldClick)}t.settings.addEventHandlers&&t.settings.addEventHandlers.call(t)},_inputFieldFocus:function(t){var e=t.data.obj;e.showDateTimePicker(this),e.oData.bMouseDown=!1},_inputFieldClick:function(t){var e=t.data.obj;w.cf._compare(w(this).prop("tagName"),"input")||e.showDateTimePicker(this),t.stopPropagation()},getDateObjectForInputField:function(t){var e=this;if(w.cf._isValid(t)){var i,n=e._getValueOfElement(t),o=w(t).data("field"),r="";return w.cf._isValid(o)||(o=e.settings.mode),e.settings.formatDateTimeString?i=e.settings.parseDateTimeString.call(e,n,o,r,w(t)):(r=w(t).data("format"),w.cf._isValid(r)||(w.cf._compare(o,"date")?r=e.settings.dateFormat:w.cf._compare(o,"time")?r=e.settings.timeFormat:w.cf._compare(o,"datetime")&&(r=e.settings.dateTimeFormat)),e._matchFormat(o,r),w.cf._compare(o,"date")?i=e._parseDate(n):w.cf._compare(o,"time")?i=e._parseTime(n):w.cf._compare(o,"datetime")&&(i=e._parseDateTime(n))),i}},setDateTimeStringInInputField:function(t,o){var e,r=this;o=o||r.oData.dCurrentDate,w.cf._isValid(t)?(e=[],"string"==typeof t?e.push(t):"object"==typeof t&&(e=t)):e=w.cf._isValid(r.settings.parentElement)?w(r.settings.parentElement).find("[data-field='date'], [data-field='time'], [data-field='datetime']"):w("[data-field='date'], [data-field='time'], [data-field='datetime']"),e.each(function(){var t,e,i,n;t=w(this).data("field"),w.cf._isValid(t)||(t=r.settings.mode),i=!(e="Custom"),r.settings.formatDateTimeString||(e=w(this).data("format"),w.cf._isValid(e)||(w.cf._compare(t,"date")?e=r.settings.dateFormat:w.cf._compare(t,"time")?e=r.settings.timeFormat:w.cf._compare(t,"datetime")&&(e=r.settings.dateTimeFormat)),i=r.getIs12Hour(t,e)),n=r._setOutput(t,e,i,o,this),r._setValueOfElement(n,w(this))})},getDateTimeStringInFormat:function(t,e,i){return this._setOutput(t,e,this.getIs12Hour(t,e),i)},showDateTimePicker:function(t){null!==this.oData.oInputElement?this.settings.isInline||this._hidePicker(0,t):this._showPicker(t)},_setButtonAction:function(t){var e=this;null!==e.oData.oInputElement&&(e._setValueOfElement(e._setOutput()),t?(e.settings.buttonClicked&&e.settings.buttonClicked.call(e,"TAB",e.oData.oInputElement),e.settings.isInline||e._hidePicker(0)):e.settings.isInline||e._hidePicker(""))},_setOutput:function(t,e,i,n,o){var r=this;n=w.cf._isValid(n)?n:r.oData.dCurrentDate,i=i||r.oData.bIs12Hour;var s,a=r._setVariablesForDate(n,!0,!0),l="",c=r._formatDate(a),u=r._formatTime(a),h=w.extend({},c,u),d="",f="",p=Function.length;return r.settings.formatDateTimeString?l=r.settings.formatDateTimeString.call(r,h,t,e,o):(r._setMatchFormat(p,t,e),r.oData.bDateMode?r.oData.bArrMatchFormat[0]?l=h.dd+r.settings.dateSeparator+h.MM+r.settings.dateSeparator+h.yyyy:r.oData.bArrMatchFormat[1]?l=h.MM+r.settings.dateSeparator+h.dd+r.settings.dateSeparator+h.yyyy:r.oData.bArrMatchFormat[2]?l=h.yyyy+r.settings.dateSeparator+h.MM+r.settings.dateSeparator+h.dd:r.oData.bArrMatchFormat[3]?l=h.dd+r.settings.dateSeparator+h.monthShort+r.settings.dateSeparator+h.yyyy:r.oData.bArrMatchFormat[4]?l=h.MM+r.settings.monthYearSeparator+h.yyyy:r.oData.bArrMatchFormat[5]?l=h.monthShort+r.settings.monthYearSeparator+h.yyyy:r.oData.bArrMatchFormat[6]?l=h.month+r.settings.monthYearSeparator+h.yyyy:r.oData.bArrMatchFormat[7]&&(l=h.yyyy+r.settings.monthYearSeparator+h.MM):r.oData.bTimeMode?r.oData.bArrMatchFormat[0]?l=h.hh+r.settings.timeSeparator+h.mm+r.settings.timeSeparator+h.ss+r.settings.timeMeridiemSeparator+h.ME:r.oData.bArrMatchFormat[1]?l=h.HH+r.settings.timeSeparator+h.mm+r.settings.timeSeparator+h.ss:r.oData.bArrMatchFormat[2]?l=h.hh+r.settings.timeSeparator+h.mm+r.settings.timeMeridiemSeparator+h.ME:r.oData.bArrMatchFormat[3]&&(l=h.HH+r.settings.timeSeparator+h.mm):r.oData.bDateTimeMode&&(r.oData.bArrMatchFormat[0]||r.oData.bArrMatchFormat[1]||r.oData.bArrMatchFormat[8]||r.oData.bArrMatchFormat[9]?d=h.dd+r.settings.dateSeparator+h.MM+r.settings.dateSeparator+h.yyyy:r.oData.bArrMatchFormat[2]||r.oData.bArrMatchFormat[3]||r.oData.bArrMatchFormat[10]||r.oData.bArrMatchFormat[11]?d=h.MM+r.settings.dateSeparator+h.dd+r.settings.dateSeparator+h.yyyy:r.oData.bArrMatchFormat[4]||r.oData.bArrMatchFormat[5]||r.oData.bArrMatchFormat[12]||r.oData.bArrMatchFormat[13]?d=h.yyyy+r.settings.dateSeparator+h.MM+r.settings.dateSeparator+h.dd:(r.oData.bArrMatchFormat[6]||r.oData.bArrMatchFormat[7]||r.oData.bArrMatchFormat[14]||r.oData.bArrMatchFormat[15])&&(d=h.dd+r.settings.dateSeparator+h.monthShort+r.settings.dateSeparator+h.yyyy),s=r.oData.bArrMatchFormat[0]||r.oData.bArrMatchFormat[1]||r.oData.bArrMatchFormat[2]||r.oData.bArrMatchFormat[3]||r.oData.bArrMatchFormat[4]||r.oData.bArrMatchFormat[5]||r.oData.bArrMatchFormat[6]||r.oData.bArrMatchFormat[7],f=i?s?h.hh+r.settings.timeSeparator+h.mm+r.settings.timeSeparator+h.ss+r.settings.timeMeridiemSeparator+h.ME:h.hh+r.settings.timeSeparator+h.mm+r.settings.timeMeridiemSeparator+h.ME:s?h.HH+r.settings.timeSeparator+h.mm+r.settings.timeSeparator+h.ss:h.HH+r.settings.timeSeparator+h.mm,""!==d&&""!==f&&(l=d+r.settings.dateTimeSeparator+f)),r._setMatchFormat(p)),l},_clearButtonAction:function(){null!==this.oData.oInputElement&&this._setValueOfElement(""),this.settings.isInline||this._hidePicker("")},_setOutputOnIncrementOrDecrement:function(){w.cf._isValid(this.oData.oInputElement)&&this.settings.setValueInTextboxOnEveryClick&&this._setValueOfElement(this._setOutput())},_showPicker:function(t){var e=this;if(null===e.oData.oInputElement){e.oData.oInputElement=t,e.oData.iTabIndex=parseInt(w(t).attr("tabIndex"));var i,n,o,r,s,a,l,c,u=w(t).data("field")||"",h=w(t).data("min")||"",d=w(t).data("max")||"",f=w(t).data("format")||"",p=w(t).data("view")||"",m=w(t).data("startend")||"",g=w(t).data("startendelem")||"",v=e._getValueOfElement(t)||"";if(""!==p&&(w.cf._compare(p,"Popup")?e.setIsPopup(!0):e.setIsPopup(!1)),!e.settings.isPopup&&!e.settings.isInline){e._createPicker();var y=w(e.oData.oInputElement).offset().top+w(e.oData.oInputElement).outerHeight(),b=w(e.oData.oInputElement).offset().left,_=w(e.oData.oInputElement).outerWidth();w(e.element).css({position:"absolute",top:y,left:b,width:_,height:"auto"})}e.settings.beforeShow&&e.settings.beforeShow.call(e,t),u=w.cf._isValid(u)?u:e.settings.mode,e.settings.mode=u,w.cf._isValid(f)||(w.cf._compare(u,"date")?f=e.settings.dateFormat:w.cf._compare(u,"time")?f=e.settings.timeFormat:w.cf._compare(u,"datetime")&&(f=e.settings.dateTimeFormat)),e._matchFormat(u,f),e.oData.dMinValue=null,e.oData.dMaxValue=null,e.oData.bIs12Hour=!1,e.oData.bDateMode?(i=h||e.settings.minDate,n=d||e.settings.maxDate,e.oData.sDateFormat=f,w.cf._isValid(i)&&(e.oData.dMinValue=e._parseDate(i)),w.cf._isValid(n)&&(e.oData.dMaxValue=e._parseDate(n)),""!==m&&(w.cf._compare(m,"start")||w.cf._compare(m,"end"))&&""!==g&&1<=w(g).length&&(""!==(o=e._getValueOfElement(w(g)))&&(r=e.settings.parseDateTimeString?e.settings.parseDateTimeString.call(e,o,u,f,w(g)):e._parseDate(o),w.cf._compare(m,"start")?w.cf._isValid(n)?e._compareDates(r,e.oData.dMaxValue)<0&&(e.oData.dMaxValue=new Date(r)):e.oData.dMaxValue=new Date(r):w.cf._compare(m,"end")&&(w.cf._isValid(i)?0<e._compareDates(r,e.oData.dMinValue)&&(e.oData.dMinValue=new Date(r)):e.oData.dMinValue=new Date(r)))),e.settings.parseDateTimeString?e.oData.dCurrentDate=e.settings.parseDateTimeString.call(e,v,u,f,w(t)):e.oData.dCurrentDate=e._parseDate(v),e.oData.dCurrentDate.setHours(0),e.oData.dCurrentDate.setMinutes(0),e.oData.dCurrentDate.setSeconds(0)):e.oData.bTimeMode?(i=h||e.settings.minTime,n=d||e.settings.maxTime,e.oData.sTimeFormat=f,e.oData.bIs12Hour=e.getIs12Hour(),w.cf._isValid(i)&&(e.oData.dMinValue=e._parseTime(i),w.cf._isValid(n)||(e.oData.sTimeFormat===e.oData.sArrInputTimeFormats[0]?n="11:59:59 PM":e.oData.sTimeFormat===e.oData.sArrInputTimeFormats[1]?n="23:59:59":e.oData.sTimeFormat===e.oData.sArrInputTimeFormats[2]?n="11:59 PM":e.oData.sTimeFormat===e.oData.sArrInputTimeFormats[3]&&(n="23:59"),e.oData.dMaxValue=e._parseTime(n))),w.cf._isValid(n)&&(e.oData.dMaxValue=e._parseTime(n),w.cf._isValid(i)||(e.oData.sTimeFormat===e.oData.sArrInputTimeFormats[0]?i="12:00:00 AM":e.oData.sTimeFormat===e.oData.sArrInputTimeFormats[1]?i="00:00:00":e.oData.sTimeFormat===e.oData.sArrInputTimeFormats[2]?i="12:00 AM":e.oData.sTimeFormat===e.oData.sArrInputTimeFormats[3]&&(i="00:00"),e.oData.dMinValue=e._parseTime(i))),""!==m&&(w.cf._compare(m,"start")||w.cf._compare(m,"end"))&&""!==g&&1<=w(g).length&&(""!==(s=e._getValueOfElement(w(g)))&&(e.settings.parseDateTimeString?r=e.settings.parseDateTimeString.call(e,s,u,f,w(g)):a=e._parseTime(s),w.cf._compare(m,"start")?(a.setMinutes(a.getMinutes()-1),w.cf._isValid(n)?2===e._compareTime(a,e.oData.dMaxValue)&&(e.oData.dMaxValue=new Date(a)):e.oData.dMaxValue=new Date(a)):w.cf._compare(m,"end")&&(a.setMinutes(a.getMinutes()+1),w.cf._isValid(i)?3===e._compareTime(a,e.oData.dMinValue)&&(e.oData.dMinValue=new Date(a)):e.oData.dMinValue=new Date(a)))),e.settings.parseDateTimeString?e.oData.dCurrentDate=e.settings.parseDateTimeString.call(e,v,u,f,w(t)):e.oData.dCurrentDate=e._parseTime(v)):e.oData.bDateTimeMode&&(i=h||e.settings.minDateTime,n=d||e.settings.maxDateTime,e.oData.sDateTimeFormat=f,e.oData.bIs12Hour=e.getIs12Hour(),w.cf._isValid(i)&&(e.oData.dMinValue=e._parseDateTime(i)),w.cf._isValid(n)&&(e.oData.dMaxValue=e._parseDateTime(n)),""!==m&&(w.cf._compare(m,"start")||w.cf._compare(m,"end"))&&""!==g&&1<=w(g).length&&(""!==(l=e._getValueOfElement(w(g)))&&(c=e.settings.parseDateTimeString?e.settings.parseDateTimeString.call(e,l,u,f,w(g)):e._parseDateTime(l),w.cf._compare(m,"start")?w.cf._isValid(n)?e._compareDateTime(c,e.oData.dMaxValue)<0&&(e.oData.dMaxValue=new Date(c)):e.oData.dMaxValue=new Date(c):w.cf._compare(m,"end")&&(w.cf._isValid(i)?0<e._compareDateTime(c,e.oData.dMinValue)&&(e.oData.dMinValue=new Date(c)):e.oData.dMinValue=new Date(c)))),e.settings.parseDateTimeString?e.oData.dCurrentDate=e.settings.parseDateTimeString.call(e,v,u,f,w(t)):e.oData.dCurrentDate=e._parseDateTime(v)),e._setVariablesForDate(),e._modifyPicker(),w(e.element).fadeIn(e.settings.animationDuration),e.settings.afterShow&&setTimeout(function(){e.settings.afterShow.call(e,t)},e.settings.animationDuration)}},_hidePicker:function(t,e){var i=this,n=i.oData.oInputElement;i.settings.beforeHide&&i.settings.beforeHide.call(i,n),w.cf._isValid(t)||(t=i.settings.animationDuration),w.cf._isValid(i.oData.oInputElement)&&(w(i.oData.oInputElement).blur(),i.oData.oInputElement=null),w(i.element).fadeOut(t),0===t?w(i.element).find(".dtpicker-subcontent").html(""):setTimeout(function(){w(i.element).find(".dtpicker-subcontent").html("")},t),w(document).unbind("click.DateTimePicker keydown.DateTimePicker keyup.DateTimePicker"),i.settings.afterHide&&(0===t?i.settings.afterHide.call(i,n):setTimeout(function(){i.settings.afterHide.call(i,n)},t)),w.cf._isValid(e)&&i._showPicker(e)},_modifyPicker:function(){var t,e,i=this,n=[];i.oData.bDateMode?(t=i.settings.titleContentDate,e=3,i.oData.bArrMatchFormat[0]?n=["day","month","year"]:i.oData.bArrMatchFormat[1]?n=["month","day","year"]:i.oData.bArrMatchFormat[2]?n=["year","month","day"]:i.oData.bArrMatchFormat[3]?n=["day","month","year"]:i.oData.bArrMatchFormat[4]?(e=2,n=["month","year"]):i.oData.bArrMatchFormat[5]?(e=2,n=["month","year"]):i.oData.bArrMatchFormat[6]?(e=2,n=["month","year"]):i.oData.bArrMatchFormat[7]&&(e=2,n=["year","month"])):i.oData.bTimeMode?(t=i.settings.titleContentTime,i.oData.bArrMatchFormat[0]?(e=4,n=["hour","minutes","seconds","meridiem"]):i.oData.bArrMatchFormat[1]?(e=3,n=["hour","minutes","seconds"]):i.oData.bArrMatchFormat[2]?(e=3,n=["hour","minutes","meridiem"]):i.oData.bArrMatchFormat[3]&&(e=2,n=["hour","minutes"])):i.oData.bDateTimeMode&&(t=i.settings.titleContentDateTime,i.oData.bArrMatchFormat[0]?(e=6,n=["day","month","year","hour","minutes","seconds"]):i.oData.bArrMatchFormat[1]?(e=7,n=["day","month","year","hour","minutes","seconds","meridiem"]):i.oData.bArrMatchFormat[2]?(e=6,n=["month","day","year","hour","minutes","seconds"]):i.oData.bArrMatchFormat[3]?(e=7,n=["month","day","year","hour","minutes","seconds","meridiem"]):i.oData.bArrMatchFormat[4]?(e=6,n=["year","month","day","hour","minutes","seconds"]):i.oData.bArrMatchFormat[5]?(e=7,n=["year","month","day","hour","minutes","seconds","meridiem"]):i.oData.bArrMatchFormat[6]?(e=6,n=["day","month","year","hour","minutes","seconds"]):i.oData.bArrMatchFormat[7]?(e=7,n=["day","month","year","hour","minutes","seconds","meridiem"]):i.oData.bArrMatchFormat[8]?(e=5,n=["day","month","year","hour","minutes"]):i.oData.bArrMatchFormat[9]?(e=6,n=["day","month","year","hour","minutes","meridiem"]):i.oData.bArrMatchFormat[10]?(e=5,n=["month","day","year","hour","minutes"]):i.oData.bArrMatchFormat[11]?(e=6,n=["month","day","year","hour","minutes","meridiem"]):i.oData.bArrMatchFormat[12]?(e=5,n=["year","month","day","hour","minutes"]):i.oData.bArrMatchFormat[13]?(e=6,n=["year","month","day","hour","minutes","meridiem"]):i.oData.bArrMatchFormat[14]?(e=5,n=["day","month","year","hour","minutes"]):i.oData.bArrMatchFormat[15]&&(e=6,n=["day","month","year","hour","minutes","meridiem"]));var o,r="dtpicker-comp"+e,s=!1,a=!1,l=!1;for(o=0;o<i.settings.buttonsToDisplay.length;o++)w.cf._compare(i.settings.buttonsToDisplay[o],"HeaderCloseButton")?s=!0:w.cf._compare(i.settings.buttonsToDisplay[o],"SetButton")?a=!0:w.cf._compare(i.settings.buttonsToDisplay[o],"ClearButton")&&(l=!0);var c="";i.settings.showHeader&&(c+="<div class='dtpicker-header'>",c+="<div class='dtpicker-title'>"+t+"</div>",s&&(c+="<a class='dtpicker-close'>&times;</a>"),c+="<div class='dtpicker-value'></div>",c+="</div>");var u="";for(u+="<div class='dtpicker-components'>",o=0;o<e;o++){var h=n[o];u+="<div class='dtpicker-compOutline "+r+"'>",u+="<div class='dtpicker-comp "+h+"'>",u+="<a class='dtpicker-compButton increment'>"+i.settings.incrementButtonContent+"</a>",u+=i.settings.readonlyInputs?"<input type='text' class='dtpicker-compValue' readonly>":"<input type='text' class='dtpicker-compValue'>",u+="<a class='dtpicker-compButton decrement'>"+i.settings.decrementButtonContent+"</a>",i.settings.labels&&(u+="<div class='dtpicker-label'>"+i.settings.labels[h]+"</div>"),u+="</div>",u+="</div>"}u+="</div>";var d="";d+="<div class='dtpicker-buttonCont"+(a&&l?" dtpicker-twoButtons":" dtpicker-singleButton")+"'>",a&&(d+="<a class='dtpicker-button dtpicker-buttonSet'>"+i.settings.setButtonContent+"</a>"),l&&(d+="<a class='dtpicker-button dtpicker-buttonClear'>"+i.settings.clearButtonContent+"</a>");var f=c+u+(d+="</div>");w(i.element).find(".dtpicker-subcontent").html(f),i._setCurrentDate(),i._addEventHandlersForPicker()},_addEventHandlersForPicker:function(){var e,i,n=this;if(n.settings.isInline||w(document).on("click.DateTimePicker",function(t){n._hidePicker("")}),w(document).on("keydown.DateTimePicker",function(t){if(i=parseInt(t.keyCode?t.keyCode:t.which),!w(".dtpicker-compValue").is(":focus")&&9===i)return n._setButtonAction(!0),w("[tabIndex="+(n.oData.iTabIndex+1)+"]").focus(),!1;if(w(".dtpicker-compValue").is(":focus")){if(38===i)return e=w(".dtpicker-compValue:focus").parent().attr("class"),n._incrementDecrementActionsUsingArrowAndMouse(e,"inc"),!1;if(40===i)return e=w(".dtpicker-compValue:focus").parent().attr("class"),n._incrementDecrementActionsUsingArrowAndMouse(e,"dec"),!1}}),n.settings.isInline||w(document).on("keydown.DateTimePicker",function(t){i=parseInt(t.keyCode?t.keyCode:t.which),w(".dtpicker-compValue").is(":focus")||9===i||n._hidePicker("")}),w(".dtpicker-cont *").click(function(t){t.stopPropagation()}),n.settings.readonlyInputs||(w(".dtpicker-compValue").not(".month .dtpicker-compValue, .meridiem .dtpicker-compValue").keyup(function(){this.value=this.value.replace(/[^0-9\.]/g,"")}),w(".dtpicker-compValue").focus(function(){n.oData.bElemFocused=!0,w(this).select()}),w(".dtpicker-compValue").blur(function(){n._getValuesFromInputBoxes(),n._setCurrentDate(),n.oData.bElemFocused=!1;var t=w(this).parent().parent();setTimeout(function(){t.is(":last-child")&&!n.oData.bElemFocused&&n._setButtonAction(!1)},50)}),w(".dtpicker-compValue").keyup(function(t){var e,i=w(this),n=i.val(),o=n.length;i.parent().hasClass("day")||i.parent().hasClass("hour")||i.parent().hasClass("minutes")||i.parent().hasClass("meridiem")?2<o&&(e=n.slice(0,2),i.val(e)):i.parent().hasClass("month")?3<o&&(e=n.slice(0,3),i.val(e)):i.parent().hasClass("year")&&4<o&&(e=n.slice(0,4),i.val(e)),9===parseInt(t.keyCode?t.keyCode:t.which)&&w(this).select()})),w(n.element).find(".dtpicker-compValue").on("mousewheel DOMMouseScroll onmousewheel",function(t){if(w(".dtpicker-compValue").is(":focus"))return 0<Math.max(-1,Math.min(1,t.originalEvent.wheelDelta))?(e=w(".dtpicker-compValue:focus").parent().attr("class"),n._incrementDecrementActionsUsingArrowAndMouse(e,"inc")):(e=w(".dtpicker-compValue:focus").parent().attr("class"),n._incrementDecrementActionsUsingArrowAndMouse(e,"dec")),!1}),w(n.element).find(".dtpicker-close").click(function(t){n.settings.buttonClicked&&n.settings.buttonClicked.call(n,"CLOSE",n.oData.oInputElement),n.settings.isInline||n._hidePicker("")}),w(n.element).find(".dtpicker-buttonSet").click(function(t){n.settings.buttonClicked&&n.settings.buttonClicked.call(n,"SET",n.oData.oInputElement),n._setButtonAction(!1)}),w(n.element).find(".dtpicker-buttonClear").click(function(t){n.settings.buttonClicked&&n.settings.buttonClicked.call(n,"CLEAR",n.oData.oInputElement),n._clearButtonAction()}),n.settings.captureTouchHold||n.settings.captureMouseHold){var t="";n.settings.captureTouchHold&&n.oData.bIsTouchDevice&&(t+="touchstart touchmove touchend "),n.settings.captureMouseHold&&(t+="mousedown mouseup"),w(".dtpicker-cont *").on(t,function(t){n._clearIntervalForTouchEvents()}),n._bindTouchEvents("day"),n._bindTouchEvents("month"),n._bindTouchEvents("year"),n._bindTouchEvents("hour"),n._bindTouchEvents("minutes"),n._bindTouchEvents("seconds")}else w(n.element).find(".day .increment, .day .increment *").click(function(t){n.oData.iCurrentDay++,n._setCurrentDate(),n._setOutputOnIncrementOrDecrement()}),w(n.element).find(".day .decrement, .day .decrement *").click(function(t){n.oData.iCurrentDay--,n._setCurrentDate(),n._setOutputOnIncrementOrDecrement()}),w(n.element).find(".month .increment, .month .increment *").click(function(t){n.oData.iCurrentMonth++,n._setCurrentDate(),n._setOutputOnIncrementOrDecrement()}),w(n.element).find(".month .decrement, .month .decrement *").click(function(t){n.oData.iCurrentMonth--,n._setCurrentDate(),n._setOutputOnIncrementOrDecrement()}),w(n.element).find(".year .increment, .year .increment *").click(function(t){n.oData.iCurrentYear++,n._setCurrentDate(),n._setOutputOnIncrementOrDecrement()}),w(n.element).find(".year .decrement, .year .decrement *").click(function(t){n.oData.iCurrentYear--,n._setCurrentDate(),n._setOutputOnIncrementOrDecrement()}),w(n.element).find(".hour .increment, .hour .increment *").click(function(t){n.oData.iCurrentHour++,n._setCurrentDate(),n._setOutputOnIncrementOrDecrement()}),w(n.element).find(".hour .decrement, .hour .decrement *").click(function(t){n.oData.iCurrentHour--,n._setCurrentDate(),n._setOutputOnIncrementOrDecrement()}),w(n.element).find(".minutes .increment, .minutes .increment *").click(function(t){n.oData.iCurrentMinutes+=n.settings.minuteInterval,n._setCurrentDate(),n._setOutputOnIncrementOrDecrement()}),w(n.element).find(".minutes .decrement, .minutes .decrement *").click(function(t){n.oData.iCurrentMinutes-=n.settings.minuteInterval,n._setCurrentDate(),n._setOutputOnIncrementOrDecrement()}),w(n.element).find(".seconds .increment, .seconds .increment *").click(function(t){n.oData.iCurrentSeconds+=n.settings.secondsInterval,n._setCurrentDate(),n._setOutputOnIncrementOrDecrement()}),w(n.element).find(".seconds .decrement, .seconds .decrement *").click(function(t){n.oData.iCurrentSeconds-=n.settings.secondsInterval,n._setCurrentDate(),n._setOutputOnIncrementOrDecrement()});w(n.element).find(".meridiem .dtpicker-compButton, .meridiem .dtpicker-compButton *").click(function(t){w.cf._compare(n.oData.sCurrentMeridiem,"AM")?(n.oData.sCurrentMeridiem="PM",n.oData.iCurrentHour+=12):w.cf._compare(n.oData.sCurrentMeridiem,"PM")&&(n.oData.sCurrentMeridiem="AM",n.oData.iCurrentHour-=12),n._setCurrentDate(),n._setOutputOnIncrementOrDecrement()})},_adjustMinutes:function(t){var e=this;return e.settings.roundOffMinutes&&1!==e.settings.minuteInterval&&(t=t%e.settings.minuteInterval?t-t%e.settings.minuteInterval+e.settings.minuteInterval:t),t},_adjustSeconds:function(t){var e=this;return e.settings.roundOffSeconds&&1!==e.settings.secondsInterval&&(t=t%e.settings.secondsInterval?t-t%e.settings.secondsInterval+e.settings.secondsInterval:t),t},_getValueOfElement:function(t){return w.cf._compare(w(t).prop("tagName"),"INPUT")?w(t).val():w(t).html()},_setValueOfElement:function(t,e){var i=this;w.cf._isValid(e)||(e=w(i.oData.oInputElement)),w.cf._compare(e.prop("tagName"),"INPUT")?e.val(t):e.html(t);var n=i.getDateObjectForInputField(e);return i.settings.settingValueOfElement&&i.settings.settingValueOfElement.call(i,t,n,e),e.change(),t},_bindTouchEvents:function(e){var i=this;w(i.element).find("."+e+" .increment, ."+e+" .increment *").on("touchstart mousedown",function(t){t.stopPropagation(),w.cf._isValid(i.oData.sTouchButton)||(i.oData.iTouchStart=(new Date).getTime(),i.oData.sTouchButton=e+"-inc",i._setIntervalForTouchEvents())}),w(i.element).find("."+e+" .increment, ."+e+" .increment *").on("touchend mouseup",function(t){t.stopPropagation(),i._clearIntervalForTouchEvents()}),w(i.element).find("."+e+" .decrement, ."+e+" .decrement *").on("touchstart mousedown",function(t){t.stopPropagation(),w.cf._isValid(i.oData.sTouchButton)||(i.oData.iTouchStart=(new Date).getTime(),i.oData.sTouchButton=e+"-dec",i._setIntervalForTouchEvents())}),w(i.element).find("."+e+" .decrement, ."+e+" .decrement *").on("touchend mouseup",function(t){t.stopPropagation(),i._clearIntervalForTouchEvents()})},_setIntervalForTouchEvents:function(){var t,e=this,i=e.oData.bIsTouchDevice?e.settings.touchHoldInterval:e.settings.mouseHoldInterval;w.cf._isValid(e.oData.oTimeInterval)||(e.oData.oTimeInterval=setInterval(function(){t=(new Date).getTime()-e.oData.iTouchStart,i<t&&w.cf._isValid(e.oData.sTouchButton)&&("day-inc"===e.oData.sTouchButton?e.oData.iCurrentDay++:"day-dec"===e.oData.sTouchButton?e.oData.iCurrentDay--:"month-inc"===e.oData.sTouchButton?e.oData.iCurrentMonth++:"month-dec"===e.oData.sTouchButton?e.oData.iCurrentMonth--:"year-inc"===e.oData.sTouchButton?e.oData.iCurrentYear++:"year-dec"===e.oData.sTouchButton?e.oData.iCurrentYear--:"hour-inc"===e.oData.sTouchButton?e.oData.iCurrentHour++:"hour-dec"===e.oData.sTouchButton?e.oData.iCurrentHour--:"minute-inc"===e.oData.sTouchButton?e.oData.iCurrentMinutes+=e.settings.minuteInterval:"minute-dec"===e.oData.sTouchButton?e.oData.iCurrentMinutes-=e.settings.minuteInterval:"second-inc"===e.oData.sTouchButton?e.oData.iCurrentSeconds+=e.settings.secondsInterval:"second-dec"===e.oData.sTouchButton&&(e.oData.iCurrentSeconds-=e.settings.secondsInterval),e._setCurrentDate(),e._setOutputOnIncrementOrDecrement(),e.oData.iTouchStart=(new Date).getTime())},i))},_clearIntervalForTouchEvents:function(){var t=this;clearInterval(t.oData.oTimeInterval),w.cf._isValid(t.oData.sTouchButton)&&(t.oData.sTouchButton=null,t.oData.iTouchStart=0),t.oData.oTimeInterval=null},_incrementDecrementActionsUsingArrowAndMouse:function(t,e){var i=this;t.includes("day")?"inc"===e?i.oData.iCurrentDay++:"dec"===e&&i.oData.iCurrentDay--:t.includes("month")?"inc"===e?i.oData.iCurrentMonth++:"dec"===e&&i.oData.iCurrentMonth--:t.includes("year")?"inc"===e?i.oData.iCurrentYear++:"dec"===e&&i.oData.iCurrentYear--:t.includes("hour")?"inc"===e?i.oData.iCurrentHour++:"dec"===e&&i.oData.iCurrentHour--:t.includes("minutes")?"inc"===e?i.oData.iCurrentMinutes+=i.settings.minuteInterval:"dec"===e&&(i.oData.iCurrentMinutes-=i.settings.minuteInterval):t.includes("seconds")&&("inc"===e?i.oData.iCurrentSeconds+=i.settings.secondsInterval:"dec"===e&&(i.oData.iCurrentSeconds-=i.settings.secondsInterval)),i._setCurrentDate(),i._setOutputOnIncrementOrDecrement()},_parseDate:function(t){var e=this,i=e.settings.defaultDate?new Date(e.settings.defaultDate):new Date,n=i.getDate(),o=i.getMonth(),r=i.getFullYear();if(w.cf._isValid(t))if("string"==typeof t){var s;s=e.oData.bArrMatchFormat[4]||e.oData.bArrMatchFormat[5]||e.oData.bArrMatchFormat[6]?t.split(e.settings.monthYearSeparator):t.split(e.settings.dateSeparator),e.oData.bArrMatchFormat[0]?(n=parseInt(s[0]),o=parseInt(s[1]-1),r=parseInt(s[2])):e.oData.bArrMatchFormat[1]?(o=parseInt(s[0]-1),n=parseInt(s[1]),r=parseInt(s[2])):e.oData.bArrMatchFormat[2]?(r=parseInt(s[0]),o=parseInt(s[1]-1),n=parseInt(s[2])):e.oData.bArrMatchFormat[3]?(n=parseInt(s[0]),o=e._getShortMonthIndex(s[1]),r=parseInt(s[2])):e.oData.bArrMatchFormat[4]?(n=1,o=parseInt(s[0])-1,r=parseInt(s[1])):e.oData.bArrMatchFormat[5]?(n=1,o=e._getShortMonthIndex(s[0]),r=parseInt(s[1])):e.oData.bArrMatchFormat[6]?(n=1,o=e._getFullMonthIndex(s[0]),r=parseInt(s[1])):e.oData.bArrMatchFormat[7]&&(n=1,o=parseInt(s[1])-1,r=parseInt(s[0]))}else n=t.getDate(),o=t.getMonth(),r=t.getFullYear();return new Date(r,o,n,0,0,0,0)},_parseTime:function(t){var e,i,n,o=this,r=o.settings.defaultDate?new Date(o.settings.defaultDate):new Date,s=r.getDate(),a=r.getMonth(),l=r.getFullYear(),c=r.getHours(),u=r.getMinutes(),h=r.getSeconds(),d=o.oData.bArrMatchFormat[0]||o.oData.bArrMatchFormat[1];return h=d?o._adjustSeconds(h):0,w.cf._isValid(t)&&("string"==typeof t?(o.oData.bIs12Hour&&(t=(e=t.split(o.settings.timeMeridiemSeparator))[0],i=e[1],w.cf._compare(i,"AM")||w.cf._compare(i,"PM")||(i="")),n=t.split(o.settings.timeSeparator),c=parseInt(n[0]),u=parseInt(n[1]),d&&(h=parseInt(n[2]),h=o._adjustSeconds(h)),12===c&&w.cf._compare(i,"AM")?c=0:c<12&&w.cf._compare(i,"PM")&&(c+=12)):(c=t.getHours(),u=t.getMinutes(),d&&(h=t.getSeconds(),h=o._adjustSeconds(h)))),u=o._adjustMinutes(u),new Date(l,a,s,c,u,h,0)},_parseDateTime:function(t){var e,i,n,o,r,s=this,a=s.settings.defaultDate?new Date(s.settings.defaultDate):new Date,l=a.getDate(),c=a.getMonth(),u=a.getFullYear(),h=a.getHours(),d=a.getMinutes(),f=a.getSeconds(),p="",m=s.oData.bArrMatchFormat[0]||s.oData.bArrMatchFormat[1]||s.oData.bArrMatchFormat[2]||s.oData.bArrMatchFormat[3]||s.oData.bArrMatchFormat[4]||s.oData.bArrMatchFormat[5]||s.oData.bArrMatchFormat[6]||s.oData.bArrMatchFormat[7];return f=m?s._adjustSeconds(f):0,w.cf._isValid(t)&&("string"==typeof t?(i=(e=t.split(s.settings.dateTimeSeparator))[0].split(s.settings.dateSeparator),s.oData.bArrMatchFormat[0]||s.oData.bArrMatchFormat[1]||s.oData.bArrMatchFormat[8]||s.oData.bArrMatchFormat[9]?(l=parseInt(i[0]),c=parseInt(i[1]-1),u=parseInt(i[2])):s.oData.bArrMatchFormat[2]||s.oData.bArrMatchFormat[3]||s.oData.bArrMatchFormat[10]||s.oData.bArrMatchFormat[11]?(c=parseInt(i[0]-1),l=parseInt(i[1]),u=parseInt(i[2])):s.oData.bArrMatchFormat[4]||s.oData.bArrMatchFormat[5]||s.oData.bArrMatchFormat[12]||s.oData.bArrMatchFormat[13]?(u=parseInt(i[0]),c=parseInt(i[1]-1),l=parseInt(i[2])):(s.oData.bArrMatchFormat[6]||s.oData.bArrMatchFormat[7]||s.oData.bArrMatchFormat[14]||s.oData.bArrMatchFormat[15])&&(l=parseInt(i[0]),c=s._getShortMonthIndex(i[1]),u=parseInt(i[2])),n=e[1],w.cf._isValid(n)&&(s.oData.bIs12Hour&&(p=w.cf._compare(s.settings.dateTimeSeparator,s.settings.timeMeridiemSeparator)&&3===e.length?e[2]:(n=(o=n.split(s.settings.timeMeridiemSeparator))[0],o[1]),w.cf._compare(p,"AM")||w.cf._compare(p,"PM")||(p="")),r=n.split(s.settings.timeSeparator),h=parseInt(r[0]),d=parseInt(r[1]),m&&(f=parseInt(r[2])),12===h&&w.cf._compare(p,"AM")?h=0:h<12&&w.cf._compare(p,"PM")&&(h+=12))):(l=t.getDate(),c=t.getMonth(),u=t.getFullYear(),h=t.getHours(),d=t.getMinutes(),m&&(f=t.getSeconds(),f=s._adjustSeconds(f)))),d=s._adjustMinutes(d),new Date(u,c,l,h,d,f,0)},_getShortMonthIndex:function(t){for(var e=0;e<this.settings.shortMonthNames.length;e++)if(w.cf._compare(t,this.settings.shortMonthNames[e]))return e},_getFullMonthIndex:function(t){for(var e=0;e<this.settings.fullMonthNames.length;e++)if(w.cf._compare(t,this.settings.fullMonthNames[e]))return e},getIs12Hour:function(t,e){var i=this,n=!1,o=Function.length;return i._setMatchFormat(o,t,e),i.oData.bTimeMode?n=i.oData.bArrMatchFormat[0]||i.oData.bArrMatchFormat[2]:i.oData.bDateTimeMode&&(n=i.oData.bArrMatchFormat[1]||i.oData.bArrMatchFormat[3]||i.oData.bArrMatchFormat[5]||i.oData.bArrMatchFormat[7]||i.oData.bArrMatchFormat[9]||i.oData.bArrMatchFormat[11]||i.oData.bArrMatchFormat[13]||i.oData.bArrMatchFormat[15]),i._setMatchFormat(o),n},_setVariablesForDate:function(t,e,i){var n,o=this,r={},s=w.cf._isValid(t);return s?(n=new Date(t),w.cf._isValid(e)||(e=!0),w.cf._isValid(i)||(i=!0)):(n="[object Date]"===Object.prototype.toString.call(o.oData.dCurrentDate)&&isFinite(o.oData.dCurrentDate)?new Date(o.oData.dCurrentDate):new Date,w.cf._isValid(e)||(e=o.oData.bTimeMode||o.oData.bDateTimeMode),w.cf._isValid(i)||(i=o.oData.bIs12Hour)),r.iCurrentDay=n.getDate(),r.iCurrentMonth=n.getMonth(),r.iCurrentYear=n.getFullYear(),r.iCurrentWeekday=n.getDay(),e&&(r.iCurrentHour=n.getHours(),r.iCurrentMinutes=n.getMinutes(),r.iCurrentSeconds=n.getSeconds(),i&&(r.sCurrentMeridiem=o._determineMeridiemFromHourAndMinutes(r.iCurrentHour,r.iCurrentMinutes))),s?r:void(o.oData=w.extend(o.oData,r))},_getValuesFromInputBoxes:function(){var t,e,i,n,o,r,s=this;(s.oData.bDateMode||s.oData.bDateTimeMode)&&(1<(t=w(s.element).find(".month .dtpicker-compValue").val()).length&&(t=t.charAt(0).toUpperCase()+t.slice(1)),-1!==(e=s.settings.shortMonthNames.indexOf(t))?s.oData.iCurrentMonth=parseInt(e):t.match("^[+|-]?[0-9]+$")&&(s.oData.iCurrentMonth=parseInt(t-1)),s.oData.iCurrentDay=parseInt(w(s.element).find(".day .dtpicker-compValue").val())||s.oData.iCurrentDay,s.oData.iCurrentYear=parseInt(w(s.element).find(".year .dtpicker-compValue").val())||s.oData.iCurrentYear);(s.oData.bTimeMode||s.oData.bDateTimeMode)&&(i=parseInt(w(s.element).find(".hour .dtpicker-compValue").val()),n=s._adjustMinutes(parseInt(w(s.element).find(".minutes .dtpicker-compValue").val())),o=s._adjustMinutes(parseInt(w(s.element).find(".seconds .dtpicker-compValue").val())),s.oData.iCurrentHour=isNaN(i)?s.oData.iCurrentHour:i,s.oData.iCurrentMinutes=isNaN(n)?s.oData.iCurrentMinutes:n,s.oData.iCurrentSeconds=isNaN(o)?s.oData.iCurrentSeconds:o,59<s.oData.iCurrentSeconds&&(s.oData.iCurrentMinutes+=s.oData.iCurrentSeconds/60,s.oData.iCurrentSeconds=s.oData.iCurrentSeconds%60),59<s.oData.iCurrentMinutes&&(s.oData.iCurrentHour+=s.oData.iCurrentMinutes/60,s.oData.iCurrentMinutes=s.oData.iCurrentMinutes%60),s.oData.bIs12Hour?12<s.oData.iCurrentHour&&(s.oData.iCurrentHour=s.oData.iCurrentHour%12):23<s.oData.iCurrentHour&&(s.oData.iCurrentHour=s.oData.iCurrentHour%23),s.oData.bIs12Hour&&(r=w(s.element).find(".meridiem .dtpicker-compValue").val(),(w.cf._compare(r,"AM")||w.cf._compare(r,"PM"))&&(s.oData.sCurrentMeridiem=r),w.cf._compare(s.oData.sCurrentMeridiem,"PM")&&12!==s.oData.iCurrentHour&&s.oData.iCurrentHour<13&&(s.oData.iCurrentHour+=12),w.cf._compare(s.oData.sCurrentMeridiem,"AM")&&12===s.oData.iCurrentHour&&(s.oData.iCurrentHour=0)))},_setCurrentDate:function(){var t=this;(t.oData.bTimeMode||t.oData.bDateTimeMode)&&(59<t.oData.iCurrentSeconds?(t.oData.iCurrentMinutes+=t.oData.iCurrentSeconds/60,t.oData.iCurrentSeconds=t.oData.iCurrentSeconds%60):t.oData.iCurrentSeconds<0&&(t.oData.iCurrentMinutes-=t.settings.minuteInterval,t.oData.iCurrentSeconds+=60),t.oData.iCurrentMinutes=t._adjustMinutes(t.oData.iCurrentMinutes),t.oData.iCurrentSeconds=t._adjustSeconds(t.oData.iCurrentSeconds));var e,i,n,o,r,s,a,l=new Date(t.oData.iCurrentYear,t.oData.iCurrentMonth,t.oData.iCurrentDay,t.oData.iCurrentHour,t.oData.iCurrentMinutes,t.oData.iCurrentSeconds,0),c=!1,u=!1;if(null!==t.oData.dMaxValue&&(c=l.getTime()>t.oData.dMaxValue.getTime()),null!==t.oData.dMinValue&&(u=l.getTime()<t.oData.dMinValue.getTime()),c||u){var h=!1,d=!1;null!==t.oData.dMaxValue&&(h=t.oData.dCurrentDate.getTime()>t.oData.dMaxValue.getTime()),null!==t.oData.dMinValue&&(d=t.oData.dCurrentDate.getTime()<t.oData.dMinValue.getTime()),h||d?(h&&(l=new Date(t.oData.dMaxValue),console.log("Info : Date/Time/DateTime you entered is later than Maximum value, so DateTimePicker is showing Maximum value in Input Field.")),d&&(l=new Date(t.oData.dMinValue),console.log("Info : Date/Time/DateTime you entered is earlier than Minimum value, so DateTimePicker is showing Minimum value in Input Field.")),console.log("Please enter proper Date/Time/DateTime values.")):l=new Date(t.oData.dCurrentDate)}if(t.oData.dCurrentDate=new Date(l),t._setVariablesForDate(),i={},a=s=r="",(t.oData.bDateMode||t.oData.bDateTimeMode)&&(t.oData.bDateMode&&(t.oData.bArrMatchFormat[4]||t.oData.bArrMatchFormat[5]||t.oData.bArrMatchFormat[6])&&(t.oData.iCurrentDay=1),n=t._formatDate(),w(t.element).find(".day .dtpicker-compValue").val(n.dd),t.oData.bDateMode?t.oData.bArrMatchFormat[4]||t.oData.bArrMatchFormat[7]?w(t.element).find(".month .dtpicker-compValue").val(n.MM):t.oData.bArrMatchFormat[6]?w(t.element).find(".month .dtpicker-compValue").val(n.month):w(t.element).find(".month .dtpicker-compValue").val(n.monthShort):w(t.element).find(".month .dtpicker-compValue").val(n.monthShort),w(t.element).find(".year .dtpicker-compValue").val(n.yyyy),t.settings.formatHumanDate?i=w.extend(i,n):t.oData.bDateMode&&(t.oData.bArrMatchFormat[4]||t.oData.bArrMatchFormat[5]||t.oData.bArrMatchFormat[6]||t.oData.bArrMatchFormat[7])?t.oData.bArrMatchFormat[4]?r=n.MM+t.settings.monthYearSeparator+n.yyyy:t.oData.bArrMatchFormat[5]?r=n.monthShort+t.settings.monthYearSeparator+n.yyyy:t.oData.bArrMatchFormat[6]?r=n.month+t.settings.monthYearSeparator+n.yyyy:t.oData.bArrMatchFormat[7]&&(r=n.yyyy+t.settings.monthYearSeparator+n.MM):r=n.dayShort+", "+n.month+" "+n.dd+", "+n.yyyy),t.oData.bTimeMode||t.oData.bDateTimeMode)if(o=t._formatTime(),t.oData.bIs12Hour&&w(t.element).find(".meridiem .dtpicker-compValue").val(t.oData.sCurrentMeridiem),w(t.element).find(".hour .dtpicker-compValue").val(o.hour),w(t.element).find(".minutes .dtpicker-compValue").val(o.mm),w(t.element).find(".seconds .dtpicker-compValue").val(o.ss),t.settings.formatHumanDate)i=w.extend(i,o);else{var f=t.oData.bTimeMode&&(t.oData.bArrMatchFormat[0]||t.oData.bArrMatchFormat[1]),p=t.oData.bDateTimeMode&&(t.oData.bArrMatchFormat[0]||t.oData.bArrMatchFormat[1]||t.oData.bArrMatchFormat[2]||t.oData.bArrMatchFormat[3]||t.oData.bArrMatchFormat[4]||t.oData.bArrMatchFormat[5]||t.oData.bArrMatchFormat[6]||t.oData.bArrMatchFormat[7]);s=f||p?o.hour+t.settings.timeSeparator+o.mm+t.settings.timeSeparator+o.ss:o.hour+t.settings.timeSeparator+o.mm,t.oData.bIs12Hour&&(s+=t.settings.timeMeridiemSeparator+t.oData.sCurrentMeridiem)}t.settings.formatHumanDate?(t.oData.bDateTimeMode?e=t.oData.sDateFormat:t.oData.bDateMode?e=t.oData.sTimeFormat:t.oData.bTimeMode&&(e=t.oData.sDateTimeFormat),a=t.settings.formatHumanDate.call(t,i,t.settings.mode,e)):t.oData.bDateTimeMode?a=r+t.settings.dateTimeSeparator+s:t.oData.bDateMode?a=r:t.oData.bTimeMode&&(a=s),w(t.element).find(".dtpicker-value").html(a),t._setButtons()},_formatDate:function(t){var e,i,n,o,r,s,a,l=this,c={};return w.cf._isValid(t)?c=w.extend({},t):(c.iCurrentDay=l.oData.iCurrentDay,c.iCurrentMonth=l.oData.iCurrentMonth,c.iCurrentYear=l.oData.iCurrentYear,c.iCurrentWeekday=l.oData.iCurrentWeekday),e=(e=c.iCurrentDay)<10?"0"+e:e,n=c.iCurrentMonth,o=(o=c.iCurrentMonth+1)<10?"0"+o:o,r=l.settings.shortMonthNames[n],s=l.settings.fullMonthNames[n],i=c.iCurrentYear,a=c.iCurrentWeekday,{dd:e,MM:o,monthShort:r,month:s,yyyy:i,dayShort:l.settings.shortDayNames[a],day:l.settings.fullDayNames[a]}},_formatTime:function(t){var e,i,n,o,r,s,a,l=this,c={};return w.cf._isValid(t)?c=w.extend({},t):(c.iCurrentHour=l.oData.iCurrentHour,c.iCurrentMinutes=l.oData.iCurrentMinutes,c.iCurrentSeconds=l.oData.iCurrentSeconds,c.sCurrentMeridiem=l.oData.sCurrentMeridiem),r=i=(e=c.iCurrentHour)<10?"0"+e:e,12<(n=c.iCurrentHour)&&(n-=12),"00"===r&&(n=12),o=n<10?"0"+n:n,l.oData.bIs12Hour&&(r=o),s=(s=c.iCurrentMinutes)<10?"0"+s:s,a=(a=c.iCurrentSeconds)<10?"0"+a:a,{H:e,HH:i,h:n,hh:o,hour:r,m:c.iCurrentMinutes,mm:s,s:c.iCurrentSeconds,ss:a,ME:c.sCurrentMeridiem}},_setButtons:function(){var t,e,i,n=this;(w(n.element).find(".dtpicker-compButton").removeClass("dtpicker-compButtonDisable").addClass("dtpicker-compButtonEnable"),null!==n.oData.dMaxValue&&(n.oData.bTimeMode?((n.oData.iCurrentHour+1>n.oData.dMaxValue.getHours()||n.oData.iCurrentHour+1===n.oData.dMaxValue.getHours()&&n.oData.iCurrentMinutes>n.oData.dMaxValue.getMinutes())&&w(n.element).find(".hour .increment").removeClass("dtpicker-compButtonEnable").addClass("dtpicker-compButtonDisable"),n.oData.iCurrentHour>=n.oData.dMaxValue.getHours()&&n.oData.iCurrentMinutes+1>n.oData.dMaxValue.getMinutes()&&w(n.element).find(".minutes .increment").removeClass("dtpicker-compButtonEnable").addClass("dtpicker-compButtonDisable")):((t=new Date(n.oData.iCurrentYear,n.oData.iCurrentMonth,n.oData.iCurrentDay+1,n.oData.iCurrentHour,n.oData.iCurrentMinutes,n.oData.iCurrentSeconds,0)).getTime()>n.oData.dMaxValue.getTime()&&w(n.element).find(".day .increment").removeClass("dtpicker-compButtonEnable").addClass("dtpicker-compButtonDisable"),(t=new Date(n.oData.iCurrentYear,n.oData.iCurrentMonth+1,n.oData.iCurrentDay,n.oData.iCurrentHour,n.oData.iCurrentMinutes,n.oData.iCurrentSeconds,0)).getTime()>n.oData.dMaxValue.getTime()&&w(n.element).find(".month .increment").removeClass("dtpicker-compButtonEnable").addClass("dtpicker-compButtonDisable"),(t=new Date(n.oData.iCurrentYear+1,n.oData.iCurrentMonth,n.oData.iCurrentDay,n.oData.iCurrentHour,n.oData.iCurrentMinutes,n.oData.iCurrentSeconds,0)).getTime()>n.oData.dMaxValue.getTime()&&w(n.element).find(".year .increment").removeClass("dtpicker-compButtonEnable").addClass("dtpicker-compButtonDisable"),(t=new Date(n.oData.iCurrentYear,n.oData.iCurrentMonth,n.oData.iCurrentDay,n.oData.iCurrentHour+1,n.oData.iCurrentMinutes,n.oData.iCurrentSeconds,0)).getTime()>n.oData.dMaxValue.getTime()&&w(n.element).find(".hour .increment").removeClass("dtpicker-compButtonEnable").addClass("dtpicker-compButtonDisable"),(t=new Date(n.oData.iCurrentYear,n.oData.iCurrentMonth,n.oData.iCurrentDay,n.oData.iCurrentHour,n.oData.iCurrentMinutes+1,n.oData.iCurrentSeconds,0)).getTime()>n.oData.dMaxValue.getTime()&&w(n.element).find(".minutes .increment").removeClass("dtpicker-compButtonEnable").addClass("dtpicker-compButtonDisable"),(t=new Date(n.oData.iCurrentYear,n.oData.iCurrentMonth,n.oData.iCurrentDay,n.oData.iCurrentHour,n.oData.iCurrentMinutes,n.oData.iCurrentSeconds+1,0)).getTime()>n.oData.dMaxValue.getTime()&&w(n.element).find(".seconds .increment").removeClass("dtpicker-compButtonEnable").addClass("dtpicker-compButtonDisable"))),null!==n.oData.dMinValue&&(n.oData.bTimeMode?((n.oData.iCurrentHour-1<n.oData.dMinValue.getHours()||n.oData.iCurrentHour-1===n.oData.dMinValue.getHours()&&n.oData.iCurrentMinutes<n.oData.dMinValue.getMinutes())&&w(n.element).find(".hour .decrement").removeClass("dtpicker-compButtonEnable").addClass("dtpicker-compButtonDisable"),n.oData.iCurrentHour<=n.oData.dMinValue.getHours()&&n.oData.iCurrentMinutes-1<n.oData.dMinValue.getMinutes()&&w(n.element).find(".minutes .decrement").removeClass("dtpicker-compButtonEnable").addClass("dtpicker-compButtonDisable")):((t=new Date(n.oData.iCurrentYear,n.oData.iCurrentMonth,n.oData.iCurrentDay-1,n.oData.iCurrentHour,n.oData.iCurrentMinutes,n.oData.iCurrentSeconds,0)).getTime()<n.oData.dMinValue.getTime()&&w(n.element).find(".day .decrement").removeClass("dtpicker-compButtonEnable").addClass("dtpicker-compButtonDisable"),(t=new Date(n.oData.iCurrentYear,n.oData.iCurrentMonth-1,n.oData.iCurrentDay,n.oData.iCurrentHour,n.oData.iCurrentMinutes,n.oData.iCurrentSeconds,0)).getTime()<n.oData.dMinValue.getTime()&&w(n.element).find(".month .decrement").removeClass("dtpicker-compButtonEnable").addClass("dtpicker-compButtonDisable"),(t=new Date(n.oData.iCurrentYear-1,n.oData.iCurrentMonth,n.oData.iCurrentDay,n.oData.iCurrentHour,n.oData.iCurrentMinutes,n.oData.iCurrentSeconds,0)).getTime()<n.oData.dMinValue.getTime()&&w(n.element).find(".year .decrement").removeClass("dtpicker-compButtonEnable").addClass("dtpicker-compButtonDisable"),(t=new Date(n.oData.iCurrentYear,n.oData.iCurrentMonth,n.oData.iCurrentDay,n.oData.iCurrentHour-1,n.oData.iCurrentMinutes,n.oData.iCurrentSeconds,0)).getTime()<n.oData.dMinValue.getTime()&&w(n.element).find(".hour .decrement").removeClass("dtpicker-compButtonEnable").addClass("dtpicker-compButtonDisable"),(t=new Date(n.oData.iCurrentYear,n.oData.iCurrentMonth,n.oData.iCurrentDay,n.oData.iCurrentHour,n.oData.iCurrentMinutes-1,n.oData.iCurrentSeconds,0)).getTime()<n.oData.dMinValue.getTime()&&w(n.element).find(".minutes .decrement").removeClass("dtpicker-compButtonEnable").addClass("dtpicker-compButtonDisable"),(t=new Date(n.oData.iCurrentYear,n.oData.iCurrentMonth,n.oData.iCurrentDay,n.oData.iCurrentHour,n.oData.iCurrentMinutes,n.oData.iCurrentSeconds-1,0)).getTime()<n.oData.dMinValue.getTime()&&w(n.element).find(".seconds .decrement").removeClass("dtpicker-compButtonEnable").addClass("dtpicker-compButtonDisable"))),n.oData.bIs12Hour)&&((null!==n.oData.dMaxValue||null!==n.oData.dMinValue)&&(e=n.oData.iCurrentHour,w.cf._compare(n.oData.sCurrentMeridiem,"AM")?e+=12:w.cf._compare(n.oData.sCurrentMeridiem,"PM")&&(e-=12),t=new Date(n.oData.iCurrentYear,n.oData.iCurrentMonth,n.oData.iCurrentDay,e,n.oData.iCurrentMinutes,n.oData.iCurrentSeconds,0),null!==n.oData.dMaxValue&&(n.oData.bTimeMode?(i=n.oData.iCurrentMinutes,(e>n.oData.dMaxValue.getHours()||e===n.oData.dMaxValue.getHours()&&i>n.oData.dMaxValue.getMinutes())&&w(n.element).find(".meridiem .dtpicker-compButton").removeClass("dtpicker-compButtonEnable").addClass("dtpicker-compButtonDisable")):t.getTime()>n.oData.dMaxValue.getTime()&&w(n.element).find(".meridiem .dtpicker-compButton").removeClass("dtpicker-compButtonEnable").addClass("dtpicker-compButtonDisable")),null!==n.oData.dMinValue&&(n.oData.bTimeMode?(i=n.oData.iCurrentMinutes,(e<n.oData.dMinValue.getHours()||e===n.oData.dMinValue.getHours()&&i<n.oData.dMinValue.getMinutes())&&w(n.element).find(".meridiem .dtpicker-compButton").removeClass("dtpicker-compButtonEnable").addClass("dtpicker-compButtonDisable")):t.getTime()<n.oData.dMinValue.getTime()&&w(n.element).find(".meridiem .dtpicker-compButton").removeClass("dtpicker-compButtonEnable").addClass("dtpicker-compButtonDisable"))))},setIsPopup:function(t){var e=this;if(!e.settings.isInline)if(e.settings.isPopup=t,"none"!==w(e.element).css("display")&&e._hidePicker(0),e.settings.isPopup)w(e.element).addClass("dtpicker-mobile"),w(e.element).css({position:"fixed",top:0,left:0,width:"100%",height:"100%"});else if(w(e.element).removeClass("dtpicker-mobile"),null!==e.oData.oInputElement){var i=w(e.oData.oInputElement).offset().top+w(e.oData.oInputElement).outerHeight(),n=w(e.oData.oInputElement).offset().left,o=w(e.oData.oInputElement).outerWidth();w(e.element).css({position:"absolute",top:i,left:n,width:o,height:"auto"})}},_compareDates:function(t,e){var i=((t=new Date(t.getDate(),t.getMonth(),t.getFullYear(),0,0,0,0)).getTime()-e.getTime())/864e5;return 0===i?i:i/Math.abs(i)},_compareTime:function(t,e){var i=0;return t.getHours()===e.getHours()&&t.getMinutes()===e.getMinutes()?i=1:t.getHours()<e.getHours()?i=2:t.getHours()>e.getHours()?i=3:t.getHours()===e.getHours()&&(t.getMinutes()<e.getMinutes()?i=2:t.getMinutes()>e.getMinutes()&&(i=3)),i},_compareDateTime:function(t,e){var i=(t.getTime()-e.getTime())/6e4;return 0===i?i:i/Math.abs(i)},_determineMeridiemFromHourAndMinutes:function(t,e){return 12<t||12===t&&0<=e?"PM":"AM"},setLanguage:function(t){var e=this;return e.settings=w.extend({},w.DateTimePicker.defaults,w.DateTimePicker.i18n[t],e.options),e.settings.language=t,e._setDateFormatArray(),e._setTimeFormatArray(),e._setDateTimeFormatArray(),e}}});var QoobController=Backbone.Router.extend({routes:{"":"index","groups-:group(/)":"showGroup","edit-:blockId(/)":"startEditBlock","save-template(/)":"showSavePageTemplate","*default":"default"},isBack:!1,initialize:function(){this.history=[]},currentUrl:function(){return Backbone.history.getFragment()},addHistory:function(t){this.history.push(t)},getHistory:function(){for(var t=Backbone.history.fragment;t==Backbone.history.fragment;)t=this.history.pop();return t},default:function(t){var e=t;"/"==e.charAt(e.length-1)&&(e=e.substr(0,e.length-1));var i=e.split("/");if(i[0].indexOf("edit-")<=0&&!this.layout.getBlockView(i[0].split("-")[1]))this.navigate("",{trigger:!0,replace:!0});else for(this.addHistory(e),this.isBack=!1,this.layout.navigate("edit",i.shift().split("-")[1],this.isBack);0<i.length;)this.layout.navigate("inner",i.shift(),this.isBack)},backward:function(){this.isBack=!0,this.layout.backward(this.currentUrl())},index:function(){this.addHistory(Backbone.history.getFragment()),this.layout.navigate("index",null,this.isBack),this.isBack=!1},showGroup:function(t){this.addHistory(Backbone.history.getFragment()),this.layout.navigate("group",t,this.isBack),this.isBack=!1},setLayout:function(t){this.layout=t},setPageModel:function(t){this.pageModel=t},setStorage:function(t){this.storage=t},setPreviewMode:function(){this.layout.setPreviewMode()},setEditMode:function(){this.layout.setEditMode()},setDeviceMode:function(t){this.layout.setDeviceMode(t)},setAutoSave:function(t){this.autosave=t;var e=this;if(this.autosave)var i=setInterval(function(){e.autosave?e.save():clearInterval(i)},6e4)},save:function(i){var n=this;this.layout.showSaveLoader();var t=JSON.parse(JSON.stringify(this.pageModel.toJSON()));t.version=window.QoobVersion;for(var e="",o=this.pageModel.get("blocks").models,r=0;r<o.length;r++){var s=o[r];e+=this.layout.getBlockView(s.id).innerBlock.renderedTemplate}this.storage.save(t,e,function(t,e){n.layout.hideSaveLoader(),"function"==typeof i&&i(t,e)})},exit:function(){var t=this;this.autosave?this.save(function(){t.storage.driver.exit(t.storage.pageId)}):this.storage.driver.exit(this.storage.pageId)},showSavePageTemplate:function(){this.layout.navigate("save-template",null,this.isBack),this.isBack=!1},addNewBlock:function(t,e,i){var n=this.storage.getBlockConfig(t,e);this.addBlock(QoobUtils.getDefaultSettings(n,n.name),i)},addBlock:function(t,e,i){i=void 0===i||i;var n=QoobUtils.createModel(t);if(this.pageModel.addBlock(n,e),this.layout.addBlock(n,e),i){var o,r=this,s=this.pageModel.get("blocks").indexOf(n),a=this.pageModel.get("blocks").at(s+1);o=0===s?"top":1<this.pageModel.get("blocks").length&&void 0===a&&"bottom",setTimeout(function(){r.layout.scrollTo(n.id,o)},700)}},startEditBlock:function(t){this.pageModel.get("blocks").get(t)?(this.addHistory(Backbone.history.getFragment()),this.layout.navigate("edit",t,this.isBack)):this.navigate("",{trigger:!0,replace:!0})},stopEditBlock:function(){this.layout.stopEditBlock(),this.navigate("",{trigger:!0})},load:function(t){if(0===t.length)this.layout.triggerBlocksLoader();else for(var e=0;e<t.length;e++)this.addBlock(t[e],null,!1)},deleteBlock:function(t){this.pageModel.deleteBlock(t),this.layout.deleteBlock(t)},moveDownBlock:function(t){this.pageModel.moveDown(t)},moveUpBlock:function(t){this.pageModel.moveUp(t)},triggerIframe:function(){this.layout.triggerIframe()},current:function(){var t,e=this,i=Backbone.history.fragment,n=_.pairs(e.routes),o=null,r=null;return(t=_.find(n,function(t){return(o=_.isRegExp(t[0])?t[0]:e._routeToRegExp(t[0])).test(i)}))&&(r=e._extractParameters(o,i),o=t[1]),{route:o,fragment:i,params:r}},createPageTemplate:function(t,e){var i=JSON.parse(JSON.stringify(this.pageModel.toJSON())),n=_.extend(t,i);if(0<i.blocks.length&&""!==t.title)this.storage.createPageTemplate(n,function(t){e(t,status)});else{var o={};""===t.title&&(o.title=!0),0===i.blocks.length&&(o.blocks=!0),e(o)}},removeTemplateBlock:function(t){this.storage.removePageTemplate(t)},changeDefaultPage:function(t){this.layout.changeDefaultPage(t)},removePageData:function(){var e=this;_.each(_.clone(this.pageModel.get("blocks").models),function(t){e.deleteBlock(t)})},showImportExportWindow:function(){this.layout.showImportExportWindow()},removeEmptyDraggableElement:function(){this.layout.removeEmptyDraggableElement()},initeSwipeHorizontal:function(t){this.layout.initeSwipeHorizontal(t)}}),BlockModel=Backbone.Model.extend({toJSON:function(){for(var t=Backbone.Model.prototype.toJSON.apply(this,arguments),e=0;e<t.length;e++)t[e]instanceof Backbone.Collection&&(t[e]=JSON.parse(JSON.stringify(t[e])));return t}}),PageModel=Backbone.Model.extend({initialize:function(){this.set("blocks",new Backbone.Collection)},addBlock:function(t,e){if(e=e||null){var i=this.get("blocks").get(e),n=this.get("blocks").indexOf(i);this.get("blocks").add(t,{at:n})}else this.get("blocks").add(t,{at:this.get("blocks").length+1})},deleteBlock:function(t){this.get("blocks").remove(t)},moveUp:function(t){var e=this.get("blocks").indexOf(t);0<e&&(this.swap(e,e-1),this.trigger("block_moveup",t.id))},moveDown:function(t){var e=this.get("blocks").indexOf(t);e<this.get("blocks").models.length&&(this.swap(e,e+1),this.trigger("block_movedown",t.id))},swap:function(t,e){this.get("blocks").models[t]=this.get("blocks").models.splice(e,1,this.get("blocks").models[t])[0]}}),QoobBlockView=Backbone.View.extend({tagName:"div",className:"content-block-inner",renderedTemplate:null,initialize:function(t){this.storage=t.storage,this.controller=t.controller,this.listenTo(this.model,"change",this.render)},render:function(){var o=this;return this.storage.getBlockTemplate(this.model.get("lib"),this.model.get("block"),function(t,e){if("blockNotFound"==t)o.renderedTemplate='<div class="empty-block"><div class="empty-block-text">The block '+o.model.get("block")+" is not found in the library "+o.model.get("lib")+"</div></div>";else{var i=o.storage.getBlockConfig(o.model.get("lib"),o.model.get("block")).blockTemplateAdapter||o.storage.getDefaultTemplateAdapter(),n=QoobExtensions.templating[i];o.renderedTemplate=n(e)(JSON.parse(JSON.stringify(o.model)))}o.controller.layout.viewPort.getWindowIframe().jQuery(o.el).html(o.renderedTemplate),"blockNotFound"==t&&(o.renderedTemplate=""),o.trigger("loaded"),o.controller.triggerIframe()}),o},dispose:function(){this.remove(),this.off(),this.model.off(null,null,this)}}),QoobBlockWrapperView=Backbone.View.extend({tagName:"div",events:{"click .qoob-overlay":"clickStartEditBlock"},attributes:function(){return{id:"outer-block-"+this.model.id}},initialize:function(t){this.storage=t.storage,this.controller=t.controller,this.innerBlock=new QoobBlockView({model:this.model,storage:this.storage,controller:this.controller})},render:function(){var i=this;return this.innerBlock.once("loaded",function(){var t=_.template(i.storage.getSkinTemplate("block-droppable-preview"))({blockId:i.model.id,text:this.storage.__("text_droppable_zone","Drop here to create a new block")}),e=_.template(i.storage.getSkinTemplate("block-overlay-preview"))({blockId:i.model.id});i.controller.layout.viewPort.getWindowIframe().jQuery(i.el).html([t,e,i.innerBlock.el]),i.$el.addClass("content-show content-block-outer"),i.droppable(),i.trigger("loaded"),i.controller.layout.viewPort.getWindowIframe().focus()}),i.$el.html(_.template(this.storage.getSkinTemplate("block-pleasewait-preview"))({text:this.storage.__("block_pleasewait_preview","Please wait")})),this.innerBlock.render(),this},clickStartEditBlock:function(){if("desktop"!==this.controller.layout.getDeviceState()&&this.controller.layout.viewPort.viewportTapTriggered)return this.controller.layout.viewPort.viewportTapTriggered=!1;this.controller.layout.menu.getSettingsView(this.model.id)&&this.controller.navigate("edit-"+this.model.id,{trigger:!0}),this.controller.layout.$el.hasClass("close-panel")&&this.controller.layout.showSwipeMenu()},droppable:function(){var s=this;this.$el.find("#droppable-"+s.model.id).droppable({activeClass:"ui-droppable-active",hoverClass:"ui-droppable-hover",tolerance:"pointer",drop:function(t,e){var i=jQuery(this),n=e.draggable.attr("id").replace("preview-block-",""),o=i.attr("id").replace("droppable-",""),r=e.draggable.data("lib");s.controller.addNewBlock(r,n,o)}})},dispose:function(){var t=this;this.$el.addClass("content-hide").one("animationend AnimationEnd",function(){t.$el.remove(),t.off(),t.model.off(null,null,t)})}}),QoobEditModeButtonView=Backbone.View.extend({className:"edit-mode-button",events:{click:"clickEditMode",touchstart:"clickEditMode"},initialize:function(t){this.storage=t.storage,this.controller=t.controller},clickEditMode:function(){this.controller.setEditMode()},setPreviewMode:function(){var e=this;this.controller.layout.sidebar.$el.on("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(t){t.target==this&&(e.$el.addClass("edit-mode-button-show"),e.controller.layout.sidebar.$el.off("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"))})},setEditMode:function(){this.$el.removeClass("edit-mode-button-show")}}),QoobFieldView=Backbone.View.extend({className:"settings-item",initialize:function(t){this.model=t.model,this.side=t.side,this.name=t.name,this.storage=t.storage,this.settings=t.settings,this.defaults=t.defaults,this.controller=t.controller,this.parent=t.parent},getValue:function(){if(void 0===this.model.get(this.settings.name)){var t=_.isArray(this.defaults)?QoobUtils.createCollection(this.defaults):this.defaults;this.model.set(this.settings.name,t)}return this.model.get(this.settings.name)}}),QoobFieldsView=Backbone.View.extend({tagName:"div",className:"settings-block-items",initialize:function(t){this.model=t.model,this.name=t.name,this.storage=t.storage,this.settings=t.settings,this.defaults=t.defaults,this.controller=t.controller,this.parent=t.parent,this.fields=[],this.side=this},getHtml:function(){for(var t=[],e=0;e<this.settings.length;e++){if(!Fields[this.settings[e].type])throw new Error("Field "+this.settings[e].type+" not found!");var i=new Fields[this.settings[e].type]({name:this.settings[e].name,model:this.model,storage:this.storage,settings:this.settings[e],defaults:this.defaults[this.settings[e].name],controller:this.controller,parent:this,side:this});this.fields.push(i),t.push(i.render().el)}return t}}),QoobLayout=Backbone.View.extend({tagName:"div",id:"qoob",initialize:function(t){var e=this;this.inner=null,this.storage=t.storage,this.controller=t.controller,this.sidebar=new QoobSidebarView({model:this.model,storage:this.storage,controller:this.controller}),this.menu=new QoobMenuView({model:this.model,storage:this.storage,controller:this.controller}),this.toolbar=new QoobToolbarView({model:this.model,storage:this.storage,controller:this.controller}),this.editModeButton=new QoobEditModeButtonView({model:this.model,storage:this.storage,controller:this.controller}),this.viewPort=new QoobViewportView({model:this.model,storage:this.storage,controller:this.controller}),this.ImportExport=new QoobImportExportView({storage:this.storage,controller:this.controller}),this.initeSwipeHorizontal(document.body);var i=function(){e.$el.removeClass("mobile tablet desktop");var t=e.getDeviceState();"mobile"===t?e.$el.addClass("mobile"):"tablet"===t?e.$el.addClass("tablet"):e.$el.addClass("desktop")};Hammer.on(window,"resize",function(){i()}),i()},navigate:function(t,e,i){if("index"==t)this.menu.showIndex(i),this.stopEditBlock();else if("save-template"==t)this.stopEditBlock(),this.menu.hideNotice(),this.menu.showSavePageTemplate();else if("group"==t)this.menu.showIndex(i),this.stopEditBlock(),this.menu.showGroup(e);else if("edit"==t)this.startEditBlock(e,i),this.scrollTo(e);else if("inner"==t){var n,o,r,s,a=this.menu.currentSide,l=this.menu.currentView,c=l.name+"_"+e,u=this.menu.getView(c),h=e.split("-")[0],d=e.split("-")[1],f=_.findWhere(l.settings,{name:h});if(null==f&&null!=(f=_.findWhere(a.settings,{name:h}))){l=a;var p=this.controller.currentUrl().split("/");p.splice(1,1),this.controller.navigate(p.join("/"),{trigger:!0,replace:!0})}if(n=d?l.model.get(h).get(d):l.model,"accordion_flip"==f.type)u||(r=(o=_.find(l.fields,function(t){if(t.settings.name==h)return t})).getAccordionMenuViews(d),(u=new AccordionFlipItemSettingsView({name:c,storage:this.storage,controller:this.controller,model:n,settings:f.settings,defaults:r.defaults,parent:l,parentSettings:o.settings,side:l.side})).side=u,this.menu.setInnerSettingsView(u)),this.menu.currentView=u,this.menu.showInnerSettingsView(c,i),0<(s=u.$el.find(".accordion")).length&&s.accordion("option","active",!1);else if("accordion"==f.type){null!=(r=(o=_.find(l.fields,function(t){if(t.settings.name==h)return t})).getAccordionMenuViews(d))?this.menu.currentView=r.settingsView:this.controller.navigate("",{trigger:!0,replace:!0}),s=o.$el.find(".accordion");var m=null;s.find(".field-accordion-item").each(function(t,e){jQuery(e).data("model-id")==d&&(m=t)}),s.accordion("option","active",m)}else if("image"==f.type){if(!u){var g=_.find(l.fields,function(t){if(t.settings.name==h)return t});(u=new ImageCenterView({name:c,storage:this.storage,controller:this.controller,model:n,src:g.getValue(),tags:g.tags?g.tags.join(", "):"",parent:l,settings:g.settings,defaults:g.defaults,cb:g.changeImage.bind(g)})).side=u,this.menu.setInnerSettingsView(u)}this.menu.showInnerSettingsView(c,i)}else if("icon"==f.type){if(!u){var v=_.find(l.fields,function(t){if(t.settings.name==h)return t}),y=v.findByClasses(v.getValue());(u=new IconCenterView({name:c,storage:this.storage,controller:this.controller,model:n,icon:y?{classes:y.classes,tags:y.tags}:"",parent:l,settings:v.settings,defaults:v.defaults,cb:v.changeIcon.bind(v)})).side=u,this.menu.setInnerSettingsView(u)}this.menu.showInnerSettingsView(c,i)}else if("video"==f.type){if(!u){var b=_.find(l.fields,function(t){if(t.settings.name==h)return t});(u=new VideoCenterView({name:c,storage:this.storage,controller:this.controller,model:n,src:b.getValue(),tags:b.tags?b.tags.join(", "):"",parent:l,settings:b.settings,defaults:b.defaults,cb:b.changeVideo.bind(b)})).side=u,this.menu.setInnerSettingsView(u)}this.menu.showInnerSettingsView(c,i)}}},initeSwipeHorizontal:function(t){var e,i=this,n="msLaunchUri"in navigator&&!("documentMode"in document),o=!!window.MSInputMethodContext&&!!document.documentMode;e=!n&&!o||"ontouchstart"in document.documentElement?new Hammer.Manager(t,{touchAction:"pan-y",inputClass:Hammer.SUPPORT_POINTER_EVENTS?Hammer.PointerEventInput:Hammer.TouchInput,recognizers:[[Hammer.Swipe,{direction:Hammer.DIRECTION_HORIZONTAL}]]}):new Hammer(t,{domEvents:!0,touchAction:"pan-y"});e.on("swipeleft swiperight",function(t){if(i.$el.find("#qoob-import-export").hasClass("show"))return!1;"swipeleft"===t.type?i.hideSwipeMenu():"swiperight"===t.type&&(i.viewPort.previewMode&&i.controller.setEditMode(),i.showSwipeMenu())})},backward:function(t){if(0==t.length)this.controller.exit();else if(0<t.length){var e=t.split("/");if(1<e.length)e.pop(),this.menu.currentView.parent.$el.hasClass("field-accordion-settings")&&e.pop(),this.controller.navigate(e.join("/"),{trigger:!0,replace:!0});else for(var i=["edit","group","save-template"],n=0;n<i.length;n++)if(-1!==e[0].indexOf(i[n])){this.controller.navigate("",{trigger:!0,replace:!0});break}}},scrollTo:function(t,e){this.viewPort.scrollTo(t,e)},render:function(){return this.sidebar.$el.html([this.menu.render().el]),this.$el.html([this.sidebar.render().el,this.viewPort.render().el,this.ImportExport.render().el,this.editModeButton.render().el]),"mobile"===this.getDeviceState()&&this.showSwipeMenu(),this},resize:function(){this.viewPort.resize()},setPreviewMode:function(){this.editModeButton.setPreviewMode(),this.menu.setPreviewMode(),this.sidebar.setPreviewMode(),this.viewPort.setPreviewMode(),this.resize()},setEditMode:function(){this.editModeButton.setEditMode(),this.sidebar.setEditMode(),this.viewPort.setEditMode()},setDeviceMode:function(t){this.viewPort.setDeviceMode(t)},startEditBlock:function(t,e){this.menu.startEditBlock(t,e),this.viewPort.startEditBlock(t)},stopEditBlock:function(){this.viewPort.stopEditBlock()},showSaveLoader:function(){this.toolbar.showSaveLoader()},hideSaveLoader:function(){this.toolbar.hideSaveLoader()},getBlockView:function(t){return this.viewPort.getBlockView(t)},addBlock:function(t,e){this.menu.addSettings(t),this.viewPort.addBlock(t,e)},deleteBlock:function(t){this.viewPort.delBlockView(t),this.menu.deleteSettings(t),this.viewPort.triggerIframe()},triggerIframe:function(){this.viewPort.triggerIframe()},changeDefaultPage:function(t){this.viewPort.changeDefaultPage(t)},showImportExportWindow:function(){this.ImportExport.showImportExportWindow()},removeEmptyDraggableElement:function(){this.viewPort.removeEmptyDraggableElement()},showSwipeMenu:function(){this.sidebar.showSwipeMenu()},hideSwipeMenu:function(){var t=this.controller.layout.getDeviceState(),e=this.controller.current();if("desktop"==t)0==e.route.indexOf("index")&&this.sidebar.hideSwipeMenu(),this.menu.hideSwipeMenu();else if("desktop"!=t){var i=this;this.sidebar.hideSwipeMenu(),this.sidebar.$el.on("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(t){t.target==this&&(i.menu.hideSwipeMenu(),i.sidebar.$el.off("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"))})}},triggerBlocksLoader:function(){this.viewPort.trigger("blocks_loaded")},getDeviceState:function(){var t,e=jQuery(window).width();return device.mobile()||320<=e&&e<=767?t="mobile":device.tablet()||768<=e&&e<=991?t="tablet":992<=e&&(t="desktop"),t}}),QoobSidebarView=Backbone.View.extend({attributes:function(){return{id:"qoob-sidebar"}},initialize:function(t){this.storage=t.storage,this.controller=t.controller},render:function(){return this.afterRender(),this},afterRender:function(){var i,n=this,o=0,r=function(t){var e=n.controller.current();-1==["startEditBlock","default"].indexOf(e.route)&&t.stopImmediatePropagation()};this.$el.on("drag dragstart dragend dragover dragenter dragleave drop",function(t){r(t)}).on("dragenter",function(t){if(r(t),1===++o&&function(t){var e,i=["image","video"];if(null!=t)for(var n=0;n<t.length;n++){if(-1<i.indexOf(t[n].settings.type)){e=!0;break}if("accordion"==t[n].settings.type||"accordion_flip"==t[n].settings.type){if(_.some(t[n].settings.settings,function(t){if(-1<i.indexOf(t.type))return t})){e=!0;break}}else e=!1}return e}(i=n.controller.layout.menu.currentView.fields)){for(var e=0;e<i.length;e++)i[e].$el.trigger("global_drag_start");n.controller.layout.sidebar.$el.addClass("overlay")}}).on("dragleave",function(t){r(t),0===--o&&n.controller.layout.sidebar.$el.removeClass("overlay")}).on("dragover",function(t){t.preventDefault()}).on("drop",function(t){t.preventDefault(),r(t),n.controller.layout.sidebar.$el.removeClass("overlay"),o=0})},setPreviewMode:function(){this.$el.addClass("hide-sidebar")},setEditMode:function(){var e=this;this.controller.layout.editModeButton.$el.on("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(t){t.target==this&&(e.$el.removeClass("hide-sidebar"),e.controller.layout.resize(),e.controller.layout.editModeButton.$el.off("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"))})},showSwipeMenu:function(){this.controller.layout.$el.removeClass("close-panel")},hideSwipeMenu:function(){this.controller.layout.$el.hasClass("close-panel")||this.controller.layout.$el.addClass("close-panel")}}),QoobMenuView=Backbone.View.extend({id:"qoob-menu",menuViews:[],groupActiveClass:"group-list__link-active",initialize:function(t){this.controller=t.controller,this.storage=t.storage,this.currentSide=null,this.currentView=null},addSettings:function(t){var e=this.storage.getBlockConfig(t.get("lib"),t.get("block"));e&&this.addView(new QoobMenuSettingsView({id:"edit-"+t.id,name:"edit-"+t.id,model:t,settings:e.settings,defaults:e.defaults,storage:this.storage,controller:this.controller}),"main")},render:function(){this.$el.html(_.template(this.storage.getSkinTemplate("qoob-menu-preview"))());var t=this.storage.getGroups();this.addView(new QoobMenuGroupsView({id:"catalog-groups",storage:this.storage,groups:t,controller:this.controller}),"main");for(var e=0;e<t.length;e++)this.addView(new QoobMenuBlocksPreviewView({id:t[e].id,storage:this.storage,controller:this.controller,group:t[e]}),"right");return this.addView(new QoobMenuSavePageTemplateView({name:"save-template",storage:this.storage,controller:this.controller}),"main"),this.draggable(),this},draggable:function(){var t=this,o=!1;this.$el.find(".preview-block").data("blockPreventDefault",!0);var e=this.controller.layout.getDeviceState(),i="msLaunchUri"in navigator&&!("documentMode"in document);this.$el.find(".preview-block").draggable({appendTo:"body",helper:"clone",distance:10,iframeFix:!0,iframeScroll:!0,scrollSensitivity:100,scrollSpeed:15,containment:"document",opacity:.5,start:function(){if(!o)return t.controller.removeEmptyDraggableElement(),!1;"mobile"!==e&&"tablet"!==e||t.controller.layout.hideSwipeMenu(),!0!==device.ios()&&window.PointerEvent&&!0!==i&&t.controller.navigate("",{trigger:!0})},stop:function(){t.controller.removeEmptyDraggableElement()}}),this.$el.find(".preview-block").each(function(){jQuery(this)[0].addEventListener("MSHoldVisual",function(t){t.preventDefault()},!1),jQuery(this).on("mousedown",function(t){0===t.buttons||device.ios()||(o=!0)}),jQuery(this).on("touchstart",function(i){var e,n=jQuery(this);parent=n.parent(".preview-blocks"),e=setTimeout(function(){o=!0;var t=jQuery.Event("mousemove"),e=i.originalEvent.touches[0]||i.originalEvent.changedTouches[0];t.pageX=e.pageX+10,t.pageY=e.pageY,n.trigger(t)},500),n.one("touchend",function(){o=!1,clearTimeout(e)}),n.one("touchmove",function(t){t.preventDefault(),clearTimeout(e)})})})},showGroup:function(t){this.showSide("right",t)},showIndex:function(t){this.hideSide("right");var e=this.getView("catalog-groups");this.currentSide&&this.currentSide.side?this.changeSide(this.currentSide.side,e.side,t):this.changeSide(null,e.side,t),this.currentView=e,this.currentSide=e.side},startEditBlock:function(t,e){this.hideSide("right");var i=this.getSettingsView(t);this.currentSide&&this.currentSide.side?this.changeSide(this.currentSide.side,i.side,e):this.changeSide(null,i.side,e),this.currentView=i,this.currentSide=i.side;var n=i.$el.find(".accordion");0<n.length&&n.accordion("option","active",!1)},showSavePageTemplate:function(t){this.hideSide("right");var e=this.getView("save-template");this.currentSide&&this.currentSide.side?this.changeSide(this.currentSide,e,t):this.changeSide(null,e.side,t),this.currentView=e,this.currentSide=e.side},addView:function(t,e){this.menuViews.push(t),this.$el.find(".qoob-menu-"+e+"-side").append(t.render().el)},setInnerSettingsView:function(t){this.addView(t,"main")},showInnerSettingsView:function(t,e){var i=this.getView(t);this.changeSide(this.currentSide,i.side,e),this.currentView=i,this.currentSide=i.side},getView:function(t){for(var e=0;e<this.menuViews.length;e++)if(this.menuViews[e].name==t)return this.menuViews[e]},getSettingsView:function(t){for(var e=0;e<this.menuViews.length;e++)if(this.menuViews[e].model&&this.menuViews[e].model.id==t)return this.menuViews[e]},showSide:function(t,e){var i=this.$el.find(".qoob-menu-"+t+"-side");this.$el.find("[data-group-id]").removeClass(this.groupActiveClass),this.$el.find("[data-group-id="+e+"]").length&&this.$el.find("[data-group-id="+e+"]").addClass(this.groupActiveClass),i.hasClass("show-side")||i.addClass("show-side"),i.find("[data-side-id]").removeClass("side-item-show"),i.find('[data-side-id="'+e+'"]').addClass("side-item-show")},hideSide:function(t){var e=this.$el.find(".qoob-menu-"+t+"-side");e.hasClass("show-side")&&e.removeClass("show-side"),e.on("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(t){t.target==this&&(e.hasClass("show-side")||e.find("[data-side-id]").hasClass("side-item-show")&&e.find("[data-side-id]").removeClass("side-item-show"),jQuery(this).off(t))}),this.$el.find("[data-group-id]").removeClass(this.groupActiveClass)},changeSide:function(e,i,t){var n,o=this;if(e==i)return!1;t?(n=e.$el.clone(),this.$el.find(".qoob-menu-backward-side").append(n.addClass("side-item-show")),e&&e.$el.removeClass("side-item-show"),this.$el.addClass("show-backward"),i.$el.addClass("side-item-show"),this.$el.find(".qoob-menu-backward-side").on("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(t){t.target==this&&(o.$el.find(".qoob-menu-backward-side").html(""),o.$el.removeClass("show-backward"),jQuery(this).off(t))})):void 0!==i&&(n=i.$el.clone(),this.$el.find(".qoob-menu-forward-side").append(n.addClass("side-item-show")),this.$el.addClass("show-forward"),this.$el.find(".qoob-menu-forward-side").on("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(t){t.target==this&&(e&&e.$el.removeClass("side-item-show"),i.$el.addClass("side-item-show"),o.$el.find(".qoob-menu-forward-side").html(""),o.$el.removeClass("show-forward"),i.$el.trigger("shown"),jQuery(this).off(t))}))},onEditMode:function(){this.$el.fadeIn(300)},deleteSettings:function(t){this.controller.stopEditBlock(),this.getSettingsView(t.id).dispose()},hideNotice:function(){var t=_.findWhere(this.menuViews,{id:"save-template"}).$el;t.find(".save-template-settings").hasClass("show-notice")&&(t.find(".remove").trigger("click"),t.find(".input-text").val(""),t.find(".save-template-settings").removeClass("show-notice"),t.find(".field-text").show()),t.find(".save-template-settings .button-save-template").show(),t.find(".error-block").hide(),t.find(".field-text").hasClass("error")&&t.find(".field-text").removeClass("error")},hideSwipeMenu:function(){0!=this.controller.current().route.indexOf("index")&&(this.controller.isBack=!0,this.controller.navigate("",{trigger:!0,replace:!0}))},setPreviewMode:function(){"desktop"==this.controller.layout.getDeviceState()&&null!=this.currentView&&"catalog-groups"==this.currentView.name&&(this.hideSide("right"),this.controller.navigate("",{trigger:!0,replace:!0}))}}),QoobToolbarView=Backbone.View.extend({tagName:"div",id:"qoob-toolbar",events:{"change .control-buttons__button-preview-list":"changeDeviceMode","click .control-buttons__button-preview":"clickPreviewMode","click .control-buttons__button-save":"clickSave","click .pages-dropdown__backward-button":"clickBackward","click .autosave-checkbox":"clickAutosave","click [data-id]":"clickAction"},initialize:function(t){this.storage=t.storage,this.controller=t.controller},clickAction:function(t){t.preventDefault();var e=jQuery(t.currentTarget).data("id");if("function"==typeof this.storage.driver.mainMenu){var i=this.menu.find(function(t){return t.id===e});i.action&&i.action(this)}},showSaveLoader:function(){this.$el.find(".control-buttons__button-save .save-clock").css("display","block")},hideSaveLoader:function(){this.$el.find(".control-buttons__button-save .save-clock").css("display","none")},clickPreviewMode:function(){this.controller.setPreviewMode()},changeDeviceMode:function(t){this.controller.setDeviceMode(t.target.value)},clickSave:function(){this.controller.save()},clickAutosave:function(t){this.controller.setAutoSave(t.target.checked)},clickBackward:function(){this.controller.backward()},render:function(){var t=this,e={device:this.controller.layout.getDeviceState(),subDomain:this.storage.driver.subDomain,page:this.storage.driver.page,pages:this.storage.driver.pages,save:this.storage.__("save","Save"),desktop:this.storage.__("desktop","Desktop"),tablet:this.storage.__("tablet","Tablet"),phone:this.storage.__("phone","Phone"),autosave:this.storage.__("autosave","Autosave"),locale_pages:this.storage.__("pages","Pages"),preview:this.storage.__("preview","Preview"),devices:this.storage.__("devices","Devices"),customMenu:[]};if(e.customMenu=[{id:"import-export",label:this.storage.__("importExport","Import/export"),action:function(){t.controller.showImportExportWindow()},icon:""},{id:"empty-page",label:this.storage.__("epmtyPage","Empty page"),action:function(){t.controller.removePageData()},icon:""}],"function"==typeof this.storage.driver.mainMenu){e.customMenu=this.storage.driver.mainMenu(e.customMenu);for(var i=0;i<e.customMenu.length;i++)if(_.isObject(e.customMenu[i].label)){var n=Object.keys(e.customMenu[i].label);null!=this.storage.translations?e.customMenu[i].label=this.storage.__(n,e.customMenu[i].label[n]):e.customMenu[i].label=e.customMenu[i].label[n]}}return this.menu=e.customMenu,this.$el.html(_.template(this.storage.getSkinTemplate("qoob-toolbar-preview"))(e)),this.$el.find(".qoob-select-item").qoobSelect(),this}}),QoobViewportView=Backbone.View.extend({id:"qoob-viewport",deviceMode:"pc",previewMode:!1,blocksCounter:0,blockViews:[],viewportTapTriggered:!1,initialize:function(t){this.controller=t.controller,this.storage=t.storage,this.model.on("block_moveup",this.moveUpBlockView.bind(this)),this.model.on("block_movedown",this.moveDownBlockView.bind(this))},render:function(){var t=this,e=this.storage.driver.getIframePageUrl();this.$el.html(_.template(this.storage.getSkinTemplate("qoob-viewport-preview"))({url:e,text_droppable_zone:this.storage.__("text_droppable_zone","Drop here to create a new block")})),this.$el.find("#qoob-iframe").on("libraries_loaded",this.iframeLoaded.bind(this));var i=new Hammer.Manager(this.$el[0]);return i.add(new Hammer.Tap({event:"singletap",inputClass:Hammer.SUPPORT_POINTER_EVENTS?Hammer.PointerEventInput:Hammer.TouchInput})),i.on("singletap",function(){t.controller.layout.$el.hasClass("close-panel")||(t.viewportTapTriggered=!0,t.controller.layout.hideSwipeMenu())}),this},iframeLoaded:function(){this.trigger("iframe_loaded"),this.triggerIframe(),this.defaultDroppable(),this.controller.initeSwipeHorizontal(this.getWindowIframe().document.body)},defaultDroppable:function(){var o=this;this.$el.find("#droppable-default").droppable({tolerance:"pointer",drop:function(t,e){var i=e.draggable.attr("id").replace("preview-block-",""),n=e.draggable.data("lib");o.controller.addNewBlock(n,i)}})},startEditBlock:function(t){var e=this.getWindowIframe();e.jQuery(".qoob-overlay").removeClass("active").addClass("no-active"),e.jQuery("#outer-block-"+t).find(".qoob-overlay").removeClass("no-active").addClass("active")},stopEditBlock:function(){this.getWindowIframe().jQuery(".qoob-overlay").removeClass("active").removeClass("no-active")},setPreviewMode:function(){this.previewMode=!0,this.getIframeContents().find("#qoob-blocks").addClass("preview")},setEditMode:function(){var e=this;this.previewMode=!1,this.controller.layout.editModeButton.$el.on("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(t){t.target==this&&(e.controller.layout.resize(),e.getIframeContents().find("#qoob-blocks").removeClass("preview"),e.controller.layout.editModeButton.$el.off("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"))})},setDeviceMode:function(t){var e=this;this.deviceMode=t;this.getIframe().stop().animate({pc:{width:"100%"},tablet:{width:"768px"},phone:{width:"375px"}}[t],500,function(){var t=e.controller.current();"startEditBlock"==t.route&&e.controller.layout.scrollTo(t.params[0])})},resize:function(){var t=this.previewMode?0:parseInt(jQuery("#qoob-sidebar").css("width"),10);this.$el.css("width",jQuery(window).width()-t),this.getIframe().height(jQuery(window).height()),"pc"==this.deviceMode&&this.getIframe().width("100%")},scrollTo:function(t,e){var i=null,n=this.getWindowIframe();if("top"===e)i=0;else if("bottom"===e)i=n.jQuery("#qoob-blocks").outerHeight()-n.jQuery("#qoob-blocks .content-block-outer").last().outerHeight();else if(this.getBlockView(t)){var o=this.getBlockView(t).$el,r=this.getIframe().height();i=device.ios()||device.mobile()?o.offset().top:Math.round(o.offset().top-(r-o.outerHeight(!0))/2)}null!==i&&(device.ios()?jQuery("html, body").animate({scrollTop:i},800):this.getWindowIframe().jQuery("html, body").animate({scrollTop:i},800))},getBlockView:function(t){for(var e=0;e<this.blockViews.length;e++)if(this.blockViews[e].model.id==t)return this.blockViews[e]},delBlockView:function(t){for(var e=0;e<this.blockViews.length;e++)this.blockViews[e].model.id==t.id&&(this.blockViews[e].dispose(),this.blockViews.splice(e,1));0==this.blockViews.length&&this.controller.changeDefaultPage("show")},addBlock:function(t,e){var i=this,n=this.getWindowIframe(),o=new QoobBlockWrapperView({model:t,storage:this.storage,controller:this.controller});o.setElement(i.controller.layout.viewPort.getWindowIframe().jQuery('<div id="outer-block-'+t.id+'">')),this.blockViews.push(o),this.blocksCounter++,o.once("loaded",function(){i.trigger("block_loaded"),i.blocksCounter--,0===i.blocksCounter&&i.trigger("blocks_loaded")}),0<e?n.jQuery("#outer-block-"+e).before(o.render().el):n.jQuery("#qoob-blocks").append(o.render().el),0<this.blockViews.length&&1==this.blockViews.length&&this.controller.changeDefaultPage("hide"),0<this.$el.find("#qoob-iframe").next("div").length&&this.$el.find("#qoob-iframe").nextAll("div").remove(),this.controller.removeEmptyDraggableElement(),this.triggerIframe()},removeEmptyDraggableElement:function(){0<this.getIframe().next("div").length&&this.getIframe().nextAll("div").remove()},triggerIframe:function(){var t=this.getWindowIframe();t.jQuery("#qoob-blocks").trigger("change"),t.jQuery('a, .btn, input[type="submit"]').attr("onclick","return false;")},getIframe:function(){return this.$el.find("#qoob-iframe")},getIframeContents:function(){return this.getIframe().contents()},getWindowIframe:function(){return window.frames["qoob-iframe"]},moveUpBlockView:function(t){var e=this.getBlockView(t);e.$el.after(e.$el.prev()),this.scrollTo(t)},moveDownBlockView:function(t){var e=this.getBlockView(t);e.$el.before(e.$el.next()),this.scrollTo(t)},createBlankPage:function(){var t=this.getWindowIframe(),i=new QoobPageTemplatesView({storage:this.storage,controller:this.controller});t.jQuery("#qoob-blocks").append(i.render().el),this.storage.loadPageTemplates(function(t,e){e&&0<e.length&&i.render()})},changeDefaultPage:function(t){var e=this.getWindowIframe().jQuery("#qoob-blocks");"hide"===t?(e.find(".qoob-templates").hide(),this.$el.find("#droppable-default").hide()):"show"===t&&(e.find(".qoob-templates").show(),this.$el.find("#droppable-default").show())},getIframeUrl:function(t){return void 0===t||/^((http|https):\/\/)/.test(t)||"function"!=typeof this.storage.driver.getFrontendPageUrl?t:this.storage.driver.getFrontendPageUrl()+t}}),QoobMenuBlocksPreviewView=Backbone.View.extend({className:"preview-block-wrap",events:{"click .preview-block":"clickPreviewBlock","click .backward-button":"clickBackward"},attributes:function(){return{"data-side-id":this.id}},clickBackward:function(){this.controller.backward()},clickPreviewBlock:function(t){var e=t.currentTarget.id.replace("preview-block-",""),i=this.$(t.currentTarget).data("lib");this.controller.addNewBlock(i,e),device.ios()||this.controller.navigate("",{trigger:!0});var n=this.controller.layout.getDeviceState();"mobile"!==n&&"tablet"!==n||this.controller.layout.hideSwipeMenu()},initialize:function(t){this.controller=t.controller,this.storage=t.storage,this.group=t.group},render:function(){var t={group:this.group,device:this.controller.layout.getDeviceState(),items:this.storage.getBlocksByGroup(this.group.id)};return this.$el.html(_.template(this.storage.getSkinTemplate("menu-blocks-preview"))(t)),this}}),QoobMenuGroupsView=Backbone.View.extend({name:"catalog-groups",className:"catalog-groups",attributes:function(){return{"data-side-id":"catalog-groups"}},events:{"click .group-list__link-active":"clickLinkGroupActive"},initialize:function(t){this.storage=t.storage,this.groups=t.groups,this.controller=t.controller,this.side=this},clickLinkGroupActive:function(t){t.preventDefault(),jQuery(t.currentTarget).removeClass("group-list__link-active"),this.controller.navigate("",{trigger:!0,replace:!0})},render:function(){return this.$el.html([this.controller.layout.toolbar.render().el,_.template(this.storage.getSkinTemplate("menu-groups-preview"))({groups_arr:this.groups})]),this}}),QoobMenuSavePageTemplateView=Backbone.View.extend({id:"save-template",events:{"click .backward-button":"clickBackward","click .create-template":"clickCreateTemplate","keyup .input-text":"changeInput"},settingsModel:null,config:[{name:"title",label:"Title",type:"text",placeholder:"Enter name template"}],defaults:{title:"",image:""},attributes:function(){return{"data-side-id":"save-template",class:"save-template settings"}},initialize:function(t){this.controller=t.controller,this.storage=t.storage,this.name=t.name,this.side=this},clickBackward:function(){this.controller.backward()},changeInput:function(t){var e=jQuery(t.currentTarget).parent(".field-text");e.hasClass("error")&&0<jQuery(t.currentTarget).val().length&&(e.removeClass("error"),this.$el.find(".error-block").hide(),this.$el.find(".save-template-settings .button-save-template").show())},clickCreateTemplate:function(t){var n=this,o=this.$(t.currentTarget),e=_.sortBy(this.storage.pageTemplatesCollection.models,function(t){return t.id}),r={id:e.length?e[e.length-1].id+1:1,title:this.settingsModel.get("title"),image:null};o.addClass("active"),this.controller.layout.viewPort.getIframeContents().scrollTop(0),html2canvas(this.controller.layout.viewPort.getIframeContents().find("body"),{scale:2}).then(function(t){var e=document.createElement("canvas");e.setAttribute("width",264),e.setAttribute("height",431),e.getContext("2d").drawImage(t,0,0,t.width,t.height,0,0,264,431);var i=e.toDataURL();r.image=i,n.controller.createPageTemplate(r,function(t){o.removeClass("active"),null===t?(n.$el.find(".save-template-settings").addClass("show-notice"),n.$el.find(".save-template-settings .error-block").hide(),n.settingsModel.set("image",""),n.settingsModel.set("title",""),n.$el.find(".field-text").removeClass("error").hide(),n.$el.find(".save-template-settings .button-save-template").hide()):(t.title&&(n.$el.find(".field-text").addClass("error"),n.$el.find(".save-template-settings .error-block-empty-title").show(),n.$el.find(".save-template-settings .button-save-template").hide()),t.blocks&&(n.$el.find(".save-template-settings .button-save-template").hide(),n.$el.find(".save-template-settings .error-block-empty-page").show()))})})},render:function(){var t=QoobUtils.createModel(this.config),e={back:this.storage.__("back","Back"),save_template:this.storage.__("save_template","Save template"),save_loading:this.storage.__("save_process","Saving..."),save_notice_title:this.storage.__("save_notice_title","Your template has been saved successfully!"),you_cant_save_empty_template:this.storage.__("you_cant_save_empty_template","You can't save empty template"),you_cant_save_empty_title:this.storage.__("you_cant_save_empty_title","The name of the template must be at least 1 character")};return this.settingsView=new QoobFieldsView({model:t,settings:this.config,defaults:this.defaults,storage:this.storage,controller:this.controller,parentId:this.id}),this.settingsModel=this.settingsView.model,this.$el.html(_.template(this.storage.getSkinTemplate("menu-save-template-preview"))(e)).find(".settings-blocks-full").prepend(this.settingsView.getHtml()),this}}),QoobMenuSettingsView=QoobFieldsView.extend({tagName:"div",className:"settings",config:null,events:{"click .backward-button":"clickBackward","click .settings-buttons__delete":"clickDelete","click .control-buttons__moveup":"clickMoveUp","click .control-buttons__movedown":"clickMoveDown"},attributes:function(){return{"data-side-id":this.model.id,id:"settings-block-"+this.model.id}},clickBackward:function(){this.controller.backward()},clickDelete:function(){if(!confirm(this.storage.__("confirm_delete_block","Are you sure you want to delete the block?")))return!1;this.controller.deleteBlock(this.model),this.controller.layout.$el.hasClass("mobile")&&this.controller.hideSwipeMenu()},clickMoveDown:function(){this.controller.moveDownBlock(this.model)},clickMoveUp:function(){this.controller.moveUpBlock(this.model)},render:function(){var t=QoobFieldsView.prototype.getHtml.apply(this,arguments);return this.$el.html(_.template(this.storage.getSkinTemplate("menu-settings-preview"))({back:this.storage.__("back","Back"),moveUp:this.storage.__("moveUp","Move"),moveDown:this.storage.__("moveDown","Move"),titleButtonDelete:this.storage.__("delete","Delete")})).find(".settings-blocks").html(t),this},dispose:function(){this.$el.remove(),this.off(),this.model.off(null,null,this)}}),QoobImportExportView=Backbone.View.extend({id:"qoob-import-export",events:{"click .save-changes":"clickSaveChanges","click .close":"clickClose",click:"clickOverlay"},initialize:function(t){this.controller=t.controller,this.storage=t.storage},clickClose:function(){this.$el.removeClass("show")},clickOverlay:function(t){jQuery(t.target).prop("id")==this.id&&this.$el.removeClass("show")},clickSaveChanges:function(t){var e;t.preventDefault(),0<this.controller.pageModel.get("blocks").models.length&&this.controller.removePageData(),e=0==this.$el.find(".qoob-import-export-textarea").val().length?{blocks:[]}:JSON.parse(this.$el.find(".qoob-import-export-textarea").val()),this.controller.load(e.blocks)},showImportExportWindow:function(){var t=this;this.render(),this.$el.addClass("show"),this.controller.layout.viewPort.once("blocks_loaded",function(){t.$el.removeClass("show")})},render:function(){var t=JSON.parse(JSON.stringify(this.controller.pageModel.toJSON()));return t.version=window.QoobVersion,this.$el.html(_.template(this.storage.getSkinTemplate("block-import-export-preview"))({page_data_text:this.storage.__("page_data","Page data"),cancel:this.storage.__("cancel","Cancel"),close:this.storage.__("close","Close"),save_changes:this.storage.__("save_changes","Save changes"),page_data:JSON.stringify(t)})),this}}),QoobPageTemplatesView=Backbone.View.extend({tagName:"div",className:"qoob-templates",events:{"click .template .image-bg, .template .title":"clickChoiceTemplateBlock","click .remove":"clickRemoveTemplateBlock"},initialize:function(t){this.storage=t.storage,this.controller=t.controller,this.listenTo(this.storage.pageTemplatesCollection,"add remove",this.render)},clickChoiceTemplateBlock:function(t){var e=this,i=jQuery(t.currentTarget).parents("[data-id]").data("id");this.storage.pageTemplatesCollection.each(function(t){parseInt(t.id)===i&&e.controller.load(t.get("blocks"))})},clickRemoveTemplateBlock:function(t){t.preventDefault();var e=jQuery(t.currentTarget).data("id");this.controller.removeTemplateBlock(e)},render:function(){return this.$el.html(_.template(this.storage.getSkinTemplate("block-default-templates"))({templates:this.storage.pageTemplatesCollection.toJSON(),block_default_templates_text:this.storage.__("block_default_templates_text","Choose one from amazing templates"),text_default_blank:this.storage.__("block_default_blank","Pick a block to add to the page"),template:this.storage.__("template","Template")})),this}});(Fields=Fields||{}).accordion=QoobFieldView.extend({className:"field-accordion field-group",uniqueId:null,accordionMenuViews:[],events:{"drop .accordion":"changePosition"},initialize:function(t){QoobFieldView.prototype.initialize.call(this,t),this.tpl=_.template(this.storage.getSkinTemplate("field-accordion-preview"))},remove:function(){this.$el.find("#"+this.uniqueId).parent().find(".add-item").off("click",this.addNewItem),Backbone.View.prototype.remove.apply(this,arguments)},removeItem:function(){this.getValue().trigger("change"),this.changePosition()},changePosition:function(){var o=this,r=this.getValue();this.$el.find("#"+this.getUniqueId()).children(".field-accordion-item").each(function(t,e){var i=o.$(e).data("model-id"),n=r.get(i);n&&n.set("order",o.$(e).index()-1)})},getUniqueId:function(){return this.uniqueId=this.uniqueId||_.uniqueId("accordion-")},addNewItem:function(t){t.preventDefault();for(var e,i=this.getValue(),n=this.settings.settings,o=this.defaults[0],r=[],s=[],a=0;a<n.length;a++)r.push({name:n[a].name,default:o[n[a].name]});for(var l=0;l<r.length;l++)s[r[l].name]=r[l].default;(e=QoobUtils.createModel(s)).owner_id=this.model.id,i.add(e),i.listenTo(e,"change",function(){this.trigger("change",this)}),e.on("remove_item",this.removeItem.bind(this));var c=new FieldAccordionItem({name:this.name+"_"+e.id,model:e,settings:n,defaults:o,storage:this.storage,controller:this.controller,parent:this,side:this.side});c.model.set("order",i.models?i.models.length-1:0),this.accordionMenuViews.push(c),this.$el.find("#"+this.getUniqueId()).append(c.render().el),this.$el.find("#"+this.getUniqueId()).accordion("refresh"),i.trigger("change")},render:function(){var t=this.getValue(),e=[];if(t.models=_.sortBy(t.models,function(t){return t.get("order")}),t.length&&0<t.length)for(var i=0;i<t.models.length;i++){var n=new FieldAccordionItem({name:this.name+"_"+t.models[i].id,model:t.models[i],settings:this.settings.settings,defaults:this.defaults[i]||this.defaults[0],storage:this.storage,controller:this.controller,parent:this,side:this.side});this.accordionMenuViews.push(n),e.push(n.render().el),t.models[i].on("remove_item",this.removeItem.bind(this))}var o={label:this.settings.label,uniqueId:this.getUniqueId(),settings:this.settings.settings,hideAddDeleteBtn:!!this.settings.hideAddDeleteBtn&&this.settings.hideAddDeleteBtn,add_new_tab:this.storage.__("add_new_tab","Add a new item"),Delete:this.storage.__("delete","Delete")};return(void 0===this.settings.show||this.settings.show(this.model))&&(this.$el.html(this.tpl(o)).find("#"+this.getUniqueId()).append(e),this.sortableInit()),this.$el.find("#"+this.uniqueId).parent().find(".add-item").on("click",this.addNewItem.bind(this)),this},sortableInit:function(){var n=this,t=this.getUniqueId();this.$el.find("#"+t).accordion({header:"> div > h3.inner-settings-expand",icons:!1,animate:300,collapsible:!0,active:!1,heightStyle:"content"}).sortable({items:".field-accordion-item",revert:!1,axis:"y",helper:"clone",handle:".draggable",connectWith:"#drop-"+t,scope:"accordion",start:function(){n.controller.layout.viewPort.getIframeContents().find(".droppable").css("visibility","hidden"),jQuery(this).addClass("is-droppable")},stop:function(t,e){jQuery(this).removeClass("is-droppable"),e.item.trigger("drop",e.item.index()),e.item.children("h3").triggerHandler("focusout"),n.$(this).accordion("refresh"),n.controller.layout.viewPort.getIframeContents().find(".droppable").removeAttr("style")}}),this.$el.find("#drop-"+t).droppable({scope:"accordion",hoverClass:"ui-state-hover",drop:function(t,e){var i=e.draggable.data("model-id");n.getAccordionMenuViews(i).deleteModel()}})},getAccordionMenuViews:function(t){for(var e=0;e<this.accordionMenuViews.length;e++)if(this.accordionMenuViews[e].model&&this.accordionMenuViews[e].model.id==t)return this.accordionMenuViews[e]}});var FieldAccordionItem=Backbone.View.extend({className:"field-accordion-item",events:{click:"showSettings","click .field-accordion-item__delete":"clickDelete"},attributes:function(){return{"data-model-id":this.model.id}},initialize:function(t){var e=this;this.name=t.name,this.model=t.model,this.storage=t.storage,this.settings=t.settings,this.defaults=t.defaults,this.controller=t.controller,this.parent=t.parent,this.side=t.side,this.listenTo(this.model,"change",function(){var t=e.controller.layout.viewPort.getIframeUrl(this.model.get("image"));this.$el.find(".title-item").first().html(this.model.get("title")),""!=this.model.get("image")?(this.$el.find(".preview-image").is(":visible")||this.$el.find(".preview-image").show(),this.$el.find(".preview-image img").first().prop("src",t)):this.$el.find(".preview-image").hide()})},showSettings:function(t){var e=this.model.id,i=this.controller.currentUrl(),n=i.split("/"),o=n[n.length-1].split("-"),r=_.findWhere(this.parent.parent.settings,{name:o[0]});return 0<o.length&&(o[0]==this.parent.settings.name||r&&"accordion"==r.type)&&(i=n.slice(0,-1).join("/")),this.controller.navigate(i+(jQuery(t.currentTarget).find(".inner-settings-expand").hasClass("ui-state-active")?"/"+this.parent.settings.name+"-"+e:""),{trigger:!1,replace:!0}),jQuery(t.currentTarget).find(".inner-settings-expand").hasClass("ui-state-active")&&(this.controller.layout.menu.currentView=this.settingsView),!0},clickDelete:function(){this.deleteModel()},render:function(){var t={image:this.controller.layout.viewPort.getIframeUrl(this.model.get("image")),title:this.model.get("title"),hideAddDeleteBtn:!!this.parent.settings.hideAddDeleteBtn&&this.parent.settings.hideAddDeleteBtn},e=_.template(this.storage.getSkinTemplate("field-accordion-item-expand-preview"))(t);return this.$el.html(e),this.settingsView=new FieldAccordionItemSettings({name:this.name,model:this.model,settings:this.settings,storage:this.storage,defaults:this.defaults,controller:this.controller,parent:this.parent,side:this.side}),this.$el.find(".settings-blocks").html(this.settingsView.render().el),this},deleteModel:function(){this.model.stopListening(),this.model.trigger("destroy",this.model,this.model.collection),this.remove(),this.model.trigger("remove_item")}}),FieldAccordionItemSettings=QoobFieldsView.extend({className:"field-accordion-settings",initialize:function(t){QoobFieldsView.prototype.initialize.call(this,t)},render:function(){return this.$el.html(QoobFieldsView.prototype.getHtml.apply(this,arguments)),this}});(Fields=Fields||{}).accordion_flip=QoobFieldView.extend({className:"field-accordion field-group",uniqueId:null,classNameItem:"",accordionMenuViews:[],events:{"drop .accordion":"changePosition"},initialize:function(t){QoobFieldView.prototype.initialize.call(this,t),this.tpl=_.template(this.storage.getSkinTemplate("field-accordion-preview"))},remove:function(){this.$el.find("#"+this.uniqueId).parent().find(".add-item").off("click",this.addNewItem),Backbone.View.prototype.remove.apply(this,arguments)},removeItem:function(){this.getValue().trigger("change"),this.changePosition()},changePosition:function(){var o=this,r=this.getValue();this.$el.find("#"+this.getUniqueId()).children(".field-accordion-item").each(function(t,e){var i=o.$(e).data("model-id"),n=r.get(i);n&&n.set("order",o.$(e).index()-1)})},getUniqueId:function(){return this.uniqueId=this.uniqueId||_.uniqueId("accordion-")},addNewItem:function(t){t.preventDefault();for(var e,i=this.getValue(),n=this.settings.settings,o=this.defaults[0],r=[],s=[],a=0;a<n.length;a++)r.push({name:n[a].name,default:o[n[a].name]});for(var l=0;l<r.length;l++)s[r[l].name]=r[l].default;(e=QoobUtils.createModel(s)).owner_id=this.model.id,i.add(e),i.listenTo(e,"change",function(){this.trigger("change",this)}),e.on("remove_item",this.removeItem.bind(this));var c=new FieldAccordionFlipItem({name:this.name+"_"+e.id,model:e,settings:n,defaults:o,storage:this.storage,controller:this.controller,parent:this,side:this.side});c.model.set("order",i.models?i.models.length-1:0),this.accordionMenuViews.push(c),this.$el.find("#"+this.getUniqueId()).append(c.render().el),this.$el.find("#"+this.getUniqueId()).accordion("refresh"),i.trigger("change")},render:function(){var t=this.getValue(),e=[];if(t.models=_.sortBy(t.models,function(t){return t.get("order")}),t.length&&0<t.length)for(var i=0;i<t.models.length;i++){var n=new FieldAccordionFlipItem({name:this.name+"_"+t.models[i].id,model:t.models[i],settings:this.settings.settings,defaults:this.defaults[i]||this.defaults[0],storage:this.storage,controller:this.controller,parent:this,side:this.side});this.accordionMenuViews.push(n),e.push(n.render().el),t.models[i].on("remove_item",this.removeItem.bind(this))}var o={label:this.settings.label,uniqueId:this.getUniqueId(),settings:this.settings.settings,hideAddDeleteBtn:!!this.settings.hideAddDeleteBtn&&this.settings.hideAddDeleteBtn,add_new_tab:this.storage.__("add_new_tab","Add a new item"),Delete:this.storage.__("delete","Delete")};return(void 0===this.settings.show||this.settings.show(this.model))&&(this.$el.html(this.tpl(o)).find("#"+this.getUniqueId()).append(e),this.sortableInit()),this.$el.find("#"+this.uniqueId).parent().find(".add-item").on("click",this.addNewItem.bind(this)),this},sortableInit:function(){var n=this,t=this.getUniqueId();this.$el.find("#"+t).accordion({header:"> div > h3.inner-settings-flip",animate:500,collapsible:!0,active:!1,heightStyle:"content"}).sortable({items:".field-accordion-flip-item",revert:!1,axis:"y",helper:"clone",handle:".draggable",connectWith:"#drop-"+t,scope:"accordion",start:function(){n.controller.layout.viewPort.getIframeContents().find(".droppable").css("visibility","hidden"),jQuery(this).addClass("is-droppable")},stop:function(t,e){jQuery(this).removeClass("is-droppable"),e.item.trigger("drop",e.item.index()),e.item.children("h3").triggerHandler("focusout"),n.$(this).accordion("refresh"),n.controller.layout.viewPort.getIframeContents().find(".droppable").removeAttr("style")}}),this.$el.find("#drop-"+t).droppable({scope:"accordion",hoverClass:"ui-state-hover",drop:function(t,e){var i=e.draggable.data("model-id");n.getAccordionMenuViews(i).deleteModel()}})},getAccordionMenuViews:function(t){for(var e=0;e<this.accordionMenuViews.length;e++)if(this.accordionMenuViews[e].model&&this.accordionMenuViews[e].model.id==t)return this.accordionMenuViews[e]}});var Fields,FieldAccordionFlipItem=Backbone.View.extend({className:"field-accordion-item field-accordion-flip-item",events:{click:"showSettings"},attributes:function(){return{"data-model-id":this.model.id}},initialize:function(t){var e=this;this.name=t.name,this.model=t.model,this.storage=t.storage,this.settings=t.settings,this.defaults=t.defaults,this.controller=t.controller,this.parent=t.parent,this.side=t.side,this.model.on("delete_model",this.deleteModel.bind(this)),this.listenTo(this.model,"change",function(){var t=e.controller.layout.viewPort.getIframeUrl(this.model.get("image"));this.$el.find(".title-item").first().html(this.model.get("title")),""!=this.model.get("image")?(this.$el.find(".preview-image").is(":visible")&&this.$el.find(".preview-image").show(),this.$el.find(".preview-image img").first().prop("src",t)):this.$el.find(".preview-image").hide()})},showSettings:function(){var t=this.model.id;this.controller.navigate(this.controller.currentUrl()+"/"+this.parent.settings.name+"-"+t,!0)},render:function(){var t={image:this.controller.layout.viewPort.getIframeUrl(this.model.get("image")),title:this.model.get("title")},e=_.template(this.storage.getSkinTemplate("field-accordion-item-flip-preview"))(t);return this.$el.html(e),this},deleteModel:function(){this.model.stopListening(),this.model.trigger("destroy",this.model,this.model.collection),this.remove(),this.model.trigger("remove_item")}}),AccordionFlipItemSettingsView=QoobFieldsView.extend({className:"settings menu-block accordion-item",attributes:function(){return{id:"settings-block-"+this.model.id,"data-side-id":this.model.id}},events:{"click .settings-buttons__delete":"deleteInnerSettings","click .backward-button":"clickBackward"},initialize:function(t){this.options=t,QoobFieldsView.prototype.initialize.call(this,t)},clickBackward:function(){this.controller.backward()},render:function(){return 1==this.options.parentSettings.hideAddDeleteBtn&&this.$el.addClass("settings__short-pad"),this.$el.html(_.template(this.storage.getSkinTemplate("field-accordion-item-flip-view-preview"))({back:this.storage.__("back","Back"),hideAddDeleteBtn:!!this.options.parentSettings.hideAddDeleteBtn&&this.options.parentSettings.hideAddDeleteBtn})),this.$el.find(".settings-blocks").html(QoobFieldsView.prototype.getHtml.apply(this,arguments)),this},deleteInnerSettings:function(){this.controller.backward(),this.model.trigger("delete_model",this)},dispose:function(){this.$el.remove(),this.off(),this.model.off(null,null,this)}});(Fields=Fields||{}).checkbox_switch=QoobFieldView.extend({className:"field-checkbox-switch field-group",events:{"change input":"changeSwitch"},changeSwitch:function(t){var e=jQuery(t.target);this.model.set(e.attr("name"),0==e[0].checked?0:1)},getBool:function(t){if(null==t)return!1;var e=+t;return isNaN(e)?!!String(t).toLowerCase().replace(!1,""):!!e},checked:function(){return this.model.get(this.settings.name)?this.getBool(this.model.get(this.settings.name)):this.getBool(this.settings.default)},getUniqueId:function(){return this.uniqueId=this.uniqueId||_.uniqueId("checkbox-switch-")},render:function(){var t={label:this.settings.label,name:this.settings.name,uniqueId:this.getUniqueId(),checked:this.checked()?"checked":""};return this.$el.html(_.template(this.storage.getSkinTemplate("field-checkbox-switch-preview"))(t)),this}}),(Fields=Fields||{}).checkbox=QoobFieldView.extend({className:"field-checkbox field-group",events:{"change input":"changeInput"},changeInput:function(t){var e=jQuery(t.target);this.model.set(e.attr("name"),0==e[0].checked?0:1)},getBool:function(t){if(null==t)return!1;var e=+t;return isNaN(e)?!!String(t).toLowerCase().replace(!1,""):!!e},checked:function(){return this.model.get(this.settings.name)?this.getBool(this.model.get(this.settings.name)):this.getBool(this.settings.default)},render:function(){var t={label:this.settings.label,name:this.settings.name,checked:this.checked()?"checked":""};return this.$el.html(_.template(this.storage.getSkinTemplate("field-checkbox-preview"))(t)),this}}),(Fields=Fields||{}).colorpicker=QoobFieldView.extend({className:"field-color-picker field-group",events:{"click .theme-colors":"changeListColor","keyup input":"changeInput"},checkRgb:function(t){if(/([R][G][B][A]?[(]\s*([01]?[0-9]?[0-9]|2[0-4][0-9]|25[0-5])\s*,\s*([01]?[0-9]?[0-9]|2[0-4][0-9]|25[0-5])\s*,\s*([01]?[0-9]?[0-9]|2[0-4][0-9]|25[0-5])(\s*,\s*((0\.[0-9]{1})|(1\.0)|(1)))?[)])/i.test(t))return!0},changeInput:function(t){var e=jQuery(t.target).val().trim();this.changeColor(e)},changeListColor:function(t){var e=jQuery(t.currentTarget).data("color").trim();this.$el.find(".field-color-picker__input").val(e),this.changeColor(e)},isBlackColor:function(t){return-1!==["#000","#000000","rgb(0,0,0)"].indexOf(t)},changeColor:function(t){var e=this.$el.find(".field-color-picker__input"),i=this.$el.find(".field-color-picker__container");(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/i.test(t)||this.checkRgb(t))&&(this.isBlackColor(t)?e.addClass("field-color-picker__input__light"):e.removeClass("field-color-picker__input__light"),i.css({backgroundColor:t}),this.model.set(this.name,t))},render:function(){var t={label:this.settings.label,name:this.settings.name,value:this.getValue(),colors:this.settings.colors};return this.$el.html(_.template(this.storage.getSkinTemplate("field-colorpicker-preview"))(t)),this.isBlackColor(this.getValue())&&this.$el.find(".field-color-picker__input").addClass("field-color-picker__input__light"),this}}),(Fields=Fields||{}).icon=QoobFieldView.extend({className:"field-icon field-group",events:{"click .show-media-center":"clickMediaCenter","click .field-icon__remove-icon":"clickRemoveIcon","click .reset":"clickResetIconToDefault","click .other-icon":"clickOtherIcon"},initialize:function(t){QoobFieldView.prototype.initialize.call(this,t),this.options=t,this.icons=this.storage.getIcons(),this.tpl=_.template(this.storage.getSkinTemplate("field-icon-preview"))},clickRemoveIcon:function(t){t.stopImmediatePropagation(),this.changeIcon("")},clickResetIconToDefault:function(t){t.preventDefault(),this.changeIcon(this.options.defaults)},changeIcon:function(t){var e=this.findByClasses(t);this.$el.find(".field-icon__preview-icon span").attr({class:t,"data-icon-tags":e?e.tags:""}),void 0===e?this.$el.find(".field-icon-container").addClass("empty"):this.$el.find(".field-icon-container").removeClass("empty"),this.$el.find('input[type="hidden"]').val(t),this.model.set(this.$el.find('input[type="hidden"]').attr("name"),t)},clickOtherIcon:function(t){var e=this.$(t.currentTarget).find("span").prop("class");this.changeIcon(e)},clickMediaCenter:function(){return this.controller.navigate(this.controller.currentUrl()+"/"+this.settings.name,!0),!1},render:function(){var t=this.settings.presets?this.settings.presets.map(function(t){return this.findByClasses(t)}.bind(this)).filter(function(t){return void 0!==typeof t}):"",e={label:this.settings.label,name:this.settings.name,icons:t,icon:this.findByClasses(this.getValue())||this.getValue(),hideDeleteButton:this.settings.hideDeleteButton,hasLibrary:this.icons.length,icon_center:this.storage.__("icon_center","Icon center"),reset_to_default:this.storage.__("resetToDefault","Reset to default"),IconLibrariesNotFound:this.storage.__("IconLibrariesNotFound","Icon libraries not found")};return(void 0===this.settings.show||this.settings.show(this.model))&&this.$el.html(this.tpl(e)),this},findByClasses:function(t){return _.findWhere(this.icons,{classes:t})}}),(Fields=Fields||{}).image=QoobFieldView.extend({className:"field-image field-group",customItems:null,counterDropZone:0,events:{"click .show-media-center":"clickMediaCenter","click .field-image__remove-image":"clickRemoveImage","click .others-item__image":"clickOtherImage","drop .field-drop-zone":"dropImage","dragenter .field-drop-zone":"dragOnDropZone","dragleave .field-drop-zone":"dragLeaveDropZone",global_drag_start:"globalDragStart","click [data-id]":"clickAction"},initialize:function(t){QoobFieldView.prototype.initialize.call(this,t),this.options=t,this.tags=t.settings.tags||null,this.tpl=_.template(this.storage.getSkinTemplate("field-image-preview"))},clickAction:function(t){t.preventDefault();var e=jQuery(t.currentTarget).data("id");if("function"==typeof this.storage.driver.fieldImageActions){var i=this.customItems.find(function(t){return t.id===e});i.action&&i.action(this)}},changeImage:function(t){this.$el.find(".field-image-container").removeClass("empty"),t||this.$el.find(".field-image-container").addClass("empty"),this.$el.find(".field-image__preview-image").attr("src",t),this.model.set(this.$el.find(".field-image__url-hidden").attr("name"),t),this.$el.find(".field-image__url-hidden").val(t)},clickOtherImage:function(t){var e=this.$(t.currentTarget).css("background-image").replace("url(","").replace(")","").replace(/\"/gi,"");this.changeImage(e)},clickRemoveImage:function(){this.$el.find(".field-image-container").addClass("empty"),this.changeImage("")},dropImage:function(t){var i=this,n=this.$el.find(".field-image-container"),e=t.originalEvent.dataTransfer.files;2097152<e[0].size?n.addClass("upload-error"):e[0].name.match(/.(jpg|jpeg|png|gif)$/i)?this.storage.driver.uploadImage(e,function(t,e){""!==e&&(i.changeImage(e),(n.hasClass("empty")||n.hasClass("upload-error"))&&n.removeClass("empty upload-error"))}):console.error("file format is not appropriate"),this.counterDropZone=0},globalDragStart:function(){var t=this.$el.find(".field-upload-error");t.hasClass("field-upload-error-active")&&t.removeClass("field-upload-error-active")},dragOnDropZone:function(){this.counterDropZone++,this.$el.find(".field-drop-zone").addClass("hover")},dragLeaveDropZone:function(){this.counterDropZone--,0===this.counterDropZone&&this.$el.find(".field-drop-zone").removeClass("hover")},clickMediaCenter:function(){return this.controller.navigate(this.controller.currentUrl()+"/"+this.settings.name,!0),!1},render:function(){var t=[];if(this.settings.presets)for(var e=0;e<this.settings.presets.length;e++)t.push(this.controller.layout.viewPort.getIframeUrl(this.settings.presets[e]));var i={hideDeleteButton:this.settings.hideDeleteButton,label:this.settings.label,name:this.settings.name,images:t,value:this.controller.layout.viewPort.getIframeUrl(this.getValue()),media_center:this.storage.__("media_center","Media center"),drop_here:this.storage.__("drop_here","Drop here"),error:this.storage.__("error","Error!"),error_text:this.storage.__("errorImageTextSize","Image size can not exceed 2 mb")};if("function"==typeof this.storage.driver.fieldImageActions){this.customItems=this.storage.driver.fieldImageActions([]);for(var n=0;n<this.customItems.length;n++)if(_.isObject(this.customItems[n].label)){var o=Object.keys(this.customItems[n].label);null!=this.storage.translations?this.customItems[n].label=this.storage.__(o,this.customItems[n].label[o]):this.customItems[n].label=this.customItems[n].label[o]}i.customItems=this.customItems}return(void 0===this.settings.show||this.settings.show(this.model))&&this.$el.html(this.tpl(i)),this}}),(Fields=Fields||{}).select=QoobFieldView.extend({className:"field-select",events:{"change select":"changeSelect","change input":"changeInput","click .theme-colors":"changeColor"},changeInput:function(t){var e=jQuery(t.target);this.model.set(e.attr("name"),e.parent().find(".active").attr("id"))},changeSelect:function(t){var e=jQuery(t.target);this.model.set(e.attr("name"),e.val())},changeColor:function(t){var e=jQuery(t.currentTarget);this.$el.find(".other-color").removeClass("active"),e.addClass("active"),this.$el.find("input").trigger("change")},render:function(){var t={label:this.settings.label,name:this.settings.name,current:this.model.get(this.settings.name)||this.settings.default,options:this.settings.options,visible_color:this.settings.visible_color};return this.$el.html(_.template(this.storage.getSkinTemplate("field-select-preview"))(t)),this}}),(Fields=Fields||{}).radio=QoobFieldView.extend({className:"field-radio field-group",events:{"change .radio__input":"changeInput"},changeInput:function(t){var e=jQuery(t.target);this.model.set(e.attr("name"),e.attr("id"))},render:function(){var t={label:this.settings.label,name:this.settings.name,current:this.model.get(this.settings.name)||this.settings.default,options:this.settings.options};return this.$el.html(_.template(this.storage.getSkinTemplate("field-radio-preview"))(t)),this}}),(Fields=Fields||{}).slider=QoobFieldView.extend({className:"field-slider field-group",events:{"change input":"changeInput"},changeInput:function(t){var e=jQuery(t.target);this.model.set(e.attr("name"),e.val())},render:function(){var t={sliderId:_.uniqueId("slider"),sizeId:_.uniqueId("size"),label:this.settings.label,name:this.settings.name,min:this.settings.min||0,max:this.settings.max||100,value:this.getValue()||0};return this.$el.html(_.template(this.storage.getSkinTemplate("field-slider-preview"))(t)),this}}),(Fields=Fields||{}).text_autocomplete=QoobFieldView.extend({uniqueId:null,className:"field-input-autocomplete field-group",events:{"keyup input":"changeInput"},changeInput:function(t){var e=jQuery(t.target);this.model.set(e.attr("name"),e.val())},getUniqueId:function(){return this.uniqueId=this.uniqueId||_.uniqueId("text-")},render:function(){var t={label:this.settings.label,name:this.settings.name,value:this.getValue(),placeholder:this.settings.placeholder,uniqueId:this.getUniqueId()};return this.$el.html(_.template(this.storage.getSkinTemplate("field-text-autocomplete-preview"))(t)),this}}),(Fields=Fields||{}).text=QoobFieldView.extend({className:"field-text field-group",events:{"keyup input":"changeInput"},changeInput:function(t){var e=jQuery(t.target);this.model.set(e.attr("name"),e.val())},render:function(){var t={label:this.settings.label,name:this.settings.name,value:this.getValue(),placeholder:this.settings.placeholder};return this.$el.html(_.template(this.storage.getSkinTemplate("field-text-preview"))(t)),this}}),(Fields=Fields||{}).textarea=QoobFieldView.extend({className:"field-textarea field-group",events:{change:"changeTextarea"},changeTextarea:function(t,e){this.model.set(this.settings.name,e.root.innerHTML)},render:function(){var t={label:this.settings.label,name:this.settings.name,value:this.getValue(),textareaId:_.uniqueId("textarea")};return this.$el.html(_.template(this.storage.getSkinTemplate("field-textarea-preview"))(t)),this}}),(Fields=Fields||{}).video=QoobFieldView.extend({className:"field-video field-group",customItems:null,counterDropZone:0,events:{"click .show-media-center":"clickMediaCenter","click .field-video__remove-video":"clickRemoveVideo","click .others-item__image":"clickOtherVideo","drop .field-drop-zone":"dropVideo","dragenter .field-drop-zone":"dragOnDropZone","dragleave .field-drop-zone":"dragLeaveDropZone",global_drag_start:"globalDragStart","click [data-id]":"clickAction"},initialize:function(t){QoobFieldView.prototype.initialize.call(this,t),this.options=t,this.tags=t.settings.tags||null,this.tpl=_.template(this.storage.getSkinTemplate("field-video-preview"))},clickAction:function(t){t.preventDefault();var e=jQuery(t.currentTarget).data("id");if("function"==typeof this.storage.driver.fieldVideoActions){var i=this.customItems.find(function(t){return t.id===e});i.action&&i.action(this)}},changeVideo:function(t){this.$el.find(".field-video-container").removeClass("empty"),""==t&&this.$el.find(".field-video-container").addClass("empty"),t.preview&&""!=t.preview?this.$el.find(".field-video-container").removeClass("empty-preview"):this.$el.find(".field-video-container").addClass("empty-preview"),""!==t?(t.preview?(this.$el.find(".field-video__preview-image").attr("src",t.preview),this.$el.find(".field-video__preview-hidden").val(t.preview)):(this.$el.find(".field-video__preview-image").attr("src",""),this.$el.find(".field-video__preview-hidden").val("")),this.$el.find(".field-video__url-hidden").val(t.url),this.model.set(this.name,t)):(this.$el.find(".field-video__preview-image").attr("src",""),this.model.set(this.name,""),this.$el.find(".field-video__url-hidden").val(""),this.$el.find(".field-video__preview-hidden").val(""))},clickOtherVideo:function(t){var e={url:this.$(t.currentTarget).data("src-video"),preview:this.$(t.currentTarget).data("src-preview")};this.changeVideo(e)},clickRemoveVideo:function(t){t.preventDefault(),this.$el.find(".field-video-container").addClass("empty"),this.changeVideo("")},dropVideo:function(t){var i=this,n=this.$el.find(".field-video-container"),e=t.originalEvent.dataTransfer.files;(n.hasClass("empty")||n.hasClass("upload-error"))&&n.removeClass("empty upload-error upload-error__size upload-error__format"),31457280<e[0].size?n.addClass("upload-error upload-error__size"):e[0].name.match(/.(mp4|ogv|webm)$/i)?this.storage.driver.uploadVideo(e,function(t,e){""!==e&&(i.changeVideo({url:e,preview:""}),n.hasClass("empty-preview")||n.addClass("empty-preview"))}):n.addClass("upload-error upload-error__format"),this.counterDropZone=0},globalDragStart:function(){var t=this.$el.find(".field-upload-error");t.hasClass("field-upload-error-active")&&t.removeClass("field-upload-error-active")},dragOnDropZone:function(){this.counterDropZone++,this.$el.find(".field-drop-zone").addClass("hover")},dragLeaveDropZone:function(){this.counterDropZone--,0===this.counterDropZone&&this.$el.find(".field-drop-zone").removeClass("hover")},clickMediaCenter:function(){return this.controller.navigate(this.controller.currentUrl()+"/"+this.settings.name,!0),!1},render:function(){var t,e=[];if(this.settings.presets)for(var i=0;i<this.settings.presets.length;i++)null!=this.settings.presets[i].preview&&e.push({url:this.controller.layout.viewPort.getIframeUrl(this.settings.presets[i].url),preview:this.controller.layout.viewPort.getIframeUrl(this.settings.presets[i].preview)});t=_.isObject(this.getValue())?{url:this.controller.layout.viewPort.getIframeUrl(this.getValue().url),preview:this.controller.layout.viewPort.getIframeUrl(this.getValue().preview)}:this.controller.layout.viewPort.getIframeUrl(this.getValue());var n={label:this.settings.label,name:this.settings.name,videos:e,src:t,hideDeleteButton:this.settings.hideDeleteButton,media_center:this.storage.__("media_center","Media center"),drop_here:this.storage.__("drop_here","Drop here"),no_poster:this.storage.__("no_poster","No poster"),error:this.storage.__("error","Error!"),error_text_size:this.storage.__("errorVideoTextSize","Video size can not exceed 30 mb"),error_text_format:this.storage.__("errorVideoTextFormat","File format is not appropriate")};if("function"==typeof this.storage.driver.fieldVideoActions){this.customItems=this.storage.driver.fieldVideoActions([]);for(var o=0;o<this.customItems.length;o++)if(_.isObject(this.customItems[o].label)){var r=Object.keys(this.customItems[o].label);null!=this.storage.translations?this.customItems[o].label=this.storage.__(r,this.customItems[o].label[r]):this.customItems[o].label=this.customItems[o].label[r]}n.customItems=this.customItems}return(void 0===this.settings.show||this.settings.show(this.model))&&this.$el.html(this.tpl(n)),this}}),(Fields=Fields||{}).datepicker=QoobFieldView.extend({className:"field-datepicker field-group",events:{"change .field-datepicker__input":"changeInput"},changeInput:function(t){var e=jQuery(t.target);this.model.set(e.attr("name"),e.val())},getUniqueId:function(){return this.uniqueId=this.uniqueId||_.uniqueId("dt-")},render:function(){var t={label:this.settings.label,name:this.settings.name,value:this.getValue(),uniqueId:this.getUniqueId(),dateFormat:null!=this.settings.dateFormat?this.settings.dateFormat:"dd-MM-yyyy"};return this.$el.html(_.template(this.storage.getSkinTemplate("field-datepicker-preview"))(t)),this}});var QoobExtensions,IconCenterView=Backbone.View.extend({className:"inner-settings-icon settings inner-settings",offset:0,limit:12,numberFoundByTagsIcons:0,showAllIcons:!1,events:{keydown:"keyAction","keyup .icon-search":"searchFilter","blur .icon-search":"blurInput","click .ajax-icon":"clickListIcon","click .backward-button":"clickBackward","click .field-input-autocomplete__icon-search":"clickSearchButton","click .inner-settings-control__button-search":"showSearchInput","click .inner-settings-control__button-reset":"clickReset","click .inner-settings-control__button-remove":"clickRemove","click .search-result__remove-text":"clickRemoveTags",shown:"afterRender"},attributes:function(){return{id:"settings-block-media","data-side-id":"settings-block-media"}},initialize:function(t){this.name=t.name,this.storage=t.storage,this.controller=t.controller,this.settings=t.settings,this.defaults=t.defaults,this.icon=t.icon,this.tags=t.icon.tags||"",this.model=t.model,this.parent=t.parent,this.cb=t.cb,this.icons=this.storage.getIcons(),this.listenTo(this.model,"change",function(t){var e=Object.keys(t.changed)[0];e==this.settings.name&&this.changeIcon(t.changed[e])})},keyAction:function(t){13==t.keyCode?this.search():27==t.keyCode&&this.hiddenFields()},changeIcon:function(t){if(void 0===t||""==t)this.$el.find(".field-icon-container-inner").hasClass("empty")||this.$el.find(".field-icon-container-inner").addClass("empty"),this.$el.find(".field-icon__selected-icon span").attr({class:"","data-icon-tags":""}),this.$el.find(".icon-search").val(""),this.tags="",this.icon="";else{var e=this.findByClasses(t);this.tags=e?e.tags:"",this.$el.find(".field-icon-container-inner").removeClass("empty"),this.$el.find(".field-icon__selected-icon span").attr({class:t,"data-icon-tags":this.tags}),this.icon={classes:t,tags:this.tags}}this.selectIcon(this.icon)},selectIcon:function(t){(this.$el.find(".ajax-icon").removeClass("chosen"),""!==t)&&this.$el.find(".filtered-icons").find("[class='"+t.classes+"']").parent().addClass("chosen")},clickBackward:function(){this.controller.backward()},clickListIcon:function(t){if(t.currentTarget.classList.contains("chosen"))return!1;var e=this.$(t.currentTarget).find("span");this.icon={classes:e.attr("class"),tags:e.data("iconTags")},this.cb(e.attr("class"))},clickSearchButton:function(){this.search()},clickReset:function(){null!=this.defaults&&this.cb(this.defaults)},clickRemove:function(){this.cb("")},clickRemoveTags:function(){this.$el.find(".search-result-tags").hide(),this.$el.find(".icon-search").val("")},showSearchInput:function(){this.$el.find(".inner-settings-control__search").addClass("inner-settings-control__search-active"),this.$el.find(".field-input-autocomplete__text").focus()},blurInput:function(){this.$el.find(".field-input-autocomplete__icon-search").is(":active")||this.hiddenFields()},hiddenFields:function(){this.$el.find(".inner-settings-control__search-active").removeClass("inner-settings-control__search-active")},search:function(){this.$el.find(".ajax-icon").remove(),this.tags=this.$el.find(".icon-search").val(),this.offset=0,this.showAllIcons=!1,this.loadMore(),""!=this.tags?(this.$el.find(".search-result__tags .search-result__text").html(this.tags),this.$el.find(".search-result-tags").show()):this.$el.find(".search-result-tags").hide(),this.hiddenFields()},checkLoadMore:function(){var t=this.$el.find(".filtered-icons");return this.$el.find(".inview-icons").offset().top<t.offset().top+t.height()},loadMore:function(){var t;this.showLoader(),""==this.tags||this.showAllIcons?(this.showAllSearchResult(),(t=this.getIcons("",this.offset))?(this.offset=this.offset+this.limit,this.$el.find(".search-result-all").append(t),this.checkLoadMore()?this.loadMore():this.hideLoader()):this.hideLoader()):(t=this.getIcons(this.tags,this.offset),0==this.numberFoundByTagsIcons?(this.$el.find(".search-result-tags .search-result__shell-text").hide(),this.$el.find(".search-result-tags .no-search-result__text").show()):(this.$el.find(".search-result-tags .search-result__shell-text").show(),this.$el.find(".search-result-tags .no-search-result__text").hide(),this.$el.find(".search-result-tags .search-result__digit").html(this.numberFoundByTagsIcons)),t?(this.offset=this.offset+this.limit,this.$el.find(".search-result-tags").append(t),this.checkLoadMore()?this.loadMore():this.hideLoader()):(this.showAllIcons=!0,this.offset=0,this.loadMore()))},getIcons:function(t,e){var i=t,n=[];if(-1<t.indexOf(",")?i=t.split(",").map(function(t){return t.trim()}):t.match(/[^ \s]/g)&&(i=t.split(" ")),0===i.length)for(var o=this.icons.slice(e,e+this.limit),r=0;r<o.length;r++)n.push('<div class="ajax-icon'+(""!=this.icon&&o[r].classes===this.icon.classes?" chosen ":"")+'"><span data-icon-tags="'+o[r].tags+'" class="'+o[r].classes+'"></span> </div>');else{for(var s=[],a=0;a<this.icons.length;a++)for(var l=0;l<i.length;l++){var c=new RegExp(i[l].replace(/ /g," "));""!==i[l]&&this.icons[a].tags&&this.icons[a].tags.match(c)&&-1==s.indexOf(this.icons[a])&&s.push(this.icons[a])}this.numberFoundByTagsIcons=s.length;for(var u=s.slice(e,e+this.limit),h=0;h<u.length;h++)n.push('<div class="ajax-icon'+(""!=this.icon&&u[h].classes===this.icon.classes?" chosen ":"")+'"><span  data-icon-tags="'+u[h].tags+'" class="'+u[h].classes+'"></span></div>')}return n.join("")},showAllSearchResult:function(){this.$el.find(".search-result-all").is(":visible")||(this.$el.find(".search-result-all").show(),this.$el.find(".search-result-all .search-result__digit").html(this.icons.length))},showLoader:function(){this.$el.find(".settings-media-loader").is(":visible")||this.$el.find(".settings-media-loader").show()},hideLoader:function(){this.$el.find(".settings-media-loader").hide()},searchFilter:function(){for(var i=this,t=[],e=this.icons,n=0;n<e.length;n++)_.isUndefined(e[n].tags)||t.push(e[n].tags);var o=_.union(_.flatten(t));this.$el.find(".icon-search").autocomplete({source:o,select:function(t,e){i.tags=e.item.value,i.search()}}).data("ui-autocomplete")._renderItem=function(t,e){return t.addClass("field-input-autocomplete-list field-input-autocomplete-list-inner"),jQuery("<li>").attr("data-value",e.value).append("<div>"+e.label+"</div>").appendTo(t)}},findByClasses:function(t){return _.findWhere(this.icons,{classes:t})},render:function(){return this.$el.html(_.template(this.storage.getSkinTemplate("field-icon-setting-preview"))({hideDeleteButton:this.settings.hideDeleteButton,search:this.storage.__("search","Search"),back:this.storage.__("back","Back"),text_results:this.storage.__("results","Results"),text_all_icons:this.storage.__("allIcons","All icons"),no_search_result:this.storage.__("noResult","No results"),icon:this.icon,tags:this.tags})),this},afterRender:function(){var t=this;this.tags&&this.$el.find(".icon-search").val(this.tags),this.search(),this.$el.find(".filtered-icons").on("scroll",function(){t.checkLoadMore()&&t.loadMore()})},dispose:function(){this.$el.remove(),this.off()}}),ImageCenterView=Backbone.View.extend({className:"inner-settings-image settings inner-settings",dataImages:null,offset:0,limit:12,numberFoundByTagsImages:0,showAllImages:!1,events:{"change .image-link":"changeInputLink",keydown:"keyAction","keyup .img-search":"searchFilter","blur .img-search":"blurInput","blur .image-link":"blurInput","click .backward-button":"clickBackward","click .ajax-image":"clickListImage","click .field-input-autocomplete__icon-search":"clickSearchButton","click .field-input-autocomplete__icon-link":"clickLinkButton","click .inner-settings-control__button-search":"showSearchInput","click .inner-settings-control__button-link":"showLinkInput","click .inner-settings-control__button-reset":"clickReset","click .inner-settings-control__button-remove":"clickRemove","click .search-result__remove-text":"clickRemoveTags",shown:"afterRender"},attributes:function(){return{id:"settings-block-media","data-side-id":"settings-block-media"}},initialize:function(t){this.name=t.name,this.side=t.side,this.storage=t.storage,this.controller=t.controller,this.settings=t.settings,this.defaults=t.defaults,this.src=t.src,this.tags=t.tags,this.parent=t.parent,this.cb=t.cb,this.listenTo(this.model,"change",function(t){var e=Object.keys(t.changed)[0];e==this.settings.name&&this.changeImage(t.changed[e])}),this.dataImages=this.storage.getImageAssets()},keyAction:function(t){13==t.keyCode?this.search():27==t.keyCode&&this.hiddenFields()},changeImage:function(t){this.$el.find(".field-image__selected-image img").attr("src",t),""==t?this.$el.find(".field-image-container-inner").addClass("empty"):this.$el.find(".field-image-container-inner").hasClass("empty")&&this.$el.find(".field-image-container-inner").removeClass("empty"),this.$el.find(".image-link").val(t),this.src=t,this.selectImage(this.src)},selectImage:function(t){(this.$el.find(".ajax-image").removeClass("chosen"),""!==t)&&this.$el.find(".filtered-images").find("[data-url='"+t+"']").addClass("chosen")},changeInputLink:function(t){var e=jQuery(t.target).val();e.match(/.(jpg|jpeg|png|gif)$/i)?this.changeImage(e):console.error("Invalid file format")},clickBackward:function(){this.controller.backward()},clickListImage:function(t){if(this.$(t.currentTarget).hasClass("chosen"))return!1;var e=this.$(t.currentTarget).data("url");this.cb(e)},clickLinkButton:function(){this.$(".image-link").trigger("change")},clickSearchButton:function(){this.search()},clickReset:function(){null!=this.defaults&&this.cb(this.defaults)},clickRemove:function(){this.cb("")},clickRemoveTags:function(){this.$el.find(".search-result-tags").hide(),this.$el.find(".img-search").val("")},showSearchInput:function(){this.$el.find(".inner-settings-control__search").addClass("inner-settings-control__search-active"),this.$el.find(".field-input-autocomplete__text").focus()},showLinkInput:function(){this.$el.find(".inner-settings-control__link").addClass("inner-settings-control__link-active"),this.$el.find(".field-text__input-link").focus()},blurInput:function(){this.$el.find(".field-input-autocomplete__icon-search").is(":active")||this.$el.find(".field-input-autocomplete__icon-link").is(":active")||this.hiddenFields()},hiddenFields:function(){this.$el.find(".inner-settings-control__search-active").removeClass("inner-settings-control__search-active"),this.$el.find(".inner-settings-control__link-active").removeClass("inner-settings-control__link-active")},search:function(){this.$el.find(".ajax-image").remove(),this.$el.find(".stock-error").remove(),this.tags=this.$el.find(".img-search").val(),this.offset=0,this.showAllImages=!1,this.loadMore(),""!=this.tags?(this.$el.find(".search-result__tags .search-result__text").html(this.tags),this.$el.find(".search-result-tags").show()):this.$el.find(".search-result-tags").hide(),this.hiddenFields()},checkLoadMore:function(){var t=this.$el.find(".filtered-images");return this.$el.find(".inview-images").offset().top<t.offset().top+t.height()},loadMore:function(){var t;this.showLoader(),""==this.tags||this.showAllImages?(t=this.getImages("",this.offset),this.showAllSearchResult(),t?(this.offset=this.offset+this.limit,this.$el.find(".search-result-all").append(t),this.checkLoadMore()?this.loadMore():this.hideLoader()):this.hideLoader()):(t=this.getImages(this.tags,this.offset),0==this.numberFoundByTagsImages?(this.$el.find(".search-result-tags .search-result__shell-text").hide(),this.$el.find(".search-result-tags .no-search-result__text").show()):(this.$el.find(".search-result-tags .search-result__shell-text").show(),this.$el.find(".search-result-tags .no-search-result__text").hide(),this.$el.find(".search-result-tags .search-result__digit").html(this.numberFoundByTagsImages)),t?(this.offset=this.offset+this.limit,this.$el.find(".search-result-tags").append(t),this.checkLoadMore()?this.loadMore():this.hideLoader()):(this.showAllImages=!0,this.offset=0,this.loadMore()))},getImages:function(t,e){var i=[],n=[];if(-1<t.indexOf(",")?n=t.split(",").map(function(t){return t.trim()}):t.match(/[^ \s]/g)&&(n=t.split(" ")),0===n.length)for(var o=this.dataImages.slice(e,e+this.limit),r=0;r<o.length;r++)i.push('<div class="ajax-image'+(o[r].src===this.src?" chosen":"")+'" style="background-image: url('+o[r].src+');" data-url="'+o[r].src+'"></div>');else{for(var s=[],a=0;a<this.dataImages.length;a++)for(var l=0;l<n.length;l++)""!==n[l]&&void 0!==this.dataImages[a].tags&&-1!=this.dataImages[a].tags.indexOf(n[l])&&-1==s.indexOf(this.dataImages[a])&&s.push(this.dataImages[a]);this.numberFoundByTagsImages=s.length;for(var c=s.slice(e,e+this.limit),u=0;u<c.length;u++)i.push('<div class="ajax-image'+(c[u].src===this.src?" chosen":"")+'" style="background-image: url('+c[u].src+');" data-url="'+c[u].src+'"></div>')}return i.join("")},showAllSearchResult:function(){this.$el.find(".search-result-all").is(":visible")||(this.$el.find(".search-result-all").show(),this.$el.find(".search-result-all .search-result__digit").html(this.dataImages.length))},showLoader:function(){this.$el.find(".settings-media-loader").is(":visible")||this.$el.find(".settings-media-loader").show()},hideLoader:function(){this.$el.find(".settings-media-loader").hide()},searchFilter:function(){for(var t=this,e=[],i=this.dataImages,n=0;n<i.length;n++)_.isUndefined(i[n].tags)||e.push(i[n].tags);var o=_.union(_.flatten(e));this.$el.find(".img-search").autocomplete({source:o,select:function(){t.search()}}).data("ui-autocomplete")._renderItem=function(t,e){return t.addClass("field-input-autocomplete-list field-input-autocomplete-list-inner"),jQuery("<li>").attr("data-value",e.value).append("<div>"+e.label+"</div>").appendTo(t)}},render:function(){return this.$el.html(_.template(this.storage.getSkinTemplate("field-image-setting-preview"))({hideDeleteButton:this.settings.hideDeleteButton,search:this.storage.__("search","Search"),url:this.storage.__("url","url"),back:this.storage.__("back","Back"),text_results:this.storage.__("results","Results"),text_all_images:this.storage.__("allImages","All images"),more_than_million:this.storage.__("moreThanAMillion","more than a million"),no_search_result:this.storage.__("noResult","No results"),src:this.src,tags:this.tags})),this},afterRender:function(){var t=this;this.tags&&this.$el.find(".img-search").val(this.tags),this.search(),this.$el.find(".filtered-images").on("scroll",function(){t.checkLoadMore()&&t.loadMore()})},dispose:function(){this.$el.remove(),this.off()}}),VideoCenterView=Backbone.View.extend({className:"inner-settings-video settings inner-settings",dataVideos:null,offset:0,limit:12,numberFoundByTagsVideos:0,showAllVideos:!1,events:{keydown:"keyAction","keyup .video-search":"searchFilter","blur .video-search":"blurInput","click .ajax-video":"clickListVideo","click .backward-button":"clickBackward","click .field-input-autocomplete__icon-search":"clickSearchButton","click .inner-settings-control__button-search":"showSearchInput","click .inner-settings-control__button-reset":"clickReset","click .inner-settings-control__button-remove":"clickRemove","click .search-result__remove-text":"clickRemoveTags",shown:"afterRender"},attributes:function(){return{id:"settings-block-media","data-side-id":"settings-block-media"}},initialize:function(t){this.name=t.name,this.side=t.side,this.storage=t.storage,this.controller=t.controller,this.settings=t.settings,this.defaults=t.defaults,this.src=t.src,this.tags=t.tags,this.cb=t.cb,this.parent=t.parent;var i=this;this.listenTo(this.model,"change",function(t){var e=Object.keys(t.changed)[0];e==i.settings.name&&i.changeVideo({url:t.changed[e].url,preview:t.changed[e].preview})}),this.dataVideos=this.storage.getVideoAssets()},keyAction:function(t){13==t.keyCode?this.search():27==t.keyCode&&this.hiddenFields()},changeVideo:function(t){this.$el.find(".field-video__selected-video img").attr("src",t.preview);var e=this.$el.find(".field-video-container-inner");void 0===t.url||""==t.preview?e.addClass("empty"):e.hasClass("empty")&&e.removeClass("empty"),this.src=t,this.selectVideo(this.src)},selectVideo:function(t){this.$el.find(".ajax-video").removeClass("chosen"),""!==t&&this.$el.find(".filtered-videos").find("[data-src='"+t.url+"']").addClass("chosen")},clickBackward:function(){this.controller.backward()},clickListVideo:function(t){if(!t.currentTarget.classList.contains("chosen")){this.$el.find(".ajax-video").removeClass("chosen"),t.currentTarget.classList.add("chosen");var e={url:this.$(t.currentTarget).data("src"),preview:this.$(t.currentTarget).data("preview")};this.cb(e)}},clickSearchButton:function(){this.search()},clickReset:function(){null!=this.defaults&&this.cb(this.defaults)},clickRemove:function(){this.cb("")},clickRemoveTags:function(){this.$el.find(".search-result-tags").hide(),this.$el.find(".video-search").val("")},showSearchInput:function(){this.$el.find(".inner-settings-control__search").addClass("inner-settings-control__search-active"),this.$el.find(".field-input-autocomplete__text").focus()},blurInput:function(){this.$el.find(".field-input-autocomplete__icon-search").is(":active")||this.hiddenFields()},hiddenFields:function(){this.$el.find(".inner-settings-control__search-active").removeClass("inner-settings-control__search-active")},search:function(){this.$el.find(".ajax-video").remove(),this.tags=this.$el.find(".video-search").val(),this.offset=0,this.showAllVideos=!1,this.loadMore(),""!=this.tags?(this.$el.find(".search-result__tags .search-result__text").html(this.tags),this.$el.find(".search-result-tags").show()):this.$el.find(".search-result-tags").hide(),this.hiddenFields()},checkLoadMore:function(){var t=this.$el.find(".filtered-videos");return this.$el.find(".inview-videos").offset().top<t.offset().top+t.height()},loadMore:function(){var t;this.showLoader(),""==this.tags||this.showAllVideos?(this.showAllSearchResult(),(t=this.getVideos("",this.offset))?(this.offset=this.offset+this.limit,this.$el.find(".search-result-all").append(t),this.checkLoadMore()?this.loadMore():this.hideLoader()):this.hideLoader()):(t=this.getVideos(this.tags,this.offset),0==this.numberFoundByTagsVideos?(this.$el.find(".search-result-tags .search-result__shell-text").hide(),this.$el.find(".search-result-tags .no-search-result__text").show()):(this.$el.find(".search-result-tags .search-result__shell-text").show(),this.$el.find(".search-result-tags .no-search-result__text").hide(),this.$el.find(".search-result-tags .search-result__digit").html(this.numberFoundByTagsVideos)),t?(this.offset=this.offset+this.limit,this.$el.find(".search-result-tags").append(t),this.checkLoadMore()?this.loadMore():this.hideLoader()):(this.showAllVideos=!0,this.offset=0,this.loadMore()))},getVideos:function(t,e){var i=t,n=[];if(-1<t.indexOf(",")?i=t.split(",").map(function(t){return t.trim()}):t.match(/[^ \s]/g)&&(i=t.split(" ")),0===i.length)for(var o=this.dataVideos.slice(e,e+this.limit),r=0;r<o.length;r++)n.push('<div class="ajax-video'+(o[r].src===this.src.url?" chosen ":"")+'" data-src="'+o[r].src+'" data-preview="'+o[r].preview+'" style="background-image: url('+o[r].preview+');"></div>');else{for(var s=[],a=0;a<this.dataVideos.length;a++)for(var l=0;l<i.length;l++)""!==i[l]&&-1!=this.dataVideos[a].tags.indexOf(i[l])&&-1==s.indexOf(this.dataVideos[a])&&s.push(this.dataVideos[a]);this.numberFoundByTagsVideos=s.length;for(var c=s.slice(e,e+this.limit),u=0;u<c.length;u++)n.push('<div class="ajax-video'+(c[u].src===this.src.url?" chosen ":"")+'" data-src="'+c[u].src+'" data-preview="'+c[u].preview+'" style="background-image: url('+c[u].preview+');"></div>')}return n.join("")},showAllSearchResult:function(){this.$el.find(".search-result-all").is(":visible")||(this.$el.find(".search-result-all").show(),this.$el.find(".search-result-all .search-result__digit").html(this.dataVideos.length))},showLoader:function(){this.$el.find(".settings-media-loader").is(":visible")||this.$el.find(".settings-media-loader").show()},hideLoader:function(){this.$el.find(".settings-media-loader").hide()},searchFilter:function(){for(var t=this,e=[],i=this.dataVideos,n=0;n<i.length;n++)_.isUndefined(i[n].tags)||e.push(i[n].tags);var o=_.union(_.flatten(e));this.$el.find(".video-search").autocomplete({source:o,select:function(){t.search()}}).data("ui-autocomplete")._renderItem=function(t,e){return t.addClass("field-input-autocomplete-list field-input-autocomplete-list-inner"),jQuery("<li>").attr("data-value",e.value).append("<div>"+e.label+"</div>").appendTo(t)}},render:function(){return this.$el.html(_.template(this.storage.getSkinTemplate("field-video-setting-preview"))({hideDeleteButton:this.settings.hideDeleteButton,search:this.storage.__("search","Search"),back:this.storage.__("back","Back"),text_results:this.storage.__("results","Results"),text_all_videos:this.storage.__("allVideos","All videos"),no_search_result:this.storage.__("noResult","No results"),src:this.src,tags:this.tags})),this},afterRender:function(){var t=this;this.tags&&this.$el.find(".video-search").val(this.tags),this.search(),this.$el.find(".filtered-videos").on("scroll",function(){t.checkLoadMore()&&t.loadMore()})},dispose:function(){this.$el.remove(),this.off()}});function QoobStorage(t){this.loader=t.loader,this.driver=t.driver||new LocalDriver,this.skinTemplates=t.loader.loaded.skin_templates.data||null,this.librariesData=t.librariesData||{},this.pageData=t.pageData||null,this.blockTemplates=[],this.blockTemplateAdapter=t.blockTemplateAdapter||"hbs",this.pageTemplatesCollection=new Backbone.Collection,this.assets=[],this.imageAssets=[],this.videoAssets=[],this.icons=[],this.translations=t.translations||null}(QoobExtensions=QoobExtensions||{}).templating=QoobExtensions.templating||[],QoobExtensions.templating.handlebars=QoobExtensions.templating.hbs=function(t){var e=Handlebars.compile(t);return function(t){return e(t)}},(QoobExtensions=QoobExtensions||{}).templating=QoobExtensions.templating||[],QoobExtensions.templating.underscore=function(t){var e=_.template(t);return function(t){return e(t)}},QoobStorage.prototype.getGroups=function(t){var e=[];return _.each(this.librariesData,function(o){null!=t&&t!=o.name||void 0!==o.groups&&(e=_.reduce(o.groups,function(t,e){var i=_.findWhere(t,{id:e.id});if(i)i.position=(parseInt(i.position)+parseInt(e.position))/2,i.libs.push(o.name);else{var n=_.clone(e);n.libs=[o.name],t.push(n)}return t},e))}),_.sortBy(e,"position")},QoobStorage.prototype.getBlocksByGroup=function(e,i){var t=[],n=this.librariesData;i&&(n=n.filter(function(t){return-1!==i.indexOf(t.name)}));for(var o=0;o<n.length;o++)void 0!==n[o].blocks&&(t=t.concat(n[o].blocks.filter(function(t){return t.lib=n[o].name,e?!!t.settings&&t.groups===e:!!t.settings})));return t},QoobStorage.prototype.getSkinTemplate=function(t){return this.skinTemplates[t]},QoobStorage.prototype.getDefaultTemplateAdapter=function(){return this.blockTemplateAdapter},QoobStorage.prototype.getBlockConfig=function(t,e){var i,n=_.findWhere(this.librariesData,{name:t});return null!=n&&(i=_.findWhere(n.blocks,{name:e})),i},QoobStorage.prototype.getBlockTemplate=function(e,i,n){var o=this;if(this.blockTemplates[e+"_"+i])n(null,this.blockTemplates[e+"_"+i]);else{var t=_.findWhere(this.librariesData,{name:e}),r="blockNotFound";if(void 0===t)n(r,null);else{var s=_.findWhere(t.blocks,{name:i});if(void 0===s)n(r,null);else{var a=s.url+s.template;this.loader.add({type:"data",name:"block_"+e+"_"+i,src:a,onloaded:function(t){o.blockTemplates[e+"_"+i]=t,n(null,t)}})}}}},QoobStorage.prototype.save=function(t,e,i){var n={data:t,html:e,libs:this.librariesData};this.driver.savePageData(n,function(t,e){i(t,e)})},QoobStorage.prototype.__=function(t,e){return null!==this.translations&&void 0!==this.translations[t]?this.translations[t]:e},QoobStorage.prototype.getAssets=function(){var t=this.librariesData;if(0==this.assets.length){for(var e=[],i=0;i<t.length;i++){if(void 0!==t[i].blocks)for(var n=0;n<t[i].blocks.length;n++)void 0!==t[i].blocks[n]&&t[i].blocks[n].assets&&e.push(t[i].blocks[n].assets);void 0!==t[i].assets&&e.push(t[i].assets)}this.assets=_.flatten(e,!0)}return this.assets},QoobStorage.prototype.getImageAssets=function(){if(0==this.imageAssets.length)for(var t=this.getAssets(),e=0;e<t.length;e++)"image"===t[e].type&&this.imageAssets.push({src:t[e].src,tags:t[e].tags});return this.imageAssets},QoobStorage.prototype.getVideoAssets=function(){if(0==this.videoAssets.length)for(var t=this.getAssets(),e=0;e<t.length;e++)"video"===t[e].type&&this.videoAssets.push({src:t[e].src,pack:t[e].pack,tags:t[e].tags,title:t[e].title?t[e].title:"",preview:t[e].preview});return this.videoAssets},QoobStorage.prototype.getIcons=function(){if(0==this.icons.length)for(var t=this.getAssets(),e=0;e<t.length;e++)"icon"===t[e].type&&this.icons.push({classes:t[e].classes,tags:t[e].tags});return this.icons},QoobStorage.prototype.loadPageTemplates=function(i){var n=this;this.driver.loadPageTemplates(function(t,e){e&&0<e.length&&n.pageTemplatesCollection.add(e),i(t)})},QoobStorage.prototype.createPageTemplate=function(t,i){this.pageTemplatesCollection.add(t);var e=this.pageTemplatesCollection.filter(function(t){return!0!==t.get("external")});this.driver.savePageTemplate(e,function(t,e){e&&i(t,e)})},QoobStorage.prototype.removePageTemplate=function(t){var e=this.pageTemplatesCollection.get(t);this.pageTemplatesCollection.remove(e);var i=this.pageTemplatesCollection.filter(function(t){return!0!==t.get("external")});this.driver.savePageTemplate(i,function(t){t&&console.error(t)})},QoobStorage.prototype.getLibraryByUrl=function(t,i){jQuery.ajax({dataType:"json",url:t,error:function(t,e){i(e)},success:function(t){i(null,t)}})};var QoobUtils={genId:function(t){window.usedQoobIds=window.usedQoobIds||[];for(var e=t||parseInt(_.uniqueId());-1!=window.usedQoobIds.indexOf(e);)e=parseInt(_.uniqueId());return window.usedQoobIds.push(e),e},createModel:function(e){e.id=QoobUtils.genId(e.id);var t=new BlockModel,i={};for(var n in e)_.isArray(e[n])?(i[n]=this.createCollection(e[n]),t.listenTo(i[n],"change",function(){this.trigger("change",this)}),i[n].forEach(function(t){t.owner_id=e.id})):i[n]=e[n],t.set(n,i[n]);return t},createCollection:function(t){for(var e=new Backbone.Collection,i=0;i<t.length;i++){var n=this.createModel(t[i]);e.add(n),e.listenTo(n,"change",function(){this.trigger("change",this)})}return e},getDefaultSettings:function(t,e){var i={},n={},o={};o=Array.isArray(t)?(n=_.findWhere(t,{name:e}).settings,_.findWhere(t,{name:e}).defaults):(n=t.settings,t.defaults);for(var r=0;r<n.length;r++)i[n[r].name]=o[n[r].name];return i.block=e,i.lib=t.lib,i}};!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Quill=e():t.Quill=e()}(this,function(){return function(i){function n(t){if(o[t])return o[t].exports;var e=o[t]={i:t,l:!1,exports:{}};return i[t].call(e.exports,e,e.exports,n),e.l=!0,e.exports}var o={};return n.m=i,n.c=o,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=45)}([function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(17),o=i(18),r=i(19),s=i(48),a=i(49),l=i(50),c=i(51),u=i(52),h=i(11),d=i(29),f=i(30),p=i(28),m=i(1),g={Scope:m.Scope,create:m.create,find:m.find,query:m.query,register:m.register,Container:n.default,Format:o.default,Leaf:r.default,Embed:c.default,Scroll:s.default,Block:l.default,Inline:a.default,Text:u.default,Attributor:{Attribute:h.default,Class:d.default,Style:f.default,Store:p.default}};e.default=g},function(t,n,e){function o(t,e){var i;if(void 0===e&&(e=l.ANY),"string"==typeof t)i=d[t]||c[t];else if(t instanceof Text||t.nodeType===Node.TEXT_NODE)i=d.text;else if("number"==typeof t)t&l.LEVEL&l.BLOCK?i=d.block:t&l.LEVEL&l.INLINE&&(i=d.inline);else if(t instanceof HTMLElement){var n=(t.getAttribute("class")||"").split(/\s+/);for(var o in n)if(i=u[n[o]])break;i=i||h[t.tagName]}return null==i?null:e&l.LEVEL&i.scope&&e&l.TYPE&i.scope?i:null}var r,s=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(n,"__esModule",{value:!0});var a=function(i){function t(t){var e=this;return t="[Parchment] "+t,(e=i.call(this,t)||this).message=t,e.name=e.constructor.name,e}return s(t,i),t}(Error);n.ParchmentError=a;var l,i,c={},u={},h={},d={};n.DATA_KEY="__blot",(i=l=n.Scope||(n.Scope={}))[i.TYPE=3]="TYPE",i[i.LEVEL=12]="LEVEL",i[i.ATTRIBUTE=13]="ATTRIBUTE",i[i.BLOT=14]="BLOT",i[i.INLINE=7]="INLINE",i[i.BLOCK=11]="BLOCK",i[i.BLOCK_BLOT=10]="BLOCK_BLOT",i[i.INLINE_BLOT=6]="INLINE_BLOT",i[i.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",i[i.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",i[i.ANY=15]="ANY",n.create=function(t,e){var i=o(t);if(null==i)throw new a("Unable to create "+t+" blot");var n=i;return new n(t instanceof Node||t.nodeType===Node.TEXT_NODE?t:n.create(e),e)},n.find=function t(e,i){return void 0===i&&(i=!1),null==e?null:null!=e[n.DATA_KEY]?e[n.DATA_KEY].blot:i?t(e.parentNode,i):null},n.query=o,n.register=function e(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];if(1<t.length)return t.map(function(t){return e(t)});var n=t[0];if("string"!=typeof n.blotName&&"string"!=typeof n.attrName)throw new a("Invalid definition");if("abstract"===n.blotName)throw new a("Cannot register abstract class");"string"==typeof(d[n.blotName||n.attrName]=n).keyName?c[n.keyName]=n:(null!=n.className&&(u[n.className]=n),null!=n.tagName&&(Array.isArray(n.tagName)?n.tagName=n.tagName.map(function(t){return t.toUpperCase()}):n.tagName=n.tagName.toUpperCase(),(Array.isArray(n.tagName)?n.tagName:[n.tagName]).forEach(function(t){null!=h[t]&&null!=n.className||(h[t]=n)})));return n}},function(t,e){var o=Object.prototype.hasOwnProperty,r=Object.prototype.toString,h=function(t){return"function"==typeof Array.isArray?Array.isArray(t):"[object Array]"===r.call(t)},d=function(t){if(!t||"[object Object]"!==r.call(t))return!1;var e,i=o.call(t,"constructor"),n=t.constructor&&t.constructor.prototype&&o.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!i&&!n)return!1;for(e in t);return void 0===e||o.call(t,e)};t.exports=function t(){var e,i,n,o,r,s,a=arguments[0],l=1,c=arguments.length,u=!1;for("boolean"==typeof a&&(u=a,a=arguments[1]||{},l=2),(null==a||"object"!=typeof a&&"function"!=typeof a)&&(a={});l<c;++l)if(null!=(e=arguments[l]))for(i in e)n=a[i],a!==(o=e[i])&&(u&&o&&(d(o)||(r=h(o)))?(s=r?(r=!1,n&&h(n)?n:[]):n&&d(n)?n:{},a[i]=t(u,s,o)):void 0!==o&&(a[i]=o));return a}},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function o(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return null==t?e:("function"==typeof t.formats&&(e=(0,s.default)(e,t.formats())),null==t.parent||"scroll"==t.parent.blotName||t.parent.statics.scope!==t.statics.scope?e:o(t.parent,e))}Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.BlockEmbed=e.bubbleFormats=void 0;var c=function(){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}(),u=function t(e,i,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0},s=n(i(2)),h=n(i(4)),d=n(i(0)),f=n(i(14)),p=n(i(5)),m=n(i(8)),g=function(t){function o(){return r(this,o),a(this,(o.__proto__||Object.getPrototypeOf(o)).apply(this,arguments))}return l(o,d.default.Embed),c(o,[{key:"attach",value:function(){u(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"attach",this).call(this),this.attributes=new d.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return(new h.default).insert(this.value(),(0,s.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(t,e){var i=d.default.query(t,d.default.Scope.BLOCK_ATTRIBUTE);null!=i&&this.attributes.attribute(i,e)}},{key:"formatAt",value:function(t,e,i,n){this.format(i,n)}},{key:"insertAt",value:function(t,e,i){if("string"==typeof e&&e.endsWith("\n")){var n=d.default.create(v.blotName);this.parent.insertBefore(n,0===t?this:this.next),n.insertAt(0,e.slice(0,-1))}else u(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"insertAt",this).call(this,t,e,i)}}]),o}();g.scope=d.default.Scope.BLOCK_BLOT;var v=function(t){function s(t){r(this,s);var e=a(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,t));return e.cache={},e}return l(s,d.default.Block),c(s,[{key:"delta",value:function(){return null==this.cache.delta&&(this.cache.delta=this.descendants(d.default.Leaf).reduce(function(t,e){return 0===e.length()?t:t.insert(e.value(),o(e))},new h.default).insert("\n",o(this))),this.cache.delta}},{key:"deleteAt",value:function(t,e){u(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"deleteAt",this).call(this,t,e),this.cache={}}},{key:"formatAt",value:function(t,e,i,n){e<=0||(d.default.query(i,d.default.Scope.BLOCK)?t+e===this.length()&&this.format(i,n):u(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"formatAt",this).call(this,t,Math.min(e,this.length()-t-1),i,n),this.cache={})}},{key:"insertAt",value:function(t,e,i){if(null!=i)return u(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"insertAt",this).call(this,t,e,i);if(0!==e.length){var n=e.split("\n"),o=n.shift();0<o.length&&(t<this.length()-1||null==this.children.tail?u(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"insertAt",this).call(this,Math.min(t,this.length()-1),o):this.children.tail.insertAt(this.children.tail.length(),o),this.cache={});var r=this;n.reduce(function(t,e){return(r=r.split(t,!0)).insertAt(0,e),e.length},t+o.length)}}},{key:"insertBefore",value:function(t,e){var i=this.children.head;u(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"insertBefore",this).call(this,t,e),i instanceof f.default&&i.remove(),this.cache={}}},{key:"length",value:function(){return null==this.cache.length&&(this.cache.length=u(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"length",this).call(this)+1),this.cache.length}},{key:"moveChildren",value:function(t,e){u(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"moveChildren",this).call(this,t,e),this.cache={}}},{key:"optimize",value:function(t){u(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"optimize",this).call(this,t),this.cache={}}},{key:"path",value:function(t){return u(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"path",this).call(this,t,!0)}},{key:"removeChild",value:function(t){u(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"removeChild",this).call(this,t),this.cache={}}},{key:"split",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(e&&(0===t||t>=this.length()-1)){var i=this.clone();return 0===t?(this.parent.insertBefore(i,this),this):(this.parent.insertBefore(i,this.next),i)}var n=u(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"split",this).call(this,t,e);return this.cache={},n}}]),s}();v.blotName="block",v.tagName="P",v.defaultChild="break",v.allowedChildren=[p.default,d.default.Embed,m.default],e.bubbleFormats=o,e.BlockEmbed=g,e.default=v},function(t,e,i){var l=i(54),c=i(12),n=i(2),u=i(20),o=String.fromCharCode(0),h=function(t){Array.isArray(t)?this.ops=t:null!=t&&Array.isArray(t.ops)?this.ops=t.ops:this.ops=[]};h.prototype.insert=function(t,e){var i={};return 0===t.length?this:(i.insert=t,null!=e&&"object"==typeof e&&0<Object.keys(e).length&&(i.attributes=e),this.push(i))},h.prototype.delete=function(t){return t<=0?this:this.push({delete:t})},h.prototype.retain=function(t,e){if(t<=0)return this;var i={retain:t};return null!=e&&"object"==typeof e&&0<Object.keys(e).length&&(i.attributes=e),this.push(i)},h.prototype.push=function(t){var e=this.ops.length,i=this.ops[e-1];if(t=n(!0,{},t),"object"==typeof i){if("number"==typeof t.delete&&"number"==typeof i.delete)return this.ops[e-1]={delete:i.delete+t.delete},this;if("number"==typeof i.delete&&null!=t.insert&&(e-=1,"object"!=typeof(i=this.ops[e-1])))return this.ops.unshift(t),this;if(c(t.attributes,i.attributes)){if("string"==typeof t.insert&&"string"==typeof i.insert)return this.ops[e-1]={insert:i.insert+t.insert},"object"==typeof t.attributes&&(this.ops[e-1].attributes=t.attributes),this;if("number"==typeof t.retain&&"number"==typeof i.retain)return this.ops[e-1]={retain:i.retain+t.retain},"object"==typeof t.attributes&&(this.ops[e-1].attributes=t.attributes),this}}return e===this.ops.length?this.ops.push(t):this.ops.splice(e,0,t),this},h.prototype.chop=function(){var t=this.ops[this.ops.length-1];return t&&t.retain&&!t.attributes&&this.ops.pop(),this},h.prototype.filter=function(t){return this.ops.filter(t)},h.prototype.forEach=function(t){this.ops.forEach(t)},h.prototype.map=function(t){return this.ops.map(t)},h.prototype.partition=function(e){var i=[],n=[];return this.forEach(function(t){(e(t)?i:n).push(t)}),[i,n]},h.prototype.reduce=function(t,e){return this.ops.reduce(t,e)},h.prototype.changeLength=function(){return this.reduce(function(t,e){return e.insert?t+u.length(e):e.delete?t-e.delete:t},0)},h.prototype.length=function(){return this.reduce(function(t,e){return t+u.length(e)},0)},h.prototype.slice=function(t,e){t=t||0,"number"!=typeof e&&(e=1/0);for(var i=[],n=u.iterator(this.ops),o=0;o<e&&n.hasNext();){var r;o<t?r=n.next(t-o):(r=n.next(e-o),i.push(r)),o+=u.length(r)}return new h(i)},h.prototype.compose=function(t){for(var e=u.iterator(this.ops),i=u.iterator(t.ops),n=new h;e.hasNext()||i.hasNext();)if("insert"===i.peekType())n.push(i.next());else if("delete"===e.peekType())n.push(e.next());else{var o=Math.min(e.peekLength(),i.peekLength()),r=e.next(o),s=i.next(o);if("number"==typeof s.retain){var a={};"number"==typeof r.retain?a.retain=o:a.insert=r.insert;var l=u.attributes.compose(r.attributes,s.attributes,"number"==typeof r.retain);l&&(a.attributes=l),n.push(a)}else"number"==typeof s.delete&&"number"==typeof r.retain&&n.push(s)}return n.chop()},h.prototype.concat=function(t){var e=new h(this.ops.slice());return 0<t.ops.length&&(e.push(t.ops[0]),e.ops=e.ops.concat(t.ops.slice(1))),e},h.prototype.diff=function(i,t){if(this.ops===i.ops)return new h;var e=[this,i].map(function(e){return e.map(function(t){if(null!=t.insert)return"string"==typeof t.insert?t.insert:o;throw new Error("diff() called "+(e===i?"on":"with")+" non-document")}).join("")}),r=new h,n=l(e[0],e[1],t),s=u.iterator(this.ops),a=u.iterator(i.ops);return n.forEach(function(t){for(var e=t[1].length;0<e;){var i=0;switch(t[0]){case l.INSERT:i=Math.min(a.peekLength(),e),r.push(a.next(i));break;case l.DELETE:i=Math.min(e,s.peekLength()),s.next(i),r.delete(i);break;case l.EQUAL:i=Math.min(s.peekLength(),a.peekLength(),e);var n=s.next(i),o=a.next(i);c(n.insert,o.insert)?r.retain(i,u.attributes.diff(n.attributes,o.attributes)):r.push(o).delete(i)}e-=i}}),r.chop()},h.prototype.eachLine=function(t,e){e=e||"\n";for(var i=u.iterator(this.ops),n=new h,o=0;i.hasNext();){if("insert"!==i.peekType())return;var r=i.peek(),s=u.length(r)-i.peekLength(),a="string"==typeof r.insert?r.insert.indexOf(e,s)-s:-1;if(a<0)n.push(i.next());else if(0<a)n.push(i.next(a));else{if(!1===t(n,i.next(1).attributes||{},o))return;o+=1,n=new h}}0<n.length()&&t(n,{},o)},h.prototype.transform=function(t,e){if(e=!!e,"number"==typeof t)return this.transformPosition(t,e);for(var i=u.iterator(this.ops),n=u.iterator(t.ops),o=new h;i.hasNext()||n.hasNext();)if("insert"!==i.peekType()||!e&&"insert"===n.peekType())if("insert"===n.peekType())o.push(n.next());else{var r=Math.min(i.peekLength(),n.peekLength()),s=i.next(r),a=n.next(r);if(s.delete)continue;a.delete?o.push(a):o.retain(r,u.attributes.transform(s.attributes,a.attributes,e))}else o.retain(u.length(i.next()));return o.chop()},h.prototype.transformPosition=function(t,e){e=!!e;for(var i=u.iterator(this.ops),n=0;i.hasNext()&&n<=t;){var o=i.peekLength(),r=i.peekType();i.next(),"delete"!==r?("insert"===r&&(n<t||!e)&&(t+=o),n+=o):t-=Math.min(o,t-n)}return t},t.exports=h},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}(),s=function t(e,i,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0},r=n(i(8)),a=n(i(0)),l=function(t){function r(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(r,a.default.Inline),o(r,[{key:"formatAt",value:function(t,e,i,n){if(r.compare(this.statics.blotName,i)<0&&a.default.query(i,a.default.Scope.BLOT)){var o=this.isolate(t,e);n&&o.wrap(i,n)}else s(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"formatAt",this).call(this,t,e,i,n)}},{key:"optimize",value:function(t){if(s(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"optimize",this).call(this,t),this.parent instanceof r&&0<r.compare(this.statics.blotName,this.parent.statics.blotName)){var e=this.parent.isolate(this.offset(),this.length());this.moveChildren(e),e.wrap(this)}}}],[{key:"compare",value:function(t,e){var i=r.order.indexOf(t),n=r.order.indexOf(e);return 0<=i||0<=n?i-n:t===e?0:t<e?-1:1}}]),r}();l.allowedChildren=[l,a.default.Embed,r.default],l.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],e.default=l},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}function s(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function a(t,i){if((i=(0,b.default)(!0,{container:t,modules:{clipboard:!0,keyboard:!0,history:!0}},i)).theme&&i.theme!==x.DEFAULTS.theme){if(i.theme=x.import("themes/"+i.theme),null==i.theme)throw new Error("Invalid theme "+i.theme+". Did you register it?")}else i.theme=w.default;var e=(0,b.default)(!0,{},i.theme.DEFAULTS);[e,i].forEach(function(e){e.modules=e.modules||{},Object.keys(e.modules).forEach(function(t){!0===e.modules[t]&&(e.modules[t]={})})});var n=Object.keys(e.modules).concat(Object.keys(i.modules)).reduce(function(t,e){var i=x.import("modules/"+e);return null==i?k.error("Cannot load "+e+" module. Are you sure you registered it?"):t[e]=i.DEFAULTS||{},t},{});return null!=i.modules&&i.modules.toolbar&&i.modules.toolbar.constructor!==Object&&(i.modules.toolbar={container:i.modules.toolbar}),i=(0,b.default)(!0,{},x.DEFAULTS,{modules:n},e,i),["bounds","container","scrollingContainer"].forEach(function(t){"string"==typeof i[t]&&(i[t]=document.querySelector(i[t]))}),i.modules=Object.keys(i.modules).reduce(function(t,e){return i.modules[e]&&(t[e]=i.modules[e]),t},{}),i}function c(t,e,i,n){if(this.options.strict&&!this.isEnabled()&&e===m.default.sources.USER)return new f.default;var o=null==i?null:this.getSelection(),r=this.editor.delta,s=t();if(null!=o&&(!0===i&&(i=o.index),null==n?o=h(o,s,e):0!==n&&(o=h(o,i,n,e)),this.setSelection(o,m.default.sources.SILENT)),0<s.length()){var a,l,c=[m.default.events.TEXT_CHANGE,s,r,e];if((a=this.emitter).emit.apply(a,[m.default.events.EDITOR_CHANGE].concat(c)),e!==m.default.sources.SILENT)(l=this.emitter).emit.apply(l,c)}return s}function u(t,e,i,n,o){var r={};return"number"==typeof t.index&&"number"==typeof t.length?t=(e=("number"!=typeof e&&(o=n,n=i,i=e),t.length),t.index):"number"!=typeof e&&(o=n,n=i,i=e,e=0),"object"===(void 0===i?"undefined":l(i))?(r=i,o=n):"string"==typeof i&&(null!=n?r[i]=n:o=i),[t,e,r,o=o||m.default.sources.API]}function h(t,e,i,n){if(null==t)return null;var o=void 0,r=void 0;if(e instanceof f.default){var s=[t.index,t.index+t.length].map(function(t){return e.transformPosition(t,n!==m.default.sources.USER)}),a=d(s,2);o=a[0],r=a[1]}else{var l=[t.index,t.index+t.length].map(function(t){return t<e||t===e&&n===m.default.sources.USER?t:0<=i?t+i:Math.max(e,t+i)}),c=d(l,2);o=c[0],r=c[1]}return new v.Range(o,r-o)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.overload=e.expandConfig=void 0;var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],n=!0,o=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(i.push(s.value),!e||i.length!==e);n=!0);}catch(t){o=!0,r=t}finally{try{!n&&a.return&&a.return()}finally{if(o)throw r}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}();i(53);var f=n(i(4)),p=n(i(57)),m=n(i(9)),r=n(i(7)),g=n(i(0)),v=i(22),y=n(v),b=n(i(2)),_=n(i(10)),w=n(i(32)),k=(0,_.default)("quill"),x=function(){function r(t){var o=this,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),this.options=a(t,e),this.container=this.options.container,null==this.container)return k.error("Invalid Quill container",t);this.options.debug&&r.debug(this.options.debug);var i=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",(this.container.__quill=this).root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new m.default,this.scroll=g.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new p.default(this.scroll),this.selection=new y.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(m.default.events.EDITOR_CHANGE,function(t){t===m.default.events.TEXT_CHANGE&&o.root.classList.toggle("ql-blank",o.editor.isBlank())}),this.emitter.on(m.default.events.SCROLL_UPDATE,function(t,e){var i=o.selection.lastRange,n=i&&0===i.length?i.index:void 0;c.call(o,function(){return o.editor.update(null,e,n)},t)});var n=this.clipboard.convert("<div class='ql-editor' style=\"white-space: normal;\">"+i+"<p><br></p></div>");this.setContents(n),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return o(r,null,[{key:"debug",value:function(t){!0===t&&(t="log"),_.default.level(t)}},{key:"find",value:function(t){return t.__quill||g.default.find(t)}},{key:"import",value:function(t){return null==this.imports[t]&&k.error("Cannot import "+t+". Are you sure it was registered?"),this.imports[t]}},{key:"register",value:function(e,i){var n=this,t=2<arguments.length&&void 0!==arguments[2]&&arguments[2];if("string"!=typeof e){var o=e.attrName||e.blotName;"string"==typeof o?this.register("formats/"+o,e,i):Object.keys(e).forEach(function(t){n.register(t,e[t],i)})}else null==this.imports[e]||t||k.warn("Overwriting "+e+" with",i),this.imports[e]=i,(e.startsWith("blots/")||e.startsWith("formats/"))&&"abstract"!==i.blotName?g.default.register(i):e.startsWith("modules")&&"function"==typeof i.register&&i.register()}}]),o(r,[{key:"addContainer",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;if("string"==typeof t){var i=t;(t=document.createElement("div")).classList.add(i)}return this.container.insertBefore(t,e),t}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(t,e,i){var n=this,o=u(t,e,i),r=d(o,4);return t=r[0],e=r[1],i=r[3],c.call(this,function(){return n.editor.deleteText(t,e)},i,t,-1*e)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];this.scroll.enable(t),this.container.classList.toggle("ql-disabled",!t)}},{key:"focus",value:function(){var t=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=t,this.scrollIntoView()}},{key:"format",value:function(i,n){var o=this,t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:m.default.sources.API;return c.call(this,function(){var t=o.getSelection(!0),e=new f.default;if(null==t)return e;if(g.default.query(i,g.default.Scope.BLOCK))e=o.editor.formatLine(t.index,t.length,s({},i,n));else{if(0===t.length)return o.selection.format(i,n),e;e=o.editor.formatText(t.index,t.length,s({},i,n))}return o.setSelection(t,m.default.sources.SILENT),e},t)}},{key:"formatLine",value:function(t,e,i,n,o){var r,s=this,a=u(t,e,i,n,o),l=d(a,4);return t=l[0],e=l[1],r=l[2],o=l[3],c.call(this,function(){return s.editor.formatLine(t,e,r)},o,t,0)}},{key:"formatText",value:function(t,e,i,n,o){var r,s=this,a=u(t,e,i,n,o),l=d(a,4);return t=l[0],e=l[1],r=l[2],o=l[3],c.call(this,function(){return s.editor.formatText(t,e,r)},o,t,0)}},{key:"getBounds",value:function(t){var e,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;e="number"==typeof t?this.selection.getBounds(t,i):this.selection.getBounds(t.index,t.length);var n=this.container.getBoundingClientRect();return{bottom:e.bottom-n.top,height:e.height,left:e.left-n.left,right:e.right-n.left,top:e.top-n.top,width:e.width}}},{key:"getContents",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.getLength()-t,i=u(t,e),n=d(i,2);return t=n[0],e=n[1],this.editor.getContents(t,e)}},{key:"getFormat",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.getSelection(!0),e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return"number"==typeof t?this.editor.getFormat(t,e):this.editor.getFormat(t.index,t.length)}},{key:"getIndex",value:function(t){return t.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(t){return this.scroll.leaf(t)}},{key:"getLine",value:function(t){return this.scroll.line(t)}},{key:"getLines",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE;return"number"!=typeof t?this.scroll.lines(t.index,t.length):this.scroll.lines(t,e)}},{key:"getModule",value:function(t){return this.theme.modules[t]}},{key:"getSelection",value:function(){return 0<arguments.length&&void 0!==arguments[0]&&arguments[0]&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.getLength()-t,i=u(t,e),n=d(i,2);return t=n[0],e=n[1],this.editor.getText(t,e)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(t,e,i){var n=this,o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:r.sources.API;return c.call(this,function(){return n.editor.insertEmbed(t,e,i)},o,t)}},{key:"insertText",value:function(t,e,i,n,o){var r,s=this,a=u(t,0,i,n,o),l=d(a,4);return t=l[0],r=l[2],o=l[3],c.call(this,function(){return s.editor.insertText(t,e,r)},o,t,e.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(t,e,i){this.clipboard.dangerouslyPasteHTML(t,e,i)}},{key:"removeFormat",value:function(t,e,i){var n=this,o=u(t,e,i),r=d(o,4);return t=r[0],e=r[1],i=r[3],c.call(this,function(){return n.editor.removeFormat(t,e)},i,t)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(o){var r=this,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:m.default.sources.API;return c.call(this,function(){o=new f.default(o);var t=r.getLength(),e=r.editor.deleteText(0,t),i=r.editor.applyDelta(o),n=i.ops[i.ops.length-1];return null!=n&&"string"==typeof n.insert&&"\n"===n.insert[n.insert.length-1]&&(r.editor.deleteText(r.getLength()-1,1),i.delete(1)),e.compose(i)},t)}},{key:"setSelection",value:function(t,e,i){if(null==t)this.selection.setRange(null,e||r.sources.API);else{var n=u(t,e,i),o=d(n,4);t=o[0],e=o[1],i=o[3],this.selection.setRange(new v.Range(t,e),i),i!==m.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:m.default.sources.API,i=(new f.default).insert(t);return this.setContents(i,e)}},{key:"update",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:m.default.sources.USER,e=this.scroll.update(t);return this.selection.update(t),e}},{key:"updateContents",value:function(t){var e=this,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:m.default.sources.API;return c.call(this,function(){return t=new f.default(t),e.editor.applyDelta(t,i)},i,!0)}}]),r}();x.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},x.events=m.default.events,x.sources=m.default.sources,x.version="1.3.3",x.imports={delta:f.default,parchment:g.default,"core/module":r.default,"core/theme":w.default},e.expandConfig=a,e.overload=u,e.default=x},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=function t(e){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.quill=e,this.options=i};n.DEFAULTS={},e.default=n},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n,o=i(0),r=(n=o)&&n.__esModule?n:{default:n},s=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.default.Text),e}();e.default=s},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}(),r=n(i(58)),s=(0,n(i(10)).default)("quill:events");["selectionchange","mousedown","mouseup","click"].forEach(function(t){document.addEventListener(t,function(){for(var t=arguments.length,i=Array(t),e=0;e<t;e++)i[e]=arguments[e];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(t){var e;t.__quill&&t.__quill.emitter&&(e=t.__quill.emitter).handleDOM.apply(e,i)})})});var a=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.listeners={},t.on("error",s.error),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.default),o(e,[{key:"emit",value:function(){s.log.apply(s,arguments),function t(e,i,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(n){for(var t=arguments.length,o=Array(1<t?t-1:0),e=1;e<t;e++)o[e-1]=arguments[e];(this.listeners[n.type]||[]).forEach(function(t){var e=t.node,i=t.handler;(n.target===e||e.contains(n.target))&&i.apply(void 0,[n].concat(o))})}},{key:"listenDOM",value:function(t,e,i){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push({node:e,handler:i})}}]),e}();a.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},a.sources={API:"api",SILENT:"silent",USER:"user"},e.default=a},function(t,e,i){function n(t){if(r.indexOf(t)<=r.indexOf(s)){for(var e,i=arguments.length,n=Array(1<i?i-1:0),o=1;o<i;o++)n[o-1]=arguments[o];(e=console)[t].apply(e,n)}}function o(i){return r.reduce(function(t,e){return t[e]=n.bind(console,e,i),t},{})}Object.defineProperty(e,"__esModule",{value:!0});var r=["error","warn","log","info"],s="warn";n.level=o.level=function(t){s=t},e.default=o},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var o=i(1),n=function(){function t(t,e,i){void 0===i&&(i={}),this.attrName=t,this.keyName=e;var n=o.Scope.TYPE&o.Scope.ATTRIBUTE;null!=i.scope?this.scope=i.scope&o.Scope.LEVEL|n:this.scope=o.Scope.ATTRIBUTE,null!=i.whitelist&&(this.whitelist=i.whitelist)}return t.keys=function(t){return[].map.call(t.attributes,function(t){return t.name})},t.prototype.add=function(t,e){return!!this.canAdd(t,e)&&(t.setAttribute(this.keyName,e),!0)},t.prototype.canAdd=function(t,e){return null!=o.query(t,o.Scope.BLOT&(this.scope|o.Scope.TYPE))&&(null==this.whitelist||-1<this.whitelist.indexOf(e))},t.prototype.remove=function(t){t.removeAttribute(this.keyName)},t.prototype.value=function(t){var e=t.getAttribute(this.keyName);return this.canAdd(t,e)?e:""},t}();e.default=n},function(t,e,i){function a(t){return null==t}function l(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length||"function"!=typeof t.copy||"function"!=typeof t.slice||0<t.length&&"number"!=typeof t[0])}var c=Array.prototype.slice,u=i(55),h=i(56),d=t.exports=function(t,e,i){return i||(i={}),t===e||(t instanceof Date&&e instanceof Date?t.getTime()===e.getTime():!t||!e||"object"!=typeof t&&"object"!=typeof e?i.strict?t===e:t==e:function(t,e,i){var n,o;if(a(t)||a(e))return!1;if(t.prototype!==e.prototype)return!1;if(h(t))return!!h(e)&&(t=c.call(t),e=c.call(e),d(t,e,i));if(l(t)){if(!l(e))return!1;if(t.length!==e.length)return!1;for(n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}try{var r=u(t),s=u(e)}catch(t){return!1}if(r.length!=s.length)return!1;for(r.sort(),s.sort(),n=r.length-1;0<=n;n--)if(r[n]!=s[n])return!1;for(n=r.length-1;0<=n;n--)if(o=r[n],!d(t[o],e[o],i))return!1;return typeof t==typeof e}(t,e,i))}},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.Code=void 0;var a=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],n=!0,o=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(i.push(s.value),!e||i.length!==e);n=!0);}catch(t){o=!0,r=t}finally{try{!n&&a.return&&a.return()}finally{if(o)throw r}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},l=function(){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}(),u=function t(e,i,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0},h=n(i(4)),d=n(i(0)),f=n(i(3)),c=n(i(5)),p=n(i(8)),m=function(t){function e(){return o(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,c.default),e}();m.blotName="code",m.tagName="CODE";var g=function(t){function c(){return o(this,c),r(this,(c.__proto__||Object.getPrototypeOf(c)).apply(this,arguments))}return s(c,f.default),l(c,[{key:"delta",value:function(){var i=this,t=this.domNode.textContent;return t.endsWith("\n")&&(t=t.slice(0,-1)),t.split("\n").reduce(function(t,e){return t.insert(e).insert("\n",i.formats())},new h.default)}},{key:"format",value:function(t,e){if(t!==this.statics.blotName||!e){var i=this.descendant(p.default,this.length()-1),n=a(i,1)[0];null!=n&&n.deleteAt(n.length()-1,1),u(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"format",this).call(this,t,e)}}},{key:"formatAt",value:function(t,e,i,n){if(0!==e&&null!=d.default.query(i,d.default.Scope.BLOCK)&&(i!==this.statics.blotName||n!==this.statics.formats(this.domNode))){var o=this.newlineIndex(t);if(!(o<0||t+e<=o)){var r=this.newlineIndex(t,!0)+1,s=o-r+1,a=this.isolate(r,s),l=a.next;a.format(i,n),l instanceof c&&l.formatAt(0,t-r+e-s,i,n)}}}},{key:"insertAt",value:function(t,e,i){if(null==i){var n=this.descendant(p.default,t),o=a(n,2),r=o[0],s=o[1];r.insertAt(s,e)}}},{key:"length",value:function(){var t=this.domNode.textContent.length;return this.domNode.textContent.endsWith("\n")?t:t+1}},{key:"newlineIndex",value:function(t){if(1<arguments.length&&void 0!==arguments[1]&&arguments[1])return this.domNode.textContent.slice(0,t).lastIndexOf("\n");var e=this.domNode.textContent.slice(t).indexOf("\n");return-1<e?t+e:-1}},{key:"optimize",value:function(t){this.domNode.textContent.endsWith("\n")||this.appendChild(d.default.create("text","\n")),u(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"optimize",this).call(this,t);var e=this.next;null!=e&&e.prev===this&&e.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===e.statics.formats(e.domNode)&&(e.optimize(t),e.moveChildren(this),e.remove())}},{key:"replace",value:function(t){u(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"replace",this).call(this,t),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(t){var e=d.default.find(t);null==e?t.parentNode.removeChild(t):e instanceof d.default.Embed?e.remove():e.unwrap()})}}],[{key:"create",value:function(t){var e=u(c.__proto__||Object.getPrototypeOf(c),"create",this).call(this,t);return e.setAttribute("spellcheck",!1),e}},{key:"formats",value:function(){return!0}}]),c}();g.blotName="code-block",g.tagName="PRE",g.TAB="  ",e.Code=m,e.default=g},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n,o=function(){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}(),r=i(0),s=(n=r)&&n.__esModule?n:{default:n},a=function(t){function i(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(i,s.default.Embed),o(i,[{key:"insertInto",value:function(t,e){0===t.children.length?function t(e,i,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0}(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"insertInto",this).call(this,t,e):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),i}();a.blotName="break",a.tagName="BR",e.default=a},function(t,e,i){function n(t,e){var i=document.createElement("a");i.href=t;var n=i.href.slice(0,i.href.indexOf(":"));return-1<e.indexOf(n)}Object.defineProperty(e,"__esModule",{value:!0}),e.sanitize=e.default=void 0;var o,r=function(){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}(),s=function t(e,i,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0},a=i(5),l=(o=a)&&o.__esModule?o:{default:o},c=function(t){function i(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(i,l.default),r(i,[{key:"format",value:function(t,e){if(t!==this.statics.blotName||!e)return s(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"format",this).call(this,t,e);e=this.constructor.sanitize(e),this.domNode.setAttribute("href",e)}}],[{key:"create",value:function(t){var e=s(i.__proto__||Object.getPrototypeOf(i),"create",this).call(this,t);return t=this.sanitize(t),e.setAttribute("href",t),e.setAttribute("target","_blank"),e}},{key:"formats",value:function(t){return t.getAttribute("href")}},{key:"sanitize",value:function(t){return n(t,this.PROTOCOL_WHITELIST)?t:this.SANITIZED_URL}}]),i}();c.blotName="link",c.tagName="A",c.SANITIZED_URL="about:blank",c.PROTOCOL_WHITELIST=["http","https","mailto","tel"],e.default=c,e.sanitize=n},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=function(){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}(),s=i(106),a=(n=s)&&n.__esModule?n:{default:n},l=function(){function i(t){var e=this;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,i),this.select=t,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){e.container.classList.toggle("ql-expanded")}),this.select.addEventListener("change",this.update.bind(this))}return r(i,[{key:"buildItem",value:function(t){var e=this,i=document.createElement("span");return i.classList.add("ql-picker-item"),t.hasAttribute("value")&&i.setAttribute("data-value",t.getAttribute("value")),t.textContent&&i.setAttribute("data-label",t.textContent),i.addEventListener("click",function(){e.selectItem(i,!0)}),i}},{key:"buildLabel",value:function(){var t=document.createElement("span");return t.classList.add("ql-picker-label"),t.innerHTML=a.default,this.container.appendChild(t),t}},{key:"buildOptions",value:function(){var i=this,n=document.createElement("span");n.classList.add("ql-picker-options"),[].slice.call(this.select.options).forEach(function(t){var e=i.buildItem(t);n.appendChild(e),!0===t.selected&&i.selectItem(e)}),this.container.appendChild(n)}},{key:"buildPicker",value:function(){var e=this;[].slice.call(this.select.attributes).forEach(function(t){e.container.setAttribute(t.name,t.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"close",value:function(){this.container.classList.remove("ql-expanded")}},{key:"selectItem",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1],i=this.container.querySelector(".ql-selected");if(t!==i&&(null!=i&&i.classList.remove("ql-selected"),null!=t&&(t.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(t.parentNode.children,t),t.hasAttribute("data-value")?this.label.setAttribute("data-value",t.getAttribute("data-value")):this.label.removeAttribute("data-value"),t.hasAttribute("data-label")?this.label.setAttribute("data-label",t.getAttribute("data-label")):this.label.removeAttribute("data-label"),e))){if("function"==typeof Event)this.select.dispatchEvent(new Event("change"));else if("object"===("undefined"==typeof Event?"undefined":o(Event))){var n=document.createEvent("Event");n.initEvent("change",!0,!0),this.select.dispatchEvent(n)}this.close()}}},{key:"update",value:function(){var t=void 0;if(-1<this.select.selectedIndex){var e=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];t=this.select.options[this.select.selectedIndex],this.selectItem(e)}else this.selectItem(null);var i=null!=t&&t!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",i)}}]),i}();e.default=l},function(t,e,i){function r(e){var i=l.find(e);if(null==i)try{i=l.create(e)}catch(t){i=l.create(l.Scope.INLINE),[].slice.call(e.childNodes).forEach(function(t){i.domNode.appendChild(t)}),e.parentNode.replaceChild(i.domNode,e),i.attach()}return i}var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var a=i(47),s=i(27),l=i(1),c=function(n){function s(){return null!==n&&n.apply(this,arguments)||this}return o(s,n),s.prototype.appendChild=function(t){this.insertBefore(t)},s.prototype.attach=function(){var i=this;n.prototype.attach.call(this),this.children=new a.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(t){try{var e=r(t);i.insertBefore(e,i.children.head)}catch(t){if(t instanceof l.ParchmentError)return;throw t}})},s.prototype.deleteAt=function(t,e){if(0===t&&e===this.length())return this.remove();this.children.forEachAt(t,e,function(t,e,i){t.deleteAt(e,i)})},s.prototype.descendant=function(t,e){var i=this.children.find(e),n=i[0],o=i[1];return null==t.blotName&&t(n)||null!=t.blotName&&n instanceof t?[n,o]:n instanceof s?n.descendant(t,o):[null,-1]},s.prototype.descendants=function(n,t,e){void 0===t&&(t=0),void 0===e&&(e=Number.MAX_VALUE);var o=[],r=e;return this.children.forEachAt(t,e,function(t,e,i){(null==n.blotName&&n(t)||null!=n.blotName&&t instanceof n)&&o.push(t),t instanceof s&&(o=o.concat(t.descendants(n,e,r))),r-=i}),o},s.prototype.detach=function(){this.children.forEach(function(t){t.detach()}),n.prototype.detach.call(this)},s.prototype.formatAt=function(t,e,n,o){this.children.forEachAt(t,e,function(t,e,i){t.formatAt(e,i,n,o)})},s.prototype.insertAt=function(t,e,i){var n=this.children.find(t),o=n[0],r=n[1];if(o)o.insertAt(r,e,i);else{var s=null==i?l.create("text",e):l.create(e,i);this.appendChild(s)}},s.prototype.insertBefore=function(e,t){if(null!=this.statics.allowedChildren&&!this.statics.allowedChildren.some(function(t){return e instanceof t}))throw new l.ParchmentError("Cannot insert "+e.statics.blotName+" into "+this.statics.blotName);e.insertInto(this,t)},s.prototype.length=function(){return this.children.reduce(function(t,e){return t+e.length()},0)},s.prototype.moveChildren=function(e,i){this.children.forEach(function(t){e.insertBefore(t,i)})},s.prototype.optimize=function(t){if(n.prototype.optimize.call(this,t),0===this.children.length)if(null!=this.statics.defaultChild){var e=l.create(this.statics.defaultChild);this.appendChild(e),e.optimize(t)}else this.remove()},s.prototype.path=function(t,e){void 0===e&&(e=!1);var i=this.children.find(t,e),n=i[0],o=i[1],r=[[this,t]];return n instanceof s?r.concat(n.path(o,e)):(null!=n&&r.push([n,o]),r)},s.prototype.removeChild=function(t){this.children.remove(t)},s.prototype.replace=function(t){t instanceof s&&t.moveChildren(this),n.prototype.replace.call(this,t)},s.prototype.split=function(t,n){if(void 0===n&&(n=!1),!n){if(0===t)return this;if(t===this.length())return this.next}var o=this.clone();return this.parent.insertBefore(o,this.next),this.children.forEachAt(t,this.length(),function(t,e,i){t=t.split(e,n),o.appendChild(t)}),o},s.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},s.prototype.update=function(t,e){var n=this,i=[],o=[];t.forEach(function(t){t.target===n.domNode&&"childList"===t.type&&(i.push.apply(i,t.addedNodes),o.push.apply(o,t.removedNodes))}),o.forEach(function(t){if(!(null!=t.parentNode&&"IFRAME"!==t.tagName&&document.body.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var e=l.find(t);null!=e&&(null!=e.domNode.parentNode&&e.domNode.parentNode!==n.domNode||e.detach())}}),i.filter(function(t){return t.parentNode==n.domNode}).sort(function(t,e){return t===e?0:t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(t){var e=null;null!=t.nextSibling&&(e=l.find(t.nextSibling));var i=r(t);i.next==e&&null!=i.next||(null!=i.parent&&i.parent.removeChild(n),n.insertBefore(i,e))})},s}(s.default);e.default=c},function(t,e,i){var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var s=i(11),a=i(28),o=i(17),l=i(1),c=function(n){function o(){return null!==n&&n.apply(this,arguments)||this}return r(o,n),o.formats=function(t){return"string"==typeof this.tagName||(Array.isArray(this.tagName)?t.tagName.toLowerCase():void 0)},o.prototype.attach=function(){n.prototype.attach.call(this),this.attributes=new a.default(this.domNode)},o.prototype.format=function(t,e){var i=l.query(t);i instanceof s.default?this.attributes.attribute(i,e):e&&(null==i||t===this.statics.blotName&&this.formats()[t]===e||this.replaceWith(t,e))},o.prototype.formats=function(){var t=this.attributes.values(),e=this.statics.formats(this.domNode);return null!=e&&(t[this.statics.blotName]=e),t},o.prototype.replaceWith=function(t,e){var i=n.prototype.replaceWith.call(this,t,e);return this.attributes.copy(i),i},o.prototype.update=function(t,e){var i=this;n.prototype.update.call(this,t,e),t.some(function(t){return t.target===i.domNode&&"attributes"===t.type})&&this.attributes.build()},o.prototype.wrap=function(t,e){var i=n.prototype.wrap.call(this,t,e);return i instanceof o&&i.statics.scope===this.statics.scope&&this.attributes.move(i),i},o}(o.default);e.default=c},function(t,e,i){var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r=i(27),s=i(1),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.value=function(t){return!0},e.prototype.index=function(t,e){return this.domNode===t||this.domNode.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(e,1):-1},e.prototype.position=function(t,e){var i=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return 0<t&&(i+=1),[this.parent.domNode,i]},e.prototype.value=function(){return(t={})[this.statics.blotName]=this.statics.value(this.domNode)||!0,t;var t},e.scope=s.Scope.INLINE_BLOT,e}(r.default);e.default=a},function(t,e,i){function n(t){this.ops=t,this.index=0,this.offset=0}var o=i(12),r=i(2),s={attributes:{compose:function(t,e,i){"object"!=typeof t&&(t={}),"object"!=typeof e&&(e={});var n=r(!0,{},e);for(var o in i||(n=Object.keys(n).reduce(function(t,e){return null!=n[e]&&(t[e]=n[e]),t},{})),t)void 0!==t[o]&&void 0===e[o]&&(n[o]=t[o]);return 0<Object.keys(n).length?n:void 0},diff:function(i,n){"object"!=typeof i&&(i={}),"object"!=typeof n&&(n={});var t=Object.keys(i).concat(Object.keys(n)).reduce(function(t,e){return o(i[e],n[e])||(t[e]=void 0===n[e]?null:n[e]),t},{});return 0<Object.keys(t).length?t:void 0},transform:function(i,n,t){if("object"!=typeof i)return n;if("object"==typeof n){if(!t)return n;var e=Object.keys(n).reduce(function(t,e){return void 0===i[e]&&(t[e]=n[e]),t},{});return 0<Object.keys(e).length?e:void 0}}},iterator:function(t){return new n(t)},length:function(t){return"number"==typeof t.delete?t.delete:"number"==typeof t.retain?t.retain:"string"==typeof t.insert?t.insert.length:1}};n.prototype.hasNext=function(){return this.peekLength()<1/0},n.prototype.next=function(t){t||(t=1/0);var e=this.ops[this.index];if(e){var i=this.offset,n=s.length(e);if(n-i<=t?(t=n-i,this.index+=1,this.offset=0):this.offset+=t,"number"==typeof e.delete)return{delete:t};var o={};return e.attributes&&(o.attributes=e.attributes),"number"==typeof e.retain?o.retain=t:"string"==typeof e.insert?o.insert=e.insert.substr(i,t):o.insert=e.insert,o}return{retain:1/0}},n.prototype.peek=function(){return this.ops[this.index]},n.prototype.peekLength=function(){return this.ops[this.index]?s.length(this.ops[this.index])-this.offset:1/0},n.prototype.peekType=function(){return this.ops[this.index]?"number"==typeof this.ops[this.index].delete?"delete":"number"==typeof this.ops[this.index].retain?"retain":"insert":"retain"},t.exports=s},function(t,e){var i=function(){function b(t,e){return null!=e&&t instanceof e}function _(t,f,e,p,m){"object"==typeof f&&(e=f.depth,p=f.prototype,m=f.includeNonEnumerable,f=f.circular);var g=[],v=[],y="undefined"!=typeof Buffer;return void 0===f&&(f=!0),void 0===e&&(e=1/0),function o(t,r){if(null===t)return null;if(0===r)return t;var s,e;if("object"!=typeof t)return t;if(b(t,k))s=new k;else if(b(t,x))s=new x;else if(b(t,C))s=new C(function(e,i){t.then(function(t){e(o(t,r-1))},function(t){i(o(t,r-1))})});else if(_.__isArray(t))s=[];else if(_.__isRegExp(t))s=new RegExp(t.source,w(t)),t.lastIndex&&(s.lastIndex=t.lastIndex);else if(_.__isDate(t))s=new Date(t.getTime());else{if(y&&Buffer.isBuffer(t))return s=new Buffer(t.length),t.copy(s),s;b(t,Error)?s=Object.create(t):void 0===p?(e=Object.getPrototypeOf(t),s=Object.create(e)):(s=Object.create(p),e=p)}if(f){var i=g.indexOf(t);if(-1!=i)return v[i];g.push(t),v.push(s)}for(var n in b(t,k)&&t.forEach(function(t,e){var i=o(e,r-1),n=o(t,r-1);s.set(i,n)}),b(t,x)&&t.forEach(function(t){var e=o(t,r-1);s.add(e)}),t){var a;e&&(a=Object.getOwnPropertyDescriptor(e,n)),a&&null==a.set||(s[n]=o(t[n],r-1))}if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(n=0;n<l.length;n++){var c=l[n];(!(h=Object.getOwnPropertyDescriptor(t,c))||h.enumerable||m)&&(s[c]=o(t[c],r-1),h.enumerable||Object.defineProperty(s,c,{enumerable:!1}))}}if(m){var u=Object.getOwnPropertyNames(t);for(n=0;n<u.length;n++){var h,d=u[n];(h=Object.getOwnPropertyDescriptor(t,d))&&h.enumerable||(s[d]=o(t[d],r-1),Object.defineProperty(s,d,{enumerable:!1}))}}return s}(t,e)}function e(t){return Object.prototype.toString.call(t)}function w(t){var e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),e}var k,x,C;try{k=Map}catch(b){k=function(){}}try{x=Set}catch(b){x=function(){}}try{C=Promise}catch(b){C=function(){}}return _.clonePrototype=function(t){if(null===t)return null;var e=function(){};return e.prototype=t,new e},_.__objToStr=e,_.__isDate=function(t){return"object"==typeof t&&"[object Date]"===e(t)},_.__isArray=function(t){return"object"==typeof t&&"[object Array]"===e(t)},_.__isRegExp=function(t){return"object"==typeof t&&"[object RegExp]"===e(t)},_.__getRegExpFlags=w,_}();"object"==typeof t&&t.exports&&(t.exports=i)},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}function r(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){try{e.parentNode}catch(t){return!1}return e instanceof Text&&(e=e.parentNode),t.contains(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.Range=void 0;var v=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],n=!0,o=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(i.push(s.value),!e||i.length!==e);n=!0);}catch(t){o=!0,r=t}finally{try{!n&&a.return&&a.return()}finally{if(o)throw r}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=function(){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}(),l=n(i(0)),c=n(i(21)),u=n(i(12)),h=n(i(9)),d=(0,n(i(10)).default)("quill:selection"),f=function t(e){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;o(this,t),this.index=e,this.length=i},p=function(){function i(t,e){var a=this;o(this,i),this.emitter=e,this.scroll=t,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=l.default.create("cursor",this),this.lastRange=this.savedRange=new f(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){a.mouseDown||setTimeout(a.update.bind(a,h.default.sources.USER),1)}),this.emitter.on(h.default.events.EDITOR_CHANGE,function(t,e){t===h.default.events.TEXT_CHANGE&&0<e.length()&&a.update(h.default.sources.SILENT)}),this.emitter.on(h.default.events.SCROLL_BEFORE_UPDATE,function(){if(a.hasFocus()){var t=a.getNativeRange();null!=t&&t.start.node!==a.cursor.textNode&&a.emitter.once(h.default.events.SCROLL_UPDATE,function(){try{a.setNativeRange(t.start.node,t.start.offset,t.end.node,t.end.offset)}catch(t){}})}}),this.emitter.on(h.default.events.SCROLL_OPTIMIZE,function(t,e){if(e.range){var i=e.range,n=i.startNode,o=i.startOffset,r=i.endNode,s=i.endOffset;a.setNativeRange(n,o,r,s)}}),this.update(h.default.sources.SILENT)}return a(i,[{key:"handleComposition",value:function(){var e=this;this.root.addEventListener("compositionstart",function(){e.composing=!0}),this.root.addEventListener("compositionend",function(){if(e.composing=!1,e.cursor.parent){var t=e.cursor.restore();if(!t)return;setTimeout(function(){e.setNativeRange(t.startNode,t.startOffset,t.endNode,t.endOffset)},1)}})}},{key:"handleDragging",value:function(){var t=this;this.emitter.listenDOM("mousedown",document.body,function(){t.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){t.mouseDown=!1,t.update(h.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(t,e){if(null==this.scroll.whitelist||this.scroll.whitelist[t]){this.scroll.update();var i=this.getNativeRange();if(null!=i&&i.native.collapsed&&!l.default.query(t,l.default.Scope.BLOCK)){if(i.start.node!==this.cursor.textNode){var n=l.default.find(i.start.node,!1);if(null==n)return;if(n instanceof l.default.Leaf){var o=n.split(i.start.offset);n.parent.insertBefore(this.cursor,o)}else n.insertBefore(this.cursor,i.start.node);this.cursor.attach()}this.cursor.format(t,e),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,i=this.scroll.length();t=Math.min(t,i-1),e=Math.min(t+e,i-1)-t;var n=void 0,o=this.scroll.leaf(t),r=v(o,2),s=r[0],a=r[1];if(null==s)return null;var l=s.position(a,!0),c=v(l,2);n=c[0],a=c[1];var u=document.createRange();if(0<e){u.setStart(n,a);var h=this.scroll.leaf(t+e),d=v(h,2);if(s=d[0],a=d[1],null==s)return null;var f=s.position(a,!0),p=v(f,2);return n=p[0],a=p[1],u.setEnd(n,a),u.getBoundingClientRect()}var m="left",g=void 0;return n instanceof Text?(a<n.data.length?(u.setStart(n,a),u.setEnd(n,a+1)):(u.setStart(n,a-1),u.setEnd(n,a),m="right"),g=u.getBoundingClientRect()):(g=s.domNode.getBoundingClientRect(),0<a&&(m="right")),{bottom:g.top+g.height,height:g.height,left:g[m],right:g[m],top:g.top,width:0}}},{key:"getNativeRange",value:function(){var t=document.getSelection();if(null==t||t.rangeCount<=0)return null;var e=t.getRangeAt(0);if(null==e)return null;var i=this.normalizeNative(e);return d.info("getNativeRange",i),i}},{key:"getRange",value:function(){var t=this.getNativeRange();return null==t?[null,null]:[this.normalizedToRange(t),t]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(t){var s=this,e=[[t.start.node,t.start.offset]];t.native.collapsed||e.push([t.end.node,t.end.offset]);var i=e.map(function(t){var e=v(t,2),i=e[0],n=e[1],o=l.default.find(i,!0),r=o.offset(s.scroll);return 0===n?r:o instanceof l.default.Container?r+o.length():r+o.index(i,n)}),n=Math.min(Math.max.apply(Math,r(i)),this.scroll.length()-1),o=Math.min.apply(Math,[n].concat(r(i)));return new f(o,n-o)}},{key:"normalizeNative",value:function(t){if(!s(this.root,t.startContainer)||!t.collapsed&&!s(this.root,t.endContainer))return null;var e={start:{node:t.startContainer,offset:t.startOffset},end:{node:t.endContainer,offset:t.endOffset},native:t};return[e.start,e.end].forEach(function(t){for(var e=t.node,i=t.offset;!(e instanceof Text)&&0<e.childNodes.length;)if(e.childNodes.length>i)e=e.childNodes[i],i=0;else{if(e.childNodes.length!==i)break;i=(e=e.lastChild)instanceof Text?e.data.length:e.childNodes.length+1}t.node=e,t.offset=i}),e}},{key:"rangeToNative",value:function(t){var c=this,e=t.collapsed?[t.index]:[t.index,t.index+t.length],u=[],h=this.scroll.length();return e.forEach(function(t,e){t=Math.min(h-1,t);var i,n=c.scroll.leaf(t),o=v(n,2),r=o[0],s=o[1],a=r.position(s,0!==e),l=v(a,2);i=l[0],s=l[1],u.push(i,s)}),u.length<2&&(u=u.concat(u)),u}},{key:"scrollIntoView",value:function(t){var e=this.lastRange;if(null!=e){var i=this.getBounds(e.index,e.length);if(null!=i){var n=this.scroll.length()-1,o=this.scroll.line(Math.min(e.index,n)),r=v(o,1)[0],s=r;if(0<e.length){var a=this.scroll.line(Math.min(e.index+e.length,n));s=v(a,1)[0]}if(null!=r&&null!=s){var l=t.getBoundingClientRect();i.top<l.top?t.scrollTop-=l.top-i.top:i.bottom>l.bottom&&(t.scrollTop+=i.bottom-l.bottom)}}}}},{key:"setNativeRange",value:function(t,e){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:t,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:e,o=4<arguments.length&&void 0!==arguments[4]&&arguments[4];if(d.info("setNativeRange",t,e,i,n),null==t||null!=this.root.parentNode&&null!=t.parentNode&&null!=i.parentNode){var r=document.getSelection();if(null!=r)if(null!=t){this.hasFocus()||this.root.focus();var s=(this.getNativeRange()||{}).native;if(null==s||o||t!==s.startContainer||e!==s.startOffset||i!==s.endContainer||n!==s.endOffset){"BR"==t.tagName&&(e=[].indexOf.call(t.parentNode.childNodes,t),t=t.parentNode),"BR"==i.tagName&&(n=[].indexOf.call(i.parentNode.childNodes,i),i=i.parentNode);var a=document.createRange();a.setStart(t,e),a.setEnd(i,n),r.removeAllRanges(),r.addRange(a)}}else r.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1],i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:h.default.sources.API;if("string"==typeof e&&(i=e,e=!1),d.info("setRange",t),null!=t){var n=this.rangeToNative(t);this.setNativeRange.apply(this,r(n).concat([e]))}else this.setNativeRange(null);this.update(i)}},{key:"update",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:h.default.sources.USER,e=this.lastRange,i=this.getRange(),n=v(i,2),o=n[0],r=n[1];if(this.lastRange=o,null!=this.lastRange&&(this.savedRange=this.lastRange),!(0,u.default)(e,this.lastRange)){var s;!this.composing&&null!=r&&r.native.collapsed&&r.start.node!==this.cursor.textNode&&this.cursor.restore();var a,l=[h.default.events.SELECTION_CHANGE,(0,c.default)(this.lastRange),(0,c.default)(e),t];if((s=this.emitter).emit.apply(s,[h.default.events.EDITOR_CHANGE].concat(l)),t!==h.default.sources.SILENT)(a=this.emitter).emit.apply(a,l)}}}]),i}();e.Range=f,e.default=p},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(0)),r=i(3),s=n(r),a=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.default.Container),e}();a.allowedChildren=[s.default,r.BlockEmbed,a],e.default=a},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}(),r=n(i(0)),s=n(i(8)),a="\ufeff",l=function(t){function i(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t));return e.contentNode=document.createElement("span"),e.contentNode.setAttribute("contenteditable",!1),[].slice.call(e.domNode.childNodes).forEach(function(t){e.contentNode.appendChild(t)}),e.leftGuard=document.createTextNode(a),e.rightGuard=document.createTextNode(a),e.domNode.appendChild(e.leftGuard),e.domNode.appendChild(e.contentNode),e.domNode.appendChild(e.rightGuard),e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(i,r.default.Embed),o(i,[{key:"index",value:function(t,e){return t===this.leftGuard?0:t===this.rightGuard?1:function t(e,i,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0}(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"index",this).call(this,t,e)}},{key:"restore",value:function(t){var e=void 0,i=void 0,n=t.data.split(a).join("");if(t===this.leftGuard)if(this.prev instanceof s.default){var o=this.prev.length();this.prev.insertAt(o,n),e={startNode:this.prev.domNode,startOffset:o+n.length}}else i=document.createTextNode(n),this.parent.insertBefore(r.default.create(i),this),e={startNode:i,startOffset:n.length};else t===this.rightGuard&&(e=this.next instanceof s.default?(this.next.insertAt(0,n),{startNode:this.next.domNode,startOffset:n.length}):(i=document.createTextNode(n),this.parent.insertBefore(r.default.create(i),this.next),{startNode:i,startOffset:n.length}));return t.data=a,e}},{key:"update",value:function(t,i){var n=this;t.forEach(function(t){if("characterData"===t.type&&(t.target===n.leftGuard||t.target===n.rightGuard)){var e=n.restore(t.target);e&&(i.range=e)}})}}]),i}();e.default=l},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.ColorStyle=e.ColorClass=e.ColorAttributor=void 0;var n,o=function(){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}(),r=i(0),s=(n=r)&&n.__esModule?n:{default:n},a=function(t){function i(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(i,s.default.Attributor.Style),o(i,[{key:"value",value:function(t){var e=function t(e,i,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0}(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"value",this).call(this,t);return e.startsWith("rgb(")?"#"+(e=e.replace(/^[^\d]+/,"").replace(/[^\d]+$/,"")).split(",").map(function(t){return("00"+parseInt(t).toString(16)).slice(-2)}).join(""):e}}]),i}(),l=new s.default.Attributor.Class("color","ql-color",{scope:s.default.Scope.INLINE}),c=new a("color","color",{scope:s.default.Scope.INLINE});e.ColorAttributor=a,e.ColorClass=l,e.ColorStyle=c},function(t,e,i){t.exports={align:{"":i(75),center:i(76),right:i(77),justify:i(78)},background:i(79),blockquote:i(80),bold:i(81),clean:i(82),code:i(40),"code-block":i(40),color:i(83),direction:{"":i(84),rtl:i(85)},float:{center:i(86),full:i(87),left:i(88),right:i(89)},formula:i(90),header:{1:i(91),2:i(92)},italic:i(93),image:i(94),indent:{"+1":i(95),"-1":i(96)},link:i(97),list:{ordered:i(98),bullet:i(99),check:i(100)},script:{sub:i(101),super:i(102)},strike:i(103),underline:i(104),video:i(105)}},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var s=i(1),n=function(){function t(t){this.domNode=t,this.attach()}return Object.defineProperty(t.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),t.create=function(t){if(null==this.tagName)throw new s.ParchmentError("Blot definition missing tagName");var e;return e=Array.isArray(this.tagName)?("string"==typeof t&&(t=t.toUpperCase(),parseInt(t).toString()===t&&(t=parseInt(t))),"number"==typeof t?document.createElement(this.tagName[t-1]):-1<this.tagName.indexOf(t)?document.createElement(t):document.createElement(this.tagName[0])):document.createElement(this.tagName),this.className&&e.classList.add(this.className),e},t.prototype.attach=function(){this.domNode[s.DATA_KEY]={blot:this}},t.prototype.clone=function(){var t=this.domNode.cloneNode(!1);return s.create(t)},t.prototype.detach=function(){null!=this.parent&&this.parent.removeChild(this),delete this.domNode[s.DATA_KEY]},t.prototype.deleteAt=function(t,e){this.isolate(t,e).remove()},t.prototype.formatAt=function(t,e,i,n){var o=this.isolate(t,e);if(null!=s.query(i,s.Scope.BLOT)&&n)o.wrap(i,n);else if(null!=s.query(i,s.Scope.ATTRIBUTE)){var r=s.create(this.statics.scope);o.wrap(r),r.format(i,n)}},t.prototype.insertAt=function(t,e,i){var n=null==i?s.create("text",e):s.create(e,i),o=this.split(t);this.parent.insertBefore(n,o)},t.prototype.insertInto=function(t,e){if(null!=this.parent&&this.parent.children.remove(this),t.children.insertBefore(this,e),null!=e)var i=e.domNode;null!=this.next&&this.domNode.nextSibling==i||t.domNode.insertBefore(this.domNode,void 0!==i?i:null),this.parent=t,this.scroll=t.scroll},t.prototype.isolate=function(t,e){var i=this.split(t);return i.split(e),i},t.prototype.length=function(){return 1},t.prototype.offset=function(t){return void 0===t&&(t=this.parent),null==this.parent||this==t?0:this.parent.children.offset(this)+this.parent.offset(t)},t.prototype.optimize=function(t){null!=this.domNode[s.DATA_KEY]&&delete this.domNode[s.DATA_KEY].mutations},t.prototype.remove=function(){null!=this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},t.prototype.replace=function(t){null!=t.parent&&(t.parent.insertBefore(this,t.next),t.remove())},t.prototype.replaceWith=function(t,e){var i="string"==typeof t?s.create(t,e):t;return i.replace(this),i},t.prototype.split=function(t,e){return 0===t?this:this.next},t.prototype.update=function(t,e){},t.prototype.wrap=function(t,e){var i="string"==typeof t?s.create(t,e):t;return null!=this.parent&&this.parent.insertBefore(i,this.next),i.appendChild(this),i},t.blotName="abstract",t}();e.default=n},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var o=i(11),r=i(29),s=i(30),a=i(1),n=function(){function t(t){this.attributes={},this.domNode=t,this.build()}return t.prototype.attribute=function(t,e){e?t.add(this.domNode,e)&&(null!=t.value(this.domNode)?this.attributes[t.attrName]=t:delete this.attributes[t.attrName]):(t.remove(this.domNode),delete this.attributes[t.attrName])},t.prototype.build=function(){var i=this;this.attributes={};var t=o.default.keys(this.domNode),e=r.default.keys(this.domNode),n=s.default.keys(this.domNode);t.concat(e).concat(n).forEach(function(t){var e=a.query(t,a.Scope.ATTRIBUTE);e instanceof o.default&&(i.attributes[e.attrName]=e)})},t.prototype.copy=function(i){var n=this;Object.keys(this.attributes).forEach(function(t){var e=n.attributes[t].value(n.domNode);i.format(t,e)})},t.prototype.move=function(t){var e=this;this.copy(t),Object.keys(this.attributes).forEach(function(t){e.attributes[t].remove(e.domNode)}),this.attributes={}},t.prototype.values=function(){var i=this;return Object.keys(this.attributes).reduce(function(t,e){return t[e]=i.attributes[e].value(i.domNode),t},{})},t}();e.default=n},function(t,e,i){function n(t,e){return(t.getAttribute("class")||"").split(/\s+/).filter(function(t){return 0===t.indexOf(e+"-")})}var o,r=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.keys=function(t){return(t.getAttribute("class")||"").split(/\s+/).map(function(t){return t.split("-").slice(0,-1).join("-")})},e.prototype.add=function(t,e){return!!this.canAdd(t,e)&&(this.remove(t),t.classList.add(this.keyName+"-"+e),!0)},e.prototype.remove=function(e){n(e,this.keyName).forEach(function(t){e.classList.remove(t)}),0===e.classList.length&&e.removeAttribute("class")},e.prototype.value=function(t){var e=(n(t,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(t,e)?e:""},e}(i(11).default);e.default=s},function(t,e,i){function n(t){var e=t.split("-"),i=e.slice(1).map(function(t){return t[0].toUpperCase()+t.slice(1)}).join("");return e[0]+i}var o,r=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.keys=function(t){return(t.getAttribute("style")||"").split(";").map(function(t){return t.split(":")[0].trim()})},e.prototype.add=function(t,e){return!!this.canAdd(t,e)&&(t.style[n(this.keyName)]=e,!0)},e.prototype.remove=function(t){t.style[n(this.keyName)]="",t.getAttribute("style")||t.removeAttribute("style")},e.prototype.value=function(t){var e=t.style[n(this.keyName)];return this.canAdd(t,e)?e:""},e}(i(11).default);e.default=s},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var u=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],n=!0,o=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(i.push(s.value),!e||i.length!==e);n=!0);}catch(t){o=!0,r=t}finally{try{!n&&a.return&&a.return()}finally{if(o)throw r}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function t(e,i,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0},r=function(){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}(),h=n(i(0)),d=n(i(8)),s=function(t){function c(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,t));return i.selection=e,i.textNode=document.createTextNode(c.CONTENTS),i.domNode.appendChild(i.textNode),i._length=0,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(c,h.default.Embed),r(c,null,[{key:"value",value:function(){}}]),r(c,[{key:"detach",value:function(){null!=this.parent&&this.parent.removeChild(this)}},{key:"format",value:function(t,e){if(0!==this._length)return o(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"format",this).call(this,t,e);for(var i=this,n=0;null!=i&&i.statics.scope!==h.default.Scope.BLOCK_BLOT;)n+=i.offset(i.parent),i=i.parent;null!=i&&(this._length=c.CONTENTS.length,i.optimize(),i.formatAt(n,c.CONTENTS.length,t,e),this._length=0)}},{key:"index",value:function(t,e){return t===this.textNode?0:o(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"index",this).call(this,t,e)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){o(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!this.selection.composing&&null!=this.parent){var t=this.textNode,e=this.selection.getNativeRange(),i=void 0,n=void 0,o=void 0;if(null!=e&&e.start.node===t&&e.end.node===t){var r=[t,e.start.offset,e.end.offset];i=r[0],n=r[1],o=r[2]}for(;null!=this.domNode.lastChild&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==c.CONTENTS){var s=this.textNode.data.split(c.CONTENTS).join("");this.next instanceof d.default?(i=this.next.domNode,this.next.insertAt(0,s),this.textNode.data=c.CONTENTS):(this.textNode.data=s,this.parent.insertBefore(h.default.create(this.textNode),this),this.textNode=document.createTextNode(c.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),null!=n){var a=[n,o].map(function(t){return Math.max(0,Math.min(i.data.length,t-1))}),l=u(a,2);return n=l[0],o=l[1],{startNode:i,startOffset:n,endNode:i,endOffset:o}}}}},{key:"update",value:function(t,e){var i=this;if(t.some(function(t){return"characterData"===t.type&&t.target===i.textNode})){var n=this.restore();n&&(e.range=n)}}},{key:"value",value:function(){return""}}]),c}();s.blotName="cursor",s.className="ql-cursor",s.tagName="span",s.CONTENTS="\ufeff",e.default=s},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}(),o=function(){function i(t,e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,i),this.quill=t,this.options=e,this.modules={}}return n(i,[{key:"init",value:function(){var e=this;Object.keys(this.options.modules).forEach(function(t){null==e.modules[t]&&e.addModule(t)})}},{key:"addModule",value:function(t){var e=this.quill.constructor.import("modules/"+t);return this.modules[t]=new e(this.quill,this.options.modules[t]||{}),this.modules[t]}}]),i}();o.DEFAULTS={modules:{}},o.themes={default:o},e.default=o},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.AlignStyle=e.AlignClass=e.AlignAttribute=void 0;var n,o=i(0),r=(n=o)&&n.__esModule?n:{default:n},s={scope:r.default.Scope.BLOCK,whitelist:["right","center","justify"]},a=new r.default.Attributor.Attribute("align","align",s),l=new r.default.Attributor.Class("align","ql-align",s),c=new r.default.Attributor.Style("align","text-align",s);e.AlignAttribute=a,e.AlignClass=l,e.AlignStyle=c},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.BackgroundStyle=e.BackgroundClass=void 0;var n,o=i(0),r=(n=o)&&n.__esModule?n:{default:n},s=i(25),a=new r.default.Attributor.Class("background","ql-bg",{scope:r.default.Scope.INLINE}),l=new s.ColorAttributor("background","background-color",{scope:r.default.Scope.INLINE});e.BackgroundClass=a,e.BackgroundStyle=l},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.DirectionStyle=e.DirectionClass=e.DirectionAttribute=void 0;var n,o=i(0),r=(n=o)&&n.__esModule?n:{default:n},s={scope:r.default.Scope.BLOCK,whitelist:["rtl"]},a=new r.default.Attributor.Attribute("direction","dir",s),l=new r.default.Attributor.Class("direction","ql-direction",s),c=new r.default.Attributor.Style("direction","direction",s);e.DirectionAttribute=a,e.DirectionClass=l,e.DirectionStyle=c},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.FontClass=e.FontStyle=void 0;var n,o=function(){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}(),r=i(0),s=(n=r)&&n.__esModule?n:{default:n},a={scope:s.default.Scope.INLINE,whitelist:["serif","monospace"]},l=new s.default.Attributor.Class("font","ql-font",a),c=new(function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.default.Attributor.Style),o(e,[{key:"value",value:function(t){return function t(e,i,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"value",this).call(this,t).replace(/["']/g,"")}}]),e}())("font","font-family",a);e.FontStyle=c,e.FontClass=l},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.SizeStyle=e.SizeClass=void 0;var n,o=i(0),r=(n=o)&&n.__esModule?n:{default:n},s=new r.default.Attributor.Class("size","ql-size",{scope:r.default.Scope.INLINE,whitelist:["small","large","huge"]}),a=new r.default.Attributor.Style("size","font-size",{scope:r.default.Scope.INLINE,whitelist:["10px","18px","32px"]});e.SizeClass=s,e.SizeStyle=a},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function o(n,o){var t,e=n===E.keys.LEFT?"prefix":"suffix";return r(t={key:n,shiftKey:o},e,/^$/),r(t,"handler",function(t){var e=t.index;n===E.keys.RIGHT&&(e+=t.length+1);var i=this.quill.getLeaf(e);return!(k(i,1)[0]instanceof y.default&&(n===E.keys.LEFT?o?this.quill.setSelection(t.index-1,t.length+1,b.default.sources.USER):this.quill.setSelection(t.index-1,b.default.sources.USER):o?this.quill.setSelection(t.index,t.length+1,b.default.sources.USER):this.quill.setSelection(t.index+t.length+1,b.default.sources.USER),1))}),t}function s(t,e){if(!(0===t.index||this.quill.getLength()<=1)){var i=this.quill.getLine(t.index),n=k(i,1)[0],o={};if(0===e.offset){var r=this.quill.getLine(t.index-1),s=k(r,1)[0];if(null!=s&&1<s.length()){var a=n.formats(),l=this.quill.getFormat(t.index-1,1);o=v.default.attributes.diff(a,l)||{}}}var c=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(e.prefix)?2:1;this.quill.deleteText(t.index-c,c,b.default.sources.USER),0<Object.keys(o).length&&this.quill.formatLine(t.index-c,c,o,b.default.sources.USER),this.quill.focus()}}function a(t,e){var i=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(e.suffix)?2:1;if(!(t.index>=this.quill.getLength()-i)){var n={},o=0,r=this.quill.getLine(t.index),s=k(r,1)[0];if(e.offset>=s.length()-1){var a=this.quill.getLine(t.index+1),l=k(a,1)[0];if(l){var c=s.formats(),u=this.quill.getFormat(t.index,1);n=v.default.attributes.diff(c,u)||{},o=l.length()}}this.quill.deleteText(t.index,i,b.default.sources.USER),0<Object.keys(n).length&&this.quill.formatLine(t.index+o-1,i,n,b.default.sources.USER)}}function l(t){var e=this.quill.getLines(t),i={};if(1<e.length){var n=e[0].formats(),o=e[e.length-1].formats();i=v.default.attributes.diff(o,n)||{}}this.quill.deleteText(t,b.default.sources.USER),0<Object.keys(i).length&&this.quill.formatLine(t.index,1,i,b.default.sources.USER),this.quill.setSelection(t.index,b.default.sources.SILENT),this.quill.focus()}function c(t,i){var e=this;0<t.length&&this.quill.scroll.deleteAt(t.index,t.length);var n=Object.keys(i.format).reduce(function(t,e){return C.default.query(e,C.default.Scope.BLOCK)&&!Array.isArray(i.format[e])&&(t[e]=i.format[e]),t},{});this.quill.insertText(t.index,"\n",n,b.default.sources.USER),this.quill.setSelection(t.index+1,b.default.sources.SILENT),this.quill.focus(),Object.keys(i.format).forEach(function(t){null==n[t]&&(Array.isArray(i.format[t])||"link"!==t&&e.quill.format(t,i.format[t],b.default.sources.USER))})}function u(d){return{key:E.keys.TAB,shiftKey:!d,format:{"code-block":!0},handler:function(t){var i=C.default.query("code-block"),n=t.index,o=t.length,e=this.quill.scroll.descendant(i,n),r=k(e,2),s=r[0],a=r[1];if(null!=s){var l=this.quill.getIndex(s),c=s.newlineIndex(a,!0)+1,u=s.newlineIndex(l+a+o),h=s.domNode.textContent.slice(c,u).split("\n");a=0,h.forEach(function(t,e){d?(s.insertAt(c+a,i.TAB),a+=i.TAB.length,0===e?n+=i.TAB.length:o+=i.TAB.length):t.startsWith(i.TAB)&&(s.deleteAt(c+a,i.TAB.length),a-=i.TAB.length,0===e?n-=i.TAB.length:o-=i.TAB.length),a+=t.length+1}),this.quill.update(b.default.sources.USER),this.quill.setSelection(n,o,b.default.sources.SILENT)}}}}function h(i){return{key:i[0].toUpperCase(),shortKey:!0,handler:function(t,e){this.quill.format(i,!e.format[i],b.default.sources.USER)}}}function d(t){if("string"==typeof t||"number"==typeof t)return d({key:t});if("object"===(void 0===t?"undefined":w(t))&&(t=(0,p.default)(t,!1)),"string"==typeof t.key)if(null!=E.keys[t.key.toUpperCase()])t.key=E.keys[t.key.toUpperCase()];else{if(1!==t.key.length)return null;t.key=t.key.toUpperCase().charCodeAt(0)}return t.shortKey&&(t[O]=t.shortKey,delete t.shortKey),t}Object.defineProperty(e,"__esModule",{value:!0}),e.SHORTKEY=e.default=void 0;var w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},k=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],n=!0,o=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(i.push(s.value),!e||i.length!==e);n=!0);}catch(t){o=!0,r=t}finally{try{!n&&a.return&&a.return()}finally{if(o)throw r}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},f=function(){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}(),p=n(i(21)),x=n(i(12)),m=n(i(2)),g=n(i(4)),v=n(i(20)),C=n(i(0)),y=n(i(24)),b=n(i(6)),_=n(i(10)),D=n(i(7)),T=(0,_.default)("quill:keyboard"),O=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",E=function(t){function _(e,t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,_);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(_.__proto__||Object.getPrototypeOf(_)).call(this,e,t));return i.bindings={},Object.keys(i.options.bindings).forEach(function(t){("list autofill"!==t||null==e.scroll.whitelist||e.scroll.whitelist.list)&&i.options.bindings[t]&&i.addBinding(i.options.bindings[t])}),i.addBinding({key:_.keys.ENTER,shiftKey:null},c),i.addBinding({key:_.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(i.addBinding({key:_.keys.BACKSPACE},{collapsed:!0},s),i.addBinding({key:_.keys.DELETE},{collapsed:!0},a)):(i.addBinding({key:_.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},s),i.addBinding({key:_.keys.DELETE},{collapsed:!0,suffix:/^.?$/},a)),i.addBinding({key:_.keys.BACKSPACE},{collapsed:!1},l),i.addBinding({key:_.keys.DELETE},{collapsed:!1},l),i.addBinding({key:_.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},s),i.listen(),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(_,D.default),f(_,null,[{key:"match",value:function(e,i){return i=d(i),!["altKey","ctrlKey","metaKey","shiftKey"].some(function(t){return!!i[t]!==e[t]&&null!==i[t]})&&i.key===(e.which||e.keyCode)}}]),f(_,[{key:"addBinding",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},n=d(t);if(null==n||null==n.key)return T.warn("Attempted to add invalid keyboard binding",n);"function"==typeof e&&(e={handler:e}),"function"==typeof i&&(i={handler:i}),n=(0,m.default)(n,e,i),this.bindings[n.key]=this.bindings[n.key]||[],this.bindings[n.key].push(n)}},{key:"listen",value:function(){var b=this;this.quill.root.addEventListener("keydown",function(e){if(!e.defaultPrevented){var t=e.which||e.keyCode,i=(b.bindings[t]||[]).filter(function(t){return _.match(e,t)});if(0!==i.length){var n=b.quill.getSelection();if(null!=n&&b.quill.hasFocus()){var o=b.quill.getLine(n.index),r=k(o,2),s=r[0],a=r[1],l=b.quill.getLeaf(n.index),c=k(l,2),u=c[0],h=c[1],d=0===n.length?[u,h]:b.quill.getLeaf(n.index+n.length),f=k(d,2),p=f[0],m=f[1],g=u instanceof C.default.Text?u.value().slice(0,h):"",v=p instanceof C.default.Text?p.value().slice(m):"",y={collapsed:0===n.length,empty:0===n.length&&s.length()<=1,format:b.quill.getFormat(n),offset:a,prefix:g,suffix:v};i.some(function(e){if(null!=e.collapsed&&e.collapsed!==y.collapsed)return!1;if(null!=e.empty&&e.empty!==y.empty)return!1;if(null!=e.offset&&e.offset!==y.offset)return!1;if(Array.isArray(e.format)){if(e.format.every(function(t){return null==y.format[t]}))return!1}else if("object"===w(e.format)&&!Object.keys(e.format).every(function(t){return!0===e.format[t]?null!=y.format[t]:!1===e.format[t]?null==y.format[t]:(0,x.default)(e.format[t],y.format[t])}))return!1;return!(null!=e.prefix&&!e.prefix.test(y.prefix)||null!=e.suffix&&!e.suffix.test(y.suffix)||!0===e.handler.call(b,n,y))})&&e.preventDefault()}}}})}}]),_}();E.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},E.DEFAULTS={bindings:{bold:h("bold"),italic:h("italic"),underline:h("underline"),indent:{key:E.keys.TAB,format:["blockquote","indent","list"],handler:function(t,e){if(e.collapsed&&0!==e.offset)return!0;this.quill.format("indent","+1",b.default.sources.USER)}},outdent:{key:E.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(t,e){if(e.collapsed&&0!==e.offset)return!0;this.quill.format("indent","-1",b.default.sources.USER)}},"outdent backspace":{key:E.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(t,e){null!=e.format.indent?this.quill.format("indent","-1",b.default.sources.USER):null!=e.format.list&&this.quill.format("list",!1,b.default.sources.USER)}},"indent code-block":u(!0),"outdent code-block":u(!1),"remove tab":{key:E.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(t){this.quill.deleteText(t.index-1,1,b.default.sources.USER)}},tab:{key:E.keys.TAB,handler:function(t){this.quill.history.cutoff();var e=(new g.default).retain(t.index).delete(t.length).insert("\t");this.quill.updateContents(e,b.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(t.index+1,b.default.sources.SILENT)}},"list empty enter":{key:E.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(t,e){this.quill.format("list",!1,b.default.sources.USER),e.format.indent&&this.quill.format("indent",!1,b.default.sources.USER)}},"checklist enter":{key:E.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(t){var e=this.quill.getLine(t.index),i=k(e,2),n=i[0],o=i[1],r=(new g.default).retain(t.index).insert("\n",{list:"checked"}).retain(n.length()-o-1).retain(1,{list:"unchecked"});this.quill.updateContents(r,b.default.sources.USER),this.quill.setSelection(t.index+1,b.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:E.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(t,e){var i=this.quill.getLine(t.index),n=k(i,2),o=n[0],r=n[1],s=(new g.default).retain(t.index).insert("\n",e.format).retain(o.length()-r-1).retain(1,{header:null});this.quill.updateContents(s,b.default.sources.USER),this.quill.setSelection(t.index+1,b.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\[ ?\]|\[x\])$/,handler:function(t,e){var i=e.prefix.length,n=this.quill.getLine(t.index),o=k(n,2),r=o[0],s=o[1];if(i<s)return!0;var a=void 0;switch(e.prefix.trim()){case"[]":case"[ ]":a="unchecked";break;case"[x]":a="checked";break;case"-":a="bullet";break;default:a="ordered"}this.quill.insertText(t.index," ",b.default.sources.USER),this.quill.history.cutoff();var l=(new g.default).retain(t.index-s).delete(i+1).retain(r.length()-2-s).retain(1,{list:a});this.quill.updateContents(l,b.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(t.index-i,b.default.sources.SILENT)}},"code exit":{key:E.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(t){var e=this.quill.getLine(t.index),i=k(e,2),n=i[0],o=i[1],r=(new g.default).retain(t.index+n.length()-o-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(r,b.default.sources.USER)}},"embed left":o(E.keys.LEFT,!1),"embed left shift":o(E.keys.LEFT,!0),"embed right":o(E.keys.RIGHT,!1),"embed right shift":o(E.keys.RIGHT,!0)}},e.default=E,e.SHORTKEY=O},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n,o=function(){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}(),r=function t(e,i,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0},s=i(5),a=(n=s)&&n.__esModule?n:{default:n},l=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),o(e,[{key:"optimize",value:function(t){r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"optimize",this).call(this,t),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return r(e.__proto__||Object.getPrototypeOf(e),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),e}();l.blotName="bold",l.tagName=["STRONG","B"],e.default=l},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n,r=function(){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}(),s=function t(e,i,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0},o=i(16),a=(n=o)&&n.__esModule?n:{default:n},l=function(t){function o(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,t));return i.label.innerHTML=e,i.container.classList.add("ql-color-picker"),[].slice.call(i.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(t){t.classList.add("ql-primary")}),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(o,a.default),r(o,[{key:"buildItem",value:function(t){var e=s(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"buildItem",this).call(this,t);return e.style.backgroundColor=t.getAttribute("value")||"",e}},{key:"selectItem",value:function(t,e){s(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"selectItem",this).call(this,t,e);var i=this.label.querySelector(".ql-color-label"),n=t&&t.getAttribute("data-value")||"";i&&("line"===i.tagName?i.style.stroke=n:i.style.fill=n)}}]),o}();e.default=l},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n,o=function(){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}(),r=i(16),s=(n=r)&&n.__esModule?n:{default:n},a=function(t){function n(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t));return i.container.classList.add("ql-icon-picker"),[].forEach.call(i.container.querySelectorAll(".ql-picker-item"),function(t){t.innerHTML=e[t.getAttribute("data-value")||""]}),i.defaultItem=i.container.querySelector(".ql-selected"),i.selectItem(i.defaultItem),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,s.default),o(n,[{key:"selectItem",value:function(t,e){(function t(e,i,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0})(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"selectItem",this).call(this,t,e),t=t||this.defaultItem,this.label.innerHTML=t.innerHTML}}]),n}();e.default=a},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}(),n=function(){function n(t,e){var i=this;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,n),this.quill=t,this.boundsContainer=e||document.body,this.root=t.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){i.root.style.marginTop=-1*i.quill.root.scrollTop+"px"}),this.hide()}return o(n,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(t){var e=t.left+t.width/2-this.root.offsetWidth/2,i=t.bottom+this.quill.root.scrollTop;this.root.style.left=e+"px",this.root.style.top=i+"px",this.root.classList.remove("ql-flip");var n=this.boundsContainer.getBoundingClientRect(),o=this.root.getBoundingClientRect(),r=0;if(o.right>n.right&&(r=n.right-o.right,this.root.style.left=e+r+"px"),o.left<n.left&&(r=n.left-o.left,this.root.style.left=e+r+"px"),o.bottom>n.bottom){var s=o.bottom-o.top,a=t.bottom-t.top+s;this.root.style.top=i-a+"px",this.root.classList.add("ql-flip")}return r}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),n}();e.default=n},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function l(i,t){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];t.forEach(function(t){var e=document.createElement("option");t===n?e.setAttribute("selected","selected"):e.setAttribute("value",t),i.appendChild(e)})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.BaseTooltip=void 0;var c=function(){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}(),o=n(i(2)),u=n(i(4)),h=n(i(9)),d=n(i(38)),f=n(i(32)),p=n(i(41)),m=n(i(42)),g=n(i(16)),v=n(i(43)),y=[!1,"center","right","justify"],b=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],_=[!1,"serif","monospace"],w=["1","2","3",!1],k=["small",!1,"large","huge"],x=function(t){function o(i,t){r(this,o);var n=s(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,i,t));return i.emitter.listenDOM("click",document.body,function t(e){if(!document.body.contains(i.root))return document.body.removeEventListener("click",t);null==n.tooltip||n.tooltip.root.contains(e.target)||document.activeElement===n.tooltip.textbox||n.quill.hasFocus()||n.tooltip.hide(),null!=n.pickers&&n.pickers.forEach(function(t){t.container.contains(e.target)||t.close()})}),n}return a(o,f.default),c(o,[{key:"addModule",value:function(t){var e=function t(e,i,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0}(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"addModule",this).call(this,t);return"toolbar"===t&&this.extendToolbar(e),e}},{key:"buildButtons",value:function(t,n){t.forEach(function(i){(i.getAttribute("class")||"").split(/\s+/).forEach(function(t){if(t.startsWith("ql-")&&(t=t.slice("ql-".length),null!=n[t]))if("direction"===t)i.innerHTML=n[t][""]+n[t].rtl;else if("string"==typeof n[t])i.innerHTML=n[t];else{var e=i.value||"";null!=e&&n[t][e]&&(i.innerHTML=n[t][e])}})})}},{key:"buildPickers",value:function(t,i){var e=this;this.pickers=t.map(function(t){if(t.classList.contains("ql-align"))return null==t.querySelector("option")&&l(t,y),new m.default(t,i.align);if(t.classList.contains("ql-background")||t.classList.contains("ql-color")){var e=t.classList.contains("ql-background")?"background":"color";return null==t.querySelector("option")&&l(t,b,"background"===e?"#ffffff":"#000000"),new p.default(t,i[e])}return null==t.querySelector("option")&&(t.classList.contains("ql-font")?l(t,_):t.classList.contains("ql-header")?l(t,w):t.classList.contains("ql-size")&&l(t,k)),new g.default(t)});this.quill.on(h.default.events.EDITOR_CHANGE,function(){e.pickers.forEach(function(t){t.update()})})}}]),o}();x.DEFAULTS=(0,o.default)(!0,{},f.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var i=this,n=this.container.querySelector("input.ql-image[type=file]");null==n&&((n=document.createElement("input")).setAttribute("type","file"),n.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),n.classList.add("ql-image"),n.addEventListener("change",function(){if(null!=n.files&&null!=n.files[0]){var t=new FileReader;t.onload=function(t){var e=i.quill.getSelection(!0);i.quill.updateContents((new u.default).retain(e.index).delete(e.length).insert({image:t.target.result}),h.default.sources.USER),i.quill.setSelection(e.index+1,h.default.sources.SILENT),n.value=""},t.readAsDataURL(n.files[0])}}),this.container.appendChild(n)),n.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var C=function(t){function n(t,e){r(this,n);var i=s(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t,e));return i.textbox=i.root.querySelector('input[type="text"]'),i.listen(),i}return a(n,v.default),c(n,[{key:"listen",value:function(){var e=this;this.textbox.addEventListener("keydown",function(t){d.default.match(t,"enter")?(e.save(),t.preventDefault()):d.default.match(t,"escape")&&(e.cancel(),t.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"link",e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),null!=e?this.textbox.value=e:t!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+t)||""),this.root.setAttribute("data-mode",t)}},{key:"restoreFocus",value:function(){var t=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=t}},{key:"save",value:function(){var t,e,i=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":var n=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",i,h.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",i,h.default.sources.USER)),this.quill.root.scrollTop=n;break;case"video":i=(e=(t=i).match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||t.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/))?(e[1]||"https")+"://www.youtube.com/embed/"+e[2]+"?showinfo=0":(e=t.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(e[1]||"https")+"://player.vimeo.com/video/"+e[2]+"/":t;case"formula":if(!i)break;var o=this.quill.getSelection(!0);if(null!=o){var r=o.index+o.length;this.quill.insertEmbed(r,this.root.getAttribute("data-mode"),i,h.default.sources.USER),"formula"===this.root.getAttribute("data-mode")&&this.quill.insertText(r+1," ",h.default.sources.USER),this.quill.setSelection(r+2,h.default.sources.USER)}}this.textbox.value="",this.hide()}}]),n}();e.BaseTooltip=C,e.default=x},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(46)),r=i(33),s=i(35),a=i(62),l=n(i(63)),c=n(i(64)),u=i(65),h=n(u),d=i(34),f=i(25),p=i(36),m=i(37),g=n(i(39)),v=n(i(66)),y=n(i(15)),b=n(i(67)),_=n(i(68)),w=n(i(69)),k=n(i(70)),x=n(i(71)),C=i(13),D=n(C),T=n(i(72)),O=n(i(73)),E=n(i(74)),S=n(i(26)),M=n(i(16)),I=n(i(41)),A=n(i(42)),P=n(i(43)),N=n(i(107)),j=n(i(108));o.default.register({"attributors/attribute/direction":s.DirectionAttribute,"attributors/class/align":r.AlignClass,"attributors/class/background":d.BackgroundClass,"attributors/class/color":f.ColorClass,"attributors/class/direction":s.DirectionClass,"attributors/class/font":p.FontClass,"attributors/class/size":m.SizeClass,"attributors/style/align":r.AlignStyle,"attributors/style/background":d.BackgroundStyle,"attributors/style/color":f.ColorStyle,"attributors/style/direction":s.DirectionStyle,"attributors/style/font":p.FontStyle,"attributors/style/size":m.SizeStyle},!0),o.default.register({"formats/align":r.AlignClass,"formats/direction":s.DirectionClass,"formats/indent":a.IndentClass,"formats/background":d.BackgroundStyle,"formats/color":f.ColorStyle,"formats/font":p.FontClass,"formats/size":m.SizeClass,"formats/blockquote":l.default,"formats/code-block":D.default,"formats/header":c.default,"formats/list":h.default,"formats/bold":g.default,"formats/code":C.Code,"formats/italic":v.default,"formats/link":y.default,"formats/script":b.default,"formats/strike":_.default,"formats/underline":w.default,"formats/image":k.default,"formats/video":x.default,"formats/list/item":u.ListItem,"modules/formula":T.default,"modules/syntax":O.default,"modules/toolbar":E.default,"themes/bubble":N.default,"themes/snow":j.default,"ui/icons":S.default,"ui/picker":M.default,"ui/icon-picker":A.default,"ui/color-picker":I.default,"ui/tooltip":P.default},!0),e.default=o.default},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(0)),r=n(i(6)),s=i(3),a=n(s),l=n(i(14)),c=n(i(23)),u=n(i(31)),h=n(i(24)),d=n(i(5)),f=n(i(59)),p=n(i(8)),m=n(i(60)),g=n(i(61)),v=n(i(38));r.default.register({"blots/block":a.default,"blots/block/embed":s.BlockEmbed,"blots/break":l.default,"blots/container":c.default,"blots/cursor":u.default,"blots/embed":h.default,"blots/inline":d.default,"blots/scroll":f.default,"blots/text":p.default,"modules/clipboard":m.default,"modules/history":g.default,"modules/keyboard":v.default}),o.default.register(a.default,l.default,u.default,d.default,f.default,p.default),e.default=r.default},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){this.head=this.tail=void 0,this.length=0}return t.prototype.append=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.insertBefore(t[0],void 0),1<t.length&&this.append.apply(this,t.slice(1))},t.prototype.contains=function(t){for(var e,i=this.iterator();e=i();)if(e===t)return!0;return!1},t.prototype.insertBefore=function(t,e){null!=(t.next=e)?(t.prev=e.prev,null!=e.prev&&(e.prev.next=t),e.prev=t,e===this.head&&(this.head=t)):null!=this.tail?((this.tail.next=t).prev=this.tail,this.tail=t):(t.prev=void 0,this.head=this.tail=t),this.length+=1},t.prototype.offset=function(t){for(var e=0,i=this.head;null!=i;){if(i===t)return e;e+=i.length(),i=i.next}return-1},t.prototype.remove=function(t){this.contains(t)&&(null!=t.prev&&(t.prev.next=t.next),null!=t.next&&(t.next.prev=t.prev),t===this.head&&(this.head=t.next),t===this.tail&&(this.tail=t.prev),this.length-=1)},t.prototype.iterator=function(e){return void 0===e&&(e=this.head),function(){var t=e;return null!=e&&(e=e.next),t}},t.prototype.find=function(t,e){void 0===e&&(e=!1);for(var i,n=this.iterator();i=n();){var o=i.length();if(t<o||e&&t===o&&(null==i.next||0!==i.next.length()))return[i,t];t-=o}return[null,0]},t.prototype.forEach=function(t){for(var e,i=this.iterator();e=i();)t(e)},t.prototype.forEachAt=function(t,e,i){if(!(e<=0))for(var n,o=this.find(t),r=o[0],s=t-o[1],a=this.iterator(r);(n=a())&&s<t+e;){var l=n.length();s<t?i(n,t-s,Math.min(e,s+l-t)):i(n,0,Math.min(l,t+e-s)),s+=l}},t.prototype.map=function(i){return this.reduce(function(t,e){return t.push(i(e)),t},[])},t.prototype.reduce=function(t,e){for(var i,n=this.iterator();i=n();)e=t(e,i);return e},t}();e.default=n},function(t,e,i){var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var c=i(17),u=i(1),r={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},s=function(l){function t(t){var e=l.call(this,t)||this;return e.parent=null,e.observer=new MutationObserver(function(t){e.update(t)}),e.observer.observe(e.domNode,r),e.scroll=e}return o(t,l),t.prototype.detach=function(){l.prototype.detach.call(this),this.observer.disconnect()},t.prototype.deleteAt=function(t,e){this.update(),0===t&&e===this.length()?this.children.forEach(function(t){t.remove()}):l.prototype.deleteAt.call(this,t,e)},t.prototype.formatAt=function(t,e,i,n){this.update(),l.prototype.formatAt.call(this,t,e,i,n)},t.prototype.insertAt=function(t,e,i){this.update(),l.prototype.insertAt.call(this,t,e,i)},t.prototype.optimize=function(t,e){var i=this;void 0===t&&(t=[]),void 0===e&&(e={}),l.prototype.optimize.call(this,e);for(var n=[].slice.call(this.observer.takeRecords());0<n.length;)t.push(n.pop());for(var o=function(t,e){void 0===e&&(e=!0),null!=t&&t!==i&&null!=t.domNode.parentNode&&(null==t.domNode[u.DATA_KEY].mutations&&(t.domNode[u.DATA_KEY].mutations=[]),e&&o(t.parent))},r=function(t){null!=t.domNode[u.DATA_KEY]&&null!=t.domNode[u.DATA_KEY].mutations&&(t instanceof c.default&&t.children.forEach(r),t.optimize(e))},s=t,a=0;0<s.length;a+=1){if(100<=a)throw new Error("[Parchment] Maximum optimize iterations reached");for(s.forEach(function(t){var e=u.find(t.target,!0);null!=e&&(e.domNode===t.target&&("childList"===t.type?(o(u.find(t.previousSibling,!1)),[].forEach.call(t.addedNodes,function(t){var e=u.find(t,!1);o(e,!1),e instanceof c.default&&e.children.forEach(function(t){o(t,!1)})})):"attributes"===t.type&&o(e.prev)),o(e))}),this.children.forEach(r),n=(s=[].slice.call(this.observer.takeRecords())).slice();0<n.length;)t.push(n.pop())}},t.prototype.update=function(t,e){var i=this;void 0===e&&(e={}),(t=t||this.observer.takeRecords()).map(function(t){var e=u.find(t.target,!0);if(null!=e)return null==e.domNode[u.DATA_KEY].mutations?(e.domNode[u.DATA_KEY].mutations=[t],e):(e.domNode[u.DATA_KEY].mutations.push(t),null)}).forEach(function(t){null!=t&&t!==i&&null!=t.domNode[u.DATA_KEY]&&t.update(t.domNode[u.DATA_KEY].mutations||[],e)}),null!=this.domNode[u.DATA_KEY].mutations&&l.prototype.update.call(this,this.domNode[u.DATA_KEY].mutations,e),this.optimize(t,e)},t.blotName="scroll",t.defaultChild="block",t.scope=u.Scope.BLOCK_BLOT,t.tagName="DIV",t}(c.default);e.default=s},function(t,e,i){var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var s=i(18),a=i(1),o=function(o){function n(){return null!==o&&o.apply(this,arguments)||this}return r(n,o),n.formats=function(t){if(t.tagName!==n.tagName)return o.formats.call(this,t)},n.prototype.format=function(t,e){var i=this;t!==this.statics.blotName||e?o.prototype.format.call(this,t,e):(this.children.forEach(function(t){t instanceof s.default||(t=t.wrap(n.blotName,!0)),i.attributes.copy(t)}),this.unwrap())},n.prototype.formatAt=function(t,e,i,n){null!=this.formats()[i]||a.query(i,a.Scope.ATTRIBUTE)?this.isolate(t,e).format(i,n):o.prototype.formatAt.call(this,t,e,i,n)},n.prototype.optimize=function(t){o.prototype.optimize.call(this,t);var e=this.formats();if(0===Object.keys(e).length)return this.unwrap();var i=this.next;i instanceof n&&i.prev===this&&function(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var i in t)if(t[i]!==e[i])return!1;return!0}(e,i.formats())&&(i.moveChildren(this),i.remove())},n.blotName="inline",n.scope=a.Scope.INLINE_BLOT,n.tagName="SPAN",n}(s.default);e.default=o},function(t,e,i){var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r=i(18),s=i(1),a=function(r){function i(){return null!==r&&r.apply(this,arguments)||this}return o(i,r),i.formats=function(t){var e=s.query(i.blotName).tagName;if(t.tagName!==e)return r.formats.call(this,t)},i.prototype.format=function(t,e){null!=s.query(t,s.Scope.BLOCK)&&(t!==this.statics.blotName||e?r.prototype.format.call(this,t,e):this.replaceWith(i.blotName))},i.prototype.formatAt=function(t,e,i,n){null!=s.query(i,s.Scope.BLOCK)?this.format(i,n):r.prototype.formatAt.call(this,t,e,i,n)},i.prototype.insertAt=function(t,e,i){if(null==i||null!=s.query(e,s.Scope.INLINE))r.prototype.insertAt.call(this,t,e,i);else{var n=this.split(t),o=s.create(e,i);n.parent.insertBefore(o,n)}},i.prototype.update=function(t,e){navigator.userAgent.match(/Trident/)?this.attach():r.prototype.update.call(this,t,e)},i.blotName="block",i.scope=s.Scope.BLOCK_BLOT,i.tagName="P",i}(r.default);e.default=a},function(t,e,i){var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return r(t,o),t.formats=function(t){},t.prototype.format=function(t,e){o.prototype.formatAt.call(this,0,this.length(),t,e)},t.prototype.formatAt=function(t,e,i,n){0===t&&e===this.length()?this.format(i,n):o.prototype.formatAt.call(this,t,e,i,n)},t.prototype.formats=function(){return this.statics.formats(this.domNode)},t}(i(19).default);e.default=o},function(t,e,i){var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r=i(19),s=i(1),a=function(n){function e(t){var e=n.call(this,t)||this;return e.text=e.statics.value(e.domNode),e}return o(e,n),e.create=function(t){return document.createTextNode(t)},e.value=function(t){var e=t.data;return e.normalize&&(e=e.normalize()),e},e.prototype.deleteAt=function(t,e){this.domNode.data=this.text=this.text.slice(0,t)+this.text.slice(t+e)},e.prototype.index=function(t,e){return this.domNode===t?e:-1},e.prototype.insertAt=function(t,e,i){null==i?(this.text=this.text.slice(0,t)+e+this.text.slice(t),this.domNode.data=this.text):n.prototype.insertAt.call(this,t,e,i)},e.prototype.length=function(){return this.text.length},e.prototype.optimize=function(t){n.prototype.optimize.call(this,t),this.text=this.statics.value(this.domNode),0===this.text.length?this.remove():this.next instanceof e&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},e.prototype.position=function(t,e){return void 0===e&&(e=!1),[this.domNode,t]},e.prototype.split=function(t,e){if(void 0===e&&(e=!1),!e){if(0===t)return this;if(t===this.length())return this.next}var i=s.create(this.domNode.splitText(t));return this.parent.insertBefore(i,this.next),this.text=this.statics.value(this.domNode),i},e.prototype.update=function(t,e){var i=this;t.some(function(t){return"characterData"===t.type&&t.target===i.domNode})&&(this.text=this.statics.value(this.domNode))},e.prototype.value=function(){return this.text},e.blotName="text",e.scope=s.Scope.INLINE_BLOT,e}(r.default);e.default=a},function(t,e,i){var n=document.createElement("div");if(n.classList.toggle("test-class",!1),n.classList.contains("test-class")){var o=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(t,e){return 1<arguments.length&&!this.contains(t)==!e?e:o.call(this,t)}}String.prototype.startsWith||(String.prototype.startsWith=function(t,e){return e=e||0,this.substr(e,t.length)===t}),String.prototype.endsWith||(String.prototype.endsWith=function(t,e){var i=this.toString();("number"!=typeof e||!isFinite(e)||Math.floor(e)!==e||e>i.length)&&(e=i.length),e-=t.length;var n=i.indexOf(t,e);return-1!==n&&n===e}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(t){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var e,i=Object(this),n=i.length>>>0,o=arguments[1],r=0;r<n;r++)if(e=i[r],t.call(o,e,r,i))return e}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(t,e){function p(t,e,i){if(t==e)return t?[[v,t]]:[];(i<0||t.length<i)&&(i=null);var n=m(t,e),o=t.substring(0,n);n=g(t=t.substring(n),e=e.substring(n));var r=t.substring(t.length-n),s=function(t,e){var i;if(!t)return[[O,e]];if(!e)return[[T,t]];var n=t.length>e.length?t:e,o=t.length>e.length?e:t,r=n.indexOf(o);if(-1!=r)return i=[[O,n.substring(0,r)],[v,o],[O,n.substring(r+o.length)]],t.length>e.length&&(i[0][0]=i[2][0]=T),i;if(1==o.length)return[[T,t],[O,e]];var s=function(t,e){function i(t,e,i){for(var n,o,r,s,a=t.substring(i,i+Math.floor(t.length/4)),l=-1,c="";-1!=(l=e.indexOf(a,l+1));){var u=m(t.substring(i),e.substring(l)),h=g(t.substring(0,i),e.substring(0,l));c.length<h+u&&(c=e.substring(l-h,l)+e.substring(l,l+u),n=t.substring(0,i-h),o=t.substring(i+u),r=e.substring(0,l-h),s=e.substring(l+u))}return 2*c.length>=t.length?[n,o,r,s,c]:null}var n=t.length>e.length?t:e,o=t.length>e.length?e:t;if(n.length<4||2*o.length<n.length)return null;var r,s,a,l,c,u=i(n,o,Math.ceil(n.length/4)),h=i(n,o,Math.ceil(n.length/2));return u||h?(r=h?u&&u[4].length>h[4].length?u:h:u,t.length>e.length?(s=r[0],a=r[1],l=r[2],c=r[3]):(l=r[0],c=r[1],s=r[2],a=r[3]),[s,a,l,c,r[4]]):null}(t,e);if(s){var a=s[0],l=s[1],c=s[2],u=s[3],h=s[4],d=p(a,c),f=p(l,u);return d.concat([[v,h]],f)}return function(t,e){for(var i=t.length,n=e.length,o=Math.ceil((i+n)/2),r=o,s=2*o,a=new Array(s),l=new Array(s),c=0;c<s;c++)a[c]=-1,l[c]=-1;a[r+1]=0,l[r+1]=0;for(var u=i-n,h=u%2!=0,d=0,f=0,p=0,m=0,g=0;g<o;g++){for(var v=-g+d;v<=g-f;v+=2){for(var y=r+v,b=(C=v==-g||v!=g&&a[y-1]<a[y+1]?a[y+1]:a[y-1]+1)-v;C<i&&b<n&&t.charAt(C)==e.charAt(b);)C++,b++;if(a[y]=C,i<C)f+=2;else if(n<b)d+=2;else if(h){var _=r+u-v;if(0<=_&&_<s&&-1!=l[_]){var w=i-l[_];if(w<=C)return D(t,e,C,b)}}}for(var k=-g+p;k<=g-m;k+=2){for(var _=r+k,x=(w=k==-g||k!=g&&l[_-1]<l[_+1]?l[_+1]:l[_-1]+1)-k;w<i&&x<n&&t.charAt(i-w-1)==e.charAt(n-x-1);)w++,x++;if(l[_]=w,i<w)m+=2;else if(n<x)p+=2;else if(!h){var y=r+u-k;if(0<=y&&y<s&&-1!=a[y]){var C=a[y],b=r+C-y;if((w=i-w)<=C)return D(t,e,C,b)}}}}return[[T,t],[O,e]]}(t,e)}(t=t.substring(0,t.length-n),e=e.substring(0,e.length-n));return o&&s.unshift([v,o]),r&&s.push([v,r]),function t(e){e.push([v,""]);for(var i,n=0,o=0,r=0,s="",a="";n<e.length;)switch(e[n][0]){case O:r++,a+=e[n][1],n++;break;case T:o++,s+=e[n][1],n++;break;case v:1<o+r?(0!==o&&0!==r&&(0!==(i=m(a,s))&&(0<n-o-r&&e[n-o-r-1][0]==v?e[n-o-r-1][1]+=a.substring(0,i):(e.splice(0,0,[v,a.substring(0,i)]),n++),a=a.substring(i),s=s.substring(i)),0!==(i=g(a,s))&&(e[n][1]=a.substring(a.length-i)+e[n][1],a=a.substring(0,a.length-i),s=s.substring(0,s.length-i))),0===o?e.splice(n-r,o+r,[O,a]):0===r?e.splice(n-o,o+r,[T,s]):e.splice(n-o-r,o+r,[T,s],[O,a]),n=n-o-r+(o?1:0)+(r?1:0)+1):0!==n&&e[n-1][0]==v?(e[n-1][1]+=e[n][1],e.splice(n,1)):n++,o=r=0,a=s=""}""===e[e.length-1][1]&&e.pop();var l=!1;for(n=1;n<e.length-1;)e[n-1][0]==v&&e[n+1][0]==v&&(e[n][1].substring(e[n][1].length-e[n-1][1].length)==e[n-1][1]?(e[n][1]=e[n-1][1]+e[n][1].substring(0,e[n][1].length-e[n-1][1].length),e[n+1][1]=e[n-1][1]+e[n+1][1],e.splice(n-1,1),l=!0):e[n][1].substring(0,e[n+1][1].length)==e[n+1][1]&&(e[n-1][1]+=e[n+1][1],e[n][1]=e[n][1].substring(e[n+1][1].length)+e[n+1][1],e.splice(n+1,1),l=!0)),n++;l&&t(e)}(s),null!=i&&(s=function(t,e){var i=function(t,e){if(0===e)return[v,t];for(var i=0,n=0;n<t.length;n++){var o=t[n];if(o[0]===T||o[0]===v){var r=i+o[1].length;if(e===r)return[n+1,t];if(e<r){t=t.slice();var s=e-i,a=[o[0],o[1].slice(0,s)],l=[o[0],o[1].slice(s)];return t.splice(n,1,a,l),[n+1,t]}i=r}}throw new Error("cursor_pos is out of bounds!")}(t,e),n=i[1],o=i[0],r=n[o],s=n[o+1];if(null==r)return t;if(r[0]!==v)return t;if(null!=s&&r[1]+s[1]===s[1]+r[1])return n.splice(o,2,s,r),l(n,o,2);if(null==s||0!==s[1].indexOf(r[1]))return t;n.splice(o,2,[s[0],r[1]],[0,r[1]]);var a=s[1].slice(r[1].length);return 0<a.length&&n.splice(o+2,0,[s[0],a]),l(n,o,3)}(s,i)),function(t){for(var e=!1,i=function(t){return 56320<=t.charCodeAt(0)&&t.charCodeAt(0)<=57343},n=2;n<t.length;n+=1)t[n-2][0]===v&&(o=t[n-2][1],55296<=o.charCodeAt(o.length-1)&&o.charCodeAt(o.length-1)<=56319)&&t[n-1][0]===T&&i(t[n-1][1])&&t[n][0]===O&&i(t[n][1])&&(e=!0,t[n-1][1]=t[n-2][1].slice(-1)+t[n-1][1],t[n][1]=t[n-2][1].slice(-1)+t[n][1],t[n-2][1]=t[n-2][1].slice(0,-1));var o;if(!e)return t;for(var r=[],n=0;n<t.length;n+=1)0<t[n][1].length&&r.push(t[n]);return r}(s)}function D(t,e,i,n){var o=t.substring(0,i),r=e.substring(0,n),s=t.substring(i),a=e.substring(n),l=p(o,r),c=p(s,a);return l.concat(c)}function m(t,e){if(!t||!e||t.charAt(0)!=e.charAt(0))return 0;for(var i=0,n=Math.min(t.length,e.length),o=n,r=0;i<o;)t.substring(r,o)==e.substring(r,o)?r=i=o:n=o,o=Math.floor((n-i)/2+i);return o}function g(t,e){if(!t||!e||t.charAt(t.length-1)!=e.charAt(e.length-1))return 0;for(var i=0,n=Math.min(t.length,e.length),o=n,r=0;i<o;)t.substring(t.length-o,t.length-r)==e.substring(e.length-o,e.length-r)?r=i=o:n=o,o=Math.floor((n-i)/2+i);return o}function l(t,e,i){for(var n=e+i-1;0<=n&&e-1<=n;n--)if(n+1<t.length){var o=t[n],r=t[n+1];o[0]===r[1]&&t.splice(n,2,[o[0],o[1]+r[1]])}return t}var T=-1,O=1,v=0,i=p;i.INSERT=O,i.DELETE=T,i.EQUAL=v,t.exports=i},function(t,e){function i(t){var e=[];for(var i in t)e.push(i);return e}(t.exports="function"==typeof Object.keys?Object.keys:i).shim=i},function(t,e){function i(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function n(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Object.prototype.hasOwnProperty.call(t,"callee")&&!Object.prototype.propertyIsEnumerable.call(t,"callee")||!1}var o="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();(e=t.exports=o?i:n).supported=i,e.unsupported=n},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}function r(i,n){return Object.keys(n).reduce(function(t,e){return null==i[e]||(n[e]===i[e]?t[e]=n[e]:Array.isArray(n[e])?n[e].indexOf(i[e])<0&&(t[e]=n[e].concat([i[e]])):t[e]=[n[e],i[e]]),t},{})}Object.defineProperty(e,"__esModule",{value:!0});var g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],n=!0,o=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(i.push(s.value),!e||i.length!==e);n=!0);}catch(t){o=!0,r=t}finally{try{!n&&a.return&&a.return()}finally{if(o)throw r}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}(),h=n(i(4)),y=n(i(20)),b=n(i(0)),d=n(i(13)),u=n(i(31)),_=i(3),w=n(_),s=n(i(14)),c=n(i(21)),f=n(i(12)),k=n(i(2)),p=/^[ -~]*$/,a=function(){function e(t){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,e),this.scroll=t,this.delta=this.getDelta()}return o(e,[{key:"applyDelta",value:function(t){var f=this,p=!1;this.scroll.update();var m=this.scroll.length();return this.scroll.batchStart(),(t=t.reduce(function(t,e){if(1===e.insert){var i=(0,c.default)(e.attributes);return delete i.image,t.insert({image:e.attributes.image},i)}if(null==e.attributes||!0!==e.attributes.list&&!0!==e.attributes.bullet||((e=(0,c.default)(e)).attributes.list?e.attributes.list="ordered":(e.attributes.list="bullet",delete e.attributes.bullet)),"string"!=typeof e.insert)return t.push(e);var n=e.insert.replace(/\r\n/g,"\n").replace(/\r/g,"\n");return t.insert(n,e.attributes)},new h.default)).reduce(function(e,t){var i=t.retain||t.delete||t.insert.length||1,n=t.attributes||{};if(null!=t.insert){if("string"==typeof t.insert){var o=t.insert;o.endsWith("\n")&&p&&(p=!1,o=o.slice(0,-1)),m<=e&&!o.endsWith("\n")&&(p=!0),f.scroll.insertAt(e,o);var r=f.scroll.line(e),s=v(r,2),a=s[0],l=s[1],c=(0,k.default)({},(0,_.bubbleFormats)(a));if(a instanceof w.default){var u=a.descendant(b.default.Leaf,l),h=v(u,1)[0];c=(0,k.default)(c,(0,_.bubbleFormats)(h))}n=y.default.attributes.diff(c,n)||{}}else if("object"===g(t.insert)){var d=Object.keys(t.insert)[0];if(null==d)return e;f.scroll.insertAt(e,d,t.insert[d])}m+=i}return Object.keys(n).forEach(function(t){f.scroll.formatAt(e,i,t,n[t])}),e+i},0),t.reduce(function(t,e){return"number"==typeof e.delete?(f.scroll.deleteAt(t,e.delete),t):t+(e.retain||e.insert.length||1)},0),this.scroll.batchEnd(),this.update(t)}},{key:"deleteText",value:function(t,e){return this.scroll.deleteAt(t,e),this.update((new h.default).retain(t).delete(e))}},{key:"formatLine",value:function(s,e){var a=this,l=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return this.scroll.update(),Object.keys(l).forEach(function(o){if(null==a.scroll.whitelist||a.scroll.whitelist[o]){var t=a.scroll.lines(s,Math.max(e,1)),r=e;t.forEach(function(t){var e=t.length();if(t instanceof d.default){var i=s-t.offset(a.scroll),n=t.newlineIndex(i+r)-i+1;t.formatAt(i,n,o,l[o])}else t.format(o,l[o]);r-=e})}}),this.scroll.optimize(),this.update((new h.default).retain(s).retain(e,(0,c.default)(l)))}},{key:"formatText",value:function(e,i){var n=this,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return Object.keys(o).forEach(function(t){n.scroll.formatAt(e,i,t,o[t])}),this.update((new h.default).retain(e).retain(i,(0,c.default)(o)))}},{key:"getContents",value:function(t,e){return this.delta.slice(t,t+e)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(t,e){return t.concat(e.delta())},new h.default)}},{key:"getFormat",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,i=[],n=[];0===e?this.scroll.path(t).forEach(function(t){var e=v(t,1)[0];e instanceof w.default?i.push(e):e instanceof b.default.Leaf&&n.push(e)}):(i=this.scroll.lines(t,e),n=this.scroll.descendants(b.default.Leaf,t,e));var o=[i,n].map(function(t){if(0===t.length)return{};for(var e=(0,_.bubbleFormats)(t.shift());0<Object.keys(e).length;){var i=t.shift();if(null==i)return e;e=r((0,_.bubbleFormats)(i),e)}return e});return k.default.apply(k.default,o)}},{key:"getText",value:function(t,e){return this.getContents(t,e).filter(function(t){return"string"==typeof t.insert}).map(function(t){return t.insert}).join("")}},{key:"insertEmbed",value:function(t,e,i){return this.scroll.insertAt(t,e,i),this.update((new h.default).retain(t).insert((r=i,(o=e)in(n={})?Object.defineProperty(n,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[o]=r,n)));var n,o,r}},{key:"insertText",value:function(e,i){var n=this,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return i=i.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),this.scroll.insertAt(e,i),Object.keys(o).forEach(function(t){n.scroll.formatAt(e,i.length,t,o[t])}),this.update((new h.default).retain(e).insert(i,(0,c.default)(o)))}},{key:"isBlank",value:function(){if(0==this.scroll.children.length)return!0;if(1<this.scroll.children.length)return!1;var t=this.scroll.children.head;return t.statics.blotName===w.default.blotName&&!(1<t.children.length)&&t.children.head instanceof s.default}},{key:"removeFormat",value:function(t,e){var i=this.getText(t,e),n=this.scroll.line(t+e),o=v(n,2),r=o[0],s=o[1],a=0,l=new h.default;null!=r&&(a=r instanceof d.default?r.newlineIndex(s)-s+1:r.length()-s,l=r.delta().slice(s,s+a-1).insert("\n"));var c=this.getContents(t,e+a).diff((new h.default).insert(i).concat(l)),u=(new h.default).retain(t).concat(c);return this.applyDelta(u)}},{key:"update",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:void 0,n=this.delta;if(1===e.length&&"characterData"===e[0].type&&e[0].target.data.match(p)&&b.default.find(e[0].target)){var o=b.default.find(e[0].target),r=(0,_.bubbleFormats)(o),s=o.offset(this.scroll),a=e[0].oldValue.replace(u.default.CONTENTS,""),l=(new h.default).insert(a),c=(new h.default).insert(o.value());t=(new h.default).retain(s).concat(l.diff(c,i)).reduce(function(t,e){return e.insert?t.insert(e.insert,r):t.push(e)},new h.default),this.delta=n.compose(t)}else this.delta=this.getDelta(),t&&(0,f.default)(n.compose(t),this.delta)||(t=n.diff(this.delta,i));return t}}]),e}();e.default=a},function(t,e){function c(){}function r(t,e,i){this.fn=t,this.context=e,this.once=i||!1}function i(){this._events=new c,this._eventsCount=0}var n=Object.prototype.hasOwnProperty,f="~";Object.create&&(c.prototype=Object.create(null),(new c).__proto__||(f=!1)),i.prototype.eventNames=function(){var t,e,i=[];if(0===this._eventsCount)return i;for(e in t=this._events)n.call(t,e)&&i.push(f?e.slice(1):e);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(t)):i},i.prototype.listeners=function(t,e){var i=f?f+t:t,n=this._events[i];if(e)return!!n;if(!n)return[];if(n.fn)return[n.fn];for(var o=0,r=n.length,s=new Array(r);o<r;o++)s[o]=n[o].fn;return s},i.prototype.emit=function(t,e,i,n,o,r){var s=f?f+t:t;if(!this._events[s])return!1;var a,l,c=this._events[s],u=arguments.length;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),u){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,i),!0;case 4:return c.fn.call(c.context,e,i,n),!0;case 5:return c.fn.call(c.context,e,i,n,o),!0;case 6:return c.fn.call(c.context,e,i,n,o,r),!0}for(l=1,a=new Array(u-1);l<u;l++)a[l-1]=arguments[l];c.fn.apply(c.context,a)}else{var h,d=c.length;for(l=0;l<d;l++)switch(c[l].once&&this.removeListener(t,c[l].fn,void 0,!0),u){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,e);break;case 3:c[l].fn.call(c[l].context,e,i);break;case 4:c[l].fn.call(c[l].context,e,i,n);break;default:if(!a)for(h=1,a=new Array(u-1);h<u;h++)a[h-1]=arguments[h];c[l].fn.apply(c[l].context,a)}}return!0},i.prototype.on=function(t,e,i){var n=new r(e,i||this),o=f?f+t:t;return this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],n]:this._events[o].push(n):(this._events[o]=n,this._eventsCount++),this},i.prototype.once=function(t,e,i){var n=new r(e,i||this,!0),o=f?f+t:t;return this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],n]:this._events[o].push(n):(this._events[o]=n,this._eventsCount++),this},i.prototype.removeListener=function(t,e,i,n){var o=f?f+t:t;if(!this._events[o])return this;if(!e)return 0==--this._eventsCount?this._events=new c:delete this._events[o],this;var r=this._events[o];if(r.fn)r.fn!==e||n&&!r.once||i&&r.context!==i||(0==--this._eventsCount?this._events=new c:delete this._events[o]);else{for(var s=0,a=[],l=r.length;s<l;s++)(r[s].fn!==e||n&&!r[s].once||i&&r[s].context!==i)&&a.push(r[s]);a.length?this._events[o]=1===a.length?a[0]:a:0==--this._eventsCount?this._events=new c:delete this._events[o]}return this},i.prototype.removeAllListeners=function(t){var e;return t?(e=f?f+t:t,this._events[e]&&(0==--this._eventsCount?this._events=new c:delete this._events[e])):(this._events=new c,this._eventsCount=0),this},i.prototype.off=i.prototype.removeListener,i.prototype.addListener=i.prototype.on,i.prototype.setMaxListeners=function(){return this},i.prefixed=f,i.EventEmitter=i,void 0!==t&&(t.exports=i)},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}function s(t){return t instanceof l.default||t instanceof p.BlockEmbed}Object.defineProperty(e,"__esModule",{value:!0});var d=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],n=!0,o=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(i.push(s.value),!e||i.length!==e);n=!0);}catch(t){o=!0,r=t}finally{try{!n&&a.return&&a.return()}finally{if(o)throw r}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}(),f=function t(e,i,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0},a=n(i(0)),r=n(i(9)),p=i(3),l=n(p),m=n(i(14)),g=n(i(13)),c=n(i(23)),u=function(t){function h(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,t));return i.emitter=e.emitter,Array.isArray(e.whitelist)&&(i.whitelist=e.whitelist.reduce(function(t,e){return t[e]=!0,t},{})),i.domNode.addEventListener("DOMNodeInserted",function(){}),i.optimize(),i.enable(),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(h,a.default.Scroll),o(h,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(t,e){var i=this.line(t),n=d(i,2),o=n[0],r=n[1],s=this.line(t+e),a=d(s,1)[0];if(f(h.prototype.__proto__||Object.getPrototypeOf(h.prototype),"deleteAt",this).call(this,t,e),null!=a&&o!==a&&0<r){if(o instanceof p.BlockEmbed||a instanceof p.BlockEmbed)return void this.optimize();if(o instanceof g.default){var l=o.newlineIndex(o.length(),!0);if(-1<l&&(o=o.split(l+1))===a)return void this.optimize()}else if(a instanceof g.default){var c=a.newlineIndex(0);-1<c&&a.split(c+1)}var u=a.children.head instanceof m.default?null:a.children.head;o.moveChildren(a,u),o.remove()}this.optimize()}},{key:"enable",value:function(){var t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];this.domNode.setAttribute("contenteditable",t)}},{key:"formatAt",value:function(t,e,i,n){(null==this.whitelist||this.whitelist[i])&&(f(h.prototype.__proto__||Object.getPrototypeOf(h.prototype),"formatAt",this).call(this,t,e,i,n),this.optimize())}},{key:"insertAt",value:function(t,e,i){if(null==i||null==this.whitelist||this.whitelist[e]){if(t>=this.length())if(null==i||null==a.default.query(e,a.default.Scope.BLOCK)){var n=a.default.create(this.statics.defaultChild);this.appendChild(n),null==i&&e.endsWith("\n")&&(e=e.slice(0,-1)),n.insertAt(0,e,i)}else{var o=a.default.create(e,i);this.appendChild(o)}else f(h.prototype.__proto__||Object.getPrototypeOf(h.prototype),"insertAt",this).call(this,t,e,i);this.optimize()}}},{key:"insertBefore",value:function(t,e){if(t.statics.scope===a.default.Scope.INLINE_BLOT){var i=a.default.create(this.statics.defaultChild);i.appendChild(t),t=i}f(h.prototype.__proto__||Object.getPrototypeOf(h.prototype),"insertBefore",this).call(this,t,e)}},{key:"leaf",value:function(t){return this.path(t).pop()||[null,-1]}},{key:"line",value:function(t){return t===this.length()?this.line(t-1):this.descendant(s,t)}},{key:"lines",value:function(){return function n(t,e,i){var o=[],r=i;return t.children.forEachAt(e,i,function(t,e,i){s(t)?o.push(t):t instanceof a.default.Container&&(o=o.concat(n(t,e,r))),r-=i}),o}(this,0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,1<arguments.length&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE)}},{key:"optimize",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};!0!==this.batch&&(f(h.prototype.__proto__||Object.getPrototypeOf(h.prototype),"optimize",this).call(this,t,e),0<t.length&&this.emitter.emit(r.default.events.SCROLL_OPTIMIZE,t,e))}},{key:"path",value:function(t){return f(h.prototype.__proto__||Object.getPrototypeOf(h.prototype),"path",this).call(this,t).slice(1)}},{key:"update",value:function(t){if(!0!==this.batch){var e=r.default.sources.USER;"string"==typeof t&&(e=t),Array.isArray(t)||(t=this.observer.takeRecords()),0<t.length&&this.emitter.emit(r.default.events.SCROLL_BEFORE_UPDATE,e,t),f(h.prototype.__proto__||Object.getPrototypeOf(h.prototype),"update",this).call(this,t.concat([])),0<t.length&&this.emitter.emit(r.default.events.SCROLL_UPDATE,e,t)}}}]),h}();u.blotName="scroll",u.className="ql-editor",u.tagName="DIV",u.defaultChild="block",u.allowedChildren=[l.default,p.BlockEmbed,c.default],e.default=u},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}function l(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function s(t,i,n){return"object"===(void 0===i?"undefined":m(i))?Object.keys(i).reduce(function(t,e){return s(t,e,i[e])},t):t.reduce(function(t,e){return e.attributes&&e.attributes[i]?t.push(e):t.insert(e.insert,(0,y.default)({},l({},i,n),e.attributes))},new b.default)}function o(t){return t.nodeType!==Node.ELEMENT_NODE?{}:t["__ql-computed-style"]||(t["__ql-computed-style"]=window.getComputedStyle(t))}function c(t,e){for(var i="",n=t.ops.length-1;0<=n&&i.length<e.length;--n){var o=t.ops[n];if("string"!=typeof o.insert)break;i=o.insert+i}return i.slice(-1*e.length)===e}function r(t){return 0!==t.childNodes.length&&-1<["block","list-item"].indexOf(o(t).display)}function a(t,e,i){return s(i,t,!0)}function u(i,t){var e=_.default.Attributor.Attribute.keys(i),n=_.default.Attributor.Class.keys(i),o=_.default.Attributor.Style.keys(i),r={};return e.concat(n).concat(o).forEach(function(t){var e=_.default.query(t,_.default.Scope.ATTRIBUTE);null!=e&&(r[e.attrName]=e.value(i),r[e.attrName])||(null!=(e=N[t])&&e.attrName===t&&(r[e.attrName]=e.value(i)||void 0),null!=(e=j[t])&&e.attrName===t&&(e=j[t],r[e.attrName]=e.value(i)||void 0))}),0<Object.keys(r).length&&(t=s(t,r)),t}function h(t,e){var i=_.default.query(t);if(null==i)return e;if(i.prototype instanceof _.default.Embed){var n={},o=i.value(t);null!=o&&(n[i.blotName]=o,e=(new b.default).insert(n,i.formats(t)))}else"function"==typeof i.formats&&(e=s(e,i.blotName,i.formats(t)));return e}function d(t,e){return c(e,"\n")||(r(t)||0<e.length()&&t.nextSibling&&r(t.nextSibling))&&e.insert("\n"),e}function f(t,e){if(r(t)&&null!=t.nextElementSibling&&!c(e,"\n\n")){var i=t.offsetHeight+parseFloat(o(t).marginTop)+parseFloat(o(t).marginBottom);t.nextElementSibling.offsetTop>t.offsetTop+1.5*i&&e.insert("\n")}return e}function p(t,e){var i=t.data;if("O:P"===t.parentNode.tagName)return e.insert(i.trim());if(0===i.trim().length&&t.parentNode.classList.contains("ql-clipboard"))return e;if(!o(t.parentNode).whiteSpace.startsWith("pre")){var n=function(t,e){return(e=e.replace(/[^\u00a0]/g,"")).length<1&&t?" ":e};i=(i=i.replace(/\r\n/g," ").replace(/\n/g," ")).replace(/\s\s+/g,n.bind(n,!0)),(null==t.previousSibling&&r(t.parentNode)||null!=t.previousSibling&&r(t.previousSibling))&&(i=i.replace(/^\s+/,n.bind(n,!1))),(null==t.nextSibling&&r(t.parentNode)||null!=t.nextSibling&&r(t.nextSibling))&&(i=i.replace(/\s+$/,n.bind(n,!1)))}return e.insert(i)}Object.defineProperty(e,"__esModule",{value:!0}),e.matchText=e.matchSpacing=e.matchNewline=e.matchBlot=e.matchAttributor=e.default=void 0;var m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],n=!0,o=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(i.push(s.value),!e||i.length!==e);n=!0);}catch(t){o=!0,r=t}finally{try{!n&&a.return&&a.return()}finally{if(o)throw r}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},v=function(){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}(),y=n(i(2)),b=n(i(4)),_=n(i(0)),w=n(i(6)),k=n(i(10)),x=n(i(7)),C=i(33),D=i(34),T=n(i(13)),O=i(25),E=i(35),S=i(36),M=i(37),I=(0,k.default)("quill:clipboard"),A="__ql-matcher",P=[[Node.TEXT_NODE,p],[Node.TEXT_NODE,d],["br",function(t,e){return c(e,"\n")||e.insert("\n"),e}],[Node.ELEMENT_NODE,d],[Node.ELEMENT_NODE,h],[Node.ELEMENT_NODE,f],[Node.ELEMENT_NODE,u],[Node.ELEMENT_NODE,function(t,e){var i={},n=t.style||{};return n.fontStyle&&"italic"===o(t).fontStyle&&(i.italic=!0),n.fontWeight&&(o(t).fontWeight.startsWith("bold")||700<=parseInt(o(t).fontWeight))&&(i.bold=!0),0<Object.keys(i).length&&(e=s(e,i)),0<parseFloat(n.textIndent||0)&&(e=(new b.default).insert("\t").concat(e)),e}],["li",function(t,e){var i=_.default.query(t);if(null==i||"list-item"!==i.blotName||!c(e,"\n"))return e;for(var n=-1,o=t.parentNode;!o.classList.contains("ql-clipboard");)"list"===(_.default.query(o)||{}).blotName&&(n+=1),o=o.parentNode;return n<=0?e:e.compose((new b.default).retain(e.length()-1).retain(1,{indent:n}))}],["b",a.bind(a,"bold")],["i",a.bind(a,"italic")],["style",function(){return new b.default}]],N=[C.AlignAttribute,E.DirectionAttribute].reduce(function(t,e){return t[e.keyName]=e,t},{}),j=[C.AlignStyle,D.BackgroundStyle,O.ColorStyle,E.DirectionStyle,S.FontStyle,M.SizeStyle].reduce(function(t,e){return t[e.keyName]=e,t},{}),L=function(t){function e(t,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,o));return r.quill.root.addEventListener("paste",r.onPaste.bind(r)),r.container=r.quill.addContainer("ql-clipboard"),r.container.setAttribute("contenteditable",!0),r.container.setAttribute("tabindex",-1),r.matchers=[],P.concat(r.options.matchers).forEach(function(t){var e=g(t,2),i=e[0],n=e[1];(o.matchVisual||n!==f)&&r.addMatcher(i,n)}),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,x.default),v(e,[{key:"addMatcher",value:function(t,e){this.matchers.push([t,e])}},{key:"convert",value:function(t){if("string"==typeof t)return this.container.innerHTML=t.replace(/\>\r?\n +\</g,"><"),this.convert();var e=this.quill.getFormat(this.quill.selection.savedRange.index);if(e[T.default.blotName]){var i=this.container.innerText;return this.container.innerHTML="",(new b.default).insert(i,l({},T.default.blotName,e[T.default.blotName]))}var n=this.prepareMatching(),o=g(n,2),r=o[0],s=o[1],a=function n(o,r,s){return o.nodeType===o.TEXT_NODE?s.reduce(function(t,e){return e(o,t)},new b.default):o.nodeType===o.ELEMENT_NODE?[].reduce.call(o.childNodes||[],function(t,i){var e=n(i,r,s);return i.nodeType===o.ELEMENT_NODE&&(e=r.reduce(function(t,e){return e(i,t)},e),e=(i[A]||[]).reduce(function(t,e){return e(i,t)},e)),t.concat(e)},new b.default):new b.default}(this.container,r,s);return c(a,"\n")&&null==a.ops[a.ops.length-1].attributes&&(a=a.compose((new b.default).retain(a.length()-1).delete(1))),I.log("convert",this.container.innerHTML,a),this.container.innerHTML="",a}},{key:"dangerouslyPasteHTML",value:function(t,e){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:w.default.sources.API;if("string"==typeof t)return this.quill.setContents(this.convert(t),e);var n=this.convert(e);return this.quill.updateContents((new b.default).retain(t).concat(n),i)}},{key:"onPaste",value:function(t){var e=this;if(!t.defaultPrevented&&this.quill.isEnabled()){var i=this.quill.getSelection(),n=(new b.default).retain(i.index),o=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(w.default.sources.SILENT),setTimeout(function(){n=n.concat(e.convert()).delete(i.length),e.quill.updateContents(n,w.default.sources.USER),e.quill.setSelection(n.length()-i.length,w.default.sources.SILENT),e.quill.scrollingContainer.scrollTop=o,e.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var o=this,r=[],s=[];return this.matchers.forEach(function(t){var e=g(t,2),i=e[0],n=e[1];switch(i){case Node.TEXT_NODE:s.push(n);break;case Node.ELEMENT_NODE:r.push(n);break;default:[].forEach.call(o.container.querySelectorAll(i),function(t){t[A]=t[A]||[],t[A].push(n)})}}),[r,s]}}]),e}();L.DEFAULTS={matchers:[],matchVisual:!0},e.default=L,e.matchAttributor=u,e.matchBlot=h,e.matchNewline=d,e.matchSpacing=f,e.matchText=p},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}function o(t){var e,i,n=t.reduce(function(t,e){return t+(e.delete||0)},0),o=t.length()-n;return null!=(i=(e=t).ops[e.ops.length-1])&&(null!=i.insert?"string"==typeof i.insert&&i.insert.endsWith("\n"):null!=i.attributes&&Object.keys(i.attributes).some(function(t){return null!=s.default.query(t,s.default.Scope.BLOCK)}))&&(o-=1),o}Object.defineProperty(e,"__esModule",{value:!0}),e.getLastChangeIndex=e.default=void 0;var r=function(){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}(),s=n(i(0)),a=n(i(6)),l=n(i(7)),c=function(t){function i(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t,e));return o.lastRecorded=0,o.ignoreChange=!1,o.clear(),o.quill.on(a.default.events.EDITOR_CHANGE,function(t,e,i,n){t!==a.default.events.TEXT_CHANGE||o.ignoreChange||(o.options.userOnly&&n!==a.default.sources.USER?o.transform(e):o.record(e,i))}),o.quill.keyboard.addBinding({key:"Z",shortKey:!0},o.undo.bind(o)),o.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},o.redo.bind(o)),/Win/i.test(navigator.platform)&&o.quill.keyboard.addBinding({key:"Y",shortKey:!0},o.redo.bind(o)),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(i,l.default),r(i,[{key:"change",value:function(t,e){if(0!==this.stack[t].length){var i=this.stack[t].pop();this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(i[t],a.default.sources.USER),this.ignoreChange=!1;var n=o(i[t]);this.quill.setSelection(n),this.stack[e].push(i)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(t,e){if(0!==t.ops.length){this.stack.redo=[];var i=this.quill.getContents().diff(e),n=Date.now();if(this.lastRecorded+this.options.delay>n&&0<this.stack.undo.length){var o=this.stack.undo.pop();i=i.compose(o.undo),t=o.redo.compose(t)}else this.lastRecorded=n;this.stack.undo.push({redo:t,undo:i}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(e){this.stack.undo.forEach(function(t){t.undo=e.transform(t.undo,!0),t.redo=e.transform(t.redo,!0)}),this.stack.redo.forEach(function(t){t.undo=e.transform(t.undo,!0),t.redo=e.transform(t.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),i}();c.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1},e.default=c,e.getLastChangeIndex=o},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.IndentClass=void 0;var n,o=function(){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}(),r=function t(e,i,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0},s=i(0),a=(n=s)&&n.__esModule?n:{default:n},l=new(function(t){function n(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,a.default.Attributor.Class),o(n,[{key:"add",value:function(t,e){if("+1"===e||"-1"===e){var i=this.value(t)||0;e="+1"===e?i+1:i-1}return 0===e?(this.remove(t),!0):r(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"add",this).call(this,t,e)}},{key:"canAdd",value:function(t,e){return r(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"canAdd",this).call(this,t,e)||r(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"canAdd",this).call(this,t,parseInt(e))}},{key:"value",value:function(t){return parseInt(r(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"value",this).call(this,t))||void 0}}]),n}())("indent","ql-indent",{scope:a.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});e.IndentClass=l},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n,o=i(3),r=(n=o)&&n.__esModule?n:{default:n},s=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.default),e}();s.blotName="blockquote",s.tagName="blockquote",e.default=s},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n,o=function(){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}(),r=i(3),s=(n=r)&&n.__esModule?n:{default:n},a=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.default),o(e,null,[{key:"formats",value:function(t){return this.tagName.indexOf(t.tagName)+1}}]),e}();a.blotName="header",a.tagName=["H1","H2","H3","H4","H5","H6"],e.default=a},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.ListItem=void 0;var l=function(){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}(),c=function t(e,i,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0},u=n(i(0)),r=n(i(3)),h=n(i(23)),d=function(t){function i(){return s(this,i),a(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return o(i,r.default),l(i,[{key:"format",value:function(t,e){t!==f.blotName||e?c(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"format",this).call(this,t,e):this.replaceWith(u.default.create(this.statics.scope))}},{key:"remove",value:function(){null==this.prev&&null==this.next?this.parent.remove():c(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(t,e){return this.parent.isolate(this.offset(this.parent),this.length()),t===this.parent.statics.blotName?(this.parent.replaceWith(t,e),this):(this.parent.unwrap(),c(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"replaceWith",this).call(this,t,e))}}],[{key:"formats",value:function(t){return t.tagName===this.tagName?void 0:c(i.__proto__||Object.getPrototypeOf(i),"formats",this).call(this,t)}}]),i}();d.blotName="list-item",d.tagName="LI";var f=function(t){function r(n){s(this,r);var o=a(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,n)),t=function(t){if(t.target.parentNode===n){var e=o.statics.formats(n),i=u.default.find(t.target);"checked"===e?i.format("list","unchecked"):"unchecked"===e&&i.format("list","checked")}};return n.addEventListener("touchstart",t),n.addEventListener("mousedown",t),o}return o(r,h.default),l(r,null,[{key:"create",value:function(t){var e="ordered"===t?"OL":"UL",i=c(r.__proto__||Object.getPrototypeOf(r),"create",this).call(this,e);return"checked"!==t&&"unchecked"!==t||i.setAttribute("data-checked","checked"===t),i}},{key:"formats",value:function(t){return"OL"===t.tagName?"ordered":"UL"===t.tagName?t.hasAttribute("data-checked")?"true"===t.getAttribute("data-checked")?"checked":"unchecked":"bullet":void 0}}]),l(r,[{key:"format",value:function(t,e){0<this.children.length&&this.children.tail.format(t,e)}},{key:"formats",value:function(){return t={},e=this.statics.blotName,i=this.statics.formats(this.domNode),e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t;var t,e,i}},{key:"insertBefore",value:function(t,e){if(t instanceof d)c(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"insertBefore",this).call(this,t,e);else{var i=null==e?this.length():e.offset(this),n=this.split(i);n.parent.insertBefore(t,n)}}},{key:"optimize",value:function(t){c(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"optimize",this).call(this,t);var e=this.next;null!=e&&e.prev===this&&e.statics.blotName===this.statics.blotName&&e.domNode.tagName===this.domNode.tagName&&e.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(e.moveChildren(this),e.remove())}},{key:"replace",value:function(t){if(t.statics.blotName!==this.statics.blotName){var e=u.default.create(this.statics.defaultChild);t.moveChildren(e),this.appendChild(e)}c(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"replace",this).call(this,t)}}]),r}();f.blotName="list",f.scope=u.default.Scope.BLOCK_BLOT,f.tagName=["OL","UL"],f.defaultChild="list-item",f.allowedChildren=[d],e.ListItem=d,e.default=f},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n,o=i(39),r=(n=o)&&n.__esModule?n:{default:n},s=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.default),e}();s.blotName="italic",s.tagName=["EM","I"],e.default=s},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n,o=function(){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}(),r=i(5),s=(n=r)&&n.__esModule?n:{default:n},a=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.default),o(e,null,[{key:"create",value:function(t){return"super"===t?document.createElement("sup"):"sub"===t?document.createElement("sub"):function t(e,i,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0}(e.__proto__||Object.getPrototypeOf(e),"create",this).call(this,t)}},{key:"formats",value:function(t){return"SUB"===t.tagName?"sub":"SUP"===t.tagName?"super":void 0}}]),e}();a.blotName="script",a.tagName=["SUB","SUP"],e.default=a},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n,o=i(5),r=(n=o)&&n.__esModule?n:{default:n},s=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.default),e}();s.blotName="strike",s.tagName="S",e.default=s},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n,o=i(5),r=(n=o)&&n.__esModule?n:{default:n},s=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.default),e}();s.blotName="underline",s.tagName="U",e.default=s},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n,o=function(){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}(),r=function t(e,i,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0},s=i(0),a=(n=s)&&n.__esModule?n:{default:n},l=i(15),c=["alt","height","width"],u=function(t){function i(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(i,a.default.Embed),o(i,[{key:"format",value:function(t,e){-1<c.indexOf(t)?e?this.domNode.setAttribute(t,e):this.domNode.removeAttribute(t):r(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"format",this).call(this,t,e)}}],[{key:"create",value:function(t){var e=r(i.__proto__||Object.getPrototypeOf(i),"create",this).call(this,t);return"string"==typeof t&&e.setAttribute("src",this.sanitize(t)),e}},{key:"formats",value:function(i){return c.reduce(function(t,e){return i.hasAttribute(e)&&(t[e]=i.getAttribute(e)),t},{})}},{key:"match",value:function(t){return/\.(jpe?g|gif|png)$/.test(t)||/^data:image\/.+;base64/.test(t)}},{key:"sanitize",value:function(t){return(0,l.sanitize)(t,["http","https","data"])?t:"//:0"}},{key:"value",value:function(t){return t.getAttribute("src")}}]),i}();u.blotName="image",u.tagName="IMG",e.default=u},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n,o=function(){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}(),r=function t(e,i,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0},s=i(3),a=i(15),l=(n=a)&&n.__esModule?n:{default:n},c=["height","width"],u=function(t){function i(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(i,s.BlockEmbed),o(i,[{key:"format",value:function(t,e){-1<c.indexOf(t)?e?this.domNode.setAttribute(t,e):this.domNode.removeAttribute(t):r(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"format",this).call(this,t,e)}}],[{key:"create",value:function(t){var e=r(i.__proto__||Object.getPrototypeOf(i),"create",this).call(this,t);return e.setAttribute("frameborder","0"),e.setAttribute("allowfullscreen",!0),e.setAttribute("src",this.sanitize(t)),e}},{key:"formats",value:function(i){return c.reduce(function(t,e){return i.hasAttribute(e)&&(t[e]=i.getAttribute(e)),t},{})}},{key:"sanitize",value:function(t){return l.default.sanitize(t)}},{key:"value",value:function(t){return t.getAttribute("src")}}]),i}();u.blotName="video",u.className="ql-video",u.tagName="IFRAME",e.default=u},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.FormulaBlot=void 0;var a=function(){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}(),l=n(i(24)),c=n(i(6)),u=n(i(7)),h=function(t){function i(){return o(this,i),r(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return s(i,l.default),a(i,null,[{key:"create",value:function(t){var e=function t(e,i,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0}(i.__proto__||Object.getPrototypeOf(i),"create",this).call(this,t);return"string"==typeof t&&(window.katex.render(t,e,{throwOnError:!1,errorColor:"#f00"}),e.setAttribute("data-value",t)),e}},{key:"value",value:function(t){return t.getAttribute("data-value")}}]),i}();h.blotName="formula",h.className="ql-formula",h.tagName="SPAN";var d=function(t){function e(){o(this,e);var t=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));if(null==window.katex)throw new Error("Formula module requires KaTeX.");return t}return s(e,u.default),a(e,null,[{key:"register",value:function(){c.default.register(h,!0)}}]),e}();e.FormulaBlot=h,e.default=d},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.CodeToken=e.CodeBlock=void 0;var l=function(){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}(),o=n(i(0)),c=n(i(6)),u=n(i(7)),h=n(i(13)),d=function(t){function e(){return r(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,h.default),l(e,[{key:"replaceWith",value:function(t){this.domNode.textContent=this.domNode.textContent,this.attach(),function t(e,i,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"replaceWith",this).call(this,t)}},{key:"highlight",value:function(t){var e=this.domNode.textContent;this.cachedText!==e&&((0<e.trim().length||null==this.cachedText)&&(this.domNode.innerHTML=t(e),this.domNode.normalize(),this.attach()),this.cachedText=e)}}]),e}();d.className="ql-syntax";var f=new o.default.Attributor.Class("token","hljs",{scope:o.default.Scope.INLINE}),p=function(t){function o(t,e){r(this,o);var i=s(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,t,e));if("function"!=typeof i.options.highlight)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var n=null;return i.quill.on(c.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(n),n=setTimeout(function(){i.highlight(),n=null},i.options.interval)}),i.highlight(),i}return a(o,u.default),l(o,null,[{key:"register",value:function(){c.default.register(f,!0),c.default.register(d,!0)}}]),l(o,[{key:"highlight",value:function(){var e=this;if(!this.quill.selection.composing){this.quill.update(c.default.sources.USER);var t=this.quill.getSelection();this.quill.scroll.descendants(d).forEach(function(t){t.highlight(e.options.highlight)}),this.quill.update(c.default.sources.SILENT),null!=t&&this.quill.setSelection(t,c.default.sources.SILENT)}}}]),o}();p.DEFAULTS={highlight:null==window.hljs?null:function(t){return window.hljs.highlightAuto(t).value},interval:1e3},e.CodeBlock=d,e.CodeToken=f,e.default=p},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function l(t,e,i){var n=document.createElement("button");n.setAttribute("type","button"),n.classList.add("ql-"+e),null!=i&&(n.value=i),t.appendChild(n)}function a(e,t){Array.isArray(t[0])||(t=[t]),t.forEach(function(t){var a=document.createElement("span");a.classList.add("ql-formats"),t.forEach(function(t){if("string"==typeof t)l(a,t);else{var e=Object.keys(t)[0],i=t[e];Array.isArray(i)?(n=a,o=e,r=i,(s=document.createElement("select")).classList.add("ql-"+o),r.forEach(function(t){var e=document.createElement("option");!1!==t?e.setAttribute("value",t):e.setAttribute("selected","selected"),s.appendChild(e)}),n.appendChild(s)):l(a,e,i)}var n,o,r,s}),e.appendChild(a)})}Object.defineProperty(e,"__esModule",{value:!0}),e.addControls=e.default=void 0;var h=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],n=!0,o=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(i.push(s.value),!e||i.length!==e);n=!0);}catch(t){o=!0,r=t}finally{try{!n&&a.return&&a.return()}finally{if(o)throw r}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}(),d=n(i(4)),f=n(i(0)),p=n(i(6)),r=n(i(10)),c=n(i(7)),m=(0,r.default)("quill:toolbar"),u=function(t){function r(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r);var i,n=s(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,t,e));if(Array.isArray(n.options.container)){var o=document.createElement("div");a(o,n.options.container),t.container.parentNode.insertBefore(o,t.container),n.container=o}else"string"==typeof n.options.container?n.container=document.querySelector(n.options.container):n.container=n.options.container;return n.container instanceof HTMLElement?(n.container.classList.add("ql-toolbar"),n.controls=[],n.handlers={},Object.keys(n.options.handlers).forEach(function(t){n.addHandler(t,n.options.handlers[t])}),[].forEach.call(n.container.querySelectorAll("button, select"),function(t){n.attach(t)}),n.quill.on(p.default.events.EDITOR_CHANGE,function(t,e){t===p.default.events.SELECTION_CHANGE&&n.update(e)}),n.quill.on(p.default.events.SCROLL_OPTIMIZE,function(){var t=n.quill.selection.getRange(),e=h(t,1)[0];n.update(e)}),n):(i=m.error("Container required for toolbar",n.options),s(n,i))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(r,c.default),o(r,[{key:"addHandler",value:function(t,e){this.handlers[t]=e}},{key:"attach",value:function(l){var c=this,u=[].find.call(l.classList,function(t){return 0===t.indexOf("ql-")});if(u){if(u=u.slice("ql-".length),"BUTTON"===l.tagName&&l.setAttribute("type","button"),null==this.handlers[u]){if(null!=this.quill.scroll.whitelist&&null==this.quill.scroll.whitelist[u])return void m.warn("ignoring attaching to disabled format",u,l);if(null==f.default.query(u))return void m.warn("ignoring attaching to nonexistent format",u,l)}var t="SELECT"===l.tagName?"change":"click";l.addEventListener(t,function(t){var e=void 0;if("SELECT"===l.tagName){if(l.selectedIndex<0)return;var i=l.options[l.selectedIndex];e=!i.hasAttribute("selected")&&(i.value||!1)}else e=!l.classList.contains("ql-active")&&(l.value||!l.hasAttribute("value")),t.preventDefault();c.quill.focus();var n,o,r,s=c.quill.selection.getRange(),a=h(s,1)[0];if(null!=c.handlers[u])c.handlers[u].call(c,e);else if(f.default.query(u).prototype instanceof f.default.Embed){if(!(e=prompt("Enter "+u)))return;c.quill.updateContents((new d.default).retain(a.index).delete(a.length).insert((r=e,(o=u)in(n={})?Object.defineProperty(n,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[o]=r,n)),p.default.sources.USER)}else c.quill.format(u,e,p.default.sources.USER);c.update(a)}),this.controls.push([u,l])}}},{key:"update",value:function(a){var l=null==a?{}:this.quill.getFormat(a);this.controls.forEach(function(t){var e=h(t,2),i=e[0],n=e[1];if("SELECT"===n.tagName){var o=void 0;if(null==a)o=null;else if(null==l[i])o=n.querySelector("option[selected]");else if(!Array.isArray(l[i])){var r=l[i];"string"==typeof r&&(r=r.replace(/\"/g,'\\"')),o=n.querySelector('option[value="'+r+'"]')}null==o?(n.value="",n.selectedIndex=-1):o.selected=!0}else if(null==a)n.classList.remove("ql-active");else if(n.hasAttribute("value")){var s=l[i]===n.getAttribute("value")||null!=l[i]&&l[i].toString()===n.getAttribute("value")||null==l[i]&&!n.getAttribute("value");n.classList.toggle("ql-active",s)}else n.classList.toggle("ql-active",null!=l[i])})}}]),r}();u.DEFAULTS={},u.DEFAULTS={container:null,handlers:{clean:function(){var e=this,t=this.quill.getSelection();if(null!=t)if(0==t.length){var i=this.quill.getFormat();Object.keys(i).forEach(function(t){null!=f.default.query(t,f.default.Scope.INLINE)&&e.quill.format(t,!1)})}else this.quill.removeFormat(t,p.default.sources.USER)},direction:function(t){var e=this.quill.getFormat().align;"rtl"===t&&null==e?this.quill.format("align","right",p.default.sources.USER):t||"right"!==e||this.quill.format("align",!1,p.default.sources.USER),this.quill.format("direction",t,p.default.sources.USER)},indent:function(t){var e=this.quill.getSelection(),i=this.quill.getFormat(e),n=parseInt(i.indent||0);if("+1"===t||"-1"===t){var o="+1"===t?1:-1;"rtl"===i.direction&&(o*=-1),this.quill.format("indent",n+o,p.default.sources.USER)}},link:function(t){!0===t&&(t=prompt("Enter link URL:")),this.quill.format("link",t,p.default.sources.USER)},list:function(t){var e=this.quill.getSelection(),i=this.quill.getFormat(e);"check"===t?"checked"===i.list||"unchecked"===i.list?this.quill.format("list",!1,p.default.sources.USER):this.quill.format("list","unchecked",p.default.sources.USER):this.quill.format("list",t,p.default.sources.USER)}}},e.default=u,e.addControls=a},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(t,e){t.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(t,e){t.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(t,e){t.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(t,e){t.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.BubbleTooltip=void 0;var a=function t(e,i,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0},l=function(){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}(),c=n(i(2)),u=n(i(9)),h=i(44),d=n(h),f=i(22),p=n(i(26)),m=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],g=function(t){function n(t,e){o(this,n),null!=e.modules.toolbar&&null==e.modules.toolbar.container&&(e.modules.toolbar.container=m);var i=r(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t,e));return i.quill.container.classList.add("ql-bubble"),i}return s(n,d.default),l(n,[{key:"extendToolbar",value:function(t){this.tooltip=new v(this.quill,this.options.bounds),this.tooltip.root.appendChild(t.container),this.buildButtons([].slice.call(t.container.querySelectorAll("button")),p.default),this.buildPickers([].slice.call(t.container.querySelectorAll("select")),p.default)}}]),n}();g.DEFAULTS=(0,c.default)(!0,{},d.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(t){t?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var v=function(t){function n(t,e){o(this,n);var c=r(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t,e));return c.quill.on(u.default.events.EDITOR_CHANGE,function(t,e,i,n){if(t===u.default.events.SELECTION_CHANGE)if(null!=e&&0<e.length&&n===u.default.sources.USER){c.show(),c.root.style.left="0px",c.root.style.width="",c.root.style.width=c.root.offsetWidth+"px";var o=c.quill.getLines(e.index,e.length);if(1===o.length)c.position(c.quill.getBounds(e));else{var r=o[o.length-1],s=c.quill.getIndex(r),a=Math.min(r.length()-1,e.index+e.length-s),l=c.quill.getBounds(new f.Range(s,a));c.position(l)}}else document.activeElement!==c.textbox&&c.quill.hasFocus()&&c.hide()}),c}return s(n,h.BaseTooltip),l(n,[{key:"listen",value:function(){var e=this;a(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){e.root.classList.remove("ql-editing")}),this.quill.on(u.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!e.root.classList.contains("ql-hidden")){var t=e.quill.getSelection();null!=t&&e.position(e.quill.getBounds(t))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(t){var e=a(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"position",this).call(this,t),i=this.root.querySelector(".ql-tooltip-arrow");if(i.style.marginLeft="",0===e)return e;i.style.marginLeft=-1*e-i.offsetWidth/2+"px"}}]),n}();v.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),e.BubbleTooltip=v,e.default=g},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var c=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],n=!0,o=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(i.push(s.value),!e||i.length!==e);n=!0);}catch(t){o=!0,r=t}finally{try{!n&&a.return&&a.return()}finally{if(o)throw r}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=function t(e,i,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0},l=function(){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}(),u=n(i(2)),h=n(i(9)),d=i(44),f=n(d),p=n(i(15)),m=i(22),g=n(i(26)),v=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],y=function(t){function n(t,e){o(this,n),null!=e.modules.toolbar&&null==e.modules.toolbar.container&&(e.modules.toolbar.container=v);var i=r(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t,e));return i.quill.container.classList.add("ql-snow"),i}return s(n,f.default),l(n,[{key:"extendToolbar",value:function(i){i.container.classList.add("ql-snow"),this.buildButtons([].slice.call(i.container.querySelectorAll("button")),g.default),this.buildPickers([].slice.call(i.container.querySelectorAll("select")),g.default),this.tooltip=new b(this.quill,this.options.bounds),i.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(t,e){i.handlers.link.call(i,!e.format.link)})}}]),n}();y.DEFAULTS=(0,u.default)(!0,{},f.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(t){if(t){var e=this.quill.getSelection();if(null==e||0==e.length)return;var i=this.quill.getText(e);/^\S+@\S+\.\S+$/.test(i)&&0!==i.indexOf("mailto:")&&(i="mailto:"+i),this.quill.theme.tooltip.edit("link",i)}else this.quill.format("link",!1)}}}}});var b=function(t){function n(t,e){o(this,n);var i=r(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t,e));return i.preview=i.root.querySelector("a.ql-preview"),i}return s(n,d.BaseTooltip),l(n,[{key:"listen",value:function(){var l=this;a(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(t){l.root.classList.contains("ql-editing")?l.save():l.edit("link",l.preview.textContent),t.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(t){if(null!=l.linkRange){var e=l.linkRange;l.restoreFocus(),l.quill.formatText(e,"link",!1,h.default.sources.USER),delete l.linkRange}t.preventDefault(),l.hide()}),this.quill.on(h.default.events.SELECTION_CHANGE,function(t,e,i){if(null!=t){if(0===t.length&&i===h.default.sources.USER){var n=l.quill.scroll.descendant(p.default,t.index),o=c(n,2),r=o[0],s=o[1];if(null!=r){l.linkRange=new m.Range(t.index-s,r.length());var a=p.default.formats(r.domNode);return l.preview.textContent=a,l.preview.setAttribute("href",a),l.show(),void l.position(l.quill.getBounds(l.linkRange))}}else delete l.linkRange;l.hide()}})}},{key:"show",value:function(){a(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),n}();b.TEMPLATE=['<a class="ql-preview" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),e.default=y}]).default});