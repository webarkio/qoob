"use strict";function QoobStorage(t){this.loader=t.loader,this.driver=t.driver||new LocalDriver,this.skinTemplates=t.loader.loaded.skin_templates.data||null,this.librariesData=t.librariesData||{},this.pageData=t.pageData||null,this.blockTemplates=[],this.blockTemplateAdapter=t.blockTemplateAdapter||"hbs",this.pageTemplatesCollection=new Backbone.Collection,this.assets=[],this.translations=t.translations||null}if(function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){t.ui=t.ui||{},t.ui.version="1.12.1";var e=0,i=Array.prototype.slice;t.cleanData=function(e){return function(i){var n,o,r;for(r=0;null!=(o=i[r]);r++)try{(n=t._data(o,"events"))&&n.remove&&t(o).triggerHandler("remove")}catch(t){}e(i)}}(t.cleanData),t.widget=function(e,i,n){var o,r,s,a={},l=e.split(".")[0],c=l+"-"+(e=e.split(".")[1]);return n||(n=i,i=t.Widget),t.isArray(n)&&(n=t.extend.apply(null,[{}].concat(n))),t.expr[":"][c.toLowerCase()]=function(e){return!!t.data(e,c)},t[l]=t[l]||{},o=t[l][e],r=t[l][e]=function(t,e){return this._createWidget?void(arguments.length&&this._createWidget(t,e)):new r(t,e)},t.extend(r,o,{version:n.version,_proto:t.extend({},n),_childConstructors:[]}),s=new i,s.options=t.widget.extend({},s.options),t.each(n,function(e,n){return t.isFunction(n)?void(a[e]=function(){function t(){return i.prototype[e].apply(this,arguments)}function o(t){return i.prototype[e].apply(this,t)}return function(){var e,i=this._super,r=this._superApply;return this._super=t,this._superApply=o,e=n.apply(this,arguments),this._super=i,this._superApply=r,e}}()):void(a[e]=n)}),r.prototype=t.widget.extend(s,{widgetEventPrefix:o?s.widgetEventPrefix||e:e},a,{constructor:r,namespace:l,widgetName:e,widgetFullName:c}),o?(t.each(o._childConstructors,function(e,i){var n=i.prototype;t.widget(n.namespace+"."+n.widgetName,r,i._proto)}),delete o._childConstructors):i._childConstructors.push(r),t.widget.bridge(e,r),r},t.widget.extend=function(e){for(var n,o,r=i.call(arguments,1),s=0,a=r.length;a>s;s++)for(n in r[s])o=r[s][n],r[s].hasOwnProperty(n)&&void 0!==o&&(e[n]=t.isPlainObject(o)?t.isPlainObject(e[n])?t.widget.extend({},e[n],o):t.widget.extend({},o):o);return e},t.widget.bridge=function(e,n){var o=n.prototype.widgetFullName||e;t.fn[e]=function(r){var s="string"==typeof r,a=i.call(arguments,1),l=this;return s?this.length||"instance"!==r?this.each(function(){var i,n=t.data(this,o);return"instance"===r?(l=n,!1):n?t.isFunction(n[r])&&"_"!==r.charAt(0)?(i=n[r].apply(n,a))!==n&&void 0!==i?(l=i&&i.jquery?l.pushStack(i.get()):i,!1):void 0:t.error("no such method '"+r+"' for "+e+" widget instance"):t.error("cannot call methods on "+e+" prior to initialization; attempted to call method '"+r+"'")}):l=void 0:(a.length&&(r=t.widget.extend.apply(null,[r].concat(a))),this.each(function(){var e=t.data(this,o);e?(e.option(r||{}),e._init&&e._init()):t.data(this,o,new n(r,this))})),l}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(i,n){n=t(n||this.defaultElement||this)[0],this.element=t(n),this.uuid=e++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=t(),this.hoverable=t(),this.focusable=t(),this.classesElementLookup={},n!==this&&(t.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===n&&this.destroy()}}),this.document=t(n.style?n.ownerDocument:n.document||n),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this.options=t.widget.extend({},this.options,this._getCreateOptions(),i),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){var e=this;this._destroy(),t.each(this.classesElementLookup,function(t,i){e._removeClass(i,t)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:t.noop,widget:function(){return this.element},option:function(e,i){var n,o,r,s=e;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof e)if(s={},n=e.split("."),e=n.shift(),n.length){for(o=s[e]=t.widget.extend({},this.options[e]),r=0;n.length-1>r;r++)o[n[r]]=o[n[r]]||{},o=o[n[r]];if(e=n.pop(),1===arguments.length)return void 0===o[e]?null:o[e];o[e]=i}else{if(1===arguments.length)return void 0===this.options[e]?null:this.options[e];s[e]=i}return this._setOptions(s),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return"classes"===t&&this._setOptionClasses(e),this.options[t]=e,"disabled"===t&&this._setOptionDisabled(e),this},_setOptionClasses:function(e){var i,n,o;for(i in e)o=this.classesElementLookup[i],e[i]!==this.options.classes[i]&&o&&o.length&&(n=t(o.get()),this._removeClass(o,i),n.addClass(this._classes({element:n,keys:i,classes:e,add:!0})))},_setOptionDisabled:function(t){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!t),t&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(e){function i(i,r){var s,a;for(a=0;i.length>a;a++)s=o.classesElementLookup[i[a]]||t(),s=t(e.add?t.unique(s.get().concat(e.element.get())):s.not(e.element).get()),o.classesElementLookup[i[a]]=s,n.push(i[a]),r&&e.classes[i[a]]&&n.push(e.classes[i[a]])}var n=[],o=this;return e=t.extend({element:this.element,classes:this.options.classes||{}},e),this._on(e.element,{remove:"_untrackClassesElement"}),e.keys&&i(e.keys.match(/\S+/g)||[],!0),e.extra&&i(e.extra.match(/\S+/g)||[]),n.join(" ")},_untrackClassesElement:function(e){var i=this;t.each(i.classesElementLookup,function(n,o){-1!==t.inArray(e.target,o)&&(i.classesElementLookup[n]=t(o.not(e.target).get()))})},_removeClass:function(t,e,i){return this._toggleClass(t,e,i,!1)},_addClass:function(t,e,i){return this._toggleClass(t,e,i,!0)},_toggleClass:function(t,e,i,n){n="boolean"==typeof n?n:i;var o="string"==typeof t||null===t,r={extra:o?e:i,keys:o?t:e,element:o?this.element:t,add:n};return r.element.toggleClass(this._classes(r),n),this},_on:function(e,i,n){var o,r=this;"boolean"!=typeof e&&(n=i,i=e,e=!1),n?(i=o=t(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,o=this.widget()),t.each(n,function(n,s){function a(){return e||!0!==r.options.disabled&&!t(this).hasClass("ui-state-disabled")?("string"==typeof s?r[s]:s).apply(r,arguments):void 0}"string"!=typeof s&&(a.guid=s.guid=s.guid||a.guid||t.guid++);var l=n.match(/^([\w:-]*)\s*(.*)$/),c=l[1]+r.eventNamespace,u=l[2];u?o.on(c,u,a):i.on(c,a)})},_off:function(e,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.off(i).off(i),this.bindings=t(this.bindings.not(e).get()),this.focusable=t(this.focusable.not(e).get()),this.hoverable=t(this.hoverable.not(e).get())},_delay:function(t,e){var i=this;return setTimeout(function(){return("string"==typeof t?i[t]:t).apply(i,arguments)},e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){this._addClass(t(e.currentTarget),null,"ui-state-hover")},mouseleave:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){this._addClass(t(e.currentTarget),null,"ui-state-focus")},focusout:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-focus")}})},_trigger:function(e,i,n){var o,r,s=this.options[e];if(n=n||{},i=t.Event(i),i.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],r=i.originalEvent)for(o in r)o in i||(i[o]=r[o]);return this.element.trigger(i,n),!(t.isFunction(s)&&!1===s.apply(this.element[0],[i].concat(n))||i.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,i){t.Widget.prototype["_"+e]=function(n,o,r){"string"==typeof o&&(o={effect:o});var s,a=o?!0===o||"number"==typeof o?i:o.effect||i:e;"number"==typeof(o=o||{})&&(o={duration:o}),s=!t.isEmptyObject(o),o.complete=r,o.delay&&n.delay(o.delay),s&&t.effects&&t.effects.effect[a]?n[e](o):a!==e&&n[a]?n[a](o.duration,o.easing,r):n.queue(function(i){t(this)[e](),r&&r.call(n[0]),i()})}}),t.widget,function(){function e(t,e,i){return[parseFloat(t[0])*(u.test(t[0])?e/100:1),parseFloat(t[1])*(u.test(t[1])?i/100:1)]}function i(e,i){return parseInt(t.css(e,i),10)||0}var n,o=Math.max,r=Math.abs,s=/left|center|right/,a=/top|center|bottom/,l=/[\+\-]\d+(\.[\d]+)?%?/,c=/^\w+/,u=/%$/,h=t.fn.position;t.position={scrollbarWidth:function(){if(void 0!==n)return n;var e,i,o=t("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),r=o.children()[0];return t("body").append(o),e=r.offsetWidth,o.css("overflow","scroll"),i=r.offsetWidth,e===i&&(i=o[0].clientWidth),o.remove(),n=e-i},getScrollInfo:function(e){var i=e.isWindow||e.isDocument?"":e.element.css("overflow-x"),n=e.isWindow||e.isDocument?"":e.element.css("overflow-y"),o="scroll"===i||"auto"===i&&e.width<e.element[0].scrollWidth;return{width:"scroll"===n||"auto"===n&&e.height<e.element[0].scrollHeight?t.position.scrollbarWidth():0,height:o?t.position.scrollbarWidth():0}},getWithinInfo:function(e){var i=t(e||window),n=t.isWindow(i[0]),o=!!i[0]&&9===i[0].nodeType;return{element:i,isWindow:n,isDocument:o,offset:!n&&!o?t(e).offset():{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:i.outerWidth(),height:i.outerHeight()}}},t.fn.position=function(n){if(!n||!n.of)return h.apply(this,arguments);n=t.extend({},n);var u,d,f,p,m,g,v=t(n.of),y=t.position.getWithinInfo(n.within),b=t.position.getScrollInfo(y),_=(n.collision||"flip").split(" "),w={};return g=function(e){var i=e[0];return 9===i.nodeType?{width:e.width(),height:e.height(),offset:{top:0,left:0}}:t.isWindow(i)?{width:e.width(),height:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()}}(v),v[0].preventDefault&&(n.at="left top"),d=g.width,f=g.height,p=g.offset,m=t.extend({},p),t.each(["my","at"],function(){var t,e,i=(n[this]||"").split(" ");1===i.length&&(i=s.test(i[0])?i.concat(["center"]):a.test(i[0])?["center"].concat(i):["center","center"]),i[0]=s.test(i[0])?i[0]:"center",i[1]=a.test(i[1])?i[1]:"center",t=l.exec(i[0]),e=l.exec(i[1]),w[this]=[t?t[0]:0,e?e[0]:0],n[this]=[c.exec(i[0])[0],c.exec(i[1])[0]]}),1===_.length&&(_[1]=_[0]),"right"===n.at[0]?m.left+=d:"center"===n.at[0]&&(m.left+=d/2),"bottom"===n.at[1]?m.top+=f:"center"===n.at[1]&&(m.top+=f/2),u=e(w.at,d,f),m.left+=u[0],m.top+=u[1],this.each(function(){var s,a,l=t(this),c=l.outerWidth(),h=l.outerHeight(),g=i(this,"marginLeft"),k=i(this,"marginTop"),x=c+g+i(this,"marginRight")+b.width,C=h+k+i(this,"marginBottom")+b.height,T=t.extend({},m),D=e(w.my,l.outerWidth(),l.outerHeight());"right"===n.my[0]?T.left-=c:"center"===n.my[0]&&(T.left-=c/2),"bottom"===n.my[1]?T.top-=h:"center"===n.my[1]&&(T.top-=h/2),T.left+=D[0],T.top+=D[1],s={marginLeft:g,marginTop:k},t.each(["left","top"],function(e,i){t.ui.position[_[e]]&&t.ui.position[_[e]][i](T,{targetWidth:d,targetHeight:f,elemWidth:c,elemHeight:h,collisionPosition:s,collisionWidth:x,collisionHeight:C,offset:[u[0]+D[0],u[1]+D[1]],my:n.my,at:n.at,within:y,elem:l})}),n.using&&(a=function(t){var e=p.left-T.left,i=e+d-c,s=p.top-T.top,a=s+f-h,u={target:{element:v,left:p.left,top:p.top,width:d,height:f},element:{element:l,left:T.left,top:T.top,width:c,height:h},horizontal:0>i?"left":e>0?"right":"center",vertical:0>a?"top":s>0?"bottom":"middle"};c>d&&d>r(e+i)&&(u.horizontal="center"),h>f&&f>r(s+a)&&(u.vertical="middle"),u.important=o(r(e),r(i))>o(r(s),r(a))?"horizontal":"vertical",n.using.call(this,t,u)}),l.offset(t.extend(T,{using:a}))})},t.ui.position={fit:{left:function(t,e){var i,n=e.within,r=n.isWindow?n.scrollLeft:n.offset.left,s=n.width,a=t.left-e.collisionPosition.marginLeft,l=r-a,c=a+e.collisionWidth-s-r;e.collisionWidth>s?l>0&&0>=c?(i=t.left+l+e.collisionWidth-s-r,t.left+=l-i):t.left=c>0&&0>=l?r:l>c?r+s-e.collisionWidth:r:l>0?t.left+=l:c>0?t.left-=c:t.left=o(t.left-a,t.left)},top:function(t,e){var i,n=e.within,r=n.isWindow?n.scrollTop:n.offset.top,s=e.within.height,a=t.top-e.collisionPosition.marginTop,l=r-a,c=a+e.collisionHeight-s-r;e.collisionHeight>s?l>0&&0>=c?(i=t.top+l+e.collisionHeight-s-r,t.top+=l-i):t.top=c>0&&0>=l?r:l>c?r+s-e.collisionHeight:r:l>0?t.top+=l:c>0?t.top-=c:t.top=o(t.top-a,t.top)}},flip:{left:function(t,e){var i,n,o=e.within,s=o.offset.left+o.scrollLeft,a=o.width,l=o.isWindow?o.scrollLeft:o.offset.left,c=t.left-e.collisionPosition.marginLeft,u=c-l,h=c+e.collisionWidth-a-l,d="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,f="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,p=-2*e.offset[0];0>u?(0>(i=t.left+d+f+p+e.collisionWidth-a-s)||r(u)>i)&&(t.left+=d+f+p):h>0&&((n=t.left-e.collisionPosition.marginLeft+d+f+p-l)>0||h>r(n))&&(t.left+=d+f+p)},top:function(t,e){var i,n,o=e.within,s=o.offset.top+o.scrollTop,a=o.height,l=o.isWindow?o.scrollTop:o.offset.top,c=t.top-e.collisionPosition.marginTop,u=c-l,h=c+e.collisionHeight-a-l,d="top"===e.my[1]?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,f="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,p=-2*e.offset[1];0>u?(0>(n=t.top+d+f+p+e.collisionHeight-a-s)||r(u)>n)&&(t.top+=d+f+p):h>0&&((i=t.top-e.collisionPosition.marginTop+d+f+p-l)>0||h>r(i))&&(t.top+=d+f+p)}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments),t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments),t.ui.position.fit.top.apply(this,arguments)}}}}(),t.ui.position,t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(i){return!!t.data(i,e)}}):function(e,i,n){return!!t.data(e,n[3])}}),t.fn.extend({disableSelection:function(){var t="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.on(t+".ui-disableSelection",function(t){t.preventDefault()})}}(),enableSelection:function(){return this.off(".ui-disableSelection")}}),t.ui.focusable=function(e,i){var n,o,r,s,a,l=e.nodeName.toLowerCase();return"area"===l?(n=e.parentNode,o=n.name,!(!e.href||!o||"map"!==n.nodeName.toLowerCase())&&((r=t("img[usemap='#"+o+"']")).length>0&&r.is(":visible"))):(/^(input|select|textarea|button|object)$/.test(l)?(s=!e.disabled)&&(a=t(e).closest("fieldset")[0])&&(s=!a.disabled):s="a"===l?e.href||i:i,s&&t(e).is(":visible")&&function(t){for(var e=t.css("visibility");"inherit"===e;)t=t.parent(),e=t.css("visibility");return"hidden"!==e}(t(e)))},t.extend(t.expr[":"],{focusable:function(e){return t.ui.focusable(e,null!=t.attr(e,"tabindex"))}}),t.ui.focusable,t.fn.form=function(){return"string"==typeof this[0].form?this.closest("form"):t(this[0].form)},t.ui.formResetMixin={_formResetHandler:function(){var e=t(this);setTimeout(function(){var i=e.data("ui-form-reset-instances");t.each(i,function(){this.refresh()})})},_bindFormResetHandler:function(){if(this.form=this.element.form(),this.form.length){var t=this.form.data("ui-form-reset-instances")||[];t.length||this.form.on("reset.ui-form-reset",this._formResetHandler),t.push(this),this.form.data("ui-form-reset-instances",t)}},_unbindFormResetHandler:function(){if(this.form.length){var e=this.form.data("ui-form-reset-instances");e.splice(t.inArray(this,e),1),e.length?this.form.data("ui-form-reset-instances",e):this.form.removeData("ui-form-reset-instances").off("reset.ui-form-reset")}}},"1.7"===t.fn.jquery.substring(0,3)&&(t.each(["Width","Height"],function(e,i){function n(e,i,n,r){return t.each(o,function(){i-=parseFloat(t.css(e,"padding"+this))||0,n&&(i-=parseFloat(t.css(e,"border"+this+"Width"))||0),r&&(i-=parseFloat(t.css(e,"margin"+this))||0)}),i}var o="Width"===i?["Left","Right"]:["Top","Bottom"],r=i.toLowerCase(),s={innerWidth:t.fn.innerWidth,innerHeight:t.fn.innerHeight,outerWidth:t.fn.outerWidth,outerHeight:t.fn.outerHeight};t.fn["inner"+i]=function(e){return void 0===e?s["inner"+i].call(this):this.each(function(){t(this).css(r,n(this,e)+"px")})},t.fn["outer"+i]=function(e,o){return"number"!=typeof e?s["outer"+i].call(this,e):this.each(function(){t(this).css(r,n(this,e,!0,o)+"px")})}}),t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38},t.ui.escapeSelector=function(){var t=/([!"#$%&'()*+,./:;<=>?@[\]^`{|}~])/g;return function(e){return e.replace(t,"\\$1")}}(),t.fn.labels=function(){var e,i,n,o,r;return this[0].labels&&this[0].labels.length?this.pushStack(this[0].labels):(o=this.eq(0).parents("label"),(n=this.attr("id"))&&(e=this.eq(0).parents().last(),r=e.add(e.length?e.siblings():this.siblings()),i="label[for='"+t.ui.escapeSelector(n)+"']",o=o.add(r.find(i).addBack(i))),this.pushStack(o))},t.fn.scrollParent=function(e){var i=this.css("position"),n="absolute"===i,o=e?/(auto|scroll|hidden)/:/(auto|scroll)/,r=this.parents().filter(function(){var e=t(this);return(!n||"static"!==e.css("position"))&&o.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))}).eq(0);return"fixed"!==i&&r.length?r:t(this[0].ownerDocument||document)},t.extend(t.expr[":"],{tabbable:function(e){var i=t.attr(e,"tabindex"),n=null!=i;return(!n||i>=0)&&t.ui.focusable(e,n)}}),t.fn.extend({uniqueId:function(){var t=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++t)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&t(this).removeAttr("id")})}}),t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());var n=!1;t(document).on("mouseup",function(){n=!1}),t.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.on("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).on("click."+this.widgetName,function(i){return!0===t.data(i.target,e.widgetName+".preventClickEvent")?(t.removeData(i.target,e.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(e){if(!n){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(e),this._mouseDownEvent=e;var i=this,o=1===e.which,r=!("string"!=typeof this.options.cancel||!e.target.nodeName)&&t(e.target).closest(this.options.cancel).length;return!(o&&!r&&this._mouseCapture(e))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(e),!this._mouseStarted)?(e.preventDefault(),!0):(!0===t.data(e.target,this.widgetName+".preventClickEvent")&&t.removeData(e.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return i._mouseMove(t)},this._mouseUpDelegate=function(t){return i._mouseUp(t)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),e.preventDefault(),n=!0,!0))}},_mouseMove:function(e){if(this._mouseMoved){if(t.ui.ie&&(!document.documentMode||9>document.documentMode)&&!e.button)return this._mouseUp(e);if(!e.which)if(e.originalEvent.altKey||e.originalEvent.ctrlKey||e.originalEvent.metaKey||e.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(e)}return(e.which||e.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,e),this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,n=!1,e.preventDefault()},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),t.ui.plugin={add:function(e,i,n){var o,r=t.ui[e].prototype;for(o in n)r.plugins[o]=r.plugins[o]||[],r.plugins[o].push([i,n[o]])},call:function(t,e,i,n){var o,r=t.plugins[e];if(r&&(n||t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType))for(o=0;r.length>o;o++)t.options[r[o][0]]&&r[o][1].apply(t.element,i)}},t.ui.safeActiveElement=function(t){var e;try{e=t.activeElement}catch(i){e=t.body}return e||(e=t.body),e.nodeName||(e=t.body),e},t.ui.safeBlur=function(e){e&&"body"!==e.nodeName.toLowerCase()&&t(e).trigger("blur")},t.widget("ui.draggable",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(t,e){this._super(t,e),"handle"===t&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?void(this.destroyOnClear=!0):(this._removeHandleClassName(),void this._mouseDestroy())},_mouseCapture:function(e){var i=this.options;return!(this.helper||i.disabled||t(e.target).closest(".ui-resizable-handle").length>0)&&(this.handle=this._getHandle(e),!!this.handle&&(this._blurActiveElement(e),this._blockFrames(!0===i.iframeFix?"iframe":i.iframeFix),!0))},_blockFrames:function(e){this.iframeBlocks=this.document.find(e).map(function(){var e=t(this);return t("<div>").css("position","absolute").appendTo(e.parent()).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()).offset(e.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(e){var i=t.ui.safeActiveElement(this.document[0]);t(e.target).closest(i).length||t.ui.safeBlur(i)},_mouseStart:function(e){var i=this.options;return this.helper=this._createHelper(e),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),t.ui.ddmanager&&(t.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===t(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(e),this.originalPosition=this.position=this._generatePosition(e,!1),this.originalPageX=e.pageX,this.originalPageY=e.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),!1===this._trigger("start",e)?(this._clear(),!1):(this._cacheHelperProportions(),t.ui.ddmanager&&!i.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this._mouseDrag(e,!0),t.ui.ddmanager&&t.ui.ddmanager.dragStart(this,e),!0)},_refreshOffsets:function(t){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:t.pageX-this.offset.left,top:t.pageY-this.offset.top}},_mouseDrag:function(e,i){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(e,!0),this.positionAbs=this._convertPositionTo("absolute"),!i){var n=this._uiHash();if(!1===this._trigger("drag",e,n))return this._mouseUp(new t.Event("mouseup",e)),!1;this.position=n.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var i=this,n=!1;return t.ui.ddmanager&&!this.options.dropBehaviour&&(n=t.ui.ddmanager.drop(this,e)),this.dropped&&(n=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!n||"valid"===this.options.revert&&n||!0===this.options.revert||t.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)?t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==i._trigger("stop",e)&&i._clear()}):!1!==this._trigger("stop",e)&&this._clear(),!1},_mouseUp:function(e){return this._unblockFrames(),t.ui.ddmanager&&t.ui.ddmanager.dragStop(this,e),this.handleElement.is(e.target)&&this.element.trigger("focus"),t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new t.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(e){return!this.options.handle||!!t(e.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(e){var i=this.options,n=t.isFunction(i.helper),o=n?t(i.helper.apply(this.element[0],[e])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return o.parents("body").length||o.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),n&&o[0]===this.element[0]&&this._setPositionRelative(),o[0]===this.element[0]||/(fixed|absolute)/.test(o.css("position"))||o.css("position","absolute"),o},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_isRootNode:function(t){return/(html|body)/i.test(t.tagName)||t===this.document[0]},_getParentOffset:function(){var e=this.offsetParent.offset(),i=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==i&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var t=this.element.position(),e=this._isRootNode(this.scrollParent[0]);return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+(e?0:this.scrollParent.scrollTop()),left:t.left-(parseInt(this.helper.css("left"),10)||0)+(e?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,n,o=this.options,r=this.document[0];return this.relativeContainer=null,o.containment?"window"===o.containment?void(this.containment=[t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,t(window).scrollLeft()+t(window).width()-this.helperProportions.width-this.margins.left,t(window).scrollTop()+(t(window).height()||r.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===o.containment?void(this.containment=[0,0,t(r).width()-this.helperProportions.width-this.margins.left,(t(r).height()||r.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):o.containment.constructor===Array?void(this.containment=o.containment):("parent"===o.containment&&(o.containment=this.helper[0].parentNode),i=t(o.containment),void((n=i[0])&&(e=/(scroll|auto)/.test(i.css("overflow")),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(e?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=i))):void(this.containment=null)},_convertPositionTo:function(t,e){e||(e=this.position);var i="absolute"===t?1:-1,n=this._isRootNode(this.scrollParent[0]);return{top:e.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.offset.scroll.top:n?0:this.offset.scroll.top)*i,left:e.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.offset.scroll.left:n?0:this.offset.scroll.left)*i}},_generatePosition:function(t,e){var i,n,o,r,s=this.options,a=this._isRootNode(this.scrollParent[0]),l=t.pageX,c=t.pageY;return a&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),e&&(this.containment&&(this.relativeContainer?(n=this.relativeContainer.offset(),i=[this.containment[0]+n.left,this.containment[1]+n.top,this.containment[2]+n.left,this.containment[3]+n.top]):i=this.containment,t.pageX-this.offset.click.left<i[0]&&(l=i[0]+this.offset.click.left),t.pageY-this.offset.click.top<i[1]&&(c=i[1]+this.offset.click.top),t.pageX-this.offset.click.left>i[2]&&(l=i[2]+this.offset.click.left),t.pageY-this.offset.click.top>i[3]&&(c=i[3]+this.offset.click.top)),s.grid&&(o=s.grid[1]?this.originalPageY+Math.round((c-this.originalPageY)/s.grid[1])*s.grid[1]:this.originalPageY,c=i?o-this.offset.click.top>=i[1]||o-this.offset.click.top>i[3]?o:o-this.offset.click.top>=i[1]?o-s.grid[1]:o+s.grid[1]:o,r=s.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/s.grid[0])*s.grid[0]:this.originalPageX,l=i?r-this.offset.click.left>=i[0]||r-this.offset.click.left>i[2]?r:r-this.offset.click.left>=i[0]?r-s.grid[0]:r+s.grid[0]:r),"y"===s.axis&&(l=this.originalPageX),"x"===s.axis&&(c=this.originalPageY)),{top:c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:a?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:a?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(e,i,n){return n=n||this._uiHash(),t.ui.plugin.call(this,e,[i,n,this],!0),/^(drag|start|stop)/.test(e)&&(this.positionAbs=this._convertPositionTo("absolute"),n.offset=this.positionAbs),t.Widget.prototype._trigger.call(this,e,i,n)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),t.ui.plugin.add("draggable","connectToSortable",{start:function(e,i,n){var o=t.extend({},i,{item:n.element});n.sortables=[],t(n.options.connectToSortable).each(function(){var i=t(this).sortable("instance");i&&!i.options.disabled&&(n.sortables.push(i),i.refreshPositions(),i._trigger("activate",e,o))})},stop:function(e,i,n){var o=t.extend({},i,{item:n.element});n.cancelHelperRemoval=!1,t.each(n.sortables,function(){this.isOver?(this.isOver=0,n.cancelHelperRemoval=!0,this.cancelHelperRemoval=!1,this._storedCSS={position:this.placeholder.css("position"),top:this.placeholder.css("top"),left:this.placeholder.css("left")},this._mouseStop(e),this.options.helper=this.options._helper):(this.cancelHelperRemoval=!0,this._trigger("deactivate",e,o))})},drag:function(e,i,n){t.each(n.sortables,function(){var o=!1,r=this;r.positionAbs=n.positionAbs,r.helperProportions=n.helperProportions,r.offset.click=n.offset.click,r._intersectsWith(r.containerCache)&&(o=!0,t.each(n.sortables,function(){return this.positionAbs=n.positionAbs,this.helperProportions=n.helperProportions,this.offset.click=n.offset.click,this!==r&&this._intersectsWith(this.containerCache)&&t.contains(r.element[0],this.element[0])&&(o=!1),o})),o?(r.isOver||(r.isOver=1,n._parent=i.helper.parent(),r.currentItem=i.helper.appendTo(r.element).data("ui-sortable-item",!0),r.options._helper=r.options.helper,r.options.helper=function(){return i.helper[0]},e.target=r.currentItem[0],r._mouseCapture(e,!0),r._mouseStart(e,!0,!0),r.offset.click.top=n.offset.click.top,r.offset.click.left=n.offset.click.left,r.offset.parent.left-=n.offset.parent.left-r.offset.parent.left,r.offset.parent.top-=n.offset.parent.top-r.offset.parent.top,n._trigger("toSortable",e),n.dropped=r.element,t.each(n.sortables,function(){this.refreshPositions()}),n.currentItem=n.element,r.fromOutside=n),r.currentItem&&(r._mouseDrag(e),i.position=r.position)):r.isOver&&(r.isOver=0,r.cancelHelperRemoval=!0,r.options._revert=r.options.revert,r.options.revert=!1,r._trigger("out",e,r._uiHash(r)),r._mouseStop(e,!0),r.options.revert=r.options._revert,r.options.helper=r.options._helper,r.placeholder&&r.placeholder.remove(),i.helper.appendTo(n._parent),n._refreshOffsets(e),i.position=n._generatePosition(e,!0),n._trigger("fromSortable",e),n.dropped=!1,t.each(n.sortables,function(){this.refreshPositions()}))})}}),t.ui.plugin.add("draggable","cursor",{start:function(e,i,n){var o=t("body"),r=n.options;o.css("cursor")&&(r._cursor=o.css("cursor")),o.css("cursor",r.cursor)},stop:function(e,i,n){var o=n.options;o._cursor&&t("body").css("cursor",o._cursor)}}),t.ui.plugin.add("draggable","opacity",{start:function(e,i,n){var o=t(i.helper),r=n.options;o.css("opacity")&&(r._opacity=o.css("opacity")),o.css("opacity",r.opacity)},stop:function(e,i,n){var o=n.options;o._opacity&&t(i.helper).css("opacity",o._opacity)}}),t.ui.plugin.add("draggable","scroll",{start:function(t,e,i){i.scrollParentNotHidden||(i.scrollParentNotHidden=i.helper.scrollParent(!1)),i.scrollParentNotHidden[0]!==i.document[0]&&"HTML"!==i.scrollParentNotHidden[0].tagName&&(i.overflowOffset=i.scrollParentNotHidden.offset())},drag:function(e,i,n){var o=n.options,r=!1,s=n.scrollParentNotHidden[0],a=n.document[0];s!==a&&"HTML"!==s.tagName?(o.axis&&"x"===o.axis||(n.overflowOffset.top+s.offsetHeight-e.pageY<o.scrollSensitivity?s.scrollTop=r=s.scrollTop+o.scrollSpeed:e.pageY-n.overflowOffset.top<o.scrollSensitivity&&(s.scrollTop=r=s.scrollTop-o.scrollSpeed)),o.axis&&"y"===o.axis||(n.overflowOffset.left+s.offsetWidth-e.pageX<o.scrollSensitivity?s.scrollLeft=r=s.scrollLeft+o.scrollSpeed:e.pageX-n.overflowOffset.left<o.scrollSensitivity&&(s.scrollLeft=r=s.scrollLeft-o.scrollSpeed))):(o.axis&&"x"===o.axis||(e.pageY-t(a).scrollTop()<o.scrollSensitivity?r=t(a).scrollTop(t(a).scrollTop()-o.scrollSpeed):t(window).height()-(e.pageY-t(a).scrollTop())<o.scrollSensitivity&&(r=t(a).scrollTop(t(a).scrollTop()+o.scrollSpeed))),o.axis&&"y"===o.axis||(e.pageX-t(a).scrollLeft()<o.scrollSensitivity?r=t(a).scrollLeft(t(a).scrollLeft()-o.scrollSpeed):t(window).width()-(e.pageX-t(a).scrollLeft())<o.scrollSensitivity&&(r=t(a).scrollLeft(t(a).scrollLeft()+o.scrollSpeed)))),!1!==r&&t.ui.ddmanager&&!o.dropBehaviour&&t.ui.ddmanager.prepareOffsets(n,e)}}),t.ui.plugin.add("draggable","snap",{start:function(e,i,n){var o=n.options;n.snapElements=[],t(o.snap.constructor!==String?o.snap.items||":data(ui-draggable)":o.snap).each(function(){var e=t(this),i=e.offset();this!==n.element[0]&&n.snapElements.push({item:this,width:e.outerWidth(),height:e.outerHeight(),top:i.top,left:i.left})})},drag:function(e,i,n){var o,r,s,a,l,c,u,h,d,f,p=n.options,m=p.snapTolerance,g=i.offset.left,v=g+n.helperProportions.width,y=i.offset.top,b=y+n.helperProportions.height;for(d=n.snapElements.length-1;d>=0;d--)l=n.snapElements[d].left-n.margins.left,c=l+n.snapElements[d].width,u=n.snapElements[d].top-n.margins.top,h=u+n.snapElements[d].height,l-m>v||g>c+m||u-m>b||y>h+m||!t.contains(n.snapElements[d].item.ownerDocument,n.snapElements[d].item)?(n.snapElements[d].snapping&&n.options.snap.release&&n.options.snap.release.call(n.element,e,t.extend(n._uiHash(),{snapItem:n.snapElements[d].item})),n.snapElements[d].snapping=!1):("inner"!==p.snapMode&&(o=m>=Math.abs(u-b),r=m>=Math.abs(h-y),s=m>=Math.abs(l-v),a=m>=Math.abs(c-g),o&&(i.position.top=n._convertPositionTo("relative",{top:u-n.helperProportions.height,left:0}).top),r&&(i.position.top=n._convertPositionTo("relative",{top:h,left:0}).top),s&&(i.position.left=n._convertPositionTo("relative",{top:0,left:l-n.helperProportions.width}).left),a&&(i.position.left=n._convertPositionTo("relative",{top:0,left:c}).left)),f=o||r||s||a,"outer"!==p.snapMode&&(o=m>=Math.abs(u-y),r=m>=Math.abs(h-b),s=m>=Math.abs(l-g),a=m>=Math.abs(c-v),o&&(i.position.top=n._convertPositionTo("relative",{top:u,left:0}).top),r&&(i.position.top=n._convertPositionTo("relative",{top:h-n.helperProportions.height,left:0}).top),s&&(i.position.left=n._convertPositionTo("relative",{top:0,left:l}).left),a&&(i.position.left=n._convertPositionTo("relative",{top:0,left:c-n.helperProportions.width}).left)),!n.snapElements[d].snapping&&(o||r||s||a||f)&&n.options.snap.snap&&n.options.snap.snap.call(n.element,e,t.extend(n._uiHash(),{snapItem:n.snapElements[d].item})),n.snapElements[d].snapping=o||r||s||a||f)}}),t.ui.plugin.add("draggable","stack",{start:function(e,i,n){var o,r=n.options,s=t.makeArray(t(r.stack)).sort(function(e,i){return(parseInt(t(e).css("zIndex"),10)||0)-(parseInt(t(i).css("zIndex"),10)||0)});s.length&&(o=parseInt(t(s[0]).css("zIndex"),10)||0,t(s).each(function(e){t(this).css("zIndex",o+e)}),this.css("zIndex",o+s.length))}}),t.ui.plugin.add("draggable","zIndex",{start:function(e,i,n){var o=t(i.helper),r=n.options;o.css("zIndex")&&(r._zIndex=o.css("zIndex")),o.css("zIndex",r.zIndex)},stop:function(e,i,n){var o=n.options;o._zIndex&&t(i.helper).css("zIndex",o._zIndex)}}),t.ui.draggable,t.widget("ui.droppable",{version:"1.12.1",widgetEventPrefix:"drop",options:{accept:"*",addClasses:!0,greedy:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var e,i=this.options,n=i.accept;this.isover=!1,this.isout=!0,this.accept=t.isFunction(n)?n:function(t){return t.is(n)},this.proportions=function(){return arguments.length?void(e=arguments[0]):e||(e={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight})},this._addToManager(i.scope),i.addClasses&&this._addClass("ui-droppable")},_addToManager:function(e){t.ui.ddmanager.droppables[e]=t.ui.ddmanager.droppables[e]||[],t.ui.ddmanager.droppables[e].push(this)},_splice:function(t){for(var e=0;t.length>e;e++)t[e]===this&&t.splice(e,1)},_destroy:function(){var e=t.ui.ddmanager.droppables[this.options.scope];this._splice(e)},_setOption:function(e,i){if("accept"===e)this.accept=t.isFunction(i)?i:function(t){return t.is(i)};else if("scope"===e){var n=t.ui.ddmanager.droppables[this.options.scope];this._splice(n),this._addToManager(i)}this._super(e,i)},_activate:function(e){var i=t.ui.ddmanager.current;this._addActiveClass(),i&&this._trigger("activate",e,this.ui(i))},_deactivate:function(e){var i=t.ui.ddmanager.current;this._removeActiveClass(),i&&this._trigger("deactivate",e,this.ui(i))},_over:function(e){var i=t.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this._addHoverClass(),this._trigger("over",e,this.ui(i)))},_out:function(e){var i=t.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this._removeHoverClass(),this._trigger("out",e,this.ui(i)))},_drop:function(e,i){var n=i||t.ui.ddmanager.current,r=!1;return!(!n||(n.currentItem||n.element)[0]===this.element[0])&&(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var i=t(this).droppable("instance");return i.options.greedy&&!i.options.disabled&&i.options.scope===n.options.scope&&i.accept.call(i.element[0],n.currentItem||n.element)&&o(n,t.extend(i,{offset:i.element.offset()}),i.options.tolerance,e)?(r=!0,!1):void 0}),!r&&(!!this.accept.call(this.element[0],n.currentItem||n.element)&&(this._removeActiveClass(),this._removeHoverClass(),this._trigger("drop",e,this.ui(n)),this.element)))},ui:function(t){return{draggable:t.currentItem||t.element,helper:t.helper,position:t.position,offset:t.positionAbs}},_addHoverClass:function(){this._addClass("ui-droppable-hover")},_removeHoverClass:function(){this._removeClass("ui-droppable-hover")},_addActiveClass:function(){this._addClass("ui-droppable-active")},_removeActiveClass:function(){this._removeClass("ui-droppable-active")}});var o=t.ui.intersect=function(){function t(t,e,i){return t>=e&&e+i>t}return function(e,i,n,o){if(!i.offset)return!1;var r=(e.positionAbs||e.position.absolute).left+e.margins.left,s=(e.positionAbs||e.position.absolute).top+e.margins.top,a=r+e.helperProportions.width,l=s+e.helperProportions.height,c=i.offset.left,u=i.offset.top,h=c+i.proportions().width,d=u+i.proportions().height;switch(n){case"fit":return r>=c&&h>=a&&s>=u&&d>=l;case"intersect":return r+e.helperProportions.width/2>c&&h>a-e.helperProportions.width/2&&s+e.helperProportions.height/2>u&&d>l-e.helperProportions.height/2;case"pointer":return t(o.pageY,u,i.proportions().height)&&t(o.pageX,c,i.proportions().width);case"touch":return(s>=u&&d>=s||l>=u&&d>=l||u>s&&l>d)&&(r>=c&&h>=r||a>=c&&h>=a||c>r&&a>h);default:return!1}}}();t.ui.ddmanager={current:null,droppables:{default:[]},prepareOffsets:function(e,i){var n,o,r=t.ui.ddmanager.droppables[e.options.scope]||[],s=i?i.type:null,a=(e.currentItem||e.element).find(":data(ui-droppable)").addBack();t:for(n=0;r.length>n;n++)if(!(r[n].options.disabled||e&&!r[n].accept.call(r[n].element[0],e.currentItem||e.element))){for(o=0;a.length>o;o++)if(a[o]===r[n].element[0]){r[n].proportions().height=0;continue t}r[n].visible="none"!==r[n].element.css("display"),r[n].visible&&("mousedown"===s&&r[n]._activate.call(r[n],i),r[n].offset=r[n].element.offset(),r[n].proportions({width:r[n].element[0].offsetWidth,height:r[n].element[0].offsetHeight}))}},drop:function(e,i){var n=!1;return t.each((t.ui.ddmanager.droppables[e.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&o(e,this,this.options.tolerance,i)&&(n=this._drop.call(this,i)||n),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,i)))}),n},dragStart:function(e,i){e.element.parentsUntil("body").on("scroll.droppable",function(){e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,i)})},drag:function(e,i){e.options.refreshPositions&&t.ui.ddmanager.prepareOffsets(e,i),t.each(t.ui.ddmanager.droppables[e.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var n,r,s,a=o(e,this,this.options.tolerance,i),l=!a&&this.isover?"isout":a&&!this.isover?"isover":null;l&&(this.options.greedy&&(r=this.options.scope,(s=this.element.parents(":data(ui-droppable)").filter(function(){return t(this).droppable("instance").options.scope===r})).length&&(n=t(s[0]).droppable("instance"),n.greedyChild="isover"===l)),n&&"isover"===l&&(n.isover=!1,n.isout=!0,n._out.call(n,i)),this[l]=!0,this["isout"===l?"isover":"isout"]=!1,this["isover"===l?"_over":"_out"].call(this,i),n&&"isout"===l&&(n.isout=!1,n.isover=!0,n._over.call(n,i)))}})},dragStop:function(e,i){e.element.parentsUntil("body").off("scroll.droppable"),e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,i)}},!1!==t.uiBackCompat&&t.widget("ui.droppable",t.ui.droppable,{options:{hoverClass:!1,activeClass:!1},_addActiveClass:function(){this._super(),this.options.activeClass&&this.element.addClass(this.options.activeClass)},_removeActiveClass:function(){this._super(),this.options.activeClass&&this.element.removeClass(this.options.activeClass)},_addHoverClass:function(){this._super(),this.options.hoverClass&&this.element.addClass(this.options.hoverClass)},_removeHoverClass:function(){this._super(),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass)}}),t.ui.droppable,t.widget("ui.resizable",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(t){return parseFloat(t)||0},_isNumber:function(t){return!isNaN(parseFloat(t))},_hasScroll:function(e,i){if("hidden"===t(e).css("overflow"))return!1;var n=i&&"left"===i?"scrollLeft":"scrollTop",o=!1;return e[n]>0||(e[n]=1,o=e[n]>0,e[n]=0,o)},_create:function(){var e,i=this.options,n=this;this._addClass("ui-resizable"),t.extend(this,{_aspectRatio:!!i.aspectRatio,aspectRatio:i.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:i.helper||i.ghost||i.animate?i.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(t("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,e={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")},this.element.css(e),this.originalElement.css("margin",0),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css(e),this._proportionallyResize()),this._setupHandles(),i.autoHide&&t(this.element).on("mouseenter",function(){i.disabled||(n._removeClass("ui-resizable-autohide"),n._handles.show())}).on("mouseleave",function(){i.disabled||n.resizing||(n._addClass("ui-resizable-autohide"),n._handles.hide())}),this._mouseInit()},_destroy:function(){this._mouseDestroy();var e,i=function(e){t(e).removeData("resizable").removeData("ui-resizable").off(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),e=this.element,this.originalElement.css({position:e.css("position"),width:e.outerWidth(),height:e.outerHeight(),top:e.css("top"),left:e.css("left")}).insertAfter(e),e.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_setOption:function(t,e){switch(this._super(t,e),t){case"handles":this._removeHandles(),this._setupHandles()}},_setupHandles:function(){var e,i,n,o,r,s=this.options,a=this;if(this.handles=s.handles||(t(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=t(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),n=this.handles.split(","),this.handles={},i=0;n.length>i;i++)e=t.trim(n[i]),o="ui-resizable-"+e,r=t("<div>"),this._addClass(r,"ui-resizable-handle "+o),r.css({zIndex:s.zIndex}),this.handles[e]=".ui-resizable-"+e,this.element.append(r);this._renderAxis=function(e){var i,n,o,r;e=e||this.element;for(i in this.handles)this.handles[i].constructor===String?this.handles[i]=this.element.children(this.handles[i]).first().show():(this.handles[i].jquery||this.handles[i].nodeType)&&(this.handles[i]=t(this.handles[i]),this._on(this.handles[i],{mousedown:a._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(n=t(this.handles[i],this.element),r=/sw|ne|nw|se|n|s/.test(i)?n.outerHeight():n.outerWidth(),o=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),e.css(o,r),this._proportionallyResize()),this._handles=this._handles.add(this.handles[i])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.on("mouseover",function(){a.resizing||(this.className&&(r=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),a.axis=r&&r[1]?r[1]:"se")}),s.autoHide&&(this._handles.hide(),this._addClass("ui-resizable-autohide"))},_removeHandles:function(){this._handles.remove()},_mouseCapture:function(e){var i,n,o=!1;for(i in this.handles)((n=t(this.handles[i])[0])===e.target||t.contains(n,e.target))&&(o=!0);return!this.options.disabled&&o},_mouseStart:function(e){var i,n,o,r=this.options,s=this.element;return this.resizing=!0,this._renderProxy(),i=this._num(this.helper.css("left")),n=this._num(this.helper.css("top")),r.containment&&(i+=t(r.containment).scrollLeft()||0,n+=t(r.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:i,top:n},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:s.width(),height:s.height()},this.originalSize=this._helper?{width:s.outerWidth(),height:s.outerHeight()}:{width:s.width(),height:s.height()},this.sizeDiff={width:s.outerWidth()-s.width(),height:s.outerHeight()-s.height()},this.originalPosition={left:i,top:n},this.originalMousePosition={left:e.pageX,top:e.pageY},this.aspectRatio="number"==typeof r.aspectRatio?r.aspectRatio:this.originalSize.width/this.originalSize.height||1,o=t(".ui-resizable-"+this.axis).css("cursor"),t("body").css("cursor","auto"===o?this.axis+"-resize":o),this._addClass("ui-resizable-resizing"),this._propagate("start",e),!0},_mouseDrag:function(e){var i,n,o=this.originalMousePosition,r=this.axis,s=e.pageX-o.left||0,a=e.pageY-o.top||0,l=this._change[r];return this._updatePrevProperties(),!!l&&(i=l.apply(this,[e,s,a]),this._updateVirtualBoundaries(e.shiftKey),(this._aspectRatio||e.shiftKey)&&(i=this._updateRatio(i,e)),i=this._respectSize(i,e),this._updateCache(i),this._propagate("resize",e),n=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),t.isEmptyObject(n)||(this._updatePrevProperties(),this._trigger("resize",e,this.ui()),this._applyChanges()),!1)},_mouseStop:function(e){this.resizing=!1;var i,n,o,r,s,a,l,c=this.options;return this._helper&&(i=this._proportionallyResizeElements,n=i.length&&/textarea/i.test(i[0].nodeName),o=n&&this._hasScroll(i[0],"left")?0:this.sizeDiff.height,r=n?0:this.sizeDiff.width,s={width:this.helper.width()-r,height:this.helper.height()-o},a=parseFloat(this.element.css("left"))+(this.position.left-this.originalPosition.left)||null,l=parseFloat(this.element.css("top"))+(this.position.top-this.originalPosition.top)||null,c.animate||this.element.css(t.extend(s,{top:l,left:a})),this.helper.height(this.size.height),this.helper.width(this.size.width),this._helper&&!c.animate&&this._proportionallyResize()),t("body").css("cursor","auto"),this._removeClass("ui-resizable-resizing"),this._propagate("stop",e),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var t={};return this.position.top!==this.prevPosition.top&&(t.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(t.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(t.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(t.height=this.size.height+"px"),this.helper.css(t),t},_updateVirtualBoundaries:function(t){var e,i,n,o,r,s=this.options;r={minWidth:this._isNumber(s.minWidth)?s.minWidth:0,maxWidth:this._isNumber(s.maxWidth)?s.maxWidth:1/0,minHeight:this._isNumber(s.minHeight)?s.minHeight:0,maxHeight:this._isNumber(s.maxHeight)?s.maxHeight:1/0},(this._aspectRatio||t)&&(e=r.minHeight*this.aspectRatio,n=r.minWidth/this.aspectRatio,i=r.maxHeight*this.aspectRatio,o=r.maxWidth/this.aspectRatio,e>r.minWidth&&(r.minWidth=e),n>r.minHeight&&(r.minHeight=n),r.maxWidth>i&&(r.maxWidth=i),r.maxHeight>o&&(r.maxHeight=o)),this._vBoundaries=r},_updateCache:function(t){this.offset=this.helper.offset(),this._isNumber(t.left)&&(this.position.left=t.left),this._isNumber(t.top)&&(this.position.top=t.top),this._isNumber(t.height)&&(this.size.height=t.height),this._isNumber(t.width)&&(this.size.width=t.width)},_updateRatio:function(t){var e=this.position,i=this.size,n=this.axis;return this._isNumber(t.height)?t.width=t.height*this.aspectRatio:this._isNumber(t.width)&&(t.height=t.width/this.aspectRatio),"sw"===n&&(t.left=e.left+(i.width-t.width),t.top=null),"nw"===n&&(t.top=e.top+(i.height-t.height),t.left=e.left+(i.width-t.width)),t},_respectSize:function(t){var e=this._vBoundaries,i=this.axis,n=this._isNumber(t.width)&&e.maxWidth&&e.maxWidth<t.width,o=this._isNumber(t.height)&&e.maxHeight&&e.maxHeight<t.height,r=this._isNumber(t.width)&&e.minWidth&&e.minWidth>t.width,s=this._isNumber(t.height)&&e.minHeight&&e.minHeight>t.height,a=this.originalPosition.left+this.originalSize.width,l=this.originalPosition.top+this.originalSize.height,c=/sw|nw|w/.test(i),u=/nw|ne|n/.test(i);return r&&(t.width=e.minWidth),s&&(t.height=e.minHeight),n&&(t.width=e.maxWidth),o&&(t.height=e.maxHeight),r&&c&&(t.left=a-e.minWidth),n&&c&&(t.left=a-e.maxWidth),s&&u&&(t.top=l-e.minHeight),o&&u&&(t.top=l-e.maxHeight),t.width||t.height||t.left||!t.top?t.width||t.height||t.top||!t.left||(t.left=null):t.top=null,t},_getPaddingPlusBorderDimensions:function(t){for(var e=0,i=[],n=[t.css("borderTopWidth"),t.css("borderRightWidth"),t.css("borderBottomWidth"),t.css("borderLeftWidth")],o=[t.css("paddingTop"),t.css("paddingRight"),t.css("paddingBottom"),t.css("paddingLeft")];4>e;e++)i[e]=parseFloat(n[e])||0,i[e]+=parseFloat(o[e])||0;return{height:i[0]+i[2],width:i[1]+i[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var t,e=0,i=this.helper||this.element;this._proportionallyResizeElements.length>e;e++)t=this._proportionallyResizeElements[e],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(t)),t.css({height:i.height()-this.outerDimensions.height||0,width:i.width()-this.outerDimensions.width||0})},_renderProxy:function(){var e=this.element,i=this.options;this.elementOffset=e.offset(),this._helper?(this.helper=this.helper||t("<div style='overflow:hidden;'></div>"),this._addClass(this.helper,this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(t,e){return{width:this.originalSize.width+e}},w:function(t,e){var i=this.originalSize;return{left:this.originalPosition.left+e,width:i.width-e}},n:function(t,e,i){var n=this.originalSize;return{top:this.originalPosition.top+i,height:n.height-i}},s:function(t,e,i){return{height:this.originalSize.height+i}},se:function(e,i,n){return t.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,i,n]))},sw:function(e,i,n){return t.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,i,n]))},ne:function(e,i,n){return t.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,i,n]))},nw:function(e,i,n){return t.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,i,n]))}},_propagate:function(e,i){t.ui.plugin.call(this,e,[i,this.ui()]),"resize"!==e&&this._trigger(e,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),t.ui.plugin.add("resizable","animate",{stop:function(e){var i=t(this).resizable("instance"),n=i.options,o=i._proportionallyResizeElements,r=o.length&&/textarea/i.test(o[0].nodeName),s=r&&i._hasScroll(o[0],"left")?0:i.sizeDiff.height,a=r?0:i.sizeDiff.width,l={width:i.size.width-a,height:i.size.height-s},c=parseFloat(i.element.css("left"))+(i.position.left-i.originalPosition.left)||null,u=parseFloat(i.element.css("top"))+(i.position.top-i.originalPosition.top)||null;i.element.animate(t.extend(l,u&&c?{top:u,left:c}:{}),{duration:n.animateDuration,easing:n.animateEasing,step:function(){var n={width:parseFloat(i.element.css("width")),height:parseFloat(i.element.css("height")),top:parseFloat(i.element.css("top")),left:parseFloat(i.element.css("left"))};o&&o.length&&t(o[0]).css({width:n.width,height:n.height}),i._updateCache(n),i._propagate("resize",e)}})}}),t.ui.plugin.add("resizable","containment",{start:function(){var e,i,n,o,r,s,a,l=t(this).resizable("instance"),c=l.options,u=l.element,h=c.containment,d=h instanceof t?h.get(0):/parent/.test(h)?u.parent().get(0):h;d&&(l.containerElement=t(d),/document/.test(h)||h===document?(l.containerOffset={left:0,top:0},l.containerPosition={left:0,top:0},l.parentData={element:t(document),left:0,top:0,width:t(document).width(),height:t(document).height()||document.body.parentNode.scrollHeight}):(e=t(d),i=[],t(["Top","Right","Left","Bottom"]).each(function(t,n){i[t]=l._num(e.css("padding"+n))}),l.containerOffset=e.offset(),l.containerPosition=e.position(),l.containerSize={height:e.innerHeight()-i[3],width:e.innerWidth()-i[1]},n=l.containerOffset,o=l.containerSize.height,r=l.containerSize.width,s=l._hasScroll(d,"left")?d.scrollWidth:r,a=l._hasScroll(d)?d.scrollHeight:o,l.parentData={element:d,left:n.left,top:n.top,width:s,height:a}))},resize:function(e){var i,n,o,r,s=t(this).resizable("instance"),a=s.options,l=s.containerOffset,c=s.position,u=s._aspectRatio||e.shiftKey,h={top:0,left:0},d=s.containerElement,f=!0;d[0]!==document&&/static/.test(d.css("position"))&&(h=l),c.left<(s._helper?l.left:0)&&(s.size.width=s.size.width+(s._helper?s.position.left-l.left:s.position.left-h.left),u&&(s.size.height=s.size.width/s.aspectRatio,f=!1),s.position.left=a.helper?l.left:0),c.top<(s._helper?l.top:0)&&(s.size.height=s.size.height+(s._helper?s.position.top-l.top:s.position.top),u&&(s.size.width=s.size.height*s.aspectRatio,f=!1),s.position.top=s._helper?l.top:0),o=s.containerElement.get(0)===s.element.parent().get(0),r=/relative|absolute/.test(s.containerElement.css("position")),o&&r?(s.offset.left=s.parentData.left+s.position.left,s.offset.top=s.parentData.top+s.position.top):(s.offset.left=s.element.offset().left,s.offset.top=s.element.offset().top),i=Math.abs(s.sizeDiff.width+(s._helper?s.offset.left-h.left:s.offset.left-l.left)),n=Math.abs(s.sizeDiff.height+(s._helper?s.offset.top-h.top:s.offset.top-l.top)),i+s.size.width>=s.parentData.width&&(s.size.width=s.parentData.width-i,u&&(s.size.height=s.size.width/s.aspectRatio,f=!1)),n+s.size.height>=s.parentData.height&&(s.size.height=s.parentData.height-n,u&&(s.size.width=s.size.height*s.aspectRatio,f=!1)),f||(s.position.left=s.prevPosition.left,s.position.top=s.prevPosition.top,s.size.width=s.prevSize.width,s.size.height=s.prevSize.height)},stop:function(){var e=t(this).resizable("instance"),i=e.options,n=e.containerOffset,o=e.containerPosition,r=e.containerElement,s=t(e.helper),a=s.offset(),l=s.outerWidth()-e.sizeDiff.width,c=s.outerHeight()-e.sizeDiff.height;e._helper&&!i.animate&&/relative/.test(r.css("position"))&&t(this).css({left:a.left-o.left-n.left,width:l,height:c}),e._helper&&!i.animate&&/static/.test(r.css("position"))&&t(this).css({left:a.left-o.left-n.left,width:l,height:c})}}),t.ui.plugin.add("resizable","alsoResize",{start:function(){var e=t(this).resizable("instance").options;t(e.alsoResize).each(function(){var e=t(this);e.data("ui-resizable-alsoresize",{width:parseFloat(e.width()),height:parseFloat(e.height()),left:parseFloat(e.css("left")),top:parseFloat(e.css("top"))})})},resize:function(e,i){var n=t(this).resizable("instance"),o=n.options,r=n.originalSize,s=n.originalPosition,a={height:n.size.height-r.height||0,width:n.size.width-r.width||0,top:n.position.top-s.top||0,left:n.position.left-s.left||0};t(o.alsoResize).each(function(){var e=t(this),n=t(this).data("ui-resizable-alsoresize"),o={},r=e.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];t.each(r,function(t,e){var i=(n[e]||0)+(a[e]||0);i&&i>=0&&(o[e]=i||null)}),e.css(o)})},stop:function(){t(this).removeData("ui-resizable-alsoresize")}}),t.ui.plugin.add("resizable","ghost",{start:function(){var e=t(this).resizable("instance"),i=e.size;e.ghost=e.originalElement.clone(),e.ghost.css({opacity:.25,display:"block",position:"relative",height:i.height,width:i.width,margin:0,left:0,top:0}),e._addClass(e.ghost,"ui-resizable-ghost"),!1!==t.uiBackCompat&&"string"==typeof e.options.ghost&&e.ghost.addClass(this.options.ghost),e.ghost.appendTo(e.helper)},resize:function(){var e=t(this).resizable("instance");e.ghost&&e.ghost.css({position:"relative",height:e.size.height,width:e.size.width})},stop:function(){var e=t(this).resizable("instance");e.ghost&&e.helper&&e.helper.get(0).removeChild(e.ghost.get(0))}}),t.ui.plugin.add("resizable","grid",{resize:function(){var e,i=t(this).resizable("instance"),n=i.options,o=i.size,r=i.originalSize,s=i.originalPosition,a=i.axis,l="number"==typeof n.grid?[n.grid,n.grid]:n.grid,c=l[0]||1,u=l[1]||1,h=Math.round((o.width-r.width)/c)*c,d=Math.round((o.height-r.height)/u)*u,f=r.width+h,p=r.height+d,m=n.maxWidth&&f>n.maxWidth,g=n.maxHeight&&p>n.maxHeight,v=n.minWidth&&n.minWidth>f,y=n.minHeight&&n.minHeight>p;n.grid=l,v&&(f+=c),y&&(p+=u),m&&(f-=c),g&&(p-=u),/^(se|s|e)$/.test(a)?(i.size.width=f,i.size.height=p):/^(ne)$/.test(a)?(i.size.width=f,i.size.height=p,i.position.top=s.top-d):/^(sw)$/.test(a)?(i.size.width=f,i.size.height=p,i.position.left=s.left-h):((0>=p-u||0>=f-c)&&(e=i._getPaddingPlusBorderDimensions(this)),p-u>0?(i.size.height=p,i.position.top=s.top-d):(p=u-e.height,i.size.height=p,i.position.top=s.top+r.height-p),f-c>0?(i.size.width=f,i.position.left=s.left-h):(f=c-e.width,i.size.width=f,i.position.left=s.left+r.width-f))}}),t.ui.resizable,t.widget("ui.selectable",t.ui.mouse,{version:"1.12.1",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var e=this;this._addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){e.elementPos=t(e.element[0]).offset(),e.selectees=t(e.options.filter,e.element[0]),e._addClass(e.selectees,"ui-selectee"),e.selectees.each(function(){var i=t(this),n=i.offset(),o={left:n.left-e.elementPos.left,top:n.top-e.elementPos.top};t.data(this,"selectable-item",{element:this,$element:i,left:o.left,top:o.top,right:o.left+i.outerWidth(),bottom:o.top+i.outerHeight(),startselected:!1,selected:i.hasClass("ui-selected"),selecting:i.hasClass("ui-selecting"),unselecting:i.hasClass("ui-unselecting")})})},this.refresh(),this._mouseInit(),this.helper=t("<div>"),this._addClass(this.helper,"ui-selectable-helper")},_destroy:function(){this.selectees.removeData("selectable-item"),this._mouseDestroy()},_mouseStart:function(e){var i=this,n=this.options;this.opos=[e.pageX,e.pageY],this.elementPos=t(this.element[0]).offset(),this.options.disabled||(this.selectees=t(n.filter,this.element[0]),this._trigger("start",e),t(n.appendTo).append(this.helper),this.helper.css({left:e.pageX,top:e.pageY,width:0,height:0}),n.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var n=t.data(this,"selectable-item");n.startselected=!0,e.metaKey||e.ctrlKey||(i._removeClass(n.$element,"ui-selected"),n.selected=!1,i._addClass(n.$element,"ui-unselecting"),n.unselecting=!0,i._trigger("unselecting",e,{unselecting:n.element}))}),t(e.target).parents().addBack().each(function(){var n,o=t.data(this,"selectable-item");return o?(n=!e.metaKey&&!e.ctrlKey||!o.$element.hasClass("ui-selected"),i._removeClass(o.$element,n?"ui-unselecting":"ui-selected")._addClass(o.$element,n?"ui-selecting":"ui-unselecting"),o.unselecting=!n,o.selecting=n,o.selected=n,n?i._trigger("selecting",e,{selecting:o.element}):i._trigger("unselecting",e,{unselecting:o.element}),!1):void 0}))},_mouseDrag:function(e){if(this.dragged=!0,!this.options.disabled){var i,n=this,o=this.options,r=this.opos[0],s=this.opos[1],a=e.pageX,l=e.pageY;return r>a&&(i=a,a=r,r=i),s>l&&(i=l,l=s,s=i),this.helper.css({left:r,top:s,width:a-r,height:l-s}),this.selectees.each(function(){var i=t.data(this,"selectable-item"),c=!1,u={};i&&i.element!==n.element[0]&&(u.left=i.left+n.elementPos.left,u.right=i.right+n.elementPos.left,u.top=i.top+n.elementPos.top,u.bottom=i.bottom+n.elementPos.top,"touch"===o.tolerance?c=!(u.left>a||r>u.right||u.top>l||s>u.bottom):"fit"===o.tolerance&&(c=u.left>r&&a>u.right&&u.top>s&&l>u.bottom),c?(i.selected&&(n._removeClass(i.$element,"ui-selected"),i.selected=!1),i.unselecting&&(n._removeClass(i.$element,"ui-unselecting"),i.unselecting=!1),i.selecting||(n._addClass(i.$element,"ui-selecting"),i.selecting=!0,n._trigger("selecting",e,{selecting:i.element}))):(i.selecting&&((e.metaKey||e.ctrlKey)&&i.startselected?(n._removeClass(i.$element,"ui-selecting"),i.selecting=!1,n._addClass(i.$element,"ui-selected"),i.selected=!0):(n._removeClass(i.$element,"ui-selecting"),i.selecting=!1,i.startselected&&(n._addClass(i.$element,"ui-unselecting"),i.unselecting=!0),n._trigger("unselecting",e,{unselecting:i.element}))),i.selected&&(e.metaKey||e.ctrlKey||i.startselected||(n._removeClass(i.$element,"ui-selected"),i.selected=!1,n._addClass(i.$element,"ui-unselecting"),i.unselecting=!0,n._trigger("unselecting",e,{unselecting:i.element})))))}),!1}},_mouseStop:function(e){var i=this;return this.dragged=!1,t(".ui-unselecting",this.element[0]).each(function(){var n=t.data(this,"selectable-item");i._removeClass(n.$element,"ui-unselecting"),n.unselecting=!1,n.startselected=!1,i._trigger("unselected",e,{unselected:n.element})}),t(".ui-selecting",this.element[0]).each(function(){var n=t.data(this,"selectable-item");i._removeClass(n.$element,"ui-selecting")._addClass(n.$element,"ui-selected"),n.selecting=!1,n.selected=!0,n.startselected=!0,i._trigger("selected",e,{selected:n.element})}),this._trigger("stop",e),this.helper.remove(),!1}}),t.widget("ui.sortable",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(t,e,i){return t>=e&&e+i>t},_isFloating:function(t){return/left|right/.test(t.css("float"))||/inline|table-cell/.test(t.css("display"))},_create:function(){this.containerCache={},this._addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(t,e){this._super(t,e),"handle"===t&&this._setHandleClassName()},_setHandleClassName:function(){var e=this;this._removeClass(this.element.find(".ui-sortable-handle"),"ui-sortable-handle"),t.each(this.items,function(){e._addClass(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item,"ui-sortable-handle")})},_destroy:function(){this._mouseDestroy();for(var t=this.items.length-1;t>=0;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(e,i){var n=null,o=!1,r=this;return!this.reverting&&(!this.options.disabled&&"static"!==this.options.type&&(this._refreshItems(e),t(e.target).parents().each(function(){return t.data(this,r.widgetName+"-item")===r?(n=t(this),!1):void 0}),t.data(e.target,r.widgetName+"-item")===r&&(n=t(e.target)),!!n&&(!(this.options.handle&&!i&&(t(this.options.handle,n).find("*").addBack().each(function(){this===e.target&&(o=!0)}),!o))&&(this.currentItem=n,this._removeCurrentsFromItems(),!0))))},_mouseStart:function(e,i,n){var o,r,s=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(e),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,s.cursorAt&&this._adjustOffsetFromHelper(s.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),s.containment&&this._setContainment(),s.cursor&&"auto"!==s.cursor&&(r=this.document.find("body"),this.storedCursor=r.css("cursor"),r.css("cursor",s.cursor),this.storedStylesheet=t("<style>*{ cursor: "+s.cursor+" !important; }</style>").appendTo(r)),s.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",s.opacity)),s.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",s.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",e,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!n)for(o=this.containers.length-1;o>=0;o--)this.containers[o]._trigger("activate",e,this._uiHash(this));return t.ui.ddmanager&&(t.ui.ddmanager.current=this),t.ui.ddmanager&&!s.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this.dragging=!0,this._addClass(this.helper,"ui-sortable-helper"),this._mouseDrag(e),!0},_mouseDrag:function(e){var i,n,o,r,s=this.options,a=!1;for(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-e.pageY<s.scrollSensitivity?this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop+s.scrollSpeed:e.pageY-this.overflowOffset.top<s.scrollSensitivity&&(this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop-s.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-e.pageX<s.scrollSensitivity?this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft+s.scrollSpeed:e.pageX-this.overflowOffset.left<s.scrollSensitivity&&(this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft-s.scrollSpeed)):(e.pageY-this.document.scrollTop()<s.scrollSensitivity?a=this.document.scrollTop(this.document.scrollTop()-s.scrollSpeed):this.window.height()-(e.pageY-this.document.scrollTop())<s.scrollSensitivity&&(a=this.document.scrollTop(this.document.scrollTop()+s.scrollSpeed)),e.pageX-this.document.scrollLeft()<s.scrollSensitivity?a=this.document.scrollLeft(this.document.scrollLeft()-s.scrollSpeed):this.window.width()-(e.pageX-this.document.scrollLeft())<s.scrollSensitivity&&(a=this.document.scrollLeft(this.document.scrollLeft()+s.scrollSpeed))),!1!==a&&t.ui.ddmanager&&!s.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(n=this.items[i],o=n.item[0],(r=this._intersectsWithPointer(n))&&n.instance===this.currentContainer&&o!==this.currentItem[0]&&this.placeholder[1===r?"next":"prev"]()[0]!==o&&!t.contains(this.placeholder[0],o)&&("semi-dynamic"!==this.options.type||!t.contains(this.element[0],o))){if(this.direction=1===r?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(n))break;this._rearrange(e,n),this._trigger("change",e,this._uiHash());break}return this._contactContainers(e),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),this._trigger("sort",e,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(e,i){if(e){if(t.ui.ddmanager&&!this.options.dropBehaviour&&t.ui.ddmanager.drop(this,e),this.options.revert){var n=this,o=this.placeholder.offset(),r=this.options.axis,s={};r&&"x"!==r||(s.left=o.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),r&&"y"!==r||(s.top=o.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,t(this.helper).animate(s,parseInt(this.options.revert,10)||500,function(){n._clear(e)})}else this._clear(e,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp(new t.Event("mouseup",{target:null})),"original"===this.options.helper?(this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")):this.currentItem.show();for(var e=this.containers.length-1;e>=0;e--)this.containers[e]._trigger("deactivate",null,this._uiHash(this)),this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",null,this._uiHash(this)),this.containers[e].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),t.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?t(this.domPosition.prev).after(this.currentItem):t(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(e){var i=this._getItemsAsjQuery(e&&e.connected),n=[];return e=e||{},t(i).each(function(){var i=(t(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[\-=_](.+)/);i&&n.push((e.key||i[1]+"[]")+"="+(e.key&&e.expression?i[1]:i[2]))}),!n.length&&e.key&&n.push(e.key+"="),n.join("&")},toArray:function(e){var i=this._getItemsAsjQuery(e&&e.connected),n=[];return e=e||{},i.each(function(){n.push(t(e.item||this).attr(e.attribute||"id")||"")}),n},_intersectsWith:function(t){var e=this.positionAbs.left,i=e+this.helperProportions.width,n=this.positionAbs.top,o=n+this.helperProportions.height,r=t.left,s=r+t.width,a=t.top,l=a+t.height,c=this.offset.click.top,u=this.offset.click.left,h="x"===this.options.axis||n+c>a&&l>n+c,d="y"===this.options.axis||e+u>r&&s>e+u,f=h&&d;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]?f:e+this.helperProportions.width/2>r&&s>i-this.helperProportions.width/2&&n+this.helperProportions.height/2>a&&l>o-this.helperProportions.height/2},_intersectsWithPointer:function(t){var e,i,n="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),o="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width);return!!(n&&o)&&(e=this._getDragVerticalDirection(),i=this._getDragHorizontalDirection(),this.floating?"right"===i||"down"===e?2:1:e&&("down"===e?2:1))},_intersectsWithSides:function(t){var e=this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),i=this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),n=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return this.floating&&o?"right"===o&&i||"left"===o&&!i:n&&("down"===n&&e||"up"===n&&!e)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return 0!==t&&(t>0?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return 0!==t&&(t>0?"right":"left")},refresh:function(t){return this._refreshItems(t),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var t=this.options;return t.connectWith.constructor===String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(e){function i(){a.push(this)}var n,o,r,s,a=[],l=[],c=this._connectWith();if(c&&e)for(n=c.length-1;n>=0;n--)for(r=t(c[n],this.document[0]),o=r.length-1;o>=0;o--)(s=t.data(r[o],this.widgetFullName))&&s!==this&&!s.options.disabled&&l.push([t.isFunction(s.options.items)?s.options.items.call(s.element):t(s.options.items,s.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),s]);for(l.push([t.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):t(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),n=l.length-1;n>=0;n--)l[n][0].each(i);return t(a)},_removeCurrentsFromItems:function(){var e=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=t.grep(this.items,function(t){for(var i=0;e.length>i;i++)if(e[i]===t.item[0])return!1;return!0})},_refreshItems:function(e){this.items=[],this.containers=[this];var i,n,o,r,s,a,l,c,u=this.items,h=[[t.isFunction(this.options.items)?this.options.items.call(this.element[0],e,{item:this.currentItem}):t(this.options.items,this.element),this]],d=this._connectWith();if(d&&this.ready)for(i=d.length-1;i>=0;i--)for(o=t(d[i],this.document[0]),n=o.length-1;n>=0;n--)(r=t.data(o[n],this.widgetFullName))&&r!==this&&!r.options.disabled&&(h.push([t.isFunction(r.options.items)?r.options.items.call(r.element[0],e,{item:this.currentItem}):t(r.options.items,r.element),r]),this.containers.push(r));for(i=h.length-1;i>=0;i--)for(s=h[i][1],a=h[i][0],n=0,c=a.length;c>n;n++)(l=t(a[n])).data(this.widgetName+"-item",s),u.push({item:l,instance:s,width:0,height:0,left:0,top:0})},refreshPositions:function(e){this.floating=!!this.items.length&&("x"===this.options.axis||this._isFloating(this.items[0].item)),this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var i,n,o,r;for(i=this.items.length-1;i>=0;i--)(n=this.items[i]).instance!==this.currentContainer&&this.currentContainer&&n.item[0]!==this.currentItem[0]||(o=this.options.toleranceElement?t(this.options.toleranceElement,n.item):n.item,e||(n.width=o.outerWidth(),n.height=o.outerHeight()),r=o.offset(),n.left=r.left,n.top=r.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)r=this.containers[i].element.offset(),this.containers[i].containerCache.left=r.left,this.containers[i].containerCache.top=r.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(e){var i,n=(e=e||this).options;n.placeholder&&n.placeholder.constructor!==String||(i=n.placeholder,n.placeholder={element:function(){var n=e.currentItem[0].nodeName.toLowerCase(),o=t("<"+n+">",e.document[0]);return e._addClass(o,"ui-sortable-placeholder",i||e.currentItem[0].className)._removeClass(o,"ui-sortable-helper"),"tbody"===n?e._createTrPlaceholder(e.currentItem.find("tr").eq(0),t("<tr>",e.document[0]).appendTo(o)):"tr"===n?e._createTrPlaceholder(e.currentItem,o):"img"===n&&o.attr("src",e.currentItem.attr("src")),i||o.css("visibility","hidden"),o},update:function(t,o){(!i||n.forcePlaceholderSize)&&(o.height()||o.height(e.currentItem.innerHeight()-parseInt(e.currentItem.css("paddingTop")||0,10)-parseInt(e.currentItem.css("paddingBottom")||0,10)),o.width()||o.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css("paddingLeft")||0,10)-parseInt(e.currentItem.css("paddingRight")||0,10)))}}),e.placeholder=t(n.placeholder.element.call(e.element,e.currentItem)),e.currentItem.after(e.placeholder),n.placeholder.update(e,e.placeholder)},_createTrPlaceholder:function(e,i){var n=this;e.children().each(function(){t("<td>&#160;</td>",n.document[0]).attr("colspan",t(this).attr("colspan")||1).appendTo(i)})},_contactContainers:function(e){var i,n,o,r,s,a,l,c,u,h,d=null,f=null;for(i=this.containers.length-1;i>=0;i--)if(!t.contains(this.currentItem[0],this.containers[i].element[0]))if(this._intersectsWith(this.containers[i].containerCache)){if(d&&t.contains(this.containers[i].element[0],d.element[0]))continue;d=this.containers[i],f=i}else this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",e,this._uiHash(this)),this.containers[i].containerCache.over=0);if(d)if(1===this.containers.length)this.containers[f].containerCache.over||(this.containers[f]._trigger("over",e,this._uiHash(this)),this.containers[f].containerCache.over=1);else{for(o=1e4,r=null,s=(u=d.floating||this._isFloating(this.currentItem))?"left":"top",a=u?"width":"height",h=u?"pageX":"pageY",n=this.items.length-1;n>=0;n--)t.contains(this.containers[f].element[0],this.items[n].item[0])&&this.items[n].item[0]!==this.currentItem[0]&&(l=this.items[n].item.offset()[s],c=!1,e[h]-l>this.items[n][a]/2&&(c=!0),o>Math.abs(e[h]-l)&&(o=Math.abs(e[h]-l),r=this.items[n],this.direction=c?"up":"down"));if(!r&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[f])return void(this.currentContainer.containerCache.over||(this.containers[f]._trigger("over",e,this._uiHash()),this.currentContainer.containerCache.over=1));r?this._rearrange(e,r,null,!0):this._rearrange(e,null,this.containers[f].element,!0),this._trigger("change",e,this._uiHash()),this.containers[f]._trigger("change",e,this._uiHash(this)),this.currentContainer=this.containers[f],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[f]._trigger("over",e,this._uiHash(this)),this.containers[f].containerCache.over=1}},_createHelper:function(e){var i=this.options,n=t.isFunction(i.helper)?t(i.helper.apply(this.element[0],[e,this.currentItem])):"clone"===i.helper?this.currentItem.clone():this.currentItem;return n.parents("body").length||t("parent"!==i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(n[0]),n[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!n[0].style.width||i.forceHelperSize)&&n.width(this.currentItem.width()),(!n[0].style.height||i.forceHelperSize)&&n.height(this.currentItem.height()),n},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,n,o=this.options;"parent"===o.containment&&(o.containment=this.helper[0].parentNode),("document"===o.containment||"window"===o.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===o.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===o.containment?this.document.height()||document.body.parentNode.scrollHeight:this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(o.containment)||(e=t(o.containment)[0],i=t(o.containment).offset(),n="hidden"!==t(e).css("overflow"),this.containment=[i.left+(parseInt(t(e).css("borderLeftWidth"),10)||0)+(parseInt(t(e).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(t(e).css("borderTopWidth"),10)||0)+(parseInt(t(e).css("paddingTop"),10)||0)-this.margins.top,i.left+(n?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(t(e).css("borderLeftWidth"),10)||0)-(parseInt(t(e).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(n?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(t(e).css("borderTopWidth"),10)||0)-(parseInt(t(e).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(e,i){i||(i=this.position);var n="absolute"===e?1:-1,o="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,r=/(html|body)/i.test(o[0].tagName);return{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():r?0:o.scrollTop())*n,left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():r?0:o.scrollLeft())*n}},_generatePosition:function(e){var i,n,o=this.options,r=e.pageX,s=e.pageY,a="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(a[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(e.pageX-this.offset.click.left<this.containment[0]&&(r=this.containment[0]+this.offset.click.left),e.pageY-this.offset.click.top<this.containment[1]&&(s=this.containment[1]+this.offset.click.top),e.pageX-this.offset.click.left>this.containment[2]&&(r=this.containment[2]+this.offset.click.left),e.pageY-this.offset.click.top>this.containment[3]&&(s=this.containment[3]+this.offset.click.top)),o.grid&&(i=this.originalPageY+Math.round((s-this.originalPageY)/o.grid[1])*o.grid[1],s=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-o.grid[1]:i+o.grid[1]:i,n=this.originalPageX+Math.round((r-this.originalPageX)/o.grid[0])*o.grid[0],r=this.containment?n-this.offset.click.left>=this.containment[0]&&n-this.offset.click.left<=this.containment[2]?n:n-this.offset.click.left>=this.containment[0]?n-o.grid[0]:n+o.grid[0]:n)),{top:s-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:a.scrollTop()),left:r-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:a.scrollLeft())}},_rearrange:function(t,e,i,n){i?i[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?e.item[0]:e.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var o=this.counter;this._delay(function(){o===this.counter&&this.refreshPositions(!n)})},_clear:function(t,e){function i(t,e,i){return function(n){i._trigger(t,n,e._uiHash(e))}}this.reverting=!1;var n,o=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(n in this._storedCSS)("auto"===this._storedCSS[n]||"static"===this._storedCSS[n])&&(this._storedCSS[n]="");this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!e&&o.push(function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||e||o.push(function(t){this._trigger("update",t,this._uiHash())}),this!==this.currentContainer&&(e||(o.push(function(t){this._trigger("remove",t,this._uiHash())}),o.push(function(t){return function(e){t._trigger("receive",e,this._uiHash(this))}}.call(this,this.currentContainer)),o.push(function(t){return function(e){t._trigger("update",e,this._uiHash(this))}}.call(this,this.currentContainer)))),n=this.containers.length-1;n>=0;n--)e||o.push(i("deactivate",this,this.containers[n])),this.containers[n].containerCache.over&&(o.push(i("out",this,this.containers[n])),this.containers[n].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,e||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!e){for(n=0;o.length>n;n++)o[n].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){!1===t.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(e){var i=e||this;return{helper:i.helper,placeholder:i.placeholder||t([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:e?e.element:null}}}),t.widget("ui.accordion",{version:"1.12.1",options:{active:0,animate:{},classes:{"ui-accordion-header":"ui-corner-top","ui-accordion-header-collapsed":"ui-corner-all","ui-accordion-content":"ui-corner-bottom"},collapsible:!1,event:"click",header:"> li > :first-child, > :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var e=this.options;this.prevShow=this.prevHide=t(),this._addClass("ui-accordion","ui-widget ui-helper-reset"),this.element.attr("role","tablist"),e.collapsible||!1!==e.active&&null!=e.active||(e.active=0),this._processPanels(),0>e.active&&(e.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():t()}},_createIcons:function(){var e,i,n=this.options.icons;n&&(e=t("<span>"),this._addClass(e,"ui-accordion-header-icon","ui-icon "+n.header),e.prependTo(this.headers),i=this.active.children(".ui-accordion-header-icon"),this._removeClass(i,n.header)._addClass(i,null,n.activeHeader)._addClass(this.headers,"ui-accordion-icons"))},_destroyIcons:function(){this._removeClass(this.headers,"ui-accordion-icons"),this.headers.children(".ui-accordion-header-icon").remove()},_destroy:function(){var t;this.element.removeAttr("role"),this.headers.removeAttr("role aria-expanded aria-selected aria-controls tabIndex").removeUniqueId(),this._destroyIcons(),t=this.headers.next().css("display","").removeAttr("role aria-hidden aria-labelledby").removeUniqueId(),"content"!==this.options.heightStyle&&t.css("height","")},_setOption:function(t,e){return"active"===t?void this._activate(e):("event"===t&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(e)),this._super(t,e),"collapsible"!==t||e||!1!==this.options.active||this._activate(0),void("icons"===t&&(this._destroyIcons(),e&&this._createIcons())))},_setOptionDisabled:function(t){this._super(t),this.element.attr("aria-disabled",t),this._toggleClass(null,"ui-state-disabled",!!t),this._toggleClass(this.headers.add(this.headers.next()),null,"ui-state-disabled",!!t)},_keydown:function(e){if(!e.altKey&&!e.ctrlKey){var i=t.ui.keyCode,n=this.headers.length,o=this.headers.index(e.target),r=!1;switch(e.keyCode){case i.RIGHT:case i.DOWN:r=this.headers[(o+1)%n];break;case i.LEFT:case i.UP:r=this.headers[(o-1+n)%n];break;case i.SPACE:case i.ENTER:this._eventHandler(e);break;case i.HOME:r=this.headers[0];break;case i.END:r=this.headers[n-1]}r&&(t(e.target).attr("tabIndex",-1),t(r).attr("tabIndex",0),t(r).trigger("focus"),e.preventDefault())}},_panelKeyDown:function(e){e.keyCode===t.ui.keyCode.UP&&e.ctrlKey&&t(e.currentTarget).prev().trigger("focus")},refresh:function(){var e=this.options;this._processPanels(),!1===e.active&&!0===e.collapsible||!this.headers.length?(e.active=!1,this.active=t()):!1===e.active?this._activate(0):this.active.length&&!t.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(e.active=!1,this.active=t()):this._activate(Math.max(0,e.active-1)):e.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){var t=this.headers,e=this.panels;this.headers=this.element.find(this.options.header),this._addClass(this.headers,"ui-accordion-header ui-accordion-header-collapsed","ui-state-default"),this.panels=this.headers.next().filter(":not(.ui-accordion-content-active)").hide(),this._addClass(this.panels,"ui-accordion-content","ui-helper-reset ui-widget-content"),e&&(this._off(t.not(this.headers)),this._off(e.not(this.panels)))},_refresh:function(){var e,i=this.options,n=i.heightStyle,o=this.element.parent();this.active=this._findActive(i.active),this._addClass(this.active,"ui-accordion-header-active","ui-state-active")._removeClass(this.active,"ui-accordion-header-collapsed"),this._addClass(this.active.next(),"ui-accordion-content-active"),this.active.next().show(),this.headers.attr("role","tab").each(function(){var e=t(this),i=e.uniqueId().attr("id"),n=e.next(),o=n.uniqueId().attr("id");e.attr("aria-controls",o),n.attr("aria-labelledby",i)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(i.event),"fill"===n?(e=o.height(),this.element.siblings(":visible").each(function(){var i=t(this),n=i.css("position");"absolute"!==n&&"fixed"!==n&&(e-=i.outerHeight(!0))}),this.headers.each(function(){e-=t(this).outerHeight(!0)}),this.headers.next().each(function(){t(this).height(Math.max(0,e-t(this).innerHeight()+t(this).height()))}).css("overflow","auto")):"auto"===n&&(e=0,this.headers.next().each(function(){var i=t(this).is(":visible");i||t(this).show(),e=Math.max(e,t(this).css("height","").height()),i||t(this).hide()}).height(e))},_activate:function(e){var i=this._findActive(e)[0];i!==this.active[0]&&(i=i||this.active[0],this._eventHandler({target:i,currentTarget:i,preventDefault:t.noop}))},_findActive:function(e){return"number"==typeof e?this.headers.eq(e):t()},_setupEvents:function(e){var i={keydown:"_keydown"};e&&t.each(e.split(" "),function(t,e){i[e]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,i),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(e){var i,n,o=this.options,r=this.active,s=t(e.currentTarget),a=s[0]===r[0],l=a&&o.collapsible,c=l?t():s.next(),u={oldHeader:r,oldPanel:r.next(),newHeader:l?t():s,newPanel:c};e.preventDefault(),a&&!o.collapsible||!1===this._trigger("beforeActivate",e,u)||(o.active=!l&&this.headers.index(s),this.active=a?t():s,this._toggle(u),this._removeClass(r,"ui-accordion-header-active","ui-state-active"),o.icons&&(i=r.children(".ui-accordion-header-icon"),this._removeClass(i,null,o.icons.activeHeader)._addClass(i,null,o.icons.header)),a||(this._removeClass(s,"ui-accordion-header-collapsed")._addClass(s,"ui-accordion-header-active","ui-state-active"),o.icons&&(n=s.children(".ui-accordion-header-icon"),this._removeClass(n,null,o.icons.header)._addClass(n,null,o.icons.activeHeader)),this._addClass(s.next(),"ui-accordion-content-active")))},_toggle:function(e){var i=e.newPanel,n=this.prevShow.length?this.prevShow:e.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=i,this.prevHide=n,this.options.animate?this._animate(i,n,e):(n.hide(),i.show(),this._toggleComplete(e)),n.attr({"aria-hidden":"true"}),n.prev().attr({"aria-selected":"false","aria-expanded":"false"}),i.length&&n.length?n.prev().attr({tabIndex:-1,"aria-expanded":"false"}):i.length&&this.headers.filter(function(){return 0===parseInt(t(this).attr("tabIndex"),10)}).attr("tabIndex",-1),i.attr("aria-hidden","false").prev().attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_animate:function(t,e,i){var n,o,r,s=this,a=0,l=t.css("box-sizing"),c=t.length&&(!e.length||t.index()<e.index()),u=this.options.animate||{},h=c&&u.down||u,d=function(){s._toggleComplete(i)};return"number"==typeof h&&(r=h),"string"==typeof h&&(o=h),o=o||h.easing||u.easing,r=r||h.duration||u.duration,e.length?t.length?(n=t.show().outerHeight(),e.animate(this.hideProps,{duration:r,easing:o,step:function(t,e){e.now=Math.round(t)}}),void t.hide().animate(this.showProps,{duration:r,easing:o,complete:d,step:function(t,i){i.now=Math.round(t),"height"!==i.prop?"content-box"===l&&(a+=i.now):"content"!==s.options.heightStyle&&(i.now=Math.round(n-e.outerHeight()-a),a=0)}})):e.animate(this.hideProps,r,o,d):t.animate(this.showProps,r,o,d)},_toggleComplete:function(t){var e=t.oldPanel,i=e.prev();this._removeClass(e,"ui-accordion-content-active"),this._removeClass(i,"ui-accordion-header-active")._addClass(i,"ui-accordion-header-collapsed"),e.length&&(e.parent()[0].className=e.parent()[0].className),this._trigger("activate",null,t)}}),t.widget("ui.menu",{version:"1.12.1",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-caret-1-e"},items:"> *",menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().attr({role:this.options.role,tabIndex:0}),this._addClass("ui-menu","ui-widget ui-widget-content"),this._on({"mousedown .ui-menu-item":function(t){t.preventDefault()},"click .ui-menu-item":function(e){var i=t(e.target),n=t(t.ui.safeActiveElement(this.document[0]));!this.mouseHandled&&i.not(".ui-state-disabled").length&&(this.select(e),e.isPropagationStopped()||(this.mouseHandled=!0),i.has(".ui-menu").length?this.expand(e):!this.element.is(":focus")&&n.closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(e){if(!this.previousFilter){var i=t(e.target).closest(".ui-menu-item"),n=t(e.currentTarget);i[0]===n[0]&&(this._removeClass(n.siblings().children(".ui-state-active"),null,"ui-state-active"),this.focus(e,n))}},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(t,e){var i=this.active||this.element.find(this.options.items).eq(0);e||this.focus(t,i)},blur:function(e){this._delay(function(){!t.contains(this.element[0],t.ui.safeActiveElement(this.document[0]))&&this.collapseAll(e)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(t){this._closeOnDocumentClick(t)&&this.collapseAll(t),this.mouseHandled=!1}})},_destroy:function(){var e=this.element.find(".ui-menu-item").removeAttr("role aria-disabled").children(".ui-menu-item-wrapper").removeUniqueId().removeAttr("tabIndex role aria-haspopup");this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeAttr("role aria-labelledby aria-expanded aria-hidden aria-disabled tabIndex").removeUniqueId().show(),e.children().each(function(){var e=t(this);e.data("ui-menu-submenu-caret")&&e.remove()})},_keydown:function(e){var i,n,o,r,s=!0;switch(e.keyCode){case t.ui.keyCode.PAGE_UP:this.previousPage(e);break;case t.ui.keyCode.PAGE_DOWN:this.nextPage(e);break;case t.ui.keyCode.HOME:this._move("first","first",e);break;case t.ui.keyCode.END:this._move("last","last",e);break;case t.ui.keyCode.UP:this.previous(e);break;case t.ui.keyCode.DOWN:this.next(e);break;case t.ui.keyCode.LEFT:this.collapse(e);break;case t.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(e);break;case t.ui.keyCode.ENTER:case t.ui.keyCode.SPACE:this._activate(e);break;case t.ui.keyCode.ESCAPE:this.collapse(e);break;default:s=!1,n=this.previousFilter||"",r=!1,o=e.keyCode>=96&&105>=e.keyCode?""+(e.keyCode-96):String.fromCharCode(e.keyCode),clearTimeout(this.filterTimer),o===n?r=!0:o=n+o,i=this._filterMenuItems(o),(i=r&&-1!==i.index(this.active.next())?this.active.nextAll(".ui-menu-item"):i).length||(o=String.fromCharCode(e.keyCode),i=this._filterMenuItems(o)),i.length?(this.focus(e,i),this.previousFilter=o,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter}s&&e.preventDefault()},_activate:function(t){this.active&&!this.active.is(".ui-state-disabled")&&(this.active.children("[aria-haspopup='true']").length?this.expand(t):this.select(t))},refresh:function(){var e,i,n,o,r=this,s=this.options.icons.submenu,a=this.element.find(this.options.menus);this._toggleClass("ui-menu-icons",null,!!this.element.find(".ui-icon").length),i=a.filter(":not(.ui-menu)").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var e=t(this),i=e.prev(),n=t("<span>").data("ui-menu-submenu-caret",!0);r._addClass(n,"ui-menu-icon","ui-icon "+s),i.attr("aria-haspopup","true").prepend(n),e.attr("aria-labelledby",i.attr("id"))}),this._addClass(i,"ui-menu","ui-widget ui-widget-content ui-front"),(e=a.add(this.element).find(this.options.items)).not(".ui-menu-item").each(function(){var e=t(this);r._isDivider(e)&&r._addClass(e,"ui-menu-divider","ui-widget-content")}),o=(n=e.not(".ui-menu-item, .ui-menu-divider")).children().not(".ui-menu").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),this._addClass(n,"ui-menu-item")._addClass(o,"ui-menu-item-wrapper"),e.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!t.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(t,e){if("icons"===t){var i=this.element.find(".ui-menu-icon");this._removeClass(i,null,this.options.icons.submenu)._addClass(i,null,e.submenu)}this._super(t,e)},_setOptionDisabled:function(t){this._super(t),this.element.attr("aria-disabled",t+""),this._toggleClass(null,"ui-state-disabled",!!t)},focus:function(t,e){var i,n,o;this.blur(t,t&&"focus"===t.type),this._scrollIntoView(e),this.active=e.first(),n=this.active.children(".ui-menu-item-wrapper"),this._addClass(n,null,"ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",n.attr("id")),o=this.active.parent().closest(".ui-menu-item").children(".ui-menu-item-wrapper"),this._addClass(o,null,"ui-state-active"),t&&"keydown"===t.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),(i=e.children(".ui-menu")).length&&t&&/^mouse/.test(t.type)&&this._startOpening(i),this.activeMenu=e.parent(),this._trigger("focus",t,{item:e})},_scrollIntoView:function(e){var i,n,o,r,s,a;this._hasScroll()&&(i=parseFloat(t.css(this.activeMenu[0],"borderTopWidth"))||0,n=parseFloat(t.css(this.activeMenu[0],"paddingTop"))||0,o=e.offset().top-this.activeMenu.offset().top-i-n,r=this.activeMenu.scrollTop(),s=this.activeMenu.height(),a=e.outerHeight(),0>o?this.activeMenu.scrollTop(r+o):o+a>s&&this.activeMenu.scrollTop(r+o-s+a))},blur:function(t,e){e||clearTimeout(this.timer),this.active&&(this._removeClass(this.active.children(".ui-menu-item-wrapper"),null,"ui-state-active"),this._trigger("blur",t,{item:this.active}),this.active=null)},_startOpening:function(t){clearTimeout(this.timer),"true"===t.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(t)},this.delay))},_open:function(e){var i=t.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(e.parents(".ui-menu")).hide().attr("aria-hidden","true"),e.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(e,i){clearTimeout(this.timer),this.timer=this._delay(function(){var n=i?this.element:t(e&&e.target).closest(this.element.find(".ui-menu"));n.length||(n=this.element),this._close(n),this.blur(e),this._removeClass(n.find(".ui-state-active"),null,"ui-state-active"),this.activeMenu=n},this.delay)},_close:function(t){t||(t=this.active?this.active.parent():this.element),t.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false")},_closeOnDocumentClick:function(e){return!t(e.target).closest(".ui-menu").length},_isDivider:function(t){return!/[^\-\u2014\u2013\s]/.test(t.text())},collapse:function(t){var e=this.active&&this.active.parent().closest(".ui-menu-item",this.element);e&&e.length&&(this._close(),this.focus(t,e))},expand:function(t){var e=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();e&&e.length&&(this._open(e.parent()),this._delay(function(){this.focus(t,e)}))},next:function(t){this._move("next","first",t)},previous:function(t){this._move("prev","last",t)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(t,e,i){var n;this.active&&(n="first"===t||"last"===t?this.active["first"===t?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[t+"All"](".ui-menu-item").eq(0)),n&&n.length&&this.active||(n=this.activeMenu.find(this.options.items)[e]()),this.focus(i,n)},nextPage:function(e){var i,n,o;return this.active?void(this.isLastItem()||(this._hasScroll()?(n=this.active.offset().top,o=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return 0>(i=t(this)).offset().top-n-o}),this.focus(e,i)):this.focus(e,this.activeMenu.find(this.options.items)[this.active?"last":"first"]()))):void this.next(e)},previousPage:function(e){var i,n,o;return this.active?void(this.isFirstItem()||(this._hasScroll()?(n=this.active.offset().top,o=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return(i=t(this)).offset().top-n+o>0}),this.focus(e,i)):this.focus(e,this.activeMenu.find(this.options.items).first()))):void this.next(e)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(e){this.active=this.active||t(e.target).closest(".ui-menu-item");var i={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(e,!0),this._trigger("select",e,i)},_filterMenuItems:function(e){var i=e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),n=RegExp("^"+i,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return n.test(t.trim(t(this).children(".ui-menu-item-wrapper").text()))})}}),t.widget("ui.autocomplete",{version:"1.12.1",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var e,i,n,o=this.element[0].nodeName.toLowerCase(),r="textarea"===o,s="input"===o;this.isMultiLine=r||!s&&this._isContentEditable(this.element),this.valueMethod=this.element[r||s?"val":"text"],this.isNewMenu=!0,this._addClass("ui-autocomplete-input"),this.element.attr("autocomplete","off"),this._on(this.element,{keydown:function(o){if(this.element.prop("readOnly"))return e=!0,n=!0,void(i=!0);e=!1,n=!1,i=!1;var r=t.ui.keyCode;switch(o.keyCode){case r.PAGE_UP:e=!0,this._move("previousPage",o);break;case r.PAGE_DOWN:e=!0,this._move("nextPage",o);break;case r.UP:e=!0,this._keyEvent("previous",o);break;case r.DOWN:e=!0,this._keyEvent("next",o);break;case r.ENTER:this.menu.active&&(e=!0,o.preventDefault(),this.menu.select(o));break;case r.TAB:this.menu.active&&this.menu.select(o);break;case r.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(o),o.preventDefault());break;default:i=!0,this._searchTimeout(o)}},keypress:function(n){if(e)return e=!1,void((!this.isMultiLine||this.menu.element.is(":visible"))&&n.preventDefault());if(!i){var o=t.ui.keyCode;switch(n.keyCode){case o.PAGE_UP:this._move("previousPage",n);break;case o.PAGE_DOWN:this._move("nextPage",n);break;case o.UP:this._keyEvent("previous",n);break;case o.DOWN:this._keyEvent("next",n)}}},input:function(t){return n?(n=!1,void t.preventDefault()):void this._searchTimeout(t)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(t){return this.cancelBlur?void delete this.cancelBlur:(clearTimeout(this.searching),this.close(t),void this._change(t))}}),this._initSource(),this.menu=t("<ul>").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance"),this._addClass(this.menu.element,"ui-autocomplete","ui-front"),this._on(this.menu.element,{mousedown:function(e){e.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,this.element[0]!==t.ui.safeActiveElement(this.document[0])&&this.element.trigger("focus")})},menufocus:function(e,i){var n,o;return this.isNewMenu&&(this.isNewMenu=!1,e.originalEvent&&/^mouse/.test(e.originalEvent.type))?(this.menu.blur(),void this.document.one("mousemove",function(){t(e.target).trigger(e.originalEvent)})):(o=i.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",e,{item:o})&&e.originalEvent&&/^key/.test(e.originalEvent.type)&&this._value(o.value),void((n=i.item.attr("aria-label")||o.value)&&t.trim(n).length&&(this.liveRegion.children().hide(),t("<div>").text(n).appendTo(this.liveRegion))))},menuselect:function(e,i){var n=i.item.data("ui-autocomplete-item"),o=this.previous;this.element[0]!==t.ui.safeActiveElement(this.document[0])&&(this.element.trigger("focus"),this.previous=o,this._delay(function(){this.previous=o,this.selectedItem=n})),!1!==this._trigger("select",e,{item:n})&&this._value(n.value),this.term=this._value(),this.close(e),this.selectedItem=n}}),this.liveRegion=t("<div>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(t,e){this._super(t,e),"source"===t&&this._initSource(),"appendTo"===t&&this.menu.element.appendTo(this._appendTo()),"disabled"===t&&e&&this.xhr&&this.xhr.abort()},_isEventTargetInWidget:function(e){var i=this.menu.element[0];return e.target===this.element[0]||e.target===i||t.contains(i,e.target)},_closeOnClickOutside:function(t){this._isEventTargetInWidget(t)||this.close()},_appendTo:function(){var e=this.options.appendTo;return e&&(e=e.jquery||e.nodeType?t(e):this.document.find(e).eq(0)),e&&e[0]||(e=this.element.closest(".ui-front, dialog")),e.length||(e=this.document[0].body),e},_initSource:function(){var e,i,n=this;t.isArray(this.options.source)?(e=this.options.source,this.source=function(i,n){n(t.ui.autocomplete.filter(e,i.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(e,o){n.xhr&&n.xhr.abort(),n.xhr=t.ajax({url:i,data:e,dataType:"json",success:function(t){o(t)},error:function(){o([])}})}):this.source=this.options.source},_searchTimeout:function(t){clearTimeout(this.searching),this.searching=this._delay(function(){var e=this.term===this._value(),i=this.menu.element.is(":visible"),n=t.altKey||t.ctrlKey||t.metaKey||t.shiftKey;(!e||e&&!i&&!n)&&(this.selectedItem=null,this.search(null,t))},this.options.delay)},search:function(t,e){return t=null!=t?t:this._value(),this.term=this._value(),t.length<this.options.minLength?this.close(e):!1!==this._trigger("search",e)?this._search(t):void 0},_search:function(t){this.pending++,this._addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:t},this._response())},_response:function(){var e=++this.requestIndex;return t.proxy(function(t){e===this.requestIndex&&this.__response(t),this.pending--,this.pending||this._removeClass("ui-autocomplete-loading")},this)},__response:function(t){t&&(t=this._normalize(t)),this._trigger("response",null,{content:t}),!this.options.disabled&&t&&t.length&&!this.cancelSearch?(this._suggest(t),this._trigger("open")):this._close()},close:function(t){this.cancelSearch=!0,this._close(t)},_close:function(t){this._off(this.document,"mousedown"),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",t))},_change:function(t){this.previous!==this._value()&&this._trigger("change",t,{item:this.selectedItem})},_normalize:function(e){return e.length&&e[0].label&&e[0].value?e:t.map(e,function(e){return"string"==typeof e?{label:e,value:e}:t.extend({},e,{label:e.label||e.value,value:e.value||e.label})})},_suggest:function(e){var i=this.menu.element.empty();this._renderMenu(i,e),this.isNewMenu=!0,this.menu.refresh(),i.show(),this._resizeMenu(),i.position(t.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(),this._on(this.document,{mousedown:"_closeOnClickOutside"})},_resizeMenu:function(){var t=this.menu.element;t.outerWidth(Math.max(t.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(e,i){var n=this;t.each(i,function(t,i){n._renderItemData(e,i)})},_renderItemData:function(t,e){return this._renderItem(t,e).data("ui-autocomplete-item",e)},_renderItem:function(e,i){return t("<li>").append(t("<div>").text(i.label)).appendTo(e)},_move:function(t,e){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(t)||this.menu.isLastItem()&&/^next/.test(t)?(this.isMultiLine||this._value(this.term),void this.menu.blur()):void this.menu[t](e):void this.search(null,e)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(t,e){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(t,e),e.preventDefault())},_isContentEditable:function(t){if(!t.length)return!1;var e=t.prop("contentEditable");return"inherit"===e?this._isContentEditable(t.parent()):"true"===e}}),t.extend(t.ui.autocomplete,{escapeRegex:function(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(e,i){var n=RegExp(t.ui.autocomplete.escapeRegex(i),"i");return t.grep(e,function(t){return n.test(t.label||t.value||t)})}}),t.widget("ui.autocomplete",t.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(t){return t+(t>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var i;this._superApply(arguments),this.options.disabled||this.cancelSearch||(i=e&&e.length?this.options.messages.results(e.length):this.options.messages.noResults,this.liveRegion.children().hide(),t("<div>").text(i).appendTo(this.liveRegion))}}),t.ui.autocomplete,t.widget("ui.checkboxradio",[t.ui.formResetMixin,{version:"1.12.1",options:{disabled:null,label:null,icon:!0,classes:{"ui-checkboxradio-label":"ui-corner-all","ui-checkboxradio-icon":"ui-corner-all"}},_getCreateOptions:function(){var e,i,n=this,o=this._super()||{};return this._readType(),i=this.element.labels(),this.label=t(i[i.length-1]),this.label.length||t.error("No label found for checkboxradio widget"),this.originalLabel="",this.label.contents().not(this.element[0]).each(function(){n.originalLabel+=3===this.nodeType?t(this).text():this.outerHTML}),this.originalLabel&&(o.label=this.originalLabel),null!=(e=this.element[0].disabled)&&(o.disabled=e),o},_create:function(){var t=this.element[0].checked;this._bindFormResetHandler(),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled),this._setOption("disabled",this.options.disabled),this._addClass("ui-checkboxradio","ui-helper-hidden-accessible"),this._addClass(this.label,"ui-checkboxradio-label","ui-button ui-widget"),"radio"===this.type&&this._addClass(this.label,"ui-checkboxradio-radio-label"),this.options.label&&this.options.label!==this.originalLabel?this._updateLabel():this.originalLabel&&(this.options.label=this.originalLabel),this._enhance(),t&&(this._addClass(this.label,"ui-checkboxradio-checked","ui-state-active"),this.icon&&this._addClass(this.icon,null,"ui-state-hover")),this._on({change:"_toggleClasses",focus:function(){this._addClass(this.label,null,"ui-state-focus ui-visual-focus")},blur:function(){this._removeClass(this.label,null,"ui-state-focus ui-visual-focus")}})},_readType:function(){var e=this.element[0].nodeName.toLowerCase();this.type=this.element[0].type,"input"===e&&/radio|checkbox/.test(this.type)||t.error("Can't create checkboxradio on element.nodeName="+e+" and element.type="+this.type)},_enhance:function(){this._updateIcon(this.element[0].checked)},widget:function(){return this.label},_getRadioGroup:function(){var e=this.element[0].name,i="input[name='"+t.ui.escapeSelector(e)+"']";return e?(this.form.length?t(this.form[0].elements).filter(i):t(i).filter(function(){return 0===t(this).form().length})).not(this.element):t([])},_toggleClasses:function(){var e=this.element[0].checked;this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",e),this.options.icon&&"checkbox"===this.type&&this._toggleClass(this.icon,null,"ui-icon-check ui-state-checked",e)._toggleClass(this.icon,null,"ui-icon-blank",!e),"radio"===this.type&&this._getRadioGroup().each(function(){var e=t(this).checkboxradio("instance");e&&e._removeClass(e.label,"ui-checkboxradio-checked","ui-state-active")})},_destroy:function(){this._unbindFormResetHandler(),this.icon&&(this.icon.remove(),this.iconSpace.remove())},_setOption:function(t,e){return"label"!==t||e?(this._super(t,e),"disabled"===t?(this._toggleClass(this.label,null,"ui-state-disabled",e),void(this.element[0].disabled=e)):void this.refresh()):void 0},_updateIcon:function(e){var i="ui-icon ui-icon-background ";this.options.icon?(this.icon||(this.icon=t("<span>"),this.iconSpace=t("<span> </span>"),this._addClass(this.iconSpace,"ui-checkboxradio-icon-space")),"checkbox"===this.type?(i+=e?"ui-icon-check ui-state-checked":"ui-icon-blank",this._removeClass(this.icon,null,e?"ui-icon-blank":"ui-icon-check")):i+="ui-icon-blank",this._addClass(this.icon,"ui-checkboxradio-icon",i),e||this._removeClass(this.icon,null,"ui-icon-check ui-state-checked"),this.icon.prependTo(this.label).after(this.iconSpace)):void 0!==this.icon&&(this.icon.remove(),this.iconSpace.remove(),delete this.icon)},_updateLabel:function(){var t=this.label.contents().not(this.element[0]);this.icon&&(t=t.not(this.icon[0])),this.iconSpace&&(t=t.not(this.iconSpace[0])),t.remove(),this.label.append(this.options.label)},refresh:function(){var t=this.element[0].checked,e=this.element[0].disabled;this._updateIcon(t),this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",t),null!==this.options.label&&this._updateLabel(),e!==this.options.disabled&&this._setOptions({disabled:e})}}]),t.ui.checkboxradio;var r=/ui-corner-([a-z]){2,6}/g;t.widget("ui.controlgroup",{version:"1.12.1",defaultElement:"<div>",options:{direction:"horizontal",disabled:null,onlyVisible:!0,items:{button:"input[type=button], input[type=submit], input[type=reset], button, a",controlgroupLabel:".ui-controlgroup-label",checkboxradio:"input[type='checkbox'], input[type='radio']",selectmenu:"select",spinner:".ui-spinner-input"}},_create:function(){this._enhance()},_enhance:function(){this.element.attr("role","toolbar"),this.refresh()},_destroy:function(){this._callChildMethod("destroy"),this.childWidgets.removeData("ui-controlgroup-data"),this.element.removeAttr("role"),this.options.items.controlgroupLabel&&this.element.find(this.options.items.controlgroupLabel).find(".ui-controlgroup-label-contents").contents().unwrap()},_initWidgets:function(){var e=this,i=[];t.each(this.options.items,function(n,o){var r,s={};return o?"controlgroupLabel"===n?((r=e.element.find(o)).each(function(){var e=t(this);e.children(".ui-controlgroup-label-contents").length||e.contents().wrapAll("<span class='ui-controlgroup-label-contents'></span>")}),e._addClass(r,null,"ui-widget ui-widget-content ui-state-default"),void(i=i.concat(r.get()))):void(t.fn[n]&&(s=e["_"+n+"Options"]?e["_"+n+"Options"]("middle"):{classes:{}},e.element.find(o).each(function(){var o=t(this),r=o[n]("instance"),a=t.widget.extend({},s);if("button"!==n||!o.parent(".ui-spinner").length){r||(r=o[n]()[n]("instance")),r&&(a.classes=e._resolveClassesValues(a.classes,r)),o[n](a);var l=o[n]("widget");t.data(l[0],"ui-controlgroup-data",r||o[n]("instance")),i.push(l[0])}}))):void 0}),this.childWidgets=t(t.unique(i)),this._addClass(this.childWidgets,"ui-controlgroup-item")},_callChildMethod:function(e){this.childWidgets.each(function(){var i=t(this).data("ui-controlgroup-data");i&&i[e]&&i[e]()})},_updateCornerClass:function(t,e){var i=this._buildSimpleOptions(e,"label").classes.label;this._removeClass(t,null,"ui-corner-top ui-corner-bottom ui-corner-left ui-corner-right ui-corner-all"),this._addClass(t,null,i)},_buildSimpleOptions:function(t,e){var i="vertical"===this.options.direction,n={classes:{}};return n.classes[e]={middle:"",first:"ui-corner-"+(i?"top":"left"),last:"ui-corner-"+(i?"bottom":"right"),only:"ui-corner-all"}[t],n},_spinnerOptions:function(t){var e=this._buildSimpleOptions(t,"ui-spinner");return e.classes["ui-spinner-up"]="",e.classes["ui-spinner-down"]="",e},_buttonOptions:function(t){return this._buildSimpleOptions(t,"ui-button")},_checkboxradioOptions:function(t){return this._buildSimpleOptions(t,"ui-checkboxradio-label")},_selectmenuOptions:function(t){var e="vertical"===this.options.direction;return{width:!!e&&"auto",classes:{middle:{"ui-selectmenu-button-open":"","ui-selectmenu-button-closed":""},first:{"ui-selectmenu-button-open":"ui-corner-"+(e?"top":"tl"),"ui-selectmenu-button-closed":"ui-corner-"+(e?"top":"left")},last:{"ui-selectmenu-button-open":e?"":"ui-corner-tr","ui-selectmenu-button-closed":"ui-corner-"+(e?"bottom":"right")},only:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"}}[t]}},_resolveClassesValues:function(e,i){var n={};return t.each(e,function(o){var s=i.options.classes[o]||"";s=t.trim(s.replace(r,"")),n[o]=(s+" "+e[o]).replace(/\s+/g," ")}),n},_setOption:function(t,e){return"direction"===t&&this._removeClass("ui-controlgroup-"+this.options.direction),this._super(t,e),"disabled"===t?void this._callChildMethod(e?"disable":"enable"):void this.refresh()},refresh:function(){var e,i=this;this._addClass("ui-controlgroup ui-controlgroup-"+this.options.direction),"horizontal"===this.options.direction&&this._addClass(null,"ui-helper-clearfix"),this._initWidgets(),e=this.childWidgets,this.options.onlyVisible&&(e=e.filter(":visible")),e.length&&(t.each(["first","last"],function(t,n){var o=e[n]().data("ui-controlgroup-data");if(o&&i["_"+o.widgetName+"Options"]){var r=i["_"+o.widgetName+"Options"](1===e.length?"only":n);r.classes=i._resolveClassesValues(r.classes,o),o.element[o.widgetName](r)}else i._updateCornerClass(e[n](),n)}),this._callChildMethod("refresh"))}}),t.widget("ui.slider",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"slide",options:{animate:!1,classes:{"ui-slider":"ui-corner-all","ui-slider-handle":"ui-corner-all","ui-slider-range":"ui-corner-all ui-widget-header"},distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this._addClass("ui-slider ui-slider-"+this.orientation,"ui-widget ui-widget-content"),this._refresh(),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var e,i,n=this.options,o=this.element.find(".ui-slider-handle"),r=[];for(i=n.values&&n.values.length||1,o.length>i&&(o.slice(i).remove(),o=o.slice(0,i)),e=o.length;i>e;e++)r.push("<span tabindex='0'></span>");this.handles=o.add(t(r.join("")).appendTo(this.element)),this._addClass(this.handles,"ui-slider-handle","ui-state-default"),this.handle=this.handles.eq(0),this.handles.each(function(e){t(this).data("ui-slider-handle-index",e).attr("tabIndex",0)})},_createRange:function(){var e=this.options;e.range?(!0===e.range&&(e.values?e.values.length&&2!==e.values.length?e.values=[e.values[0],e.values[0]]:t.isArray(e.values)&&(e.values=e.values.slice(0)):e.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?(this._removeClass(this.range,"ui-slider-range-min ui-slider-range-max"),this.range.css({left:"",bottom:""})):(this.range=t("<div>").appendTo(this.element),this._addClass(this.range,"ui-slider-range")),("min"===e.range||"max"===e.range)&&this._addClass(this.range,"ui-slider-range-"+e.range)):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this._mouseDestroy()},_mouseCapture:function(e){var i,n,o,r,s,a,l,c=this,u=this.options;return!u.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:e.pageX,y:e.pageY},n=this._normValueFromMouse(i),o=this._valueMax()-this._valueMin()+1,this.handles.each(function(e){var i=Math.abs(n-c.values(e));(o>i||o===i&&(e===c._lastChangedValue||c.values(e)===u.min))&&(o=i,r=t(this),s=e)}),!1!==this._start(e,s)&&(this._mouseSliding=!0,this._handleIndex=s,this._addClass(r,null,"ui-state-active"),r.trigger("focus"),a=r.offset(),l=!t(e.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=l?{left:0,top:0}:{left:e.pageX-a.left-r.width()/2,top:e.pageY-a.top-r.height()/2-(parseInt(r.css("borderTopWidth"),10)||0)-(parseInt(r.css("borderBottomWidth"),10)||0)+(parseInt(r.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(e,s,n),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(t){var e={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(e);return this._slide(t,this._handleIndex,i),!1},_mouseStop:function(t){return this._removeClass(this.handles,null,"ui-state-active"),this._mouseSliding=!1,this._stop(t,this._handleIndex),this._change(t,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(t){var e,i,n,o,r;return"horizontal"===this.orientation?(e=this.elementSize.width,i=t.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(e=this.elementSize.height,i=t.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),(n=i/e)>1&&(n=1),0>n&&(n=0),"vertical"===this.orientation&&(n=1-n),o=this._valueMax()-this._valueMin(),r=this._valueMin()+n*o,this._trimAlignValue(r)},_uiHash:function(t,e,i){var n={handle:this.handles[t],handleIndex:t,value:void 0!==e?e:this.value()};return this._hasMultipleValues()&&(n.value=void 0!==e?e:this.values(t),n.values=i||this.values()),n},_hasMultipleValues:function(){return this.options.values&&this.options.values.length},_start:function(t,e){return this._trigger("start",t,this._uiHash(e))},_slide:function(t,e,i){var n,o=this.value(),r=this.values();this._hasMultipleValues()&&(n=this.values(e?0:1),o=this.values(e),2===this.options.values.length&&!0===this.options.range&&(i=0===e?Math.min(n,i):Math.max(n,i)),r[e]=i),i!==o&&!1!==this._trigger("slide",t,this._uiHash(e,i,r))&&(this._hasMultipleValues()?this.values(e,i):this.value(i))},_stop:function(t,e){this._trigger("stop",t,this._uiHash(e))},_change:function(t,e){this._keySliding||this._mouseSliding||(this._lastChangedValue=e,this._trigger("change",t,this._uiHash(e)))},value:function(t){return arguments.length?(this.options.value=this._trimAlignValue(t),this._refreshValue(),void this._change(null,0)):this._value()},values:function(e,i){var n,o,r;if(arguments.length>1)return this.options.values[e]=this._trimAlignValue(i),this._refreshValue(),void this._change(null,e);if(!arguments.length)return this._values();if(!t.isArray(arguments[0]))return this._hasMultipleValues()?this._values(e):this.value();for(n=this.options.values,o=arguments[0],r=0;n.length>r;r+=1)n[r]=this._trimAlignValue(o[r]),this._change(null,r);this._refreshValue()},_setOption:function(e,i){var n,o=0;switch("range"===e&&!0===this.options.range&&("min"===i?(this.options.value=this._values(0),this.options.values=null):"max"===i&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),t.isArray(this.options.values)&&(o=this.options.values.length),this._super(e,i),e){case"orientation":this._detectOrientation(),this._removeClass("ui-slider-horizontal ui-slider-vertical")._addClass("ui-slider-"+this.orientation),this._refreshValue(),this.options.range&&this._refreshRange(i),this.handles.css("horizontal"===i?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),n=o-1;n>=0;n--)this._change(null,n);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_setOptionDisabled:function(t){this._super(t),this._toggleClass(null,"ui-state-disabled",!!t)},_value:function(){var t=this.options.value;return t=this._trimAlignValue(t)},_values:function(t){var e,i,n;if(arguments.length)return e=this.options.values[t],e=this._trimAlignValue(e);if(this._hasMultipleValues()){for(i=this.options.values.slice(),n=0;i.length>n;n+=1)i[n]=this._trimAlignValue(i[n]);return i}return[]},_trimAlignValue:function(t){if(this._valueMin()>=t)return this._valueMin();if(t>=this._valueMax())return this._valueMax();var e=this.options.step>0?this.options.step:1,i=(t-this._valueMin())%e,n=t-i;return 2*Math.abs(i)>=e&&(n+=i>0?e:-e),parseFloat(n.toFixed(5))},_calculateNewMax:function(){var t=this.options.max,e=this._valueMin(),i=this.options.step;(t=Math.round((t-e)/i)*i+e)>this.options.max&&(t-=i),this.max=parseFloat(t.toFixed(this._precision()))},_precision:function(){var t=this._precisionOf(this.options.step);return null!==this.options.min&&(t=Math.max(t,this._precisionOf(this.options.min))),t},_precisionOf:function(t){var e=""+t,i=e.indexOf(".");return-1===i?0:e.length-i-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshRange:function(t){"vertical"===t&&this.range.css({width:"",left:""}),"horizontal"===t&&this.range.css({height:"",bottom:""})},_refreshValue:function(){var e,i,n,o,r,s=this.options.range,a=this.options,l=this,c=!this._animateOff&&a.animate,u={};this._hasMultipleValues()?this.handles.each(function(n){i=(l.values(n)-l._valueMin())/(l._valueMax()-l._valueMin())*100,u["horizontal"===l.orientation?"left":"bottom"]=i+"%",t(this).stop(1,1)[c?"animate":"css"](u,a.animate),!0===l.options.range&&("horizontal"===l.orientation?(0===n&&l.range.stop(1,1)[c?"animate":"css"]({left:i+"%"},a.animate),1===n&&l.range[c?"animate":"css"]({width:i-e+"%"},{queue:!1,duration:a.animate})):(0===n&&l.range.stop(1,1)[c?"animate":"css"]({bottom:i+"%"},a.animate),1===n&&l.range[c?"animate":"css"]({height:i-e+"%"},{queue:!1,duration:a.animate}))),e=i}):(n=this.value(),o=this._valueMin(),r=this._valueMax(),i=r!==o?(n-o)/(r-o)*100:0,u["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[c?"animate":"css"](u,a.animate),"min"===s&&"horizontal"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({width:i+"%"},a.animate),"max"===s&&"horizontal"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({width:100-i+"%"},a.animate),"min"===s&&"vertical"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({height:i+"%"},a.animate),"max"===s&&"vertical"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({height:100-i+"%"},a.animate))},_handleEvents:{keydown:function(e){var i,n,o,r=t(e.target).data("ui-slider-handle-index");switch(e.keyCode){case t.ui.keyCode.HOME:case t.ui.keyCode.END:case t.ui.keyCode.PAGE_UP:case t.ui.keyCode.PAGE_DOWN:case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(e.preventDefault(),!this._keySliding&&(this._keySliding=!0,this._addClass(t(e.target),null,"ui-state-active"),!1===this._start(e,r)))return}switch(o=this.options.step,i=n=this._hasMultipleValues()?this.values(r):this.value(),e.keyCode){case t.ui.keyCode.HOME:n=this._valueMin();break;case t.ui.keyCode.END:n=this._valueMax();break;case t.ui.keyCode.PAGE_UP:n=this._trimAlignValue(i+(this._valueMax()-this._valueMin())/this.numPages);break;case t.ui.keyCode.PAGE_DOWN:n=this._trimAlignValue(i-(this._valueMax()-this._valueMin())/this.numPages);break;case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:if(i===this._valueMax())return;n=this._trimAlignValue(i+o);break;case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(i===this._valueMin())return;n=this._trimAlignValue(i-o)}this._slide(e,r,n)},keyup:function(e){var i=t(e.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(e,i),this._change(e,i),this._removeClass(t(e.target),null,"ui-state-active"))}}})}),function(t){function e(t,e){if(!(t.originalEvent.touches.length>1)){var i=t.originalEvent.changedTouches[0],n=document.createEvent("MouseEvents");n.initMouseEvent(e,!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),t.target.dispatchEvent(n)}}if(t.support.touch="ontouchend"in document,t.support.touch){var i,n=t.ui.mouse.prototype,o=n._mouseInit,r=n._mouseDestroy;n._touchStart=function(t){!i&&this._mouseCapture(t.originalEvent.changedTouches[0])&&(i=!0,this._touchMoved=!1,e(t,"mouseover"),e(t,"mousemove"),e(t,"mousedown"))},n._touchMove=function(t){i&&(this._touchMoved=!0,e(t,"mousemove"))},n._touchEnd=function(t){i&&(e(t,"mouseup"),e(t,"mouseout"),i=!1)},n._mouseInit=function(){this.element.bind({touchstart:t.proxy(this,"_touchStart"),touchmove:t.proxy(this,"_touchMove"),touchend:t.proxy(this,"_touchEnd")}),o.call(this)},n._mouseDestroy=function(){this.element.unbind({touchstart:t.proxy(this,"_touchStart"),touchmove:t.proxy(this,"_touchMove"),touchend:t.proxy(this,"_touchEnd")}),r.call(this)}}}(jQuery),function(t){var e=t.ui.ddmanager.prepareOffsets;t.ui.ddmanager.prepareOffsets=function(i){e.apply(this,arguments);for(var n,o=t.ui.ddmanager.droppables[i.options.scope]||[],r=0;r<o.length;r++)if((n=o[r].document[0])!==document){var s=t((n.defaultView||n.parentWindow).frameElement),a=s.offset(),l=o[r].element,c={top:s.contents().scrollTop(),left:s.contents().scrollLeft()};c.right=c.left+s.width(),c.bottom=c.top+s.height();var u=l.offset();if(u.right=u.left+l.outerWidth(),u.bottom=u.top+l.outerHeight(),c.right<u.left||c.left>u.right||c.bottom<u.top||c.top>u.bottom){o[r].proportions().height=0;continue}var h=u.top-s.contents().scrollTop();h=0>h?0:h;var d=u.left-s.contents().scrollLeft();d=0>d?0:d;var f=u.top+l.height()-s.contents().scrollTop();f=f>s.height()?s.height():f;var p=u.left+l.width()-s.contents().scrollLeft();p=p>s.width()?s.width():p,o[r].offset.top=a.top+h,o[r].offset.left=a.left+d,o[r].proportions({width:p-d,height:f-h})}},t.ui.plugin.add("draggable","iframeScroll",{drag:function(e,i,n){var o=n.options,r=!0===o.iframeFix?"iframe":o.iframeFix;n.document.find(r).each(function(){var i,r=!1,s=t(this),a=s.offset();a.width=s.width(),a.height=s.height(),a.left<e.pageX&&e.pageX<a.left+a.width&&a.top<e.pageY&&e.pageY<a.top+o.scrollSensitivity&&(i=s.contents(),r=i.scrollTop(i.scrollTop()-o.scrollSpeed)),a.left<e.pageX&&e.pageX<a.left+a.width&&a.top+a.height-o.scrollSensitivity<e.pageY&&e.pageY<a.top+a.height&&(i=s.contents(),r=i.scrollTop(i.scrollTop()+o.scrollSpeed)),a.left<e.pageX&&e.pageX<a.left+o.scrollSensitivity&&a.top<e.pageY&&e.pageY<a.top+a.height&&(i=s.contents(),r=i.scrollLeft(i.scrollLeft()-o.scrollSpeed)),a.left+a.width-o.scrollSensitivity<e.pageX&&e.pageX<a.left+a.width&&a.top<e.pageY&&e.pageY<a.top+a.height&&(i=s.contents(),r=i.scrollLeft(i.scrollLeft()+o.scrollSpeed)),!1!==r&&t.ui.ddmanager&&!o.dropBehaviour&&t.ui.ddmanager.prepareOffsets(n,e),clearTimeout(n.scrollTimer),n._mouseStarted&&(n.scrollTimer=setTimeout(function(){n._trigger("drag",e),t.ui.ddmanager&&t.ui.ddmanager.drag(n,e)},10))})},stop:function(t,e,i){clearInterval(i.scrollTimer)}})}(window.jQuery),function(t,e,i,n){function o(t,e,i){return setTimeout(c(t,i),e)}function r(t,e,i){return!!Array.isArray(t)&&(s(t,i[e],i),!0)}function s(t,e,i){var o;if(t)if(t.forEach)t.forEach(e,i);else if(t.length!==n)for(o=0;o<t.length;)e.call(i,t[o],o,t),o++;else for(o in t)t.hasOwnProperty(o)&&e.call(i,t[o],o,t)}function a(e,i,n){var o="DEPRECATED METHOD: "+i+"\n"+n+" AT \n";return function(){var i=new Error("get-stack-trace"),n=i&&i.stack?i.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",r=t.console&&(t.console.warn||t.console.log);return r&&r.call(t.console,o,n),e.apply(this,arguments)}}function l(t,e,i){var n,o=e.prototype;(n=t.prototype=Object.create(o)).constructor=t,n._super=o,i&&G(n,i)}function c(t,e){return function(){return t.apply(e,arguments)}}function u(t,e){return typeof t==tt?t.apply(e?e[0]||n:n,e):t}function h(t,e){return t===n?e:t}function d(t,e,i){s(g(e),function(e){t.addEventListener(e,i,!1)})}function f(t,e,i){s(g(e),function(e){t.removeEventListener(e,i,!1)})}function p(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function m(t,e){return t.indexOf(e)>-1}function g(t){return t.trim().split(/\s+/g)}function v(t,e,i){if(t.indexOf&&!i)return t.indexOf(e);for(var n=0;n<t.length;){if(i&&t[n][i]==e||!i&&t[n]===e)return n;n++}return-1}function y(t){return Array.prototype.slice.call(t,0)}function b(t,e,i){for(var n=[],o=[],r=0;r<t.length;){var s=e?t[r][e]:t[r];v(o,s)<0&&n.push(t[r]),o[r]=s,r++}return i&&(n=e?n.sort(function(t,i){return t[e]>i[e]}):n.sort()),n}function _(t,e){for(var i,o,r=e[0].toUpperCase()+e.slice(1),s=0;s<Z.length;){if(i=Z[s],(o=i?i+r:e)in t)return o;s++}return n}function w(e){var i=e.ownerDocument||e;return i.defaultView||i.parentWindow||t}function k(t,e){var i=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){u(t.options.enable,[t])&&i.handler(e)},this.init()}function x(t,e,i){var o=i.pointers.length,r=i.changedPointers.length,s=e&ht&&o-r==0,a=e&(ft|pt)&&o-r==0;i.isFirst=!!s,i.isFinal=!!a,s&&(t.session={}),i.eventType=e,function(t,e){var i=t.session,o=e.pointers,r=o.length;i.firstInput||(i.firstInput=C(e)),r>1&&!i.firstMultiple?i.firstMultiple=C(e):1===r&&(i.firstMultiple=!1);var s=i.firstInput,a=i.firstMultiple,l=a?a.center:s.center,c=e.center=T(o);e.timeStamp=nt(),e.deltaTime=e.timeStamp-s.timeStamp,e.angle=S(l,c),e.distance=O(l,c),function(t,e){var i=e.center,n=t.offsetDelta||{},o=t.prevDelta||{},r=t.prevInput||{};e.eventType!==ht&&r.eventType!==ft||(o=t.prevDelta={x:r.deltaX||0,y:r.deltaY||0},n=t.offsetDelta={x:i.x,y:i.y}),e.deltaX=o.x+(i.x-n.x),e.deltaY=o.y+(i.y-n.y)}(i,e),e.offsetDirection=E(e.deltaX,e.deltaY);var u=D(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=u.x,e.overallVelocityY=u.y,e.overallVelocity=it(u.x)>it(u.y)?u.x:u.y,e.scale=a?function(t,e){return O(e[0],e[1],Ct)/O(t[0],t[1],Ct)}(a.pointers,o):1,e.rotation=a?function(t,e){return S(e[1],e[0],Ct)+S(t[1],t[0],Ct)}(a.pointers,o):0,e.maxPointers=i.prevInput?e.pointers.length>i.prevInput.maxPointers?e.pointers.length:i.prevInput.maxPointers:e.pointers.length,function(t,e){var i,o,r,s,a=t.lastInterval||e,l=e.timeStamp-a.timeStamp;if(e.eventType!=pt&&(l>ut||a.velocity===n)){var c=e.deltaX-a.deltaX,u=e.deltaY-a.deltaY,h=D(l,c,u);o=h.x,r=h.y,i=it(h.x)>it(h.y)?h.x:h.y,s=E(c,u),t.lastInterval=e}else i=a.velocity,o=a.velocityX,r=a.velocityY,s=a.direction;e.velocity=i,e.velocityX=o,e.velocityY=r,e.direction=s}(i,e);var h=t.element;p(e.srcEvent.target,h)&&(h=e.srcEvent.target),e.target=h}(t,i),t.emit("hammer.input",i),t.recognize(i),t.session.prevInput=i}function C(t){for(var e=[],i=0;i<t.pointers.length;)e[i]={clientX:et(t.pointers[i].clientX),clientY:et(t.pointers[i].clientY)},i++;return{timeStamp:nt(),pointers:e,center:T(e),deltaX:t.deltaX,deltaY:t.deltaY}}function T(t){var e=t.length;if(1===e)return{x:et(t[0].clientX),y:et(t[0].clientY)};for(var i=0,n=0,o=0;e>o;)i+=t[o].clientX,n+=t[o].clientY,o++;return{x:et(i/e),y:et(n/e)}}function D(t,e,i){return{x:e/t||0,y:i/t||0}}function E(t,e){return t===e?mt:it(t)>=it(e)?0>t?gt:vt:0>e?yt:bt}function O(t,e,i){i||(i=xt);var n=e[i[0]]-t[i[0]],o=e[i[1]]-t[i[1]];return Math.sqrt(n*n+o*o)}function S(t,e,i){i||(i=xt);var n=e[i[0]]-t[i[0]],o=e[i[1]]-t[i[1]];return 180*Math.atan2(o,n)/Math.PI}function M(){this.evEl=Dt,this.evWin=Et,this.pressed=!1,k.apply(this,arguments)}function I(){this.evEl=Mt,this.evWin=It,k.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function A(){this.evTarget=Pt,this.evWin=Nt,this.started=!1,k.apply(this,arguments)}function P(){this.evTarget=Lt,this.targetIds={},k.apply(this,arguments)}function N(){k.apply(this,arguments);var t=c(this.handler,this);this.touch=new P(this.manager,t),this.mouse=new M(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function j(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var i={x:e.clientX,y:e.clientY};this.lastTouches.push(i);var n=this.lastTouches;setTimeout(function(){var t=n.indexOf(i);t>-1&&n.splice(t,1)},qt)}}function L(t,e){this.manager=t,this.set(e)}function q(t){this.options=G({},this.defaults,t||{}),this.id=st++,this.manager=null,this.options.enable=h(this.options.enable,!0),this.state=Qt,this.simultaneous={},this.requireFail=[]}function F(t){return t&Zt?"cancel":t&Kt?"end":t&Xt?"move":t&Yt?"start":""}function B(t){return t==bt?"down":t==yt?"up":t==gt?"left":t==vt?"right":""}function V(t,e){var i=e.manager;return i?i.get(t):t}function H(){q.apply(this,arguments)}function R(){H.apply(this,arguments),this.pX=null,this.pY=null}function z(){H.apply(this,arguments)}function $(){q.apply(this,arguments),this._timer=null,this._input=null}function W(){H.apply(this,arguments)}function U(){H.apply(this,arguments)}function Q(){q.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Y(t,e){return e=e||{},e.recognizers=h(e.recognizers,Y.defaults.preset),new X(t,e)}function X(t,e){this.options=G({},Y.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=function(t){var e=t.options.inputClass;return new(e||(lt?I:ct?P:at?N:M))(t,x)}(this),this.touchAction=new L(this,this.options.touchAction),K(this,!0),s(this.options.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function K(t,e){var i=t.element;if(i.style){var n;s(t.options.cssProps,function(o,r){n=_(i.style,r),e?(t.oldCssProps[n]=i.style[n],i.style[n]=o):i.style[n]=t.oldCssProps[n]||""}),e||(t.oldCssProps={})}}var G,Z=["","webkit","Moz","MS","ms","o"],J=e.createElement("div"),tt="function",et=Math.round,it=Math.abs,nt=Date.now;G="function"!=typeof Object.assign?function(t){if(t===n||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),i=1;i<arguments.length;i++){var o=arguments[i];if(o!==n&&null!==o)for(var r in o)o.hasOwnProperty(r)&&(e[r]=o[r])}return e}:Object.assign;var ot=a(function(t,e,i){for(var o=Object.keys(e),r=0;r<o.length;)(!i||i&&t[o[r]]===n)&&(t[o[r]]=e[o[r]]),r++;return t},"extend","Use `assign`."),rt=a(function(t,e){return ot(t,e,!0)},"merge","Use `assign`."),st=1,at="ontouchstart"in t,lt=_(t,"PointerEvent")!==n,ct=at&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),ut=25,ht=1,dt=2,ft=4,pt=8,mt=1,gt=2,vt=4,yt=8,bt=16,_t=gt|vt,wt=yt|bt,kt=_t|wt,xt=["x","y"],Ct=["clientX","clientY"];k.prototype={handler:function(){},init:function(){this.evEl&&d(this.element,this.evEl,this.domHandler),this.evTarget&&d(this.target,this.evTarget,this.domHandler),this.evWin&&d(w(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&f(this.element,this.evEl,this.domHandler),this.evTarget&&f(this.target,this.evTarget,this.domHandler),this.evWin&&f(w(this.element),this.evWin,this.domHandler)}};var Tt={mousedown:ht,mousemove:dt,mouseup:ft},Dt="mousedown",Et="mousemove mouseup";l(M,k,{handler:function(t){var e=Tt[t.type];e&ht&&0===t.button&&(this.pressed=!0),e&dt&&1!==t.which&&(e=ft),this.pressed&&(e&ft&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))}});var Ot={pointerdown:ht,pointermove:dt,pointerup:ft,pointercancel:pt,pointerout:pt},St={2:"touch",3:"pen",4:"mouse",5:"kinect"},Mt="pointerdown",It="pointermove pointerup pointercancel";t.MSPointerEvent&&!t.PointerEvent&&(Mt="MSPointerDown",It="MSPointerMove MSPointerUp MSPointerCancel"),l(I,k,{handler:function(t){var e=this.store,i=!1,n=t.type.toLowerCase().replace("ms",""),o=Ot[n],r=St[t.pointerType]||t.pointerType,s="touch"==r,a=v(e,t.pointerId,"pointerId");o&ht&&(0===t.button||s)?0>a&&(e.push(t),a=e.length-1):o&(ft|pt)&&(i=!0),0>a||(e[a]=t,this.callback(this.manager,o,{pointers:e,changedPointers:[t],pointerType:r,srcEvent:t}),i&&e.splice(a,1))}});var At={touchstart:ht,touchmove:dt,touchend:ft,touchcancel:pt},Pt="touchstart",Nt="touchstart touchmove touchend touchcancel";l(A,k,{handler:function(t){var e=At[t.type];if(e===ht&&(this.started=!0),this.started){var i=function(t,e){var i=y(t.touches),n=y(t.changedTouches);return e&(ft|pt)&&(i=b(i.concat(n),"identifier",!0)),[i,n]}.call(this,t,e);e&(ft|pt)&&i[0].length-i[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:"touch",srcEvent:t})}}});var jt={touchstart:ht,touchmove:dt,touchend:ft,touchcancel:pt},Lt="touchstart touchmove touchend touchcancel";l(P,k,{handler:function(t){var e=jt[t.type],i=function(t,e){var i=y(t.touches),n=this.targetIds;if(e&(ht|dt)&&1===i.length)return n[i[0].identifier]=!0,[i,i];var o,r,s=y(t.changedTouches),a=[],l=this.target;if(r=i.filter(function(t){return p(t.target,l)}),e===ht)for(o=0;o<r.length;)n[r[o].identifier]=!0,o++;for(o=0;o<s.length;)n[s[o].identifier]&&a.push(s[o]),e&(ft|pt)&&delete n[s[o].identifier],o++;return a.length?[b(r.concat(a),"identifier",!0),a]:void 0}.call(this,t,e);i&&this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:"touch",srcEvent:t})}});var qt=2500,Ft=25;l(N,k,{handler:function(t,e,i){var n="touch"==i.pointerType,o="mouse"==i.pointerType;if(!(o&&i.sourceCapabilities&&i.sourceCapabilities.firesTouchEvents)){if(n)(function(t,e){t&ht?(this.primaryTouch=e.changedPointers[0].identifier,j.call(this,e)):t&(ft|pt)&&j.call(this,e)}).call(this,e,i);else if(o&&function(t){for(var e=t.srcEvent.clientX,i=t.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var o=this.lastTouches[n],r=Math.abs(e-o.x),s=Math.abs(i-o.y);if(Ft>=r&&Ft>=s)return!0}return!1}.call(this,i))return;this.callback(t,e,i)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Bt=_(J.style,"touchAction"),Vt=Bt!==n,Ht="auto",Rt="manipulation",zt="none",$t="pan-x",Wt="pan-y",Ut=function(){if(!Vt)return!1;var e={},i=t.CSS&&t.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(n){e[n]=!i||t.CSS.supports("touch-action",n)}),e}();L.prototype={set:function(t){"compute"==t&&(t=this.compute()),Vt&&this.manager.element.style&&Ut[t]&&(this.manager.element.style[Bt]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return s(this.manager.recognizers,function(e){u(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),function(t){if(m(t,zt))return zt;var e=m(t,$t),i=m(t,Wt);return e&&i?zt:e||i?e?$t:Wt:m(t,Rt)?Rt:Ht}(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,i=t.offsetDirection;{if(!this.manager.session.prevented){var n=this.actions,o=m(n,zt)&&!Ut[zt],r=m(n,Wt)&&!Ut[Wt],s=m(n,$t)&&!Ut[$t];if(o){var a=1===t.pointers.length,l=t.distance<2,c=t.deltaTime<250;if(a&&l&&c)return}return s&&r?void 0:o||r&&i&_t||s&&i&wt?this.preventSrc(e):void 0}e.preventDefault()}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var Qt=1,Yt=2,Xt=4,Kt=8,Gt=Kt,Zt=16;q.prototype={defaults:{},set:function(t){return G(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(r(t,"recognizeWith",this))return this;var e=this.simultaneous;return t=V(t,this),e[t.id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return r(t,"dropRecognizeWith",this)?this:(t=V(t,this),delete this.simultaneous[t.id],this)},requireFailure:function(t){if(r(t,"requireFailure",this))return this;var e=this.requireFail;return t=V(t,this),-1===v(e,t)&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(r(t,"dropRequireFailure",this))return this;t=V(t,this);var e=v(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){function e(e){i.manager.emit(e,t)}var i=this,n=this.state;Kt>n&&e(i.options.event+F(n)),e(i.options.event),t.additionalEvent&&e(t.additionalEvent),n>=Kt&&e(i.options.event+F(n))},tryEmit:function(t){return this.canEmit()?this.emit(t):void(this.state=32)},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(32|Qt)))return!1;t++}return!0},recognize:function(t){var e=G({},t);return u(this.options.enable,[this,e])?(this.state&(Gt|Zt|32)&&(this.state=Qt),this.state=this.process(e),void(this.state&(Yt|Xt|Kt|Zt)&&this.tryEmit(e))):(this.reset(),void(this.state=32))},process:function(t){},getTouchAction:function(){},reset:function(){}},l(H,q,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,i=t.eventType,n=e&(Yt|Xt),o=this.attrTest(t);return n&&(i&pt||!o)?e|Zt:n||o?i&ft?e|Kt:e&Yt?e|Xt:Yt:32}}),l(R,H,{defaults:{event:"pan",threshold:10,pointers:1,direction:kt},getTouchAction:function(){var t=this.options.direction,e=[];return t&_t&&e.push(Wt),t&wt&&e.push($t),e},directionTest:function(t){var e=this.options,i=!0,n=t.distance,o=t.direction,r=t.deltaX,s=t.deltaY;return o&e.direction||(e.direction&_t?(o=0===r?mt:0>r?gt:vt,i=r!=this.pX,n=Math.abs(t.deltaX)):(o=0===s?mt:0>s?yt:bt,i=s!=this.pY,n=Math.abs(t.deltaY))),t.direction=o,i&&n>e.threshold&&o&e.direction},attrTest:function(t){return H.prototype.attrTest.call(this,t)&&(this.state&Yt||!(this.state&Yt)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=B(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),l(z,H,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[zt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&Yt)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),l($,q,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Ht]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,r=t.deltaTime>e.time;if(this._input=t,!n||!i||t.eventType&(ft|pt)&&!r)this.reset();else if(t.eventType&ht)this.reset(),this._timer=o(function(){this.state=Gt,this.tryEmit()},e.time,this);else if(t.eventType&ft)return Gt;return 32},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===Gt&&(t&&t.eventType&ft?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=nt(),this.manager.emit(this.options.event,this._input)))}}),l(W,H,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[zt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&Yt)}}),l(U,H,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:_t|wt,pointers:1},getTouchAction:function(){return R.prototype.getTouchAction.call(this)},attrTest:function(t){var e,i=this.options.direction;return i&(_t|wt)?e=t.overallVelocity:i&_t?e=t.overallVelocityX:i&wt&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&i&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&it(e)>this.options.velocity&&t.eventType&ft},emit:function(t){var e=B(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),l(Q,q,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Rt]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,r=t.deltaTime<e.time;if(this.reset(),t.eventType&ht&&0===this.count)return this.failTimeout();if(n&&r&&i){if(t.eventType!=ft)return this.failTimeout();var s=!this.pTime||t.timeStamp-this.pTime<e.interval,a=!this.pCenter||O(this.pCenter,t.center)<e.posThreshold;this.pTime=t.timeStamp,this.pCenter=t.center,a&&s?this.count+=1:this.count=1,this._input=t;if(0===this.count%e.taps)return this.hasRequireFailures()?(this._timer=o(function(){this.state=Gt,this.tryEmit()},e.interval,this),Yt):Gt}return 32},failTimeout:function(){return this._timer=o(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Gt&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Y.VERSION="2.0.8",Y.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[W,{enable:!1}],[z,{enable:!1},["rotate"]],[U,{direction:_t}],[R,{direction:_t},["swipe"]],[Q],[Q,{event:"doubletap",taps:2},["tap"]],[$]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};X.prototype={set:function(t){return G(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){this.touchAction.preventDefaults(t);var i,n=this.recognizers,o=e.curRecognizer;(!o||o&&o.state&Gt)&&(o=e.curRecognizer=null);for(var r=0;r<n.length;)i=n[r],2===e.stopped||o&&i!=o&&!i.canRecognizeWith(o)?i.reset():i.recognize(t),!o&&i.state&(Yt|Xt|Kt)&&(o=e.curRecognizer=i),r++}},get:function(t){if(t instanceof q)return t;for(var e=this.recognizers,i=0;i<e.length;i++)if(e[i].options.event==t)return e[i];return null},add:function(t){if(r(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(r(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,i=v(e,t);-1!==i&&(e.splice(i,1),this.touchAction.update())}return this},on:function(t,e){if(t!==n&&e!==n){var i=this.handlers;return s(g(t),function(t){i[t]=i[t]||[],i[t].push(e)}),this}},off:function(t,e){if(t!==n){var i=this.handlers;return s(g(t),function(t){e?i[t]&&i[t].splice(v(i[t],e),1):delete i[t]}),this}},emit:function(t,i){this.options.domEvents&&function(t,i){var n=e.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=i,i.target.dispatchEvent(n)}(t,i);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){i.type=t,i.preventDefault=function(){i.srcEvent.preventDefault()};for(var o=0;o<n.length;)n[o](i),o++}},destroy:function(){this.element&&K(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},G(Y,{INPUT_START:ht,INPUT_MOVE:dt,INPUT_END:ft,INPUT_CANCEL:pt,STATE_POSSIBLE:Qt,STATE_BEGAN:Yt,STATE_CHANGED:Xt,STATE_ENDED:Kt,STATE_RECOGNIZED:Gt,STATE_CANCELLED:Zt,STATE_FAILED:32,DIRECTION_NONE:mt,DIRECTION_LEFT:gt,DIRECTION_RIGHT:vt,DIRECTION_UP:yt,DIRECTION_DOWN:bt,DIRECTION_HORIZONTAL:_t,DIRECTION_VERTICAL:wt,DIRECTION_ALL:kt,Manager:X,Input:k,TouchAction:L,TouchInput:P,MouseInput:M,PointerEventInput:I,TouchMouseInput:N,SingleTouchInput:A,Recognizer:q,AttrRecognizer:H,Tap:Q,Pan:R,Swipe:U,Pinch:z,Rotate:W,Press:$,on:d,off:f,each:s,merge:rt,extend:ot,assign:G,inherit:l,bindFn:c,prefixed:_});(void 0!==t?t:"undefined"!=typeof self?self:{}).Hammer=Y,"function"==typeof define&&define.amd?define(function(){return Y}):"undefined"!=typeof module&&module.exports?module.exports=Y:t.Hammer=Y}(window,document),void 0===jQuery){jQuery="function"==typeof require?$=require("jquery"):$}if(function(t){t.fn.qoobSelect=function(){t(this).each(function(){var e,i=!1,n=t(this),o=n.children("option"),r=n.find("option:selected").val()||n.find("option:first").val();e=void 0!==n.find("option:selected").data("icon")?'<i class="'+n.find("option:selected").data("icon")+'"></i>':(e=n.find("option:selected").html()||n.find("option:first").html()||"").replace(/"/g,"&quot;");var s=t('<ul class="qoob-select-dropdown"></ul>');n.wrap('<div class="qoob-select"></div>'),o.length&&o.each(function(){void 0!==t(this).data("title")?s.append(t('<li data-value="'+t(this).val()+'" data-title="'+t(this).data("title")+'"><span>'+t(this).html()+"</span></li>")):void 0!==t(this).data("icon")?s.append(t('<li data-value="'+t(this).val()+'"><i class="'+t(this).data("icon")+'"></i></li>')):s.append(t('<li data-value="'+t(this).val()+'"><span>'+t(this).html()+"</span></li>"))});var a=t("<div />",{class:"qoob-selected-value","data-value":r,tabindex:0}).append(e);n.before(a),a.after(s),s.find("li").each(function(e){t(this).click(function(i){if(!t(this).hasClass("disabled")){s.find("li").removeClass("active"),t(this).toggleClass("active");var o=t(this).data("title")||t(this).html();a.html(o),n.find("option").eq(e).prop("selected",!0),r=t(this).data("value"),s.trigger("close"),n.trigger("change")}i.stopPropagation()})}),a.on("click",function(e){if(s.hasClass("active"))s.trigger("close");else{if(!s.is(":visible")){s.trigger("open");var i=s.find("li").filter(function(){return t(this).data("value").toLowerCase()===r.toLowerCase()});t(i).addClass("selected"),t(i).prependTo(s)}e.stopPropagation()}}),s.on({open:function(){t(this).addClass("active"),t(this).slideDown({queue:!1,duration:300,easing:"easeOutCubic"}).animate({opacity:1},{queue:!1,duration:300,easing:"easeOutSine"})},close:function(){t(this).removeClass("active"),s.find(".selected").removeClass("selected"),t(this).fadeOut(225)}}),a.on("blur",function(){s.trigger("close")}),s.hover(function(){i=!0},function(){i=!1}),t(window).on({click:function(){i||s.trigger("close")}})})}}(jQuery),void 0===jQuery){var jQuery;jQuery="function"==typeof require?$=require("jquery"):$}!function(t){t(document).on("click",".qoob-dropdown-toggle",function(e){e.stopPropagation();var i=t(this).parent(".qoob-dropdown"),n=i.find(".qoob-dropdown-content");n.on({show:function(){t(this).slideDown({queue:!1,duration:300,easing:"easeOutCubic"}).css("overflow","visible","important").animate({opacity:1},{queue:!1,duration:300,easing:"easeOutSine"}),i.addClass("active")},hide:function(){t(this).fadeOut(225),i.removeClass("active")}}),n.on("click","a",function(){n.trigger("hide")}),n.is(":visible")?n.trigger("hide"):n.trigger("show"),i.mouseleave(function(){n.trigger("hide")})})}(jQuery),function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.device=e():t.device=e()}(this,function(){return function(t){function e(n){if(i[n])return i[n].exports;var o=i[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var i={};return e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,i){t.exports=i(1)},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n,o,r,s,a,l,c,u,h,d,f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};o=window.device,n={},window.device=n,s=window.document.documentElement,d=window.navigator.userAgent.toLowerCase(),n.macos=function(){return a("mac")},n.ios=function(){return n.iphone()||n.ipod()||n.ipad()},n.iphone=function(){return!n.windows()&&a("iphone")},n.ipod=function(){return a("ipod")},n.ipad=function(){return a("ipad")},n.android=function(){return!n.windows()&&a("android")},n.androidPhone=function(){return n.android()&&a("mobile")},n.androidTablet=function(){return n.android()&&!a("mobile")},n.blackberry=function(){return a("blackberry")||a("bb10")||a("rim")},n.blackberryPhone=function(){return n.blackberry()&&!a("tablet")},n.blackberryTablet=function(){return n.blackberry()&&a("tablet")},n.windows=function(){return a("windows")},n.windowsPhone=function(){return n.windows()&&a("phone")},n.windowsTablet=function(){return n.windows()&&a("touch")&&!n.windowsPhone()},n.fxos=function(){return(a("(mobile;")||a("(tablet;"))&&a("; rv:")},n.fxosPhone=function(){return n.fxos()&&a("mobile")},n.fxosTablet=function(){return n.fxos()&&a("tablet")},n.meego=function(){return a("meego")},n.cordova=function(){return window.cordova&&"file:"===location.protocol},n.nodeWebkit=function(){return"object"===f(window.process)},n.mobile=function(){return n.androidPhone()||n.iphone()||n.ipod()||n.windowsPhone()||n.blackberryPhone()||n.fxosPhone()||n.meego()},n.tablet=function(){return n.ipad()||n.androidTablet()||n.blackberryTablet()||n.windowsTablet()||n.fxosTablet()},n.desktop=function(){return!n.tablet()&&!n.mobile()},n.television=function(){var t,e=["googletv","viera","smarttv","internet.tv","netcast","nettv","appletv","boxee","kylo","roku","dlnadoc","roku","pov_tv","hbbtv","ce-html"];for(t=0;t<e.length;){if(a(e[t]))return!0;t++}return!1},n.portrait=function(){return window.innerHeight/window.innerWidth>1},n.landscape=function(){return window.innerHeight/window.innerWidth<1},n.noConflict=function(){return window.device=o,this},a=function(t){return-1!==d.indexOf(t)},c=function(t){var e;return e=new RegExp(t,"i"),s.className.match(e)},r=function(t){var e=null;c(t)||(e=s.className.replace(/^\s+|\s+$/g,""),s.className=e+" "+t)},h=function(t){c(t)&&(s.className=s.className.replace(" "+t,""))},n.ios()?n.ipad()?r("ios ipad tablet"):n.iphone()?r("ios iphone mobile"):n.ipod()&&r("ios ipod mobile"):n.macos()?r("macos desktop"):n.android()?r(n.androidTablet()?"android tablet":"android mobile"):n.blackberry()?r(n.blackberryTablet()?"blackberry tablet":"blackberry mobile"):n.windows()?r(n.windowsTablet()?"windows tablet":n.windowsPhone()?"windows mobile":"windows desktop"):n.fxos()?r(n.fxosTablet()?"fxos tablet":"fxos mobile"):n.meego()?r("meego mobile"):n.nodeWebkit()?r("node-webkit"):n.television()?r("television"):n.desktop()&&r("desktop"),n.cordova()&&r("cordova"),l=function(){n.landscape()?(h("portrait"),r("landscape")):(h("landscape"),r("portrait"))},u=Object.prototype.hasOwnProperty.call(window,"onorientationchange")?"orientationchange":"resize",window.addEventListener?window.addEventListener(u,l,!1):window.attachEvent?window.attachEvent(u,l):window[u]=l,l(),e.default=n}]).default}),function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).html2canvas=t()}}(function(){return function t(e,i,n){function o(s,a){if(!i[s]){if(!e[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(r)return r(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var u=i[s]={exports:{}};e[s][0].call(u.exports,function(t){var i=e[s][1][t];return o(i||t)},u,u.exports,t,e,i,n)}return i[s].exports}for(var r="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(t,e,i){(function(t){!function(n){function o(t){throw new RangeError(I[t])}function r(t,e){for(var i=t.length,n=[];i--;)n[i]=e(t[i]);return n}function s(t,e){var i=t.split("@"),n="";i.length>1&&(n=i[0]+"@",t=i[1]);return n+r((t=t.replace(M,".")).split("."),e).join(".")}function a(t){for(var e,i,n=[],o=0,r=t.length;o<r;)(e=t.charCodeAt(o++))>=55296&&e<=56319&&o<r?56320==(64512&(i=t.charCodeAt(o++)))?n.push(((1023&e)<<10)+(1023&i)+65536):(n.push(e),o--):n.push(e);return n}function l(t){return r(t,function(t){var e="";return t>65535&&(t-=65536,e+=N(t>>>10&1023|55296),t=56320|1023&t),e+=N(t)}).join("")}function c(t){return t-48<10?t-22:t-65<26?t-65:t-97<26?t-97:_}function u(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function h(t,e,i){var n=0;for(t=i?P(t/C):t>>1,t+=P(t/e);t>A*k>>1;n+=_)t=P(t/A);return P(n+(A+1)*t/(t+x))}function d(t){var e,i,n,r,s,a,u,d,f,p,m=[],g=t.length,v=0,y=D,x=T;for((i=t.lastIndexOf(E))<0&&(i=0),n=0;n<i;++n)t.charCodeAt(n)>=128&&o("not-basic"),m.push(t.charCodeAt(n));for(r=i>0?i+1:0;r<g;){for(s=v,a=1,u=_;r>=g&&o("invalid-input"),((d=c(t.charCodeAt(r++)))>=_||d>P((b-v)/a))&&o("overflow"),v+=d*a,f=u<=x?w:u>=x+k?k:u-x,!(d<f);u+=_)p=_-f,a>P(b/p)&&o("overflow"),a*=p;x=h(v-s,e=m.length+1,0==s),P(v/e)>b-y&&o("overflow"),y+=P(v/e),v%=e,m.splice(v++,0,y)}return l(m)}function f(t){var e,i,n,r,s,l,c,d,f,p,m,g,v,y,x,C=[];for(g=(t=a(t)).length,e=D,i=0,s=T,l=0;l<g;++l)(m=t[l])<128&&C.push(N(m));for(n=r=C.length,r&&C.push(E);n<g;){for(c=b,l=0;l<g;++l)(m=t[l])>=e&&m<c&&(c=m);for(c-e>P((b-i)/(v=n+1))&&o("overflow"),i+=(c-e)*v,e=c,l=0;l<g;++l)if((m=t[l])<e&&++i>b&&o("overflow"),m==e){for(d=i,f=_;p=f<=s?w:f>=s+k?k:f-s,!(d<p);f+=_)x=d-p,y=_-p,C.push(N(u(p+x%y,0))),d=P(x/y);C.push(N(u(d,0))),s=h(i,v,n==r),i=0,++n}++i,++e}return C.join("")}var p="object"==typeof i&&i&&!i.nodeType&&i,m="object"==typeof e&&e&&!e.nodeType&&e,g="object"==typeof t&&t;g.global!==g&&g.window!==g&&g.self!==g||(n=g);var v,y,b=2147483647,_=36,w=1,k=26,x=38,C=700,T=72,D=128,E="-",O=/^xn--/,S=/[^\x20-\x7E]/,M=/[\x2E\u3002\uFF0E\uFF61]/g,I={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},A=_-w,P=Math.floor,N=String.fromCharCode;if(v={version:"1.4.1",ucs2:{decode:a,encode:l},decode:d,encode:f,toASCII:function(t){return s(t,function(t){return S.test(t)?"xn--"+f(t):t})},toUnicode:function(t){return s(t,function(t){return O.test(t)?d(t.slice(4).toLowerCase()):t})}},p&&m)if(e.exports==p)m.exports=v;else for(y in v)v.hasOwnProperty(y)&&(p[y]=v[y]);else n.punycode=v}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(t,e,i){function n(t,e){for(var i=3===t.nodeType?document.createTextNode(t.nodeValue):t.cloneNode(!1),o=t.firstChild;o;)!0!==e&&1===o.nodeType&&"SCRIPT"===o.nodeName||i.appendChild(n(o,e)),o=o.nextSibling;return 1===t.nodeType&&(i._scrollTop=t.scrollTop,i._scrollLeft=t.scrollLeft,"CANVAS"===t.nodeName?function(t,e){try{e&&(e.width=t.width,e.height=t.height,e.getContext("2d").putImageData(t.getContext("2d").getImageData(0,0,t.width,t.height),0,0))}catch(e){r("Unable to copy canvas content from",t,e)}}(t,i):"TEXTAREA"!==t.nodeName&&"SELECT"!==t.nodeName||(i.value=t.value)),i}function o(t){if(1===t.nodeType){t.scrollTop=t._scrollTop,t.scrollLeft=t._scrollLeft;for(var e=t.firstChild;e;)o(e),e=e.nextSibling}}var r=t("./log");e.exports=function(t,e,i,r,s,a,l){var c=n(t.documentElement,s.javascriptEnabled),u=e.createElement("iframe");return u.className="html2canvas-container",u.style.visibility="hidden",u.style.position="fixed",u.style.left="-10000px",u.style.top="0px",u.style.border="0",u.width=i,u.height=r,u.scrolling="no",e.body.appendChild(u),new Promise(function(e){var i=u.contentWindow.document;u.contentWindow.onload=u.onload=function(){var t=setInterval(function(){i.body.childNodes.length>0&&(o(i.documentElement),clearInterval(t),"view"===s.type&&(u.contentWindow.scrollTo(a,l),!/(iPad|iPhone|iPod)/g.test(navigator.userAgent)||u.contentWindow.scrollY===l&&u.contentWindow.scrollX===a||(i.documentElement.style.top=-l+"px",i.documentElement.style.left=-a+"px",i.documentElement.style.position="absolute")),e(u))},50)},i.open(),i.write("<!DOCTYPE html><html></html>"),function(t,e,i){!t.defaultView||e===t.defaultView.pageXOffset&&i===t.defaultView.pageYOffset||t.defaultView.scrollTo(e,i)}(t,a,l),i.replaceChild(i.adoptNode(c),i.documentElement),i.close()})}},{"./log":13}],3:[function(t,e,i){function n(t){this.r=0,this.g=0,this.b=0,this.a=null,this.fromArray(t)||this.namedColor(t)||this.rgb(t)||this.rgba(t)||this.hex6(t)||this.hex3(t)}n.prototype.darken=function(t){var e=1-t;return new n([Math.round(this.r*e),Math.round(this.g*e),Math.round(this.b*e),this.a])},n.prototype.isTransparent=function(){return 0===this.a},n.prototype.isBlack=function(){return 0===this.r&&0===this.g&&0===this.b},n.prototype.fromArray=function(t){return Array.isArray(t)&&(this.r=Math.min(t[0],255),this.g=Math.min(t[1],255),this.b=Math.min(t[2],255),t.length>3&&(this.a=t[3])),Array.isArray(t)};var o=/^#([a-f0-9]{3})$/i;n.prototype.hex3=function(t){var e=null;return null!==(e=t.match(o))&&(this.r=parseInt(e[1][0]+e[1][0],16),this.g=parseInt(e[1][1]+e[1][1],16),this.b=parseInt(e[1][2]+e[1][2],16)),null!==e};var r=/^#([a-f0-9]{6})$/i;n.prototype.hex6=function(t){var e=null;return null!==(e=t.match(r))&&(this.r=parseInt(e[1].substring(0,2),16),this.g=parseInt(e[1].substring(2,4),16),this.b=parseInt(e[1].substring(4,6),16)),null!==e};var s=/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/;n.prototype.rgb=function(t){var e=null;return null!==(e=t.match(s))&&(this.r=Number(e[1]),this.g=Number(e[2]),this.b=Number(e[3])),null!==e};var a=/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d?\.?\d+)\s*\)$/;n.prototype.rgba=function(t){var e=null;return null!==(e=t.match(a))&&(this.r=Number(e[1]),this.g=Number(e[2]),this.b=Number(e[3]),this.a=Number(e[4])),null!==e},n.prototype.toString=function(){return null!==this.a&&1!==this.a?"rgba("+[this.r,this.g,this.b,this.a].join(",")+")":"rgb("+[this.r,this.g,this.b].join(",")+")"},n.prototype.namedColor=function(t){t=t.toLowerCase();var e=l[t];if(e)this.r=e[0],this.g=e[1],this.b=e[2];else if("transparent"===t)return this.r=this.g=this.b=this.a=0,!0;return!!e},n.prototype.isColor=!0;var l={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};e.exports=n},{}],4:[function(t,e,i){function n(t,e){var i=v++;if((e=e||{}).logging&&(h.options.logging=!0,h.options.start=Date.now()),e.async=void 0===e.async||e.async,e.allowTaint=void 0!==e.allowTaint&&e.allowTaint,e.removeContainer=void 0===e.removeContainer||e.removeContainer,e.javascriptEnabled=void 0!==e.javascriptEnabled&&e.javascriptEnabled,e.imageTimeout=void 0===e.imageTimeout?1e4:e.imageTimeout,e.renderer="function"==typeof e.renderer?e.renderer:a,e.strict=!!e.strict,"string"==typeof t){if("string"!=typeof e.proxy)return Promise.reject("Proxy must be used when rendering url");var n=null!=e.width?e.width:window.innerWidth,r=null!=e.height?e.height:window.innerHeight;return p(function(t){var e=document.createElement("a");return e.href=t,e.href=e.href,e}(t),e.proxy,document,n,r,e).then(function(t){return o(t.contentWindow.document.documentElement,t,e,n,r)})}var s=(void 0===t?[document.documentElement]:t.length?t:[t])[0];return s.setAttribute(g+i,i),function(t,e,i,n,r){return f(t,t,i,n,e,t.defaultView.pageXOffset,t.defaultView.pageYOffset).then(function(s){h("Document cloned");var a=g+r,l="["+a+"='"+r+"']";t.querySelector(l).removeAttribute(a);var c=s.contentWindow,u=c.document.querySelector(l),d="function"==typeof e.onclone?Promise.resolve(e.onclone(c.document)):Promise.resolve(!0);return d.then(function(){return o(u,s,e,i,n)})})}(s.ownerDocument,e,s.ownerDocument.defaultView.innerWidth,s.ownerDocument.defaultView.innerHeight,i).then(function(t){return"function"==typeof e.onrendered&&(h("options.onrendered is deprecated, html2canvas returns a Promise containing the canvas"),e.onrendered(t)),t})}function o(t,e,i,n,o){var a=e.contentWindow,u=new s(a.document),d=new l(i,u),f=m(t),p="view"===i.type?n:f.right+1,g="view"===i.type?o:f.bottom+1,v=new i.renderer(p,g,d,i,document);return new c(t,v,u,d,i).ready.then(function(){h("Finished rendering");var n;if("view"===i.type)n=r(v.canvas,{width:v.canvas.width,height:v.canvas.height,top:0,left:0,x:0,y:0});else if(t===a.document.body||t===a.document.documentElement||null!=i.canvas)n=v.canvas;else if(i.scale){var o={width:null!=i.width?i.width:f.width,height:null!=i.height?i.height:f.height,top:f.top,left:f.left,x:0,y:0},s={};for(var l in o)o.hasOwnProperty(l)&&(s[l]=o[l]*i.scale);(n=r(v.canvas,s)).style.width=o.width+"px",n.style.height=o.height+"px"}else n=r(v.canvas,{width:null!=i.width?i.width:f.width,height:null!=i.height?i.height:f.height,top:f.top,left:f.left,x:0,y:0});return function(t,e){e.removeContainer&&(t.parentNode.removeChild(t),h("Cleaned up container"))}(e,i),n})}function r(t,e){var i=document.createElement("canvas"),n=Math.min(t.width-1,Math.max(0,e.left)),o=Math.min(t.width,Math.max(1,e.left+e.width)),r=Math.min(t.height-1,Math.max(0,e.top)),s=Math.min(t.height,Math.max(1,e.top+e.height));i.width=e.width,i.height=e.height;var a=o-n,l=s-r;return h("Cropping canvas at:","left:",e.left,"top:",e.top,"width:",a,"height:",l),h("Resulting crop with width",e.width,"and height",e.height,"with x",n,"and y",r),i.getContext("2d").drawImage(t,n,r,a,l,e.x,e.y,a,l),i}var s=t("./support"),a=t("./renderers/canvas"),l=t("./imageloader"),c=t("./nodeparser"),u=t("./nodecontainer"),h=t("./log"),d=t("./utils"),f=t("./clone"),p=t("./proxy").loadUrlDocument,m=d.getBounds,g="data-html2canvas-node",v=0;n.CanvasRenderer=a,n.NodeContainer=u,n.log=h,n.utils=d;var y="undefined"==typeof document||"function"!=typeof Object.create||"function"!=typeof document.createElement("canvas").getContext?function(){return Promise.reject("No canvas support")}:n;e.exports=y},{"./clone":2,"./imageloader":11,"./log":13,"./nodecontainer":14,"./nodeparser":15,"./proxy":16,"./renderers/canvas":20,"./support":22,"./utils":26}],5:[function(t,e,i){function n(t){if(this.src=t,o("DummyImageContainer for",t),!this.promise||!this.image){o("Initiating DummyImageContainer"),n.prototype.image=new Image;var e=this.image;n.prototype.promise=new Promise(function(t,i){e.onload=t,e.onerror=i,e.src=r(),!0===e.complete&&t(e)})}}var o=t("./log"),r=t("./utils").smallImage;e.exports=n},{"./log":13,"./utils":26}],6:[function(t,e,i){var n=t("./utils").smallImage;e.exports=function(t,e){var i,o,r=document.createElement("div"),s=document.createElement("img"),a=document.createElement("span");r.style.visibility="hidden",r.style.fontFamily=t,r.style.fontSize=e,r.style.margin=0,r.style.padding=0,document.body.appendChild(r),s.src=n(),s.width=1,s.height=1,s.style.margin=0,s.style.padding=0,s.style.verticalAlign="baseline",a.style.fontFamily=t,a.style.fontSize=e,a.style.margin=0,a.style.padding=0,a.appendChild(document.createTextNode("Hidden Text")),r.appendChild(a),r.appendChild(s),i=s.offsetTop-a.offsetTop+1,r.removeChild(a),r.appendChild(document.createTextNode("Hidden Text")),r.style.lineHeight="normal",s.style.verticalAlign="super",o=s.offsetTop-r.offsetTop+1,document.body.removeChild(r),this.baseline=i,this.lineWidth=1,this.middle=o}},{"./utils":26}],7:[function(t,e,i){function n(){this.data={}}var o=t("./font");n.prototype.getMetrics=function(t,e){return void 0===this.data[t+"-"+e]&&(this.data[t+"-"+e]=new o(t,e)),this.data[t+"-"+e]},e.exports=n},{"./font":6}],8:[function(t,e,i){function n(e,i,n){this.image=null,this.src=e;var r=this,s=o(e);this.promise=(i?new Promise(function(t){"about:blank"===e.contentWindow.document.URL||null==e.contentWindow.document.documentElement?e.contentWindow.onload=e.onload=function(){t(e)}:t(e)}):this.proxyLoad(n.proxy,s,n)).then(function(e){return t("./core")(e.contentWindow.document.documentElement,{type:"view",width:e.width,height:e.height,proxy:n.proxy,javascriptEnabled:n.javascriptEnabled,removeContainer:n.removeContainer,allowTaint:n.allowTaint,imageTimeout:n.imageTimeout/2})}).then(function(t){return r.image=t})}var o=t("./utils").getBounds,r=t("./proxy").loadUrlDocument;n.prototype.proxyLoad=function(t,e,i){var n=this.src;return r(n.src,t,n.ownerDocument,e.width,e.height,i)},e.exports=n},{"./core":4,"./proxy":16,"./utils":26}],9:[function(t,e,i){function n(t){this.src=t.value,this.colorStops=[],this.type=null,this.x0=.5,this.y0=.5,this.x1=.5,this.y1=.5,this.promise=Promise.resolve(!0)}n.TYPES={LINEAR:1,RADIAL:2},n.REGEXP_COLORSTOP=/^\s*(rgba?\(\s*\d{1,3},\s*\d{1,3},\s*\d{1,3}(?:,\s*[0-9\.]+)?\s*\)|[a-z]{3,20}|#[a-f0-9]{3,6})(?:\s+(\d{1,3}(?:\.\d+)?)(%|px)?)?(?:\s|$)/i,e.exports=n},{}],10:[function(t,e,i){e.exports=function(t,e){this.src=t,this.image=new Image;var i=this;this.tainted=null,this.promise=new Promise(function(n,o){i.image.onload=n,i.image.onerror=o,e&&(i.image.crossOrigin="anonymous"),i.image.src=t,!0===i.image.complete&&n(i.image)})}},{}],11:[function(t,e,i){function n(t,e){this.link=null,this.options=t,this.support=e,this.origin=this.getOrigin(window.location.href)}var o=t("./log"),r=t("./imagecontainer"),s=t("./dummyimagecontainer"),a=t("./proxyimagecontainer"),l=t("./framecontainer"),c=t("./svgcontainer"),u=t("./svgnodecontainer"),h=t("./lineargradientcontainer"),d=t("./webkitgradientcontainer"),f=t("./utils").bind;n.prototype.findImages=function(t){var e=[];return t.reduce(function(t,e){switch(e.node.nodeName){case"IMG":return t.concat([{args:[e.node.src],method:"url"}]);case"svg":case"IFRAME":return t.concat([{args:[e.node],method:e.node.nodeName}])}return t},[]).forEach(this.addImage(e,this.loadImage),this),e},n.prototype.findBackgroundImage=function(t,e){return e.parseBackgroundImages().filter(this.hasImageBackground).forEach(this.addImage(t,this.loadImage),this),t},n.prototype.addImage=function(t,e){return function(i){i.args.forEach(function(n){this.imageExists(t,n)||(t.splice(0,0,e.call(this,i)),o("Added image #"+t.length,"string"==typeof n?n.substring(0,100):n))},this)}},n.prototype.hasImageBackground=function(t){return"none"!==t.method},n.prototype.loadImage=function(t){if("url"===t.method){var e=t.args[0];return!this.isSVG(e)||this.support.svg||this.options.allowTaint?e.match(/data:image\/.*;base64,/i)?new r(e.replace(/url\(['"]{0,}|['"]{0,}\)$/gi,""),!1):this.isSameOrigin(e)||!0===this.options.allowTaint||this.isSVG(e)?new r(e,!1):this.support.cors&&!this.options.allowTaint&&this.options.useCORS?new r(e,!0):this.options.proxy?new a(e,this.options.proxy):new s(e):new c(e)}return"linear-gradient"===t.method?new h(t):"gradient"===t.method?new d(t):"svg"===t.method?new u(t.args[0],this.support.svg):"IFRAME"===t.method?new l(t.args[0],this.isSameOrigin(t.args[0].src),this.options):new s(t)},n.prototype.isSVG=function(t){return"svg"===t.substring(t.length-3).toLowerCase()||c.prototype.isInline(t)},n.prototype.imageExists=function(t,e){return t.some(function(t){return t.src===e})},n.prototype.isSameOrigin=function(t){return this.getOrigin(t)===this.origin},n.prototype.getOrigin=function(t){var e=this.link||(this.link=document.createElement("a"));return e.href=t,e.href=e.href,e.protocol+e.hostname+e.port},n.prototype.getPromise=function(t){return this.timeout(t,this.options.imageTimeout).catch(function(){return new s(t.src).promise.then(function(e){t.image=e})})},n.prototype.get=function(t){var e=null;return this.images.some(function(i){return(e=i).src===t})?e:null},n.prototype.fetch=function(t){return this.images=t.reduce(f(this.findBackgroundImage,this),this.findImages(t)),this.images.forEach(function(t,e){t.promise.then(function(){o("Succesfully loaded image #"+(e+1),t)},function(i){o("Failed loading image #"+(e+1),t,i)})}),this.ready=Promise.all(this.images.map(this.getPromise,this)),o("Finished searching images"),this},n.prototype.timeout=function(t,e){var i,n=Promise.race([t.promise,new Promise(function(n,r){i=setTimeout(function(){o("Timed out loading image",t),r(t)},e)})]).then(function(t){return clearTimeout(i),t});return n.catch(function(){clearTimeout(i)}),n},e.exports=n},{"./dummyimagecontainer":5,"./framecontainer":8,"./imagecontainer":10,"./lineargradientcontainer":12,"./log":13,"./proxyimagecontainer":17,"./svgcontainer":23,"./svgnodecontainer":24,"./utils":26,"./webkitgradientcontainer":27}],12:[function(t,e,i){function n(t){o.apply(this,arguments),this.type=o.TYPES.LINEAR;var e=n.REGEXP_DIRECTION.test(t.args[0])||!o.REGEXP_COLORSTOP.test(t.args[0]);e?t.args[0].split(/\s+/).reverse().forEach(function(t,e){switch(t){case"left":this.x0=0,this.x1=1;break;case"top":this.y0=0,this.y1=1;break;case"right":this.x0=1,this.x1=0;break;case"bottom":this.y0=1,this.y1=0;break;case"to":var i=this.y0,n=this.x0;this.y0=this.y1,this.x0=this.x1,this.x1=n,this.y1=i;break;case"center":break;default:var o=.01*parseFloat(t,10);if(isNaN(o))break;0===e?(this.y0=o,this.y1=1-this.y0):(this.x0=o,this.x1=1-this.x0)}},this):(this.y0=0,this.y1=1),this.colorStops=t.args.slice(e?1:0).map(function(t){var e=t.match(o.REGEXP_COLORSTOP),i=+e[2],n=0===i?"%":e[3];return{color:new r(e[1]),stop:"%"===n?i/100:null}}),null===this.colorStops[0].stop&&(this.colorStops[0].stop=0),null===this.colorStops[this.colorStops.length-1].stop&&(this.colorStops[this.colorStops.length-1].stop=1),this.colorStops.forEach(function(t,e){null===t.stop&&this.colorStops.slice(e).some(function(i,n){return null!==i.stop&&(t.stop=(i.stop-this.colorStops[e-1].stop)/(n+1)+this.colorStops[e-1].stop,!0)},this)},this)}var o=t("./gradientcontainer"),r=t("./color");n.prototype=Object.create(o.prototype),n.REGEXP_DIRECTION=/^\s*(?:to|left|right|top|bottom|center|\d{1,3}(?:\.\d+)?%?)(?:\s|$)/i,e.exports=n},{"./color":3,"./gradientcontainer":9}],13:[function(t,e,i){var n=function(){n.options.logging&&window.console&&window.console.log&&Function.prototype.bind.call(window.console.log,window.console).apply(window.console,[Date.now()-n.options.start+"ms","html2canvas:"].concat([].slice.call(arguments,0)))};n.options={logging:!1},e.exports=n},{}],14:[function(t,e,i){function n(t,e){this.node=t,this.parent=e,this.stack=null,this.bounds=null,this.borders=null,this.clip=[],this.backgroundClip=[],this.offsetBounds=null,this.visible=null,this.computedStyles=null,this.colors={},this.styles={},this.backgroundImages=null,this.transformData=null,this.transformMatrix=null,this.isPseudoElement=!1,this.opacity=null}function o(t){return-1!==t.toString().indexOf("%")}function r(t){return t.replace("px","")}function s(t){return parseFloat(t)}var a=t("./color"),l=t("./utils"),c=l.getBounds,u=l.parseBackgrounds,h=l.offsetBounds;n.prototype.cloneTo=function(t){t.visible=this.visible,t.borders=this.borders,t.bounds=this.bounds,t.clip=this.clip,t.backgroundClip=this.backgroundClip,t.computedStyles=this.computedStyles,t.styles=this.styles,t.backgroundImages=this.backgroundImages,t.opacity=this.opacity},n.prototype.getOpacity=function(){return null===this.opacity?this.opacity=this.cssFloat("opacity"):this.opacity},n.prototype.assignStack=function(t){this.stack=t,t.children.push(this)},n.prototype.isElementVisible=function(){return this.node.nodeType===Node.TEXT_NODE?this.parent.visible:"none"!==this.css("display")&&"hidden"!==this.css("visibility")&&!this.node.hasAttribute("data-html2canvas-ignore")&&("INPUT"!==this.node.nodeName||"hidden"!==this.node.getAttribute("type"))},n.prototype.css=function(t){return this.computedStyles||(this.computedStyles=this.isPseudoElement?this.parent.computedStyle(this.before?":before":":after"):this.computedStyle(null)),this.styles[t]||(this.styles[t]=this.computedStyles[t])},n.prototype.prefixedCss=function(t){var e=this.css(t);return void 0===e&&["webkit","moz","ms","o"].some(function(i){return void 0!==(e=this.css(i+t.substr(0,1).toUpperCase()+t.substr(1)))},this),void 0===e?null:e},n.prototype.computedStyle=function(t){return this.node.ownerDocument.defaultView.getComputedStyle(this.node,t)},n.prototype.cssInt=function(t){var e=parseInt(this.css(t),10);return isNaN(e)?0:e},n.prototype.color=function(t){return this.colors[t]||(this.colors[t]=new a(this.css(t)))},n.prototype.cssFloat=function(t){var e=parseFloat(this.css(t));return isNaN(e)?0:e},n.prototype.fontWeight=function(){var t=this.css("fontWeight");switch(parseInt(t,10)){case 401:t="bold";break;case 400:t="normal"}return t},n.prototype.parseClip=function(){var t=this.css("clip").match(this.CLIP);return t?{top:parseInt(t[1],10),right:parseInt(t[2],10),bottom:parseInt(t[3],10),left:parseInt(t[4],10)}:null},n.prototype.parseBackgroundImages=function(){return this.backgroundImages||(this.backgroundImages=u(this.css("backgroundImage")))},n.prototype.cssList=function(t,e){var i=(this.css(t)||"").split(",");return i=i[e||0]||i[0]||"auto",1===(i=i.trim().split(" ")).length&&(i=[i[0],o(i[0])?"auto":i[0]]),i},n.prototype.parseBackgroundSize=function(t,e,i){var n,r,s=this.cssList("backgroundSize",i);if(o(s[0]))n=t.width*parseFloat(s[0])/100;else{if(/contain|cover/.test(s[0])){var a=t.width/t.height,l=e.width/e.height;return a<l^"contain"===s[0]?{width:t.height*l,height:t.height}:{width:t.width,height:t.width/l}}n=parseInt(s[0],10)}return r="auto"===s[0]&&"auto"===s[1]?e.height:"auto"===s[1]?n/e.width*e.height:o(s[1])?t.height*parseFloat(s[1])/100:parseInt(s[1],10),"auto"===s[0]&&(n=r/e.height*e.width),{width:n,height:r}},n.prototype.parseBackgroundPosition=function(t,e,i,n){var r,s,a=this.cssList("backgroundPosition",i);return r=o(a[0])?(t.width-(n||e).width)*(parseFloat(a[0])/100):parseInt(a[0],10),s="auto"===a[1]?r/e.width*e.height:o(a[1])?(t.height-(n||e).height)*parseFloat(a[1])/100:parseInt(a[1],10),"auto"===a[0]&&(r=s/e.height*e.width),{left:r,top:s}},n.prototype.parseBackgroundRepeat=function(t){return this.cssList("backgroundRepeat",t)[0]},n.prototype.parseTextShadows=function(){var t=this.css("textShadow"),e=[];if(t&&"none"!==t)for(var i=t.match(this.TEXT_SHADOW_PROPERTY),n=0;i&&n<i.length;n++){var o=i[n].match(this.TEXT_SHADOW_VALUES);e.push({color:new a(o[0]),offsetX:o[1]?parseFloat(o[1].replace("px","")):0,offsetY:o[2]?parseFloat(o[2].replace("px","")):0,blur:o[3]?o[3].replace("px",""):0})}return e},n.prototype.parseTransform=function(){if(!this.transformData)if(this.hasTransform()){var t=this.parseBounds(),e=this.prefixedCss("transformOrigin").split(" ").map(r).map(s);e[0]+=t.left,e[1]+=t.top,this.transformData={origin:e,matrix:this.parseTransformMatrix()}}else this.transformData={origin:[0,0],matrix:[1,0,0,1,0,0]};return this.transformData},n.prototype.parseTransformMatrix=function(){if(!this.transformMatrix){var t=this.prefixedCss("transform"),e=t?function(t){if(t&&"matrix"===t[1])return t[2].split(",").map(function(t){return parseFloat(t.trim())});if(t&&"matrix3d"===t[1]){var e=t[2].split(",").map(function(t){return parseFloat(t.trim())});return[e[0],e[1],e[4],e[5],e[12],e[13]]}}(t.match(this.MATRIX_PROPERTY)):null;this.transformMatrix=e||[1,0,0,1,0,0]}return this.transformMatrix},n.prototype.inverseTransform=function(){var t=this.parseTransform();return{origin:t.origin,matrix:function(t){var e=t[0],i=t[2],n=t[4],o=t[1],r=t[3],s=t[5],a=e*r-i*o;return[r,-o,-i,e,i*s-n*r,n*o-e*s].map(function(t){return t/a})}(t.matrix)}},n.prototype.parseBounds=function(){return this.bounds||(this.bounds=this.hasTransform()?h(this.node):c(this.node))},n.prototype.hasTransform=function(){return"1,0,0,1,0,0"!==this.parseTransformMatrix().join(",")||this.parent&&this.parent.hasTransform()},n.prototype.getValue=function(){var t=this.node.value||"";return"SELECT"===this.node.tagName?t=function(t){var e=t.options[t.selectedIndex||0];return e?e.text||"":""}(this.node):"password"===this.node.type&&(t=Array(t.length+1).join("")),0===t.length?this.node.placeholder||"":t},n.prototype.MATRIX_PROPERTY=/(matrix|matrix3d)\((.+)\)/,n.prototype.TEXT_SHADOW_PROPERTY=/((rgba|rgb)\([^\)]+\)(\s-?\d+px){0,})/g,n.prototype.TEXT_SHADOW_VALUES=/(-?\d+px)|(#.+)|(rgb\(.+\))|(rgba\(.+\))/g,n.prototype.CLIP=/^rect\((\d+)px,? (\d+)px,? (\d+)px,? (\d+)px\)$/,e.exports=n},{"./color":3,"./utils":26}],15:[function(t,e,i){function n(t,e,i,n,o){I("Starting NodeParser"),this.renderer=e,this.options=o,this.range=null,this.support=i,this.renderQueue=[],this.stack=new F(!0,1,t.ownerDocument,null);var r=new P(t,null);if(o.background&&e.rectangle(0,0,e.width,e.height,new q(o.background)),t===t.ownerDocument.documentElement){var s=new P(r.color("backgroundColor").isTransparent()?t.ownerDocument.body:t.ownerDocument.documentElement,null);e.rectangle(0,0,e.width,e.height,s.color("backgroundColor"))}r.visibile=r.isElementVisible(),this.createPseudoHideStyles(t.ownerDocument),this.disableAnimations(t.ownerDocument),this.nodes=M([r].concat(this.getChildren(r)).filter(function(t){return t.visible=t.isElementVisible()}).map(this.getPseudoElements,this)),this.fontMetrics=new L,I("Fetched nodes, total:",this.nodes.length),I("Calculate overflow clips"),this.calculateOverflowClips(),I("Start fetching images"),this.images=n.fetch(this.nodes.filter(C)),this.ready=this.images.ready.then(V(function(){return I("Images loaded, starting parsing"),I("Creating stacking contexts"),this.createStackingContexts(),I("Sorting stacking contexts"),this.sortStackingContexts(this.stack),this.parse(this.stack),I("Render queue created with "+this.renderQueue.length+" items"),new Promise(V(function(t){o.async?"function"==typeof o.async?o.async.call(this,this.renderQueue,t):this.renderQueue.length>0?(this.renderIndex=0,this.asyncRenderer(this.renderQueue,t)):t():(this.renderQueue.forEach(this.paint,this),t())},this))},this))}function o(t){return t.parent&&t.parent.clip.length}function r(t){return t.replace(/(\-[a-z])/g,function(t){return t.toUpperCase().replace("-","")})}function s(){}function a(t,e,i,n){var o={top:e.top+t[0].width/2,right:e.right-t[1].width/2,bottom:e.bottom-t[2].width/2,left:e.left+t[3].width/2};return t.map(function(r,s){if(r.width>0){var a=e.left,l=e.top,c=e.width,u=e.height-t[2].width;switch(s){case 0:u=t[0].width,r.args=h({c1:[a,l],c2:[a+c,l],c3:[a+c-t[1].width,l+u],c4:[a+t[3].width,l+u]},n[0],n[1],i.topLeftOuter,i.topLeftInner,i.topRightOuter,i.topRightInner),r.pathArgs=d({c1:[o.left,o.top],c2:[o.right,o.top]},n[0],n[1],i.topLeft,i.topRight);break;case 1:a=e.left+e.width-t[1].width,c=t[1].width,r.args=h({c1:[a+c,l],c2:[a+c,l+u+t[2].width],c3:[a,l+u],c4:[a,l+t[0].width]},n[1],n[2],i.topRightOuter,i.topRightInner,i.bottomRightOuter,i.bottomRightInner),r.pathArgs=d({c1:[o.right,o.top],c2:[o.right,o.bottom]},n[1],n[2],i.topRight,i.bottomRight);break;case 2:l=l+e.height-t[2].width,u=t[2].width,r.args=h({c1:[a+c,l+u],c2:[a,l+u],c3:[a+t[3].width,l],c4:[a+c-t[3].width,l]},n[2],n[3],i.bottomRightOuter,i.bottomRightInner,i.bottomLeftOuter,i.bottomLeftInner),r.pathArgs=d({c1:[o.right,o.bottom],c2:[o.left,o.bottom]},n[2],n[3],i.bottomRight,i.bottomLeft);break;case 3:c=t[3].width,r.args=h({c1:[a,l+u+t[2].width],c2:[a,l],c3:[a+c,l+t[0].width],c4:[a+c,l+u]},n[3],n[0],i.bottomLeftOuter,i.bottomLeftInner,i.topLeftOuter,i.topLeftInner),r.pathArgs=d({c1:[o.left,o.bottom],c2:[o.left,o.top]},n[3],n[0],i.bottomLeft,i.topLeft)}}return r})}function l(t,e,i,n){var o=(Math.sqrt(2)-1)/3*4,r=i*o,s=n*o,a=t+i,l=e+n;return{topLeft:u({x:t,y:l},{x:t,y:l-s},{x:a-r,y:e},{x:a,y:e}),topRight:u({x:t,y:e},{x:t+r,y:e},{x:a,y:l-s},{x:a,y:l}),bottomRight:u({x:a,y:e},{x:a,y:e+s},{x:t+r,y:l},{x:t,y:l}),bottomLeft:u({x:a,y:l},{x:a-r,y:l},{x:t,y:e+s},{x:t,y:e})}}function c(t,e,i){var n=t.left,o=t.top,r=t.width,s=t.height,a=e[0][0]<r/2?e[0][0]:r/2,c=e[0][1]<s/2?e[0][1]:s/2,u=e[1][0]<r/2?e[1][0]:r/2,h=e[1][1]<s/2?e[1][1]:s/2,d=e[2][0]<r/2?e[2][0]:r/2,f=e[2][1]<s/2?e[2][1]:s/2,p=e[3][0]<r/2?e[3][0]:r/2,m=e[3][1]<s/2?e[3][1]:s/2,g=r-u,v=s-f,y=r-d,b=s-m;return{topLeft:l(n+i[3].width/2,o+i[0].width/2,Math.max(0,a-i[3].width/2),Math.max(0,c-i[0].width/2)).topLeft.subdivide(.5),topRight:l(n+Math.min(g,r+i[3].width/2),o+i[0].width/2,g>r+i[3].width/2?0:u-i[3].width/2,h-i[0].width/2).topRight.subdivide(.5),bottomRight:l(n+Math.min(y,r-i[3].width/2),o+Math.min(v,s+i[0].width/2),Math.max(0,d-i[1].width/2),f-i[2].width/2).bottomRight.subdivide(.5),bottomLeft:l(n+i[3].width/2,o+b,Math.max(0,p-i[3].width/2),m-i[2].width/2).bottomLeft.subdivide(.5),topLeftOuter:l(n,o,a,c).topLeft.subdivide(.5),topLeftInner:l(n+i[3].width,o+i[0].width,Math.max(0,a-i[3].width),Math.max(0,c-i[0].width)).topLeft.subdivide(.5),topRightOuter:l(n+g,o,u,h).topRight.subdivide(.5),topRightInner:l(n+Math.min(g,r+i[3].width),o+i[0].width,g>r+i[3].width?0:u-i[3].width,h-i[0].width).topRight.subdivide(.5),bottomRightOuter:l(n+y,o+v,d,f).bottomRight.subdivide(.5),bottomRightInner:l(n+Math.min(y,r-i[3].width),o+Math.min(v,s+i[0].width),Math.max(0,d-i[1].width),f-i[2].width).bottomRight.subdivide(.5),bottomLeftOuter:l(n,o+b,p,m).bottomLeft.subdivide(.5),bottomLeftInner:l(n+i[3].width,o+b,Math.max(0,p-i[3].width),m-i[2].width).bottomLeft.subdivide(.5)}}function u(t,e,i,n){var o=function(t,e,i){return{x:t.x+(e.x-t.x)*i,y:t.y+(e.y-t.y)*i}};return{start:t,startControl:e,endControl:i,end:n,subdivide:function(r){var s=o(t,e,r),a=o(e,i,r),l=o(i,n,r),c=o(s,a,r),h=o(a,l,r),d=o(c,h,r);return[u(t,s,c,d),u(d,h,l,n)]},curveTo:function(t){t.push(["bezierCurve",e.x,e.y,i.x,i.y,n.x,n.y])},curveToReversed:function(n){n.push(["bezierCurve",i.x,i.y,e.x,e.y,t.x,t.y])}}}function h(t,e,i,n,o,r,s){var a=[];return e[0]>0||e[1]>0?(a.push(["line",n[1].start.x,n[1].start.y]),n[1].curveTo(a)):a.push(["line",t.c1[0],t.c1[1]]),i[0]>0||i[1]>0?(a.push(["line",r[0].start.x,r[0].start.y]),r[0].curveTo(a),a.push(["line",s[0].end.x,s[0].end.y]),s[0].curveToReversed(a)):(a.push(["line",t.c2[0],t.c2[1]]),a.push(["line",t.c3[0],t.c3[1]])),e[0]>0||e[1]>0?(a.push(["line",o[1].end.x,o[1].end.y]),o[1].curveToReversed(a)):a.push(["line",t.c4[0],t.c4[1]]),a}function d(t,e,i,n,o){var r=[];return e[0]>0||e[1]>0?(r.push(["line",n[1].start.x,n[1].start.y]),n[1].curveTo(r)):r.push(["line",t.c1[0],t.c1[1]]),i[0]>0||i[1]>0?(r.push(["line",o[0].start.x,o[0].start.y]),o[0].curveTo(r)):r.push(["line",t.c2[0],t.c2[1]]),r}function f(t,e,i,n,o,r,s){e[0]>0||e[1]>0?(t.push(["line",n[0].start.x,n[0].start.y]),n[0].curveTo(t),n[1].curveTo(t)):t.push(["line",r,s]),(i[0]>0||i[1]>0)&&t.push(["line",o[0].start.x,o[0].start.y])}function p(t){return t.cssInt("zIndex")<0}function m(t){return t.cssInt("zIndex")>0}function g(t){return 0===t.cssInt("zIndex")}function v(t){return-1!==["inline","inline-block","inline-table"].indexOf(t.css("display"))}function y(t){return t instanceof F}function b(t){return t.node.data.trim().length>0}function _(t){return t.nodeType===Node.TEXT_NODE||t.nodeType===Node.ELEMENT_NODE}function w(t){return"static"!==t.css("position")}function k(t){return"none"!==t.css("float")}function x(t){var e=this;return function(){return!t.apply(e,arguments)}}function C(t){return t.node.nodeType===Node.ELEMENT_NODE}function T(t){return!0===t.isPseudoElement}function D(t){return t.node.nodeType===Node.TEXT_NODE}function E(t){return parseInt(t,10)}function O(t){return t.width}function S(t){return t.node.nodeType!==Node.ELEMENT_NODE||-1===["SCRIPT","HEAD","TITLE","OBJECT","BR","OPTION"].indexOf(t.node.nodeName)}function M(t){return[].concat.apply([],t)}var I=t("./log"),A=t("punycode"),P=t("./nodecontainer"),N=t("./textcontainer"),j=t("./pseudoelementcontainer"),L=t("./fontmetrics"),q=t("./color"),F=t("./stackingcontext"),B=t("./utils"),V=B.bind,H=B.getBounds,R=B.parseBackgrounds,z=B.offsetBounds;n.prototype.calculateOverflowClips=function(){this.nodes.forEach(function(t){if(C(t)){T(t)&&t.appendToDOM(),t.borders=this.parseBorders(t);var e="hidden"===t.css("overflow")?[t.borders.clip]:[],i=t.parseClip();i&&-1!==["absolute","fixed"].indexOf(t.css("position"))&&e.push([["rect",t.bounds.left+i.left,t.bounds.top+i.top,i.right-i.left,i.bottom-i.top]]),t.clip=o(t)?t.parent.clip.concat(e):e,t.backgroundClip="hidden"!==t.css("overflow")?t.clip.concat([t.borders.clip]):t.clip,T(t)&&t.cleanDOM()}else D(t)&&(t.clip=o(t)?t.parent.clip:[]);T(t)||(t.bounds=null)},this)},n.prototype.asyncRenderer=function(t,e,i){i=i||Date.now(),this.paint(t[this.renderIndex++]),t.length===this.renderIndex?e():i+20>Date.now()?this.asyncRenderer(t,e,i):setTimeout(V(function(){this.asyncRenderer(t,e)},this),0)},n.prototype.createPseudoHideStyles=function(t){this.createStyles(t,"."+j.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+':before { content: "" !important; display: none !important; }.'+j.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER+':after { content: "" !important; display: none !important; }')},n.prototype.disableAnimations=function(t){this.createStyles(t,"* { -webkit-animation: none !important; -moz-animation: none !important; -o-animation: none !important; animation: none !important; -webkit-transition: none !important; -moz-transition: none !important; -o-transition: none !important; transition: none !important;}")},n.prototype.createStyles=function(t,e){var i=t.createElement("style");i.innerHTML=e,t.body.appendChild(i)},n.prototype.getPseudoElements=function(t){var e=[[t]];if(t.node.nodeType===Node.ELEMENT_NODE){var i=this.getPseudoElement(t,":before"),n=this.getPseudoElement(t,":after");i&&e.push(i),n&&e.push(n)}return M(e)},n.prototype.getPseudoElement=function(t,e){var i=t.computedStyle(e);if(!i||!i.content||"none"===i.content||"-moz-alt-content"===i.content||"none"===i.display)return null;for(var n=function(t){var e=t.substr(0,1);return e===t.substr(t.length-1)&&e.match(/'|"/)?t.substr(1,t.length-2):t}(i.content),o="url"===n.substr(0,3),s=document.createElement(o?"img":"html2canvaspseudoelement"),a=new j(s,t,e),l=i.length-1;l>=0;l--){var c=r(i.item(l));s.style[c]=i[c]}if(s.className=j.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+" "+j.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER,o)return s.src=R(n)[0].args[0],[a];var u=document.createTextNode(n);return s.appendChild(u),[a,new N(u,a)]},n.prototype.getChildren=function(t){return M([].filter.call(t.node.childNodes,_).map(function(e){var i=[e.nodeType===Node.TEXT_NODE?new N(e,t):new P(e,t)].filter(S);return e.nodeType===Node.ELEMENT_NODE&&i.length&&"TEXTAREA"!==e.tagName?i[0].isElementVisible()?i.concat(this.getChildren(i[0])):[]:i},this))},n.prototype.newStackingContext=function(t,e){var i=new F(e,t.getOpacity(),t.node,t.parent);t.cloneTo(i);(e?i.getParentStack(this):i.parent.stack).contexts.push(i),t.stack=i},n.prototype.createStackingContexts=function(){this.nodes.forEach(function(t){C(t)&&(this.isRootElement(t)||function(t){return t.getOpacity()<1}(t)||function(t){var e=t.css("position");return"auto"!==(-1!==["absolute","relative","fixed"].indexOf(e)?t.css("zIndex"):"auto")}(t)||this.isBodyWithTransparentRoot(t)||t.hasTransform())?this.newStackingContext(t,!0):C(t)&&(w(t)&&g(t)||function(t){return-1!==["inline-block","inline-table"].indexOf(t.css("display"))}(t)||k(t))?this.newStackingContext(t,!1):t.assignStack(t.parent.stack)},this)},n.prototype.isBodyWithTransparentRoot=function(t){return"BODY"===t.node.nodeName&&t.parent.color("backgroundColor").isTransparent()},n.prototype.isRootElement=function(t){return null===t.parent},n.prototype.sortStackingContexts=function(t){t.contexts.sort(function(t){return function(e,i){return e.cssInt("zIndex")+t.indexOf(e)/t.length-(i.cssInt("zIndex")+t.indexOf(i)/t.length)}}(t.contexts.slice(0))),t.contexts.forEach(this.sortStackingContexts,this)},n.prototype.parseTextBounds=function(t){return function(e,i,n){if("none"!==t.parent.css("textDecoration").substr(0,4)||0!==e.trim().length){if(this.support.rangeBounds&&!t.parent.hasTransform()){var o=n.slice(0,i).join("").length;return this.getRangeBounds(t.node,o,e.length)}if(t.node&&"string"==typeof t.node.data){var r=t.node.splitText(e.length),s=this.getWrapperBounds(t.node,t.parent.hasTransform());return t.node=r,s}}else this.support.rangeBounds&&!t.parent.hasTransform()||(t.node=t.node.splitText(e.length));return{}}},n.prototype.getWrapperBounds=function(t,e){var i=t.ownerDocument.createElement("html2canvaswrapper"),n=t.parentNode,o=t.cloneNode(!0);i.appendChild(t.cloneNode(!0)),n.replaceChild(i,t);var r=e?z(i):H(i);return n.replaceChild(o,i),r},n.prototype.getRangeBounds=function(t,e,i){var n=this.range||(this.range=t.ownerDocument.createRange());return n.setStart(t,e),n.setEnd(t,e+i),n.getBoundingClientRect()},n.prototype.parse=function(t){var e=t.contexts.filter(p),i=t.children.filter(C),n=i.filter(x(k)),o=n.filter(x(w)).filter(x(v)),r=i.filter(x(w)).filter(k),a=n.filter(x(w)).filter(v),l=t.contexts.concat(n.filter(w)).filter(g),c=t.children.filter(D).filter(b),u=t.contexts.filter(m);e.concat(o).concat(r).concat(a).concat(l).concat(c).concat(u).forEach(function(t){this.renderQueue.push(t),y(t)&&(this.parse(t),this.renderQueue.push(new s))},this)},n.prototype.paint=function(t){try{t instanceof s?this.renderer.ctx.restore():D(t)?(T(t.parent)&&t.parent.appendToDOM(),this.paintText(t),T(t.parent)&&t.parent.cleanDOM()):this.paintNode(t)}catch(t){if(I(t),this.options.strict)throw t}},n.prototype.paintNode=function(t){y(t)&&(this.renderer.setOpacity(t.opacity),this.renderer.ctx.save(),t.hasTransform()&&this.renderer.setTransform(t.parseTransform())),"INPUT"===t.node.nodeName&&"checkbox"===t.node.type?this.paintCheckbox(t):"INPUT"===t.node.nodeName&&"radio"===t.node.type?this.paintRadio(t):this.paintElement(t)},n.prototype.paintElement=function(t){var e=t.parseBounds();this.renderer.clip(t.backgroundClip,function(){this.renderer.renderBackground(t,e,t.borders.borders.map(O))},this,t),this.renderer.mask(t.backgroundClip,function(){this.renderer.renderShadows(t,t.borders.clip)},this,t),this.renderer.clip(t.clip,function(){this.renderer.renderBorders(t.borders.borders)},this,t),this.renderer.clip(t.backgroundClip,function(){switch(t.node.nodeName){case"svg":case"IFRAME":var i=this.images.get(t.node);i?this.renderer.renderImage(t,e,t.borders,i):I("Error loading <"+t.node.nodeName+">",t.node);break;case"IMG":var n=this.images.get(t.node.src);n?this.renderer.renderImage(t,e,t.borders,n):I("Error loading <img>",t.node.src);break;case"CANVAS":this.renderer.renderImage(t,e,t.borders,{image:t.node});break;case"SELECT":case"INPUT":case"TEXTAREA":this.paintFormValue(t)}},this,t)},n.prototype.paintCheckbox=function(t){var e=t.parseBounds(),i=Math.min(e.width,e.height),n={width:i-1,height:i-1,top:e.top,left:e.left},o=[3,3],r=[o,o,o,o],s=[1,1,1,1].map(function(t){return{color:new q("#A5A5A5"),width:t}}),l=c(n,r,s);this.renderer.clip(t.backgroundClip,function(){this.renderer.rectangle(n.left+1,n.top+1,n.width-2,n.height-2,new q("#DEDEDE")),this.renderer.renderBorders(a(s,n,l,r)),t.node.checked&&(this.renderer.font(new q("#424242"),"normal","normal","bold",i-3+"px","arial"),this.renderer.text("",n.left+i/6,n.top+i-1))},this,t)},n.prototype.paintRadio=function(t){var e=t.parseBounds(),i=Math.min(e.width,e.height)-2;this.renderer.clip(t.backgroundClip,function(){this.renderer.circleStroke(e.left+1,e.top+1,i,new q("#DEDEDE"),1,new q("#A5A5A5")),t.node.checked&&this.renderer.circle(Math.ceil(e.left+i/4)+1,Math.ceil(e.top+i/4)+1,Math.floor(i/2),new q("#424242"))},this,t)},n.prototype.paintFormValue=function(t){var e=t.getValue();if(e.length>0){var i=t.node.ownerDocument,n=i.createElement("html2canvaswrapper");["lineHeight","textAlign","fontFamily","fontWeight","fontSize","color","paddingLeft","paddingTop","paddingRight","paddingBottom","width","height","borderLeftStyle","borderTopStyle","borderLeftWidth","borderTopWidth","boxSizing","whiteSpace","wordWrap"].forEach(function(e){try{n.style[e]=t.css(e)}catch(t){I("html2canvas: Parse: Exception caught in renderFormValue: "+t.message)}});var o=t.parseBounds();n.style.position="fixed",n.style.left=o.left+"px",n.style.top=o.top+"px",n.textContent=e,i.body.appendChild(n),this.paintText(new N(n.firstChild,t)),i.body.removeChild(n)}},n.prototype.paintText=function(t){t.applyTextTransform();var e=A.ucs2.decode(t.node.data),i=(!this.options.letterRendering||function(t){return/^(normal|none|0px)$/.test(t.parent.css("letterSpacing"))}(t))&&!function(t){return/[^\u0000-\u00ff]/.test(t)}(t.node.data),n=i?function(t){for(var e,i=[],n=0,o=!1;t.length;)(function(t){return-1!==[32,13,10,9,45].indexOf(t)})(t[n])===o?((e=t.splice(0,n)).length&&i.push(A.ucs2.encode(e)),o=!o,n=0):n++,n>=t.length&&(e=t.splice(0,n)).length&&i.push(A.ucs2.encode(e));return i}(e):e.map(function(t){return A.ucs2.encode([t])});i||(t.parent.node.style.fontVariantLigatures="none");var o=t.parent.fontWeight(),r=t.parent.css("fontSize"),s=t.parent.css("fontFamily"),a=t.parent.parseTextShadows();this.renderer.font(t.parent.color("color"),t.parent.css("fontStyle"),t.parent.css("fontVariant"),o,r,s),a.length?this.renderer.fontShadow(a[0].color,a[0].offsetX,a[0].offsetY,a[0].blur):this.renderer.clearShadow(),this.renderer.clip(t.parent.clip,function(){n.map(this.parseTextBounds(t),this).forEach(function(e,i){e&&(this.renderer.text(n[i],e.left,e.bottom),this.renderTextDecoration(t.parent,e,this.fontMetrics.getMetrics(s,r)))},this)},this,t.parent)},n.prototype.renderTextDecoration=function(t,e,i){switch(t.css("textDecoration").split(" ")[0]){case"underline":this.renderer.rectangle(e.left,Math.round(e.top+i.baseline+i.lineWidth),e.width,1,t.color("color"));break;case"overline":this.renderer.rectangle(e.left,Math.round(e.top),e.width,1,t.color("color"));break;case"line-through":this.renderer.rectangle(e.left,Math.ceil(e.top+i.middle+i.lineWidth),e.width,1,t.color("color"))}};var $={inset:[["darken",.6],["darken",.1],["darken",.1],["darken",.6]]};n.prototype.parseBorders=function(t){var e=t.parseBounds(),i=function(t){return["TopLeft","TopRight","BottomRight","BottomLeft"].map(function(e){var i=t.css("border"+e+"Radius").split(" ");return i.length<=1&&(i[1]=i[0]),i.map(E)})}(t),n=["Top","Right","Bottom","Left"].map(function(e,i){var n=t.css("border"+e+"Style"),o=t.color("border"+e+"Color");"inset"===n&&o.isBlack()&&(o=new q([255,255,255,o.a]));var r=$[n]?$[n][i]:null;return{width:t.cssInt("border"+e+"Width"),color:r?o[r[0]](r[1]):o,style:n,pathArgs:null,args:null}}),o=c(e,i,n);return{clip:this.parseBackgroundClip(t,o,n,i,e),borders:a(n,e,o,i)}},n.prototype.parseBackgroundClip=function(t,e,i,n,o){var r=[];switch(t.css("backgroundClip")){case"content-box":case"padding-box":f(r,n[0],n[1],e.topLeftInner,e.topRightInner,o.left+i[3].width,o.top+i[0].width),f(r,n[1],n[2],e.topRightInner,e.bottomRightInner,o.left+o.width-i[1].width,o.top+i[0].width),f(r,n[2],n[3],e.bottomRightInner,e.bottomLeftInner,o.left+o.width-i[1].width,o.top+o.height-i[2].width),f(r,n[3],n[0],e.bottomLeftInner,e.topLeftInner,o.left+i[3].width,o.top+o.height-i[2].width);break;default:f(r,n[0],n[1],e.topLeftOuter,e.topRightOuter,o.left,o.top),f(r,n[1],n[2],e.topRightOuter,e.bottomRightOuter,o.left+o.width,o.top),f(r,n[2],n[3],e.bottomRightOuter,e.bottomLeftOuter,o.left+o.width,o.top+o.height),f(r,n[3],n[0],e.bottomLeftOuter,e.topLeftOuter,o.left,o.top+o.height)}return r},e.exports=n},{"./color":3,"./fontmetrics":7,"./log":13,"./nodecontainer":14,"./pseudoelementcontainer":18,"./stackingcontext":21,"./textcontainer":25,"./utils":26,punycode:1}],16:[function(t,e,i){function n(t,e,i){var n="withCredentials"in new XMLHttpRequest;if(!e)return Promise.reject("No proxy configured");var l=r(n),c=s(e,t,l);return n?a(c):o(i,c,l).then(function(t){return h(t.content)})}function o(t,e,i){return new Promise(function(n,o){var r=t.createElement("script"),s=function(){delete window.html2canvas.proxy[i],t.body.removeChild(r)};window.html2canvas.proxy[i]=function(t){s(),n(t)},r.src=e,r.onerror=function(t){s(),o(t)},t.body.appendChild(r)})}function r(t){return t?"":"html2canvas_"+Date.now()+"_"+ ++d+"_"+Math.round(1e5*Math.random())}function s(t,e,i){return t+"?url="+encodeURIComponent(e)+(i.length?"&callback=html2canvas.proxy."+i:"")}var a=t("./xhr"),l=t("./utils"),c=t("./log"),u=t("./clone"),h=l.decode64,d=0;i.Proxy=n,i.ProxyURL=function(t,e,i){var n="crossOrigin"in new Image,a=r(n),l=s(e,t,a);return n?Promise.resolve(l):o(i,l,a).then(function(t){return"data:"+t.type+";base64,"+t.content})},i.loadUrlDocument=function(t,e,i,o,r,s){return new n(t,e,window.document).then(function(t){return function(e){var i,n=new DOMParser;try{i=n.parseFromString(e,"text/html")}catch(t){c("DOMParser not supported, falling back to createHTMLDocument"),i=document.implementation.createHTMLDocument("");try{i.open(),i.write(e),i.close()}catch(t){c("createHTMLDocument write not supported, falling back to document.body.innerHTML"),i.body.innerHTML=e}}var o=i.querySelector("base");if(!o||!o.href.host){var r=i.createElement("base");r.href=t,i.head.insertBefore(r,i.head.firstChild)}return i}}(t)).then(function(t){return u(t,i,o,r,s,0,0)})}},{"./clone":2,"./log":13,"./utils":26,"./xhr":28}],17:[function(t,e,i){var n=t("./proxy").ProxyURL;e.exports=function(t,e){var i=document.createElement("a");i.href=t,t=i.href,this.src=t,this.image=new Image;var o=this;this.promise=new Promise(function(i,r){o.image.crossOrigin="Anonymous",o.image.onload=i,o.image.onerror=r,new n(t,e,document).then(function(t){o.image.src=t}).catch(r)})}},{"./proxy":16}],18:[function(t,e,i){function n(t,e,i){o.call(this,t,e),this.isPseudoElement=!0,this.before=":before"===i}var o=t("./nodecontainer");n.prototype.cloneTo=function(t){n.prototype.cloneTo.call(this,t),t.isPseudoElement=!0,t.before=this.before},(n.prototype=Object.create(o.prototype)).appendToDOM=function(){this.before?this.parent.node.insertBefore(this.node,this.parent.node.firstChild):this.parent.node.appendChild(this.node),this.parent.node.className+=" "+this.getHideClass()},n.prototype.cleanDOM=function(){this.node.parentNode.removeChild(this.node),this.parent.node.className=this.parent.node.className.replace(this.getHideClass(),"")},n.prototype.getHideClass=function(){return this["PSEUDO_HIDE_ELEMENT_CLASS_"+(this.before?"BEFORE":"AFTER")]},n.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE="___html2canvas___pseudoelement_before",n.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER="___html2canvas___pseudoelement_after",e.exports=n},{"./nodecontainer":14}],19:[function(t,e,i){function n(t,e,i,n,o){this.width=t,this.height=e,this.images=i,this.options=n,this.document=o}var o=t("./log");n.prototype.renderImage=function(t,e,i,n){var o=t.cssInt("paddingLeft"),r=t.cssInt("paddingTop"),s=t.cssInt("paddingRight"),a=t.cssInt("paddingBottom"),l=i.borders,c=e.width-(l[1].width+l[3].width+o+s),u=e.height-(l[0].width+l[2].width+r+a);this.drawImage(n,0,0,n.image.width||c,n.image.height||u,e.left+o+l[3].width,e.top+r+l[0].width,c,u)},n.prototype.renderBackground=function(t,e,i){e.height>0&&e.width>0&&(this.renderBackgroundColor(t,e),this.renderBackgroundImage(t,e,i))},n.prototype.renderBackgroundColor=function(t,e){var i=t.color("backgroundColor");i.isTransparent()||this.rectangle(e.left,e.top,e.width,e.height,i)},n.prototype.renderShadows=function(t,e){var i=t.css("boxShadow");if("none"!==i){var n=i.split(/,(?![^(]*\))/);this.shadow(e,n)}},n.prototype.renderBorders=function(t){t.forEach(this.renderBorder,this)},n.prototype.renderBorder=function(t){if(!t.color.isTransparent()&&null!==t.args)if("dashed"===t.style||"dotted"===t.style){var e="dashed"===t.style?3:t.width;this.ctx.setLineDash([e]),this.path(t.pathArgs),this.ctx.strokeStyle=t.color,this.ctx.lineWidth=t.width,this.ctx.stroke()}else this.drawShape(t.args,t.color)},n.prototype.renderBackgroundImage=function(t,e,i){t.parseBackgroundImages().reverse().forEach(function(n,r,s){switch(n.method){case"url":var a=this.images.get(n.args[0]);a?this.renderBackgroundRepeating(t,e,a,s.length-(r+1),i):o("Error loading background-image",n.args[0]);break;case"linear-gradient":case"gradient":var l=this.images.get(n.value);l?this.renderBackgroundGradient(l,e,i):o("Error loading background-image",n.args[0]);break;case"none":break;default:o("Unknown background-image type",n.args[0])}},this)},n.prototype.renderBackgroundRepeating=function(t,e,i,n,o){var r=t.parseBackgroundSize(e,i.image,n),s=t.parseBackgroundPosition(e,i.image,n,r);switch(t.parseBackgroundRepeat(n)){case"repeat-x":case"repeat no-repeat":this.backgroundRepeatShape(i,s,r,e,e.left+o[3],e.top+s.top+o[0],99999,r.height,o);break;case"repeat-y":case"no-repeat repeat":this.backgroundRepeatShape(i,s,r,e,e.left+s.left+o[3],e.top+o[0],r.width,99999,o);break;case"no-repeat":this.backgroundRepeatShape(i,s,r,e,e.left+s.left+o[3],e.top+s.top+o[0],r.width,r.height,o);break;default:this.renderBackgroundRepeat(i,s,r,{top:e.top,left:e.left},o[3],o[0])}},e.exports=n},{"./log":13}],20:[function(t,e,i){function n(t,e){r.apply(this,arguments),this.canvas=this.options.canvas||this.document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.options.canvas||(this.options.dpi&&(this.options.scale=this.options.dpi/96),this.options.scale?(this.canvas.style.width=t+"px",this.canvas.style.height=e+"px",this.canvas.width=Math.floor(t*this.options.scale),this.canvas.height=Math.floor(e*this.options.scale),this.ctx.scale(this.options.scale,this.options.scale)):(this.canvas.width=t,this.canvas.height=e)),this.taintCtx=this.document.createElement("canvas").getContext("2d"),this.ctx.textBaseline="bottom",this.variables={},a("Initialized CanvasRenderer with size",t,"x",e)}function o(t){return t.length>0}var r=t("../renderer"),s=t("../lineargradientcontainer"),a=t("../log");(n.prototype=Object.create(r.prototype)).setFillStyle=function(t){return this.ctx.fillStyle="object"==typeof t&&t.isColor?t.toString():t,this.ctx},n.prototype.rectangle=function(t,e,i,n,o){this.setFillStyle(o).fillRect(t,e,i,n)},n.prototype.circle=function(t,e,i,n){this.setFillStyle(n),this.ctx.beginPath(),this.ctx.arc(t+i/2,e+i/2,i/2,0,2*Math.PI,!0),this.ctx.closePath(),this.ctx.fill()},n.prototype.circleStroke=function(t,e,i,n,o,r){this.circle(t,e,i,n),this.ctx.strokeStyle=r.toString(),this.ctx.stroke()},n.prototype.shadow=function(t,e){var i=this.setFillStyle("white");i.save(),this.shape(t),e.forEach(function(t){var e=function(t){var e={color:/^(#|rgb|hsl|(?!(inset|initial|inherit))\D+)/i,inset:/^inset/i,px:/px$/i},i=["x","y","blur","spread"],n=t.split(/ (?![^(]*\))/),o={};for(var r in e)o[r]=n.filter(e[r].test.bind(e[r])),o[r]=0===o[r].length?null:1===o[r].length?o[r][0]:o[r];for(var s=0;s<o.px.length;s++)o[i[s]]=parseInt(o.px[s]);return o}(t);e.inset||(i.shadowOffsetX=e.x,i.shadowOffsetY=e.y,i.shadowColor=e.color,i.shadowBlur=e.blur,i.fill())},this),i.restore()},n.prototype.drawShape=function(t,e){this.shape(t),this.setFillStyle(e).fill()},n.prototype.taints=function(t){if(null===t.tainted){this.taintCtx.drawImage(t.image,0,0);try{this.taintCtx.getImageData(0,0,1,1),t.tainted=!1}catch(e){this.taintCtx=document.createElement("canvas").getContext("2d"),t.tainted=!0}}return t.tainted},n.prototype.drawImage=function(t,e,i,n,o,r,s,a,l){this.taints(t)&&!this.options.allowTaint||this.ctx.drawImage(t.image,e,i,n,o,r,s,a,l)},n.prototype.clip=function(t,e,i,n){this.ctx.save(),n&&n.hasTransform()?(this.setTransform(n.inverseTransform()),t.filter(o).forEach(function(t){this.shape(t).clip()},this),this.setTransform(n.parseTransform())):t.filter(o).forEach(function(t){this.shape(t).clip()},this),e.call(i),this.ctx.restore()},n.prototype.mask=function(t,e,i,n){var o=t[t.length-1];if(o&&o.length){var r=[["rect",this.canvas.width,0,-this.canvas.width,this.canvas.height]].concat(o).concat([o[0]]);t=t.slice(0,-1).concat([r])}this.clip(t,e,i,n)},n.prototype.shape=function(t){return this.ctx.beginPath(),t.forEach(function(t,e){"rect"===t[0]?this.ctx.rect.apply(this.ctx,t.slice(1)):this.ctx[0===e?"moveTo":t[0]+"To"].apply(this.ctx,t.slice(1))},this),this.ctx.closePath(),this.ctx},n.prototype.path=function(t){return this.ctx.beginPath(),t.forEach(function(t,e){"rect"===t[0]?this.ctx.rect.apply(this.ctx,t.slice(1)):this.ctx[0===e?"moveTo":t[0]+"To"].apply(this.ctx,t.slice(1))},this),this.ctx},n.prototype.font=function(t,e,i,n,o,r){i=/^(normal|small-caps)$/i.test(i)?i:"",this.setFillStyle(t).font=[e,i,n,o,r].join(" ").split(",")[0]},n.prototype.fontShadow=function(t,e,i,n){this.setVariable("shadowColor",t.toString()).setVariable("shadowOffsetY",e).setVariable("shadowOffsetX",i).setVariable("shadowBlur",n)},n.prototype.clearShadow=function(){this.setVariable("shadowColor","rgba(0,0,0,0)")},n.prototype.setOpacity=function(t){this.ctx.globalAlpha=t},n.prototype.setTransform=function(t){this.ctx.translate(t.origin[0],t.origin[1]),this.ctx.transform.apply(this.ctx,t.matrix),this.ctx.translate(-t.origin[0],-t.origin[1])},n.prototype.setVariable=function(t,e){return this.variables[t]!==e&&(this.variables[t]=this.ctx[t]=e),this},n.prototype.text=function(t,e,i){this.ctx.fillText(t,e,i)},n.prototype.backgroundRepeatShape=function(t,e,i,n,o,r,s,a,l){var c=[["line",Math.round(o),Math.round(r)],["line",Math.round(o+s),Math.round(r)],["line",Math.round(o+s),Math.round(a+r)],["line",Math.round(o),Math.round(a+r)]];this.clip([c],function(){this.renderBackgroundRepeat(t,e,i,n,l[3],l[0])},this)},n.prototype.renderBackgroundRepeat=function(t,e,i,n,o,r){var s=Math.round(n.left+e.left+o),a=Math.round(n.top+e.top+r);this.setFillStyle(this.ctx.createPattern(this.resizeImage(t,i),"repeat")),this.ctx.translate(s,a),this.ctx.fill(),this.ctx.translate(-s,-a)},n.prototype.renderBackgroundGradient=function(t,e){if(t instanceof s){var i=this.ctx.createLinearGradient(e.left+e.width*t.x0,e.top+e.height*t.y0,e.left+e.width*t.x1,e.top+e.height*t.y1);t.colorStops.forEach(function(t){i.addColorStop(t.stop,t.color.toString())}),this.rectangle(e.left,e.top,e.width,e.height,i)}},n.prototype.resizeImage=function(t,e){var i=t.image;if(i.width===e.width&&i.height===e.height)return i;var n=document.createElement("canvas");return n.width=e.width,n.height=e.height,n.getContext("2d").drawImage(i,0,0,i.width,i.height,0,0,e.width,e.height),n},e.exports=n},{"../lineargradientcontainer":12,"../log":13,"../renderer":19}],21:[function(t,e,i){function n(t,e,i,n){o.call(this,i,n),this.ownStacking=t,this.contexts=[],this.children=[],this.opacity=(this.parent?this.parent.stack.opacity:1)*e}var o=t("./nodecontainer");(n.prototype=Object.create(o.prototype)).getParentStack=function(t){var e=this.parent?this.parent.stack:null;return e?e.ownStacking?e:e.getParentStack(t):t.stack},e.exports=n},{"./nodecontainer":14}],22:[function(t,e,i){function n(t){this.rangeBounds=this.testRangeBounds(t),this.cors=this.testCORS(),this.svg=this.testSVG()}n.prototype.testRangeBounds=function(t){var e,i,n,o=!1;return t.createRange&&(e=t.createRange()).getBoundingClientRect&&(i=t.createElement("boundtest"),i.style.height="123px",i.style.display="block",t.body.appendChild(i),e.selectNode(i),n=e.getBoundingClientRect(),123===n.height&&(o=!0),t.body.removeChild(i)),o},n.prototype.testCORS=function(){return void 0!==(new Image).crossOrigin},n.prototype.testSVG=function(){var t=new Image,e=document.createElement("canvas"),i=e.getContext("2d");t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{i.drawImage(t,0,0),e.toDataURL()}catch(t){return!1}return!0},e.exports=n},{}],23:[function(t,e,i){function n(t){this.src=t,this.image=null;var e=this;this.promise=this.hasFabric().then(function(){return e.isInline(t)?Promise.resolve(e.inlineFormatting(t)):o(t)}).then(function(t){return new Promise(function(i){window.html2canvas.svg.fabric.loadSVGFromString(t,e.createCanvas.call(e,i))})})}var o=t("./xhr"),r=t("./utils").decode64;n.prototype.hasFabric=function(){return window.html2canvas.svg&&window.html2canvas.svg.fabric?Promise.resolve():Promise.reject(new Error("html2canvas.svg.js is not loaded, cannot render svg"))},n.prototype.inlineFormatting=function(t){return/^data:image\/svg\+xml;base64,/.test(t)?this.decode64(this.removeContentType(t)):this.removeContentType(t)},n.prototype.removeContentType=function(t){return t.replace(/^data:image\/svg\+xml(;base64)?,/,"")},n.prototype.isInline=function(t){return/^data:image\/svg\+xml/i.test(t)},n.prototype.createCanvas=function(t){var e=this;return function(i,n){var o=new window.html2canvas.svg.fabric.StaticCanvas("c");e.image=o.lowerCanvasEl,o.setWidth(n.width).setHeight(n.height).add(window.html2canvas.svg.fabric.util.groupSVGElements(i,n)).renderAll(),t(o.lowerCanvasEl)}},n.prototype.decode64=function(t){return"function"==typeof window.atob?window.atob(t):r(t)},e.exports=n},{"./utils":26,"./xhr":28}],24:[function(t,e,i){function n(t,e){this.src=t,this.image=null;var i=this;this.promise=e?new Promise(function(e,n){i.image=new Image,i.image.onload=e,i.image.onerror=n,i.image.src="data:image/svg+xml,"+(new XMLSerializer).serializeToString(t),!0===i.image.complete&&e(i.image)}):this.hasFabric().then(function(){return new Promise(function(e){window.html2canvas.svg.fabric.parseSVGDocument(t,i.createCanvas.call(i,e))})})}var o=t("./svgcontainer");n.prototype=Object.create(o.prototype),e.exports=n},{"./svgcontainer":23}],25:[function(t,e,i){function n(t,e){r.call(this,t,e)}function o(t,e,i){if(t.length>0)return e+i.toUpperCase()}var r=t("./nodecontainer");(n.prototype=Object.create(r.prototype)).applyTextTransform=function(){this.node.data=this.transform(this.parent.css("textTransform"))},n.prototype.transform=function(t){var e=this.node.data;switch(t){case"lowercase":return e.toLowerCase();case"capitalize":return e.replace(/(^|\s|:|-|\(|\))([a-z])/g,o);case"uppercase":return e.toUpperCase();default:return e}},e.exports=n},{"./nodecontainer":14}],26:[function(t,e,i){i.smallImage=function(){return"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"},i.bind=function(t,e){return function(){return t.apply(e,arguments)}},i.decode64=function(t){var e,i,n,o,r,s,a,l,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=t.length,h="";for(e=0;e<u;e+=4)i=c.indexOf(t[e]),n=c.indexOf(t[e+1]),o=c.indexOf(t[e+2]),r=c.indexOf(t[e+3]),s=i<<2|n>>4,a=(15&n)<<4|o>>2,l=(3&o)<<6|r,h+=64===o?String.fromCharCode(s):64===r||-1===r?String.fromCharCode(s,a):String.fromCharCode(s,a,l);return h},i.getBounds=function(t){if(t.getBoundingClientRect){var e=t.getBoundingClientRect(),i=null==t.offsetWidth?e.width:t.offsetWidth;return{top:e.top,bottom:e.bottom||e.top+e.height,right:e.left+i,left:e.left,width:i,height:null==t.offsetHeight?e.height:t.offsetHeight}}return{}},i.offsetBounds=function(t){var e=t.offsetParent?i.offsetBounds(t.offsetParent):{top:0,left:0};return{top:t.offsetTop+e.top,bottom:t.offsetTop+t.offsetHeight+e.top,right:t.offsetLeft+e.left+t.offsetWidth,left:t.offsetLeft+e.left,width:t.offsetWidth,height:t.offsetHeight}},i.parseBackgrounds=function(t){var e,i,n,o,r,s,a,l=[],c=0,u=0,h=function(){e&&('"'===i.substr(0,1)&&(i=i.substr(1,i.length-2)),i&&a.push(i),"-"===e.substr(0,1)&&(o=e.indexOf("-",1)+1)>0&&(n=e.substr(0,o),e=e.substr(o)),l.push({prefix:n,method:e.toLowerCase(),value:r,args:a,image:null})),a=[],e=n=i=r=""};return a=[],e=n=i=r="",t.split("").forEach(function(t){if(!(0===c&&" \r\n\t".indexOf(t)>-1)){switch(t){case'"':s?s===t&&(s=null):s=t;break;case"(":if(s)break;if(0===c)return c=1,void(r+=t);u++;break;case")":if(s)break;if(1===c){if(0===u)return c=0,r+=t,void h();u--}break;case",":if(s)break;if(0===c)return void h();if(1===c&&0===u&&!e.match(/^url$/i))return a.push(i),i="",void(r+=t)}r+=t,0===c?e+=t:i+=t}}),h(),l}},{}],27:[function(t,e,i){function n(t){o.apply(this,arguments),this.type="linear"===t.args[0]?o.TYPES.LINEAR:o.TYPES.RADIAL}var o=t("./gradientcontainer");n.prototype=Object.create(o.prototype),e.exports=n},{"./gradientcontainer":9}],28:[function(t,e,i){e.exports=function(t){return new Promise(function(e,i){var n=new XMLHttpRequest;n.open("GET",t),n.onload=function(){200===n.status?e(n.responseText):i(new Error(n.statusText))},n.onerror=function(){i(new Error("Network Error"))},n.send()})}},{}]},{},[4])(4)}),function(t){"function"==typeof define&&define.amd?define(["jquery"],function(e){return t(e)}):"object"==typeof module&&"object"==typeof module.exports?exports=t(require("jquery")):t(jQuery)}(function(t){function e(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}t.easing.jswing=t.easing.swing;var i=Math.pow,n=Math.sqrt,o=Math.sin,r=Math.cos,s=Math.PI,a=2*s/3,l=2*s/4.5;t.extend(t.easing,{def:"easeOutQuad",swing:function(e){return t.easing[t.easing.def](e)},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return 1-(1-t)*(1-t)},easeInOutQuad:function(t){return t<.5?2*t*t:1-i(-2*t+2,2)/2},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return 1-i(1-t,3)},easeInOutCubic:function(t){return t<.5?4*t*t*t:1-i(-2*t+2,3)/2},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return 1-i(1-t,4)},easeInOutQuart:function(t){return t<.5?8*t*t*t*t:1-i(-2*t+2,4)/2},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return 1-i(1-t,5)},easeInOutQuint:function(t){return t<.5?16*t*t*t*t*t:1-i(-2*t+2,5)/2},easeInSine:function(t){return 1-r(t*s/2)},easeOutSine:function(t){return o(t*s/2)},easeInOutSine:function(t){return-(r(s*t)-1)/2},easeInExpo:function(t){return 0===t?0:i(2,10*t-10)},easeOutExpo:function(t){return 1===t?1:1-i(2,-10*t)},easeInOutExpo:function(t){return 0===t?0:1===t?1:t<.5?i(2,20*t-10)/2:(2-i(2,-20*t+10))/2},easeInCirc:function(t){return 1-n(1-i(t,2))},easeOutCirc:function(t){return n(1-i(t-1,2))},easeInOutCirc:function(t){return t<.5?(1-n(1-i(2*t,2)))/2:(n(1-i(-2*t+2,2))+1)/2},easeInElastic:function(t){return 0===t?0:1===t?1:-i(2,10*t-10)*o((10*t-10.75)*a)},easeOutElastic:function(t){return 0===t?0:1===t?1:i(2,-10*t)*o((10*t-.75)*a)+1},easeInOutElastic:function(t){return 0===t?0:1===t?1:t<.5?-i(2,20*t-10)*o((20*t-11.125)*l)/2:i(2,-20*t+10)*o((20*t-11.125)*l)/2+1},easeInBack:function(t){return 2.70158*t*t*t-1.70158*t*t},easeOutBack:function(t){return 1+2.70158*i(t-1,3)+1.70158*i(t-1,2)},easeInOutBack:function(t){return t<.5?i(2*t,2)*(7.189819*t-2.5949095)/2:(i(2*t-2,2)*(3.5949095*(2*t-2)+2.5949095)+2)/2},easeInBounce:function(t){return 1-e(1-t)},easeOutBounce:e,easeInOutBounce:function(t){return t<.5?(1-e(1-2*t))/2:(1+e(2*t-1))/2}})}),Object.keys||(Object.keys=function(t){var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(i);return e}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t(require("jquery")):t(jQuery)}(function(t){function e(e,i){this.element=e;var n="";n=t.cf._isValid(i)&&t.cf._isValid(i.language)?i.language:t.DateTimePicker.defaults.language,this.settings=t.extend({},t.DateTimePicker.defaults,t.DateTimePicker.i18n[n],i),this.options=i,this.oData=t.extend({},t.DateTimePicker.dataObject),this._defaults=t.DateTimePicker.defaults,this._name=t.DateTimePicker.name,this.init()}t.DateTimePicker=t.DateTimePicker||{name:"DateTimePicker",i18n:{},defaults:{mode:"date",defaultDate:null,dateSeparator:"-",timeSeparator:":",timeMeridiemSeparator:" ",dateTimeSeparator:" ",monthYearSeparator:" ",dateTimeFormat:"dd-MM-yyyy HH:mm",dateFormat:"dd-MM-yyyy",timeFormat:"HH:mm",maxDate:null,minDate:null,maxTime:null,minTime:null,maxDateTime:null,minDateTime:null,shortDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],fullDayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],fullMonthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],labels:null,minuteInterval:1,roundOffMinutes:!0,secondsInterval:1,roundOffSeconds:!0,showHeader:!0,titleContentDate:"Set Date",titleContentTime:"Set Time",titleContentDateTime:"Set Date & Time",buttonsToDisplay:["HeaderCloseButton","SetButton","ClearButton"],setButtonContent:"Set",clearButtonContent:"Clear",incrementButtonContent:"+",decrementButtonContent:"-",setValueInTextboxOnEveryClick:!1,readonlyInputs:!1,animationDuration:400,touchHoldInterval:300,captureTouchHold:!1,mouseHoldInterval:50,captureMouseHold:!1,isPopup:!0,parentElement:"body",isInline:!1,inputElement:null,language:"",init:null,addEventHandlers:null,beforeShow:null,afterShow:null,beforeHide:null,afterHide:null,buttonClicked:null,settingValueOfElement:null,formatHumanDate:null,parseDateTimeString:null,formatDateTimeString:null},dataObject:{dCurrentDate:new Date,iCurrentDay:0,iCurrentMonth:0,iCurrentYear:0,iCurrentHour:0,iCurrentMinutes:0,iCurrentSeconds:0,sCurrentMeridiem:"",iMaxNumberOfDays:0,sDateFormat:"",sTimeFormat:"",sDateTimeFormat:"",dMinValue:null,dMaxValue:null,sArrInputDateFormats:[],sArrInputTimeFormats:[],sArrInputDateTimeFormats:[],bArrMatchFormat:[],bDateMode:!1,bTimeMode:!1,bDateTimeMode:!1,oInputElement:null,iTabIndex:0,bElemFocused:!1,bIs12Hour:!1,sTouchButton:null,iTouchStart:null,oTimeInterval:null,bIsTouchDevice:"ontouchstart"in document.documentElement}},t.cf={_isValid:function(t){return void 0!==t&&null!==t&&""!==t},_compare:function(t,e){return!(!(void 0!==t&&null!==t)||!(void 0!==e&&null!==e)||t.toLowerCase()!==e.toLowerCase())}},t.fn.DateTimePicker=function(i){var n,o,r=t(this).data(),s=r?Object.keys(r):[];if("string"!=typeof i)return this.each(function(){t.removeData(this,"plugin_DateTimePicker"),t.data(this,"plugin_DateTimePicker")||t.data(this,"plugin_DateTimePicker",new e(this,i))});if(t.cf._isValid(r))if("destroy"===i)if(s.length>0){for(n in s)if(-1!==(o=s[n]).search("plugin_DateTimePicker")){t(document).unbind("click.DateTimePicker keydown.DateTimePicker keyup.DateTimePicker"),t(this).children().remove(),t(this).removeData(),t(this).unbind(),t(this).removeClass("dtpicker-overlay dtpicker-mobile dtpicker-inline"),r=r[o],console.log("Destroyed DateTimePicker Object"),console.log(r);break}}else console.log("No DateTimePicker Object Defined For This Element");else if("object"===i)if(s.length>0){for(n in s)if(-1!==(o=s[n]).search("plugin_DateTimePicker"))return r[o]}else console.log("No DateTimePicker Object Defined For This Element")},e.prototype={init:function(){this._setDateFormatArray(),this._setTimeFormatArray(),this._setDateTimeFormatArray(),console.log(t(this.element).data("parentelement")+" "+t(this.element).attr("data-parentelement")),void 0!==t(this.element).data("parentelement")&&(this.settings.parentElement=t(this.element).data("parentelement")),this.settings.isPopup&&!this.settings.isInline&&(this._createPicker(),t(this.element).addClass("dtpicker-mobile")),this.settings.isInline&&(this._createPicker(),this._showPicker(this.settings.inputElement)),this.settings.init&&this.settings.init.call(this),this._addEventHandlersForInput()},_setDateFormatArray:function(){this.oData.sArrInputDateFormats=[];var t="";t="dd"+this.settings.dateSeparator+"MM"+this.settings.dateSeparator+"yyyy",this.oData.sArrInputDateFormats.push(t),t="MM"+this.settings.dateSeparator+"dd"+this.settings.dateSeparator+"yyyy",this.oData.sArrInputDateFormats.push(t),t="yyyy"+this.settings.dateSeparator+"MM"+this.settings.dateSeparator+"dd",this.oData.sArrInputDateFormats.push(t),t="dd"+this.settings.dateSeparator+"MMM"+this.settings.dateSeparator+"yyyy",this.oData.sArrInputDateFormats.push(t),t="MM"+this.settings.monthYearSeparator+"yyyy",this.oData.sArrInputDateFormats.push(t),t="MMM"+this.settings.monthYearSeparator+"yyyy",this.oData.sArrInputDateFormats.push(t),t="MMMM"+this.settings.monthYearSeparator+"yyyy",this.oData.sArrInputDateFormats.push(t),t="yyyy"+this.settings.monthYearSeparator+"MM",this.oData.sArrInputDateFormats.push(t)},_setTimeFormatArray:function(){this.oData.sArrInputTimeFormats=[];var t="";t="hh"+this.settings.timeSeparator+"mm"+this.settings.timeSeparator+"ss"+this.settings.timeMeridiemSeparator+"AA",this.oData.sArrInputTimeFormats.push(t),t="HH"+this.settings.timeSeparator+"mm"+this.settings.timeSeparator+"ss",this.oData.sArrInputTimeFormats.push(t),t="hh"+this.settings.timeSeparator+"mm"+this.settings.timeMeridiemSeparator+"AA",this.oData.sArrInputTimeFormats.push(t),t="HH"+this.settings.timeSeparator+"mm",this.oData.sArrInputTimeFormats.push(t)},_setDateTimeFormatArray:function(){this.oData.sArrInputDateTimeFormats=[];var t="",e="",i="";t="dd"+this.settings.dateSeparator+"MM"+this.settings.dateSeparator+"yyyy",e="HH"+this.settings.timeSeparator+"mm"+this.settings.timeSeparator+"ss",i=t+this.settings.dateTimeSeparator+e,this.oData.sArrInputDateTimeFormats.push(i),t="dd"+this.settings.dateSeparator+"MM"+this.settings.dateSeparator+"yyyy",e="hh"+this.settings.timeSeparator+"mm"+this.settings.timeSeparator+"ss"+this.settings.timeMeridiemSeparator+"AA",i=t+this.settings.dateTimeSeparator+e,this.oData.sArrInputDateTimeFormats.push(i),t="MM"+this.settings.dateSeparator+"dd"+this.settings.dateSeparator+"yyyy",e="HH"+this.settings.timeSeparator+"mm"+this.settings.timeSeparator+"ss",i=t+this.settings.dateTimeSeparator+e,this.oData.sArrInputDateTimeFormats.push(i),t="MM"+this.settings.dateSeparator+"dd"+this.settings.dateSeparator+"yyyy",e="hh"+this.settings.timeSeparator+"mm"+this.settings.timeSeparator+"ss"+this.settings.timeMeridiemSeparator+"AA",i=t+this.settings.dateTimeSeparator+e,this.oData.sArrInputDateTimeFormats.push(i),t="yyyy"+this.settings.dateSeparator+"MM"+this.settings.dateSeparator+"dd",e="HH"+this.settings.timeSeparator+"mm"+this.settings.timeSeparator+"ss",i=t+this.settings.dateTimeSeparator+e,this.oData.sArrInputDateTimeFormats.push(i),t="yyyy"+this.settings.dateSeparator+"MM"+this.settings.dateSeparator+"dd",e="hh"+this.settings.timeSeparator+"mm"+this.settings.timeSeparator+"ss"+this.settings.timeMeridiemSeparator+"AA",i=t+this.settings.dateTimeSeparator+e,this.oData.sArrInputDateTimeFormats.push(i),t="dd"+this.settings.dateSeparator+"MMM"+this.settings.dateSeparator+"yyyy",e="hh"+this.settings.timeSeparator+"mm"+this.settings.timeSeparator+"ss",i=t+this.settings.dateTimeSeparator+e,this.oData.sArrInputDateTimeFormats.push(i),t="dd"+this.settings.dateSeparator+"MMM"+this.settings.dateSeparator+"yyyy",e="hh"+this.settings.timeSeparator+"mm"+this.settings.timeSeparator+"ss"+this.settings.timeMeridiemSeparator+"AA",i=t+this.settings.dateTimeSeparator+e,this.oData.sArrInputDateTimeFormats.push(i),t="dd"+this.settings.dateSeparator+"MM"+this.settings.dateSeparator+"yyyy",e="HH"+this.settings.timeSeparator+"mm",i=t+this.settings.dateTimeSeparator+e,this.oData.sArrInputDateTimeFormats.push(i),t="dd"+this.settings.dateSeparator+"MM"+this.settings.dateSeparator+"yyyy",e="hh"+this.settings.timeSeparator+"mm"+this.settings.timeMeridiemSeparator+"AA",i=t+this.settings.dateTimeSeparator+e,this.oData.sArrInputDateTimeFormats.push(i),t="MM"+this.settings.dateSeparator+"dd"+this.settings.dateSeparator+"yyyy",e="HH"+this.settings.timeSeparator+"mm",i=t+this.settings.dateTimeSeparator+e,this.oData.sArrInputDateTimeFormats.push(i),t="MM"+this.settings.dateSeparator+"dd"+this.settings.dateSeparator+"yyyy",e="hh"+this.settings.timeSeparator+"mm"+this.settings.timeMeridiemSeparator+"AA",i=t+this.settings.dateTimeSeparator+e,this.oData.sArrInputDateTimeFormats.push(i),t="yyyy"+this.settings.dateSeparator+"MM"+this.settings.dateSeparator+"dd",e="HH"+this.settings.timeSeparator+"mm",i=t+this.settings.dateTimeSeparator+e,this.oData.sArrInputDateTimeFormats.push(i),t="yyyy"+this.settings.dateSeparator+"MM"+this.settings.dateSeparator+"dd",e="hh"+this.settings.timeSeparator+"mm"+this.settings.timeMeridiemSeparator+"AA",i=t+this.settings.dateTimeSeparator+e,this.oData.sArrInputDateTimeFormats.push(i),t="dd"+this.settings.dateSeparator+"MMM"+this.settings.dateSeparator+"yyyy",e="hh"+this.settings.timeSeparator+"mm",i=t+this.settings.dateTimeSeparator+e,this.oData.sArrInputDateTimeFormats.push(i),t="dd"+this.settings.dateSeparator+"MMM"+this.settings.dateSeparator+"yyyy",e="hh"+this.settings.timeSeparator+"mm"+this.settings.timeMeridiemSeparator+"AA",i=t+this.settings.dateTimeSeparator+e,this.oData.sArrInputDateTimeFormats.push(i)},_matchFormat:function(e,i){this.oData.bArrMatchFormat=[],this.oData.bDateMode=!1,this.oData.bTimeMode=!1,this.oData.bDateTimeMode=!1;var n,o=[];for(e=t.cf._isValid(e)?e:this.settings.mode,t.cf._compare(e,"date")?(i=t.cf._isValid(i)?i:this.oData.sDateFormat,this.oData.bDateMode=!0,o=this.oData.sArrInputDateFormats):t.cf._compare(e,"time")?(i=t.cf._isValid(i)?i:this.oData.sTimeFormat,this.oData.bTimeMode=!0,o=this.oData.sArrInputTimeFormats):t.cf._compare(e,"datetime")&&(i=t.cf._isValid(i)?i:this.oData.sDateTimeFormat,this.oData.bDateTimeMode=!0,o=this.oData.sArrInputDateTimeFormats),n=0;n<o.length;n++)this.oData.bArrMatchFormat.push(t.cf._compare(i,o[n]))},_setMatchFormat:function(t,e,i){t>0&&this._matchFormat(e,i)},_createPicker:function(){var e=this;e.settings.isInline?t(e.element).addClass("dtpicker-inline"):(t(e.element).addClass("dtpicker-overlay"),t(".dtpicker-overlay").click(function(t){e._hidePicker("")}));var i="";i+="<div class='dtpicker-bg'>",i+="<div class='dtpicker-cont'>",i+="<div class='dtpicker-content'>",i+="<div class='dtpicker-subcontent'>",i+="</div>",i+="</div>",i+="</div>",i+="</div>",t(e.element).html(i)},_addEventHandlersForInput:function(){if(!this.settings.isInline){this.oData.oInputElement=null,t(this.settings.parentElement).find("input[type='date'], input[type='time'], input[type='datetime']").each(function(){t(this).attr("data-field",t(this).attr("type")),t(this).attr("type","text")});var e="[data-field='date'], [data-field='time'], [data-field='datetime']";t(this.settings.parentElement).off("focus",e,this._inputFieldFocus).on("focus",e,{obj:this},this._inputFieldFocus),t(this.settings.parentElement).off("click",e,this._inputFieldClick).on("click",e,{obj:this},this._inputFieldClick)}this.settings.addEventHandlers&&this.settings.addEventHandlers.call(this)},_inputFieldFocus:function(t){var e=t.data.obj;e.showDateTimePicker(this),e.oData.bMouseDown=!1},_inputFieldClick:function(e){var i=e.data.obj;t.cf._compare(t(this).prop("tagName"),"input")||i.showDateTimePicker(this),e.stopPropagation()},getDateObjectForInputField:function(e){if(t.cf._isValid(e)){var i,n=this._getValueOfElement(e),o=t(e).data("field"),r="";return t.cf._isValid(o)||(o=this.settings.mode),this.settings.formatDateTimeString?i=this.settings.parseDateTimeString.call(this,n,o,r,t(e)):(r=t(e).data("format"),t.cf._isValid(r)||(t.cf._compare(o,"date")?r=this.settings.dateFormat:t.cf._compare(o,"time")?r=this.settings.timeFormat:t.cf._compare(o,"datetime")&&(r=this.settings.dateTimeFormat)),this._matchFormat(o,r),t.cf._compare(o,"date")?i=this._parseDate(n):t.cf._compare(o,"time")?i=this._parseTime(n):t.cf._compare(o,"datetime")&&(i=this._parseDateTime(n))),i}},setDateTimeStringInInputField:function(e,i){var n=this;i=i||n.oData.dCurrentDate;var o;t.cf._isValid(e)?(o=[],"string"==typeof e?o.push(e):"object"==typeof e&&(o=e)):o=t.cf._isValid(n.settings.parentElement)?t(n.settings.parentElement).find("[data-field='date'], [data-field='time'], [data-field='datetime']"):t("[data-field='date'], [data-field='time'], [data-field='datetime']"),o.each(function(){var e,o,r,s;e=t(this).data("field"),t.cf._isValid(e)||(e=n.settings.mode),o="Custom",r=!1,n.settings.formatDateTimeString||(o=t(this).data("format"),t.cf._isValid(o)||(t.cf._compare(e,"date")?o=n.settings.dateFormat:t.cf._compare(e,"time")?o=n.settings.timeFormat:t.cf._compare(e,"datetime")&&(o=n.settings.dateTimeFormat)),r=n.getIs12Hour(e,o)),s=n._setOutput(e,o,r,i,this),n._setValueOfElement(s,t(this))})},getDateTimeStringInFormat:function(t,e,i){return this._setOutput(t,e,this.getIs12Hour(t,e),i)},showDateTimePicker:function(t){null!==this.oData.oInputElement?this.settings.isInline||this._hidePicker(0,t):this._showPicker(t)},_setButtonAction:function(t){null!==this.oData.oInputElement&&(this._setValueOfElement(this._setOutput()),t?(this.settings.buttonClicked&&this.settings.buttonClicked.call(this,"TAB",this.oData.oInputElement),this.settings.isInline||this._hidePicker(0)):this.settings.isInline||this._hidePicker(""))},_setOutput:function(e,i,n,o,r){o=t.cf._isValid(o)?o:this.oData.dCurrentDate,n=n||this.oData.bIs12Hour;var s,a=this._setVariablesForDate(o,!0,!0),l="",c=this._formatDate(a),u=this._formatTime(a),h=t.extend({},c,u),d="",f="",p=Function.length;return this.settings.formatDateTimeString?l=this.settings.formatDateTimeString.call(this,h,e,i,r):(this._setMatchFormat(p,e,i),this.oData.bDateMode?this.oData.bArrMatchFormat[0]?l=h.dd+this.settings.dateSeparator+h.MM+this.settings.dateSeparator+h.yyyy:this.oData.bArrMatchFormat[1]?l=h.MM+this.settings.dateSeparator+h.dd+this.settings.dateSeparator+h.yyyy:this.oData.bArrMatchFormat[2]?l=h.yyyy+this.settings.dateSeparator+h.MM+this.settings.dateSeparator+h.dd:this.oData.bArrMatchFormat[3]?l=h.dd+this.settings.dateSeparator+h.monthShort+this.settings.dateSeparator+h.yyyy:this.oData.bArrMatchFormat[4]?l=h.MM+this.settings.monthYearSeparator+h.yyyy:this.oData.bArrMatchFormat[5]?l=h.monthShort+this.settings.monthYearSeparator+h.yyyy:this.oData.bArrMatchFormat[6]?l=h.month+this.settings.monthYearSeparator+h.yyyy:this.oData.bArrMatchFormat[7]&&(l=h.yyyy+this.settings.monthYearSeparator+h.MM):this.oData.bTimeMode?this.oData.bArrMatchFormat[0]?l=h.hh+this.settings.timeSeparator+h.mm+this.settings.timeSeparator+h.ss+this.settings.timeMeridiemSeparator+h.ME:this.oData.bArrMatchFormat[1]?l=h.HH+this.settings.timeSeparator+h.mm+this.settings.timeSeparator+h.ss:this.oData.bArrMatchFormat[2]?l=h.hh+this.settings.timeSeparator+h.mm+this.settings.timeMeridiemSeparator+h.ME:this.oData.bArrMatchFormat[3]&&(l=h.HH+this.settings.timeSeparator+h.mm):this.oData.bDateTimeMode&&(this.oData.bArrMatchFormat[0]||this.oData.bArrMatchFormat[1]||this.oData.bArrMatchFormat[8]||this.oData.bArrMatchFormat[9]?d=h.dd+this.settings.dateSeparator+h.MM+this.settings.dateSeparator+h.yyyy:this.oData.bArrMatchFormat[2]||this.oData.bArrMatchFormat[3]||this.oData.bArrMatchFormat[10]||this.oData.bArrMatchFormat[11]?d=h.MM+this.settings.dateSeparator+h.dd+this.settings.dateSeparator+h.yyyy:this.oData.bArrMatchFormat[4]||this.oData.bArrMatchFormat[5]||this.oData.bArrMatchFormat[12]||this.oData.bArrMatchFormat[13]?d=h.yyyy+this.settings.dateSeparator+h.MM+this.settings.dateSeparator+h.dd:(this.oData.bArrMatchFormat[6]||this.oData.bArrMatchFormat[7]||this.oData.bArrMatchFormat[14]||this.oData.bArrMatchFormat[15])&&(d=h.dd+this.settings.dateSeparator+h.monthShort+this.settings.dateSeparator+h.yyyy),s=this.oData.bArrMatchFormat[0]||this.oData.bArrMatchFormat[1]||this.oData.bArrMatchFormat[2]||this.oData.bArrMatchFormat[3]||this.oData.bArrMatchFormat[4]||this.oData.bArrMatchFormat[5]||this.oData.bArrMatchFormat[6]||this.oData.bArrMatchFormat[7],f=n?s?h.hh+this.settings.timeSeparator+h.mm+this.settings.timeSeparator+h.ss+this.settings.timeMeridiemSeparator+h.ME:h.hh+this.settings.timeSeparator+h.mm+this.settings.timeMeridiemSeparator+h.ME:s?h.HH+this.settings.timeSeparator+h.mm+this.settings.timeSeparator+h.ss:h.HH+this.settings.timeSeparator+h.mm,""!==d&&""!==f&&(l=d+this.settings.dateTimeSeparator+f)),this._setMatchFormat(p)),l},_clearButtonAction:function(){null!==this.oData.oInputElement&&this._setValueOfElement(""),this.settings.isInline||this._hidePicker("")},_setOutputOnIncrementOrDecrement:function(){t.cf._isValid(this.oData.oInputElement)&&this.settings.setValueInTextboxOnEveryClick&&this._setValueOfElement(this._setOutput())},_showPicker:function(e){var i=this;if(null===i.oData.oInputElement){i.oData.oInputElement=e,i.oData.iTabIndex=parseInt(t(e).attr("tabIndex"));var n=t(e).data("field")||"",o=t(e).data("min")||"",r=t(e).data("max")||"",s=t(e).data("format")||"",a=t(e).data("view")||"",l=t(e).data("startend")||"",c=t(e).data("startendelem")||"",u=i._getValueOfElement(e)||"";if(""!==a&&(t.cf._compare(a,"Popup")?i.setIsPopup(!0):i.setIsPopup(!1)),!i.settings.isPopup&&!i.settings.isInline){i._createPicker();var h=t(i.oData.oInputElement).offset().top+t(i.oData.oInputElement).outerHeight(),d=t(i.oData.oInputElement).offset().left,f=t(i.oData.oInputElement).outerWidth();t(i.element).css({position:"absolute",top:h,left:d,width:f,height:"auto"})}i.settings.beforeShow&&i.settings.beforeShow.call(i,e),n=t.cf._isValid(n)?n:i.settings.mode,i.settings.mode=n,t.cf._isValid(s)||(t.cf._compare(n,"date")?s=i.settings.dateFormat:t.cf._compare(n,"time")?s=i.settings.timeFormat:t.cf._compare(n,"datetime")&&(s=i.settings.dateTimeFormat)),i._matchFormat(n,s),i.oData.dMinValue=null,i.oData.dMaxValue=null,i.oData.bIs12Hour=!1;var p,m,g,v,y,b,_,w;i.oData.bDateMode?(p=o||i.settings.minDate,m=r||i.settings.maxDate,i.oData.sDateFormat=s,t.cf._isValid(p)&&(i.oData.dMinValue=i._parseDate(p)),t.cf._isValid(m)&&(i.oData.dMaxValue=i._parseDate(m)),""!==l&&(t.cf._compare(l,"start")||t.cf._compare(l,"end"))&&""!==c&&t(c).length>=1&&""!==(g=i._getValueOfElement(t(c)))&&(v=i.settings.parseDateTimeString?i.settings.parseDateTimeString.call(i,g,n,s,t(c)):i._parseDate(g),t.cf._compare(l,"start")?t.cf._isValid(m)?i._compareDates(v,i.oData.dMaxValue)<0&&(i.oData.dMaxValue=new Date(v)):i.oData.dMaxValue=new Date(v):t.cf._compare(l,"end")&&(t.cf._isValid(p)?i._compareDates(v,i.oData.dMinValue)>0&&(i.oData.dMinValue=new Date(v)):i.oData.dMinValue=new Date(v))),i.settings.parseDateTimeString?i.oData.dCurrentDate=i.settings.parseDateTimeString.call(i,u,n,s,t(e)):i.oData.dCurrentDate=i._parseDate(u),i.oData.dCurrentDate.setHours(0),i.oData.dCurrentDate.setMinutes(0),i.oData.dCurrentDate.setSeconds(0)):i.oData.bTimeMode?(p=o||i.settings.minTime,m=r||i.settings.maxTime,i.oData.sTimeFormat=s,i.oData.bIs12Hour=i.getIs12Hour(),t.cf._isValid(p)&&(i.oData.dMinValue=i._parseTime(p),t.cf._isValid(m)||(i.oData.sTimeFormat===i.oData.sArrInputTimeFormats[0]?m="11:59:59 PM":i.oData.sTimeFormat===i.oData.sArrInputTimeFormats[1]?m="23:59:59":i.oData.sTimeFormat===i.oData.sArrInputTimeFormats[2]?m="11:59 PM":i.oData.sTimeFormat===i.oData.sArrInputTimeFormats[3]&&(m="23:59"),i.oData.dMaxValue=i._parseTime(m))),t.cf._isValid(m)&&(i.oData.dMaxValue=i._parseTime(m),t.cf._isValid(p)||(i.oData.sTimeFormat===i.oData.sArrInputTimeFormats[0]?p="12:00:00 AM":i.oData.sTimeFormat===i.oData.sArrInputTimeFormats[1]?p="00:00:00":i.oData.sTimeFormat===i.oData.sArrInputTimeFormats[2]?p="12:00 AM":i.oData.sTimeFormat===i.oData.sArrInputTimeFormats[3]&&(p="00:00"),i.oData.dMinValue=i._parseTime(p))),""!==l&&(t.cf._compare(l,"start")||t.cf._compare(l,"end"))&&""!==c&&t(c).length>=1&&""!==(y=i._getValueOfElement(t(c)))&&(i.settings.parseDateTimeString?v=i.settings.parseDateTimeString.call(i,y,n,s,t(c)):b=i._parseTime(y),t.cf._compare(l,"start")?(b.setMinutes(b.getMinutes()-1),t.cf._isValid(m)?2===i._compareTime(b,i.oData.dMaxValue)&&(i.oData.dMaxValue=new Date(b)):i.oData.dMaxValue=new Date(b)):t.cf._compare(l,"end")&&(b.setMinutes(b.getMinutes()+1),t.cf._isValid(p)?3===i._compareTime(b,i.oData.dMinValue)&&(i.oData.dMinValue=new Date(b)):i.oData.dMinValue=new Date(b))),i.settings.parseDateTimeString?i.oData.dCurrentDate=i.settings.parseDateTimeString.call(i,u,n,s,t(e)):i.oData.dCurrentDate=i._parseTime(u)):i.oData.bDateTimeMode&&(p=o||i.settings.minDateTime,m=r||i.settings.maxDateTime,i.oData.sDateTimeFormat=s,i.oData.bIs12Hour=i.getIs12Hour(),t.cf._isValid(p)&&(i.oData.dMinValue=i._parseDateTime(p)),t.cf._isValid(m)&&(i.oData.dMaxValue=i._parseDateTime(m)),""!==l&&(t.cf._compare(l,"start")||t.cf._compare(l,"end"))&&""!==c&&t(c).length>=1&&""!==(_=i._getValueOfElement(t(c)))&&(w=i.settings.parseDateTimeString?i.settings.parseDateTimeString.call(i,_,n,s,t(c)):i._parseDateTime(_),t.cf._compare(l,"start")?t.cf._isValid(m)?i._compareDateTime(w,i.oData.dMaxValue)<0&&(i.oData.dMaxValue=new Date(w)):i.oData.dMaxValue=new Date(w):t.cf._compare(l,"end")&&(t.cf._isValid(p)?i._compareDateTime(w,i.oData.dMinValue)>0&&(i.oData.dMinValue=new Date(w)):i.oData.dMinValue=new Date(w))),i.settings.parseDateTimeString?i.oData.dCurrentDate=i.settings.parseDateTimeString.call(i,u,n,s,t(e)):i.oData.dCurrentDate=i._parseDateTime(u)),i._setVariablesForDate(),i._modifyPicker(),t(i.element).fadeIn(i.settings.animationDuration),i.settings.afterShow&&setTimeout(function(){i.settings.afterShow.call(i,e)},i.settings.animationDuration)}},_hidePicker:function(e,i){var n=this,o=n.oData.oInputElement;n.settings.beforeHide&&n.settings.beforeHide.call(n,o),t.cf._isValid(e)||(e=n.settings.animationDuration),t.cf._isValid(n.oData.oInputElement)&&(t(n.oData.oInputElement).blur(),n.oData.oInputElement=null),t(n.element).fadeOut(e),0===e?t(n.element).find(".dtpicker-subcontent").html(""):setTimeout(function(){t(n.element).find(".dtpicker-subcontent").html("")},e),t(document).unbind("click.DateTimePicker keydown.DateTimePicker keyup.DateTimePicker"),n.settings.afterHide&&(0===e?n.settings.afterHide.call(n,o):setTimeout(function(){n.settings.afterHide.call(n,o)},e)),t.cf._isValid(i)&&n._showPicker(i)},_modifyPicker:function(){var e,i,n=[];this.oData.bDateMode?(e=this.settings.titleContentDate,i=3,this.oData.bArrMatchFormat[0]?n=["day","month","year"]:this.oData.bArrMatchFormat[1]?n=["month","day","year"]:this.oData.bArrMatchFormat[2]?n=["year","month","day"]:this.oData.bArrMatchFormat[3]?n=["day","month","year"]:this.oData.bArrMatchFormat[4]?(i=2,n=["month","year"]):this.oData.bArrMatchFormat[5]?(i=2,n=["month","year"]):this.oData.bArrMatchFormat[6]?(i=2,n=["month","year"]):this.oData.bArrMatchFormat[7]&&(i=2,n=["year","month"])):this.oData.bTimeMode?(e=this.settings.titleContentTime,this.oData.bArrMatchFormat[0]?(i=4,n=["hour","minutes","seconds","meridiem"]):this.oData.bArrMatchFormat[1]?(i=3,n=["hour","minutes","seconds"]):this.oData.bArrMatchFormat[2]?(i=3,n=["hour","minutes","meridiem"]):this.oData.bArrMatchFormat[3]&&(i=2,n=["hour","minutes"])):this.oData.bDateTimeMode&&(e=this.settings.titleContentDateTime,this.oData.bArrMatchFormat[0]?(i=6,n=["day","month","year","hour","minutes","seconds"]):this.oData.bArrMatchFormat[1]?(i=7,n=["day","month","year","hour","minutes","seconds","meridiem"]):this.oData.bArrMatchFormat[2]?(i=6,n=["month","day","year","hour","minutes","seconds"]):this.oData.bArrMatchFormat[3]?(i=7,n=["month","day","year","hour","minutes","seconds","meridiem"]):this.oData.bArrMatchFormat[4]?(i=6,n=["year","month","day","hour","minutes","seconds"]):this.oData.bArrMatchFormat[5]?(i=7,n=["year","month","day","hour","minutes","seconds","meridiem"]):this.oData.bArrMatchFormat[6]?(i=6,n=["day","month","year","hour","minutes","seconds"]):this.oData.bArrMatchFormat[7]?(i=7,n=["day","month","year","hour","minutes","seconds","meridiem"]):this.oData.bArrMatchFormat[8]?(i=5,n=["day","month","year","hour","minutes"]):this.oData.bArrMatchFormat[9]?(i=6,n=["day","month","year","hour","minutes","meridiem"]):this.oData.bArrMatchFormat[10]?(i=5,n=["month","day","year","hour","minutes"]):this.oData.bArrMatchFormat[11]?(i=6,n=["month","day","year","hour","minutes","meridiem"]):this.oData.bArrMatchFormat[12]?(i=5,n=["year","month","day","hour","minutes"]):this.oData.bArrMatchFormat[13]?(i=6,n=["year","month","day","hour","minutes","meridiem"]):this.oData.bArrMatchFormat[14]?(i=5,n=["day","month","year","hour","minutes"]):this.oData.bArrMatchFormat[15]&&(i=6,n=["day","month","year","hour","minutes","meridiem"]));var o,r="dtpicker-comp"+i,s=!1,a=!1,l=!1;for(o=0;o<this.settings.buttonsToDisplay.length;o++)t.cf._compare(this.settings.buttonsToDisplay[o],"HeaderCloseButton")?s=!0:t.cf._compare(this.settings.buttonsToDisplay[o],"SetButton")?a=!0:t.cf._compare(this.settings.buttonsToDisplay[o],"ClearButton")&&(l=!0);var c="";this.settings.showHeader&&(c+="<div class='dtpicker-header'>",c+="<div class='dtpicker-title'>"+e+"</div>",s&&(c+="<a class='dtpicker-close'>&times;</a>"),c+="<div class='dtpicker-value'></div>",c+="</div>");var u="";for(u+="<div class='dtpicker-components'>",o=0;i>o;o++){var h=n[o];u+="<div class='dtpicker-compOutline "+r+"'>",u+="<div class='dtpicker-comp "+h+"'>",u+="<a class='dtpicker-compButton increment'>"+this.settings.incrementButtonContent+"</a>",u+=this.settings.readonlyInputs?"<input type='text' class='dtpicker-compValue' readonly>":"<input type='text' class='dtpicker-compValue'>",u+="<a class='dtpicker-compButton decrement'>"+this.settings.decrementButtonContent+"</a>",this.settings.labels&&(u+="<div class='dtpicker-label'>"+this.settings.labels[h]+"</div>"),u+="</div>",u+="</div>"}u+="</div>";var d="";d+="<div class='dtpicker-buttonCont"+(a&&l?" dtpicker-twoButtons":" dtpicker-singleButton")+"'>",a&&(d+="<a class='dtpicker-button dtpicker-buttonSet'>"+this.settings.setButtonContent+"</a>"),l&&(d+="<a class='dtpicker-button dtpicker-buttonClear'>"+this.settings.clearButtonContent+"</a>");var f=c+u+(d+="</div>");t(this.element).find(".dtpicker-subcontent").html(f),this._setCurrentDate(),this._addEventHandlersForPicker()},_addEventHandlersForPicker:function(){var e,i,n=this;if(n.settings.isInline||t(document).on("click.DateTimePicker",function(t){n._hidePicker("")}),t(document).on("keydown.DateTimePicker",function(o){if(i=parseInt(o.keyCode?o.keyCode:o.which),!t(".dtpicker-compValue").is(":focus")&&9===i)return n._setButtonAction(!0),t("[tabIndex="+(n.oData.iTabIndex+1)+"]").focus(),!1;if(t(".dtpicker-compValue").is(":focus")){if(38===i)return e=t(".dtpicker-compValue:focus").parent().attr("class"),n._incrementDecrementActionsUsingArrowAndMouse(e,"inc"),!1;if(40===i)return e=t(".dtpicker-compValue:focus").parent().attr("class"),n._incrementDecrementActionsUsingArrowAndMouse(e,"dec"),!1}}),n.settings.isInline||t(document).on("keydown.DateTimePicker",function(e){i=parseInt(e.keyCode?e.keyCode:e.which),t(".dtpicker-compValue").is(":focus")||9===i||n._hidePicker("")}),t(".dtpicker-cont *").click(function(t){t.stopPropagation()}),n.settings.readonlyInputs||(t(".dtpicker-compValue").not(".month .dtpicker-compValue, .meridiem .dtpicker-compValue").keyup(function(){this.value=this.value.replace(/[^0-9\.]/g,"")}),t(".dtpicker-compValue").focus(function(){n.oData.bElemFocused=!0,t(this).select()}),t(".dtpicker-compValue").blur(function(){n._getValuesFromInputBoxes(),n._setCurrentDate(),n.oData.bElemFocused=!1;var e=t(this).parent().parent();setTimeout(function(){e.is(":last-child")&&!n.oData.bElemFocused&&n._setButtonAction(!1)},50)}),t(".dtpicker-compValue").keyup(function(e){var i,n=t(this),o=n.val(),r=o.length;n.parent().hasClass("day")||n.parent().hasClass("hour")||n.parent().hasClass("minutes")||n.parent().hasClass("meridiem")?r>2&&(i=o.slice(0,2),n.val(i)):n.parent().hasClass("month")?r>3&&(i=o.slice(0,3),n.val(i)):n.parent().hasClass("year")&&r>4&&(i=o.slice(0,4),n.val(i)),9===parseInt(e.keyCode?e.keyCode:e.which)&&t(this).select()})),t(n.element).find(".dtpicker-compValue").on("mousewheel DOMMouseScroll onmousewheel",function(i){if(t(".dtpicker-compValue").is(":focus")){return Math.max(-1,Math.min(1,i.originalEvent.wheelDelta))>0?(e=t(".dtpicker-compValue:focus").parent().attr("class"),n._incrementDecrementActionsUsingArrowAndMouse(e,"inc")):(e=t(".dtpicker-compValue:focus").parent().attr("class"),n._incrementDecrementActionsUsingArrowAndMouse(e,"dec")),!1}}),t(n.element).find(".dtpicker-close").click(function(t){n.settings.buttonClicked&&n.settings.buttonClicked.call(n,"CLOSE",n.oData.oInputElement),n.settings.isInline||n._hidePicker("")}),t(n.element).find(".dtpicker-buttonSet").click(function(t){n.settings.buttonClicked&&n.settings.buttonClicked.call(n,"SET",n.oData.oInputElement),n._setButtonAction(!1)}),t(n.element).find(".dtpicker-buttonClear").click(function(t){n.settings.buttonClicked&&n.settings.buttonClicked.call(n,"CLEAR",n.oData.oInputElement),n._clearButtonAction()}),n.settings.captureTouchHold||n.settings.captureMouseHold){var o="";n.settings.captureTouchHold&&n.oData.bIsTouchDevice&&(o+="touchstart touchmove touchend "),n.settings.captureMouseHold&&(o+="mousedown mouseup"),t(".dtpicker-cont *").on(o,function(t){n._clearIntervalForTouchEvents()}),n._bindTouchEvents("day"),n._bindTouchEvents("month"),n._bindTouchEvents("year"),n._bindTouchEvents("hour"),n._bindTouchEvents("minutes"),n._bindTouchEvents("seconds")}else t(n.element).find(".day .increment, .day .increment *").click(function(t){n.oData.iCurrentDay++,n._setCurrentDate(),n._setOutputOnIncrementOrDecrement()}),t(n.element).find(".day .decrement, .day .decrement *").click(function(t){n.oData.iCurrentDay--,n._setCurrentDate(),n._setOutputOnIncrementOrDecrement()}),t(n.element).find(".month .increment, .month .increment *").click(function(t){n.oData.iCurrentMonth++,n._setCurrentDate(),n._setOutputOnIncrementOrDecrement()}),t(n.element).find(".month .decrement, .month .decrement *").click(function(t){n.oData.iCurrentMonth--,n._setCurrentDate(),n._setOutputOnIncrementOrDecrement()}),t(n.element).find(".year .increment, .year .increment *").click(function(t){n.oData.iCurrentYear++,n._setCurrentDate(),n._setOutputOnIncrementOrDecrement()}),t(n.element).find(".year .decrement, .year .decrement *").click(function(t){n.oData.iCurrentYear--,n._setCurrentDate(),n._setOutputOnIncrementOrDecrement()}),t(n.element).find(".hour .increment, .hour .increment *").click(function(t){n.oData.iCurrentHour++,n._setCurrentDate(),n._setOutputOnIncrementOrDecrement()}),t(n.element).find(".hour .decrement, .hour .decrement *").click(function(t){n.oData.iCurrentHour--,n._setCurrentDate(),n._setOutputOnIncrementOrDecrement()}),t(n.element).find(".minutes .increment, .minutes .increment *").click(function(t){n.oData.iCurrentMinutes+=n.settings.minuteInterval,n._setCurrentDate(),n._setOutputOnIncrementOrDecrement()}),t(n.element).find(".minutes .decrement, .minutes .decrement *").click(function(t){n.oData.iCurrentMinutes-=n.settings.minuteInterval,n._setCurrentDate(),n._setOutputOnIncrementOrDecrement()}),t(n.element).find(".seconds .increment, .seconds .increment *").click(function(t){n.oData.iCurrentSeconds+=n.settings.secondsInterval,n._setCurrentDate(),n._setOutputOnIncrementOrDecrement()}),t(n.element).find(".seconds .decrement, .seconds .decrement *").click(function(t){n.oData.iCurrentSeconds-=n.settings.secondsInterval,n._setCurrentDate(),n._setOutputOnIncrementOrDecrement()});t(n.element).find(".meridiem .dtpicker-compButton, .meridiem .dtpicker-compButton *").click(function(e){t.cf._compare(n.oData.sCurrentMeridiem,"AM")?(n.oData.sCurrentMeridiem="PM",n.oData.iCurrentHour+=12):t.cf._compare(n.oData.sCurrentMeridiem,"PM")&&(n.oData.sCurrentMeridiem="AM",n.oData.iCurrentHour-=12),n._setCurrentDate(),n._setOutputOnIncrementOrDecrement()})},_adjustMinutes:function(t){return this.settings.roundOffMinutes&&1!==this.settings.minuteInterval&&(t=t%this.settings.minuteInterval?t-t%this.settings.minuteInterval+this.settings.minuteInterval:t),t},_adjustSeconds:function(t){return this.settings.roundOffSeconds&&1!==this.settings.secondsInterval&&(t=t%this.settings.secondsInterval?t-t%this.settings.secondsInterval+this.settings.secondsInterval:t),t},_getValueOfElement:function(e){return t.cf._compare(t(e).prop("tagName"),"INPUT")?t(e).val():t(e).html()},_setValueOfElement:function(e,i){t.cf._isValid(i)||(i=t(this.oData.oInputElement)),t.cf._compare(i.prop("tagName"),"INPUT")?i.val(e):i.html(e);var n=this.getDateObjectForInputField(i);return this.settings.settingValueOfElement&&this.settings.settingValueOfElement.call(this,e,n,i),i.change(),e},_bindTouchEvents:function(e){var i=this;t(i.element).find("."+e+" .increment, ."+e+" .increment *").on("touchstart mousedown",function(n){n.stopPropagation(),t.cf._isValid(i.oData.sTouchButton)||(i.oData.iTouchStart=(new Date).getTime(),i.oData.sTouchButton=e+"-inc",i._setIntervalForTouchEvents())}),t(i.element).find("."+e+" .increment, ."+e+" .increment *").on("touchend mouseup",function(t){t.stopPropagation(),i._clearIntervalForTouchEvents()}),t(i.element).find("."+e+" .decrement, ."+e+" .decrement *").on("touchstart mousedown",function(n){n.stopPropagation(),t.cf._isValid(i.oData.sTouchButton)||(i.oData.iTouchStart=(new Date).getTime(),i.oData.sTouchButton=e+"-dec",i._setIntervalForTouchEvents())}),t(i.element).find("."+e+" .decrement, ."+e+" .decrement *").on("touchend mouseup",function(t){t.stopPropagation(),i._clearIntervalForTouchEvents()})},_setIntervalForTouchEvents:function(){var e=this,i=e.oData.bIsTouchDevice?e.settings.touchHoldInterval:e.settings.mouseHoldInterval;if(!t.cf._isValid(e.oData.oTimeInterval)){var n;e.oData.oTimeInterval=setInterval(function(){(n=(new Date).getTime()-e.oData.iTouchStart)>i&&t.cf._isValid(e.oData.sTouchButton)&&("day-inc"===e.oData.sTouchButton?e.oData.iCurrentDay++:"day-dec"===e.oData.sTouchButton?e.oData.iCurrentDay--:"month-inc"===e.oData.sTouchButton?e.oData.iCurrentMonth++:"month-dec"===e.oData.sTouchButton?e.oData.iCurrentMonth--:"year-inc"===e.oData.sTouchButton?e.oData.iCurrentYear++:"year-dec"===e.oData.sTouchButton?e.oData.iCurrentYear--:"hour-inc"===e.oData.sTouchButton?e.oData.iCurrentHour++:"hour-dec"===e.oData.sTouchButton?e.oData.iCurrentHour--:"minute-inc"===e.oData.sTouchButton?e.oData.iCurrentMinutes+=e.settings.minuteInterval:"minute-dec"===e.oData.sTouchButton?e.oData.iCurrentMinutes-=e.settings.minuteInterval:"second-inc"===e.oData.sTouchButton?e.oData.iCurrentSeconds+=e.settings.secondsInterval:"second-dec"===e.oData.sTouchButton&&(e.oData.iCurrentSeconds-=e.settings.secondsInterval),e._setCurrentDate(),e._setOutputOnIncrementOrDecrement(),e.oData.iTouchStart=(new Date).getTime())},i)}},_clearIntervalForTouchEvents:function(){clearInterval(this.oData.oTimeInterval),t.cf._isValid(this.oData.sTouchButton)&&(this.oData.sTouchButton=null,this.oData.iTouchStart=0),this.oData.oTimeInterval=null},_incrementDecrementActionsUsingArrowAndMouse:function(t,e){t.includes("day")?"inc"===e?this.oData.iCurrentDay++:"dec"===e&&this.oData.iCurrentDay--:t.includes("month")?"inc"===e?this.oData.iCurrentMonth++:"dec"===e&&this.oData.iCurrentMonth--:t.includes("year")?"inc"===e?this.oData.iCurrentYear++:"dec"===e&&this.oData.iCurrentYear--:t.includes("hour")?"inc"===e?this.oData.iCurrentHour++:"dec"===e&&this.oData.iCurrentHour--:t.includes("minutes")?"inc"===e?this.oData.iCurrentMinutes+=this.settings.minuteInterval:"dec"===e&&(this.oData.iCurrentMinutes-=this.settings.minuteInterval):t.includes("seconds")&&("inc"===e?this.oData.iCurrentSeconds+=this.settings.secondsInterval:"dec"===e&&(this.oData.iCurrentSeconds-=this.settings.secondsInterval)),this._setCurrentDate(),this._setOutputOnIncrementOrDecrement()},_parseDate:function(e){var i=this.settings.defaultDate?new Date(this.settings.defaultDate):new Date,n=i.getDate(),o=i.getMonth(),r=i.getFullYear();if(t.cf._isValid(e))if("string"==typeof e){var s;s=this.oData.bArrMatchFormat[4]||this.oData.bArrMatchFormat[5]||this.oData.bArrMatchFormat[6]?e.split(this.settings.monthYearSeparator):e.split(this.settings.dateSeparator),this.oData.bArrMatchFormat[0]?(n=parseInt(s[0]),o=parseInt(s[1]-1),r=parseInt(s[2])):this.oData.bArrMatchFormat[1]?(o=parseInt(s[0]-1),n=parseInt(s[1]),r=parseInt(s[2])):this.oData.bArrMatchFormat[2]?(r=parseInt(s[0]),o=parseInt(s[1]-1),n=parseInt(s[2])):this.oData.bArrMatchFormat[3]?(n=parseInt(s[0]),o=this._getShortMonthIndex(s[1]),r=parseInt(s[2])):this.oData.bArrMatchFormat[4]?(n=1,o=parseInt(s[0])-1,r=parseInt(s[1])):this.oData.bArrMatchFormat[5]?(n=1,o=this._getShortMonthIndex(s[0]),r=parseInt(s[1])):this.oData.bArrMatchFormat[6]?(n=1,o=this._getFullMonthIndex(s[0]),r=parseInt(s[1])):this.oData.bArrMatchFormat[7]&&(n=1,o=parseInt(s[1])-1,r=parseInt(s[0]))}else n=e.getDate(),o=e.getMonth(),r=e.getFullYear();return i=new Date(r,o,n,0,0,0,0)},_parseTime:function(e){var i,n,o,r=this.settings.defaultDate?new Date(this.settings.defaultDate):new Date,s=r.getDate(),a=r.getMonth(),l=r.getFullYear(),c=r.getHours(),u=r.getMinutes(),h=r.getSeconds(),d=this.oData.bArrMatchFormat[0]||this.oData.bArrMatchFormat[1];return h=d?this._adjustSeconds(h):0,t.cf._isValid(e)&&("string"==typeof e?(this.oData.bIs12Hour&&(i=e.split(this.settings.timeMeridiemSeparator),e=i[0],n=i[1],t.cf._compare(n,"AM")||t.cf._compare(n,"PM")||(n="")),o=e.split(this.settings.timeSeparator),c=parseInt(o[0]),u=parseInt(o[1]),d&&(h=parseInt(o[2]),h=this._adjustSeconds(h)),12===c&&t.cf._compare(n,"AM")?c=0:12>c&&t.cf._compare(n,"PM")&&(c+=12)):(c=e.getHours(),u=e.getMinutes(),d&&(h=e.getSeconds(),h=this._adjustSeconds(h)))),u=this._adjustMinutes(u),r=new Date(l,a,s,c,u,h,0)},_parseDateTime:function(e){var i,n,o,r,s,a=this.settings.defaultDate?new Date(this.settings.defaultDate):new Date,l=a.getDate(),c=a.getMonth(),u=a.getFullYear(),h=a.getHours(),d=a.getMinutes(),f=a.getSeconds(),p="",m=this.oData.bArrMatchFormat[0]||this.oData.bArrMatchFormat[1]||this.oData.bArrMatchFormat[2]||this.oData.bArrMatchFormat[3]||this.oData.bArrMatchFormat[4]||this.oData.bArrMatchFormat[5]||this.oData.bArrMatchFormat[6]||this.oData.bArrMatchFormat[7];return f=m?this._adjustSeconds(f):0,t.cf._isValid(e)&&("string"==typeof e?(i=e.split(this.settings.dateTimeSeparator),n=i[0].split(this.settings.dateSeparator),this.oData.bArrMatchFormat[0]||this.oData.bArrMatchFormat[1]||this.oData.bArrMatchFormat[8]||this.oData.bArrMatchFormat[9]?(l=parseInt(n[0]),c=parseInt(n[1]-1),u=parseInt(n[2])):this.oData.bArrMatchFormat[2]||this.oData.bArrMatchFormat[3]||this.oData.bArrMatchFormat[10]||this.oData.bArrMatchFormat[11]?(c=parseInt(n[0]-1),l=parseInt(n[1]),u=parseInt(n[2])):this.oData.bArrMatchFormat[4]||this.oData.bArrMatchFormat[5]||this.oData.bArrMatchFormat[12]||this.oData.bArrMatchFormat[13]?(u=parseInt(n[0]),c=parseInt(n[1]-1),l=parseInt(n[2])):(this.oData.bArrMatchFormat[6]||this.oData.bArrMatchFormat[7]||this.oData.bArrMatchFormat[14]||this.oData.bArrMatchFormat[15])&&(l=parseInt(n[0]),c=this._getShortMonthIndex(n[1]),u=parseInt(n[2])),o=i[1],t.cf._isValid(o)&&(this.oData.bIs12Hour&&(t.cf._compare(this.settings.dateTimeSeparator,this.settings.timeMeridiemSeparator)&&3===i.length?p=i[2]:(r=o.split(this.settings.timeMeridiemSeparator),o=r[0],p=r[1]),t.cf._compare(p,"AM")||t.cf._compare(p,"PM")||(p="")),s=o.split(this.settings.timeSeparator),h=parseInt(s[0]),d=parseInt(s[1]),m&&(f=parseInt(s[2])),12===h&&t.cf._compare(p,"AM")?h=0:12>h&&t.cf._compare(p,"PM")&&(h+=12))):(l=e.getDate(),c=e.getMonth(),u=e.getFullYear(),h=e.getHours(),d=e.getMinutes(),m&&(f=e.getSeconds(),f=this._adjustSeconds(f)))),d=this._adjustMinutes(d),a=new Date(u,c,l,h,d,f,0)},_getShortMonthIndex:function(e){for(var i=0;i<this.settings.shortMonthNames.length;i++)if(t.cf._compare(e,this.settings.shortMonthNames[i]))return i},_getFullMonthIndex:function(e){for(var i=0;i<this.settings.fullMonthNames.length;i++)if(t.cf._compare(e,this.settings.fullMonthNames[i]))return i},getIs12Hour:function(t,e){var i=!1,n=Function.length;return this._setMatchFormat(n,t,e),this.oData.bTimeMode?i=this.oData.bArrMatchFormat[0]||this.oData.bArrMatchFormat[2]:this.oData.bDateTimeMode&&(i=this.oData.bArrMatchFormat[1]||this.oData.bArrMatchFormat[3]||this.oData.bArrMatchFormat[5]||this.oData.bArrMatchFormat[7]||this.oData.bArrMatchFormat[9]||this.oData.bArrMatchFormat[11]||this.oData.bArrMatchFormat[13]||this.oData.bArrMatchFormat[15]),this._setMatchFormat(n),i},_setVariablesForDate:function(e,i,n){var o,r={},s=t.cf._isValid(e);return s?(o=new Date(e),t.cf._isValid(i)||(i=!0),t.cf._isValid(n)||(n=!0)):(o="[object Date]"===Object.prototype.toString.call(this.oData.dCurrentDate)&&isFinite(this.oData.dCurrentDate)?new Date(this.oData.dCurrentDate):new Date,t.cf._isValid(i)||(i=this.oData.bTimeMode||this.oData.bDateTimeMode),t.cf._isValid(n)||(n=this.oData.bIs12Hour)),r.iCurrentDay=o.getDate(),r.iCurrentMonth=o.getMonth(),r.iCurrentYear=o.getFullYear(),r.iCurrentWeekday=o.getDay(),i&&(r.iCurrentHour=o.getHours(),r.iCurrentMinutes=o.getMinutes(),r.iCurrentSeconds=o.getSeconds(),n&&(r.sCurrentMeridiem=this._determineMeridiemFromHourAndMinutes(r.iCurrentHour,r.iCurrentMinutes))),s?r:void(this.oData=t.extend(this.oData,r))},_getValuesFromInputBoxes:function(){if(this.oData.bDateMode||this.oData.bDateTimeMode){var e,i;(e=t(this.element).find(".month .dtpicker-compValue").val()).length>1&&(e=e.charAt(0).toUpperCase()+e.slice(1)),-1!==(i=this.settings.shortMonthNames.indexOf(e))?this.oData.iCurrentMonth=parseInt(i):e.match("^[+|-]?[0-9]+$")&&(this.oData.iCurrentMonth=parseInt(e-1)),this.oData.iCurrentDay=parseInt(t(this.element).find(".day .dtpicker-compValue").val())||this.oData.iCurrentDay,this.oData.iCurrentYear=parseInt(t(this.element).find(".year .dtpicker-compValue").val())||this.oData.iCurrentYear}if(this.oData.bTimeMode||this.oData.bDateTimeMode){var n,o,r,s;n=parseInt(t(this.element).find(".hour .dtpicker-compValue").val()),o=this._adjustMinutes(parseInt(t(this.element).find(".minutes .dtpicker-compValue").val())),r=this._adjustMinutes(parseInt(t(this.element).find(".seconds .dtpicker-compValue").val())),this.oData.iCurrentHour=isNaN(n)?this.oData.iCurrentHour:n,this.oData.iCurrentMinutes=isNaN(o)?this.oData.iCurrentMinutes:o,this.oData.iCurrentSeconds=isNaN(r)?this.oData.iCurrentSeconds:r,this.oData.iCurrentSeconds>59&&(this.oData.iCurrentMinutes+=this.oData.iCurrentSeconds/60,this.oData.iCurrentSeconds=this.oData.iCurrentSeconds%60),this.oData.iCurrentMinutes>59&&(this.oData.iCurrentHour+=this.oData.iCurrentMinutes/60,this.oData.iCurrentMinutes=this.oData.iCurrentMinutes%60),this.oData.bIs12Hour?this.oData.iCurrentHour>12&&(this.oData.iCurrentHour=this.oData.iCurrentHour%12):this.oData.iCurrentHour>23&&(this.oData.iCurrentHour=this.oData.iCurrentHour%23),this.oData.bIs12Hour&&(s=t(this.element).find(".meridiem .dtpicker-compValue").val(),(t.cf._compare(s,"AM")||t.cf._compare(s,"PM"))&&(this.oData.sCurrentMeridiem=s),t.cf._compare(this.oData.sCurrentMeridiem,"PM")&&12!==this.oData.iCurrentHour&&this.oData.iCurrentHour<13&&(this.oData.iCurrentHour+=12),t.cf._compare(this.oData.sCurrentMeridiem,"AM")&&12===this.oData.iCurrentHour&&(this.oData.iCurrentHour=0))}},_setCurrentDate:function(){(this.oData.bTimeMode||this.oData.bDateTimeMode)&&(this.oData.iCurrentSeconds>59?(this.oData.iCurrentMinutes+=this.oData.iCurrentSeconds/60,this.oData.iCurrentSeconds=this.oData.iCurrentSeconds%60):this.oData.iCurrentSeconds<0&&(this.oData.iCurrentMinutes-=this.settings.minuteInterval,this.oData.iCurrentSeconds+=60),this.oData.iCurrentMinutes=this._adjustMinutes(this.oData.iCurrentMinutes),this.oData.iCurrentSeconds=this._adjustSeconds(this.oData.iCurrentSeconds));var e,i,n,o,r,s,a,l=new Date(this.oData.iCurrentYear,this.oData.iCurrentMonth,this.oData.iCurrentDay,this.oData.iCurrentHour,this.oData.iCurrentMinutes,this.oData.iCurrentSeconds,0),c=!1,u=!1;if(null!==this.oData.dMaxValue&&(c=l.getTime()>this.oData.dMaxValue.getTime()),null!==this.oData.dMinValue&&(u=l.getTime()<this.oData.dMinValue.getTime()),c||u){var h=!1,d=!1;null!==this.oData.dMaxValue&&(h=this.oData.dCurrentDate.getTime()>this.oData.dMaxValue.getTime()),null!==this.oData.dMinValue&&(d=this.oData.dCurrentDate.getTime()<this.oData.dMinValue.getTime()),h||d?(h&&(l=new Date(this.oData.dMaxValue),console.log("Info : Date/Time/DateTime you entered is later than Maximum value, so DateTimePicker is showing Maximum value in Input Field.")),d&&(l=new Date(this.oData.dMinValue),console.log("Info : Date/Time/DateTime you entered is earlier than Minimum value, so DateTimePicker is showing Minimum value in Input Field.")),console.log("Please enter proper Date/Time/DateTime values.")):l=new Date(this.oData.dCurrentDate)}if(this.oData.dCurrentDate=new Date(l),this._setVariablesForDate(),i={},r="",s="",a="",(this.oData.bDateMode||this.oData.bDateTimeMode)&&(this.oData.bDateMode&&(this.oData.bArrMatchFormat[4]||this.oData.bArrMatchFormat[5]||this.oData.bArrMatchFormat[6])&&(this.oData.iCurrentDay=1),n=this._formatDate(),t(this.element).find(".day .dtpicker-compValue").val(n.dd),this.oData.bDateMode?this.oData.bArrMatchFormat[4]||this.oData.bArrMatchFormat[7]?t(this.element).find(".month .dtpicker-compValue").val(n.MM):this.oData.bArrMatchFormat[6]?t(this.element).find(".month .dtpicker-compValue").val(n.month):t(this.element).find(".month .dtpicker-compValue").val(n.monthShort):t(this.element).find(".month .dtpicker-compValue").val(n.monthShort),t(this.element).find(".year .dtpicker-compValue").val(n.yyyy),this.settings.formatHumanDate?i=t.extend(i,n):this.oData.bDateMode&&(this.oData.bArrMatchFormat[4]||this.oData.bArrMatchFormat[5]||this.oData.bArrMatchFormat[6]||this.oData.bArrMatchFormat[7])?this.oData.bArrMatchFormat[4]?r=n.MM+this.settings.monthYearSeparator+n.yyyy:this.oData.bArrMatchFormat[5]?r=n.monthShort+this.settings.monthYearSeparator+n.yyyy:this.oData.bArrMatchFormat[6]?r=n.month+this.settings.monthYearSeparator+n.yyyy:this.oData.bArrMatchFormat[7]&&(r=n.yyyy+this.settings.monthYearSeparator+n.MM):r=n.dayShort+", "+n.month+" "+n.dd+", "+n.yyyy),this.oData.bTimeMode||this.oData.bDateTimeMode)if(o=this._formatTime(),this.oData.bIs12Hour&&t(this.element).find(".meridiem .dtpicker-compValue").val(this.oData.sCurrentMeridiem),t(this.element).find(".hour .dtpicker-compValue").val(o.hour),t(this.element).find(".minutes .dtpicker-compValue").val(o.mm),t(this.element).find(".seconds .dtpicker-compValue").val(o.ss),this.settings.formatHumanDate)i=t.extend(i,o);else{var f=this.oData.bTimeMode&&(this.oData.bArrMatchFormat[0]||this.oData.bArrMatchFormat[1]),p=this.oData.bDateTimeMode&&(this.oData.bArrMatchFormat[0]||this.oData.bArrMatchFormat[1]||this.oData.bArrMatchFormat[2]||this.oData.bArrMatchFormat[3]||this.oData.bArrMatchFormat[4]||this.oData.bArrMatchFormat[5]||this.oData.bArrMatchFormat[6]||this.oData.bArrMatchFormat[7]);s=f||p?o.hour+this.settings.timeSeparator+o.mm+this.settings.timeSeparator+o.ss:o.hour+this.settings.timeSeparator+o.mm,this.oData.bIs12Hour&&(s+=this.settings.timeMeridiemSeparator+this.oData.sCurrentMeridiem)}this.settings.formatHumanDate?(this.oData.bDateTimeMode?e=this.oData.sDateFormat:this.oData.bDateMode?e=this.oData.sTimeFormat:this.oData.bTimeMode&&(e=this.oData.sDateTimeFormat),a=this.settings.formatHumanDate.call(this,i,this.settings.mode,e)):this.oData.bDateTimeMode?a=r+this.settings.dateTimeSeparator+s:this.oData.bDateMode?a=r:this.oData.bTimeMode&&(a=s),t(this.element).find(".dtpicker-value").html(a),this._setButtons()},_formatDate:function(e){var i,n,o,r,s,a,l,c,u,h={};return t.cf._isValid(e)?h=t.extend({},e):(h.iCurrentDay=this.oData.iCurrentDay,h.iCurrentMonth=this.oData.iCurrentMonth,h.iCurrentYear=this.oData.iCurrentYear,h.iCurrentWeekday=this.oData.iCurrentWeekday),i=h.iCurrentDay,i=10>i?"0"+i:i,o=h.iCurrentMonth,r=h.iCurrentMonth+1,r=10>r?"0"+r:r,s=this.settings.shortMonthNames[o],a=this.settings.fullMonthNames[o],n=h.iCurrentYear,l=h.iCurrentWeekday,c=this.settings.shortDayNames[l],u=this.settings.fullDayNames[l],{dd:i,MM:r,monthShort:s,month:a,yyyy:n,dayShort:c,day:u}},_formatTime:function(e){var i,n,o,r,s,a,l,c={};return t.cf._isValid(e)?c=t.extend({},e):(c.iCurrentHour=this.oData.iCurrentHour,c.iCurrentMinutes=this.oData.iCurrentMinutes,c.iCurrentSeconds=this.oData.iCurrentSeconds,c.sCurrentMeridiem=this.oData.sCurrentMeridiem),i=c.iCurrentHour,n=10>i?"0"+i:i,s=n,(o=c.iCurrentHour)>12&&(o-=12),"00"===s&&(o=12),r=10>o?"0"+o:o,this.oData.bIs12Hour&&(s=r),a=c.iCurrentMinutes,a=10>a?"0"+a:a,l=c.iCurrentSeconds,l=10>l?"0"+l:l,{H:i,HH:n,h:o,hh:r,hour:s,m:c.iCurrentMinutes,mm:a,s:c.iCurrentSeconds,ss:l,ME:c.sCurrentMeridiem}},_setButtons:function(){t(this.element).find(".dtpicker-compButton").removeClass("dtpicker-compButtonDisable").addClass("dtpicker-compButtonEnable");var e;if(null!==this.oData.dMaxValue&&(this.oData.bTimeMode?((this.oData.iCurrentHour+1>this.oData.dMaxValue.getHours()||this.oData.iCurrentHour+1===this.oData.dMaxValue.getHours()&&this.oData.iCurrentMinutes>this.oData.dMaxValue.getMinutes())&&t(this.element).find(".hour .increment").removeClass("dtpicker-compButtonEnable").addClass("dtpicker-compButtonDisable"),this.oData.iCurrentHour>=this.oData.dMaxValue.getHours()&&this.oData.iCurrentMinutes+1>this.oData.dMaxValue.getMinutes()&&t(this.element).find(".minutes .increment").removeClass("dtpicker-compButtonEnable").addClass("dtpicker-compButtonDisable")):((e=new Date(this.oData.iCurrentYear,this.oData.iCurrentMonth,this.oData.iCurrentDay+1,this.oData.iCurrentHour,this.oData.iCurrentMinutes,this.oData.iCurrentSeconds,0)).getTime()>this.oData.dMaxValue.getTime()&&t(this.element).find(".day .increment").removeClass("dtpicker-compButtonEnable").addClass("dtpicker-compButtonDisable"),(e=new Date(this.oData.iCurrentYear,this.oData.iCurrentMonth+1,this.oData.iCurrentDay,this.oData.iCurrentHour,this.oData.iCurrentMinutes,this.oData.iCurrentSeconds,0)).getTime()>this.oData.dMaxValue.getTime()&&t(this.element).find(".month .increment").removeClass("dtpicker-compButtonEnable").addClass("dtpicker-compButtonDisable"),(e=new Date(this.oData.iCurrentYear+1,this.oData.iCurrentMonth,this.oData.iCurrentDay,this.oData.iCurrentHour,this.oData.iCurrentMinutes,this.oData.iCurrentSeconds,0)).getTime()>this.oData.dMaxValue.getTime()&&t(this.element).find(".year .increment").removeClass("dtpicker-compButtonEnable").addClass("dtpicker-compButtonDisable"),(e=new Date(this.oData.iCurrentYear,this.oData.iCurrentMonth,this.oData.iCurrentDay,this.oData.iCurrentHour+1,this.oData.iCurrentMinutes,this.oData.iCurrentSeconds,0)).getTime()>this.oData.dMaxValue.getTime()&&t(this.element).find(".hour .increment").removeClass("dtpicker-compButtonEnable").addClass("dtpicker-compButtonDisable"),(e=new Date(this.oData.iCurrentYear,this.oData.iCurrentMonth,this.oData.iCurrentDay,this.oData.iCurrentHour,this.oData.iCurrentMinutes+1,this.oData.iCurrentSeconds,0)).getTime()>this.oData.dMaxValue.getTime()&&t(this.element).find(".minutes .increment").removeClass("dtpicker-compButtonEnable").addClass("dtpicker-compButtonDisable"),(e=new Date(this.oData.iCurrentYear,this.oData.iCurrentMonth,this.oData.iCurrentDay,this.oData.iCurrentHour,this.oData.iCurrentMinutes,this.oData.iCurrentSeconds+1,0)).getTime()>this.oData.dMaxValue.getTime()&&t(this.element).find(".seconds .increment").removeClass("dtpicker-compButtonEnable").addClass("dtpicker-compButtonDisable"))),null!==this.oData.dMinValue&&(this.oData.bTimeMode?((this.oData.iCurrentHour-1<this.oData.dMinValue.getHours()||this.oData.iCurrentHour-1===this.oData.dMinValue.getHours()&&this.oData.iCurrentMinutes<this.oData.dMinValue.getMinutes())&&t(this.element).find(".hour .decrement").removeClass("dtpicker-compButtonEnable").addClass("dtpicker-compButtonDisable"),this.oData.iCurrentHour<=this.oData.dMinValue.getHours()&&this.oData.iCurrentMinutes-1<this.oData.dMinValue.getMinutes()&&t(this.element).find(".minutes .decrement").removeClass("dtpicker-compButtonEnable").addClass("dtpicker-compButtonDisable")):((e=new Date(this.oData.iCurrentYear,this.oData.iCurrentMonth,this.oData.iCurrentDay-1,this.oData.iCurrentHour,this.oData.iCurrentMinutes,this.oData.iCurrentSeconds,0)).getTime()<this.oData.dMinValue.getTime()&&t(this.element).find(".day .decrement").removeClass("dtpicker-compButtonEnable").addClass("dtpicker-compButtonDisable"),(e=new Date(this.oData.iCurrentYear,this.oData.iCurrentMonth-1,this.oData.iCurrentDay,this.oData.iCurrentHour,this.oData.iCurrentMinutes,this.oData.iCurrentSeconds,0)).getTime()<this.oData.dMinValue.getTime()&&t(this.element).find(".month .decrement").removeClass("dtpicker-compButtonEnable").addClass("dtpicker-compButtonDisable"),(e=new Date(this.oData.iCurrentYear-1,this.oData.iCurrentMonth,this.oData.iCurrentDay,this.oData.iCurrentHour,this.oData.iCurrentMinutes,this.oData.iCurrentSeconds,0)).getTime()<this.oData.dMinValue.getTime()&&t(this.element).find(".year .decrement").removeClass("dtpicker-compButtonEnable").addClass("dtpicker-compButtonDisable"),(e=new Date(this.oData.iCurrentYear,this.oData.iCurrentMonth,this.oData.iCurrentDay,this.oData.iCurrentHour-1,this.oData.iCurrentMinutes,this.oData.iCurrentSeconds,0)).getTime()<this.oData.dMinValue.getTime()&&t(this.element).find(".hour .decrement").removeClass("dtpicker-compButtonEnable").addClass("dtpicker-compButtonDisable"),(e=new Date(this.oData.iCurrentYear,this.oData.iCurrentMonth,this.oData.iCurrentDay,this.oData.iCurrentHour,this.oData.iCurrentMinutes-1,this.oData.iCurrentSeconds,0)).getTime()<this.oData.dMinValue.getTime()&&t(this.element).find(".minutes .decrement").removeClass("dtpicker-compButtonEnable").addClass("dtpicker-compButtonDisable"),(e=new Date(this.oData.iCurrentYear,this.oData.iCurrentMonth,this.oData.iCurrentDay,this.oData.iCurrentHour,this.oData.iCurrentMinutes,this.oData.iCurrentSeconds-1,0)).getTime()<this.oData.dMinValue.getTime()&&t(this.element).find(".seconds .decrement").removeClass("dtpicker-compButtonEnable").addClass("dtpicker-compButtonDisable"))),this.oData.bIs12Hour){var i,n;(null!==this.oData.dMaxValue||null!==this.oData.dMinValue)&&(i=this.oData.iCurrentHour,t.cf._compare(this.oData.sCurrentMeridiem,"AM")?i+=12:t.cf._compare(this.oData.sCurrentMeridiem,"PM")&&(i-=12),e=new Date(this.oData.iCurrentYear,this.oData.iCurrentMonth,this.oData.iCurrentDay,i,this.oData.iCurrentMinutes,this.oData.iCurrentSeconds,0),null!==this.oData.dMaxValue&&(this.oData.bTimeMode?(n=this.oData.iCurrentMinutes,(i>this.oData.dMaxValue.getHours()||i===this.oData.dMaxValue.getHours()&&n>this.oData.dMaxValue.getMinutes())&&t(this.element).find(".meridiem .dtpicker-compButton").removeClass("dtpicker-compButtonEnable").addClass("dtpicker-compButtonDisable")):e.getTime()>this.oData.dMaxValue.getTime()&&t(this.element).find(".meridiem .dtpicker-compButton").removeClass("dtpicker-compButtonEnable").addClass("dtpicker-compButtonDisable")),null!==this.oData.dMinValue&&(this.oData.bTimeMode?(n=this.oData.iCurrentMinutes,(i<this.oData.dMinValue.getHours()||i===this.oData.dMinValue.getHours()&&n<this.oData.dMinValue.getMinutes())&&t(this.element).find(".meridiem .dtpicker-compButton").removeClass("dtpicker-compButtonEnable").addClass("dtpicker-compButtonDisable")):e.getTime()<this.oData.dMinValue.getTime()&&t(this.element).find(".meridiem .dtpicker-compButton").removeClass("dtpicker-compButtonEnable").addClass("dtpicker-compButtonDisable")))}},setIsPopup:function(e){if(!this.settings.isInline)if(this.settings.isPopup=e,"none"!==t(this.element).css("display")&&this._hidePicker(0),this.settings.isPopup)t(this.element).addClass("dtpicker-mobile"),t(this.element).css({position:"fixed",top:0,left:0,width:"100%",height:"100%"});else if(t(this.element).removeClass("dtpicker-mobile"),null!==this.oData.oInputElement){var i=t(this.oData.oInputElement).offset().top+t(this.oData.oInputElement).outerHeight(),n=t(this.oData.oInputElement).offset().left,o=t(this.oData.oInputElement).outerWidth();t(this.element).css({position:"absolute",top:i,left:n,width:o,height:"auto"})}},_compareDates:function(t,e){var i=((t=new Date(t.getDate(),t.getMonth(),t.getFullYear(),0,0,0,0)).getTime()-e.getTime())/864e5;return 0===i?i:i/Math.abs(i)},_compareTime:function(t,e){var i=0;return t.getHours()===e.getHours()&&t.getMinutes()===e.getMinutes()?i=1:t.getHours()<e.getHours()?i=2:t.getHours()>e.getHours()?i=3:t.getHours()===e.getHours()&&(t.getMinutes()<e.getMinutes()?i=2:t.getMinutes()>e.getMinutes()&&(i=3)),i},_compareDateTime:function(t,e){var i=(t.getTime()-e.getTime())/6e4;return 0===i?i:i/Math.abs(i)},_determineMeridiemFromHourAndMinutes:function(t,e){return t>12||12===t&&e>=0?"PM":"AM"},setLanguage:function(e){return this.settings=t.extend({},t.DateTimePicker.defaults,t.DateTimePicker.i18n[e],this.options),this.settings.language=e,this._setDateFormatArray(),this._setTimeFormatArray(),this._setDateTimeFormatArray(),this}}});var QoobController=Backbone.Router.extend({routes:{"":"index","groups-:group(/)":"showGroup","edit-:blockId(/)":"startEditBlock","save-template(/)":"showSavePageTemplate","*default":"default"},isBack:!1,initialize:function(){this.history=[]},currentUrl:function(){return Backbone.history.getFragment()},addHistory:function(t){this.history.push(t)},getHistory:function(){for(var t=Backbone.history.fragment;t==Backbone.history.fragment;)t=this.history.pop();return t},default:function(t){var e=t;"/"==e.charAt(e.length-1)&&(e=e.substr(0,e.length-1));var i=e.split("/");if(i[0].indexOf("edit-")<=0&&!this.layout.getBlockView(i[0].split("-")[1]))this.navigate("",{trigger:!0,replace:!0});else for(this.addHistory(e),this.isBack=!1,this.layout.navigate("edit",i.shift().split("-")[1],this.isBack);i.length>0;)this.layout.navigate("inner",i.shift(),this.isBack)},backward:function(){this.isBack=!0,this.layout.backward(this.currentUrl())},index:function(){this.addHistory(Backbone.history.getFragment()),this.layout.navigate("index",null,this.isBack),this.isBack=!1},showGroup:function(t){this.addHistory(Backbone.history.getFragment()),this.layout.navigate("group",t,this.isBack),this.isBack=!1},setLayout:function(t){this.layout=t},setPageModel:function(t){this.pageModel=t},setStorage:function(t){this.storage=t},setPreviewMode:function(){this.layout.setPreviewMode()},setEditMode:function(){this.layout.setEditMode()},setDeviceMode:function(t){this.layout.setDeviceMode(t)},setAutoSave:function(t){this.autosave=t;var e=this;if(this.autosave)var i=setInterval(function(){e.autosave?e.save():clearInterval(i)},6e4)},save:function(t){var e=this;this.layout.showSaveLoader();var i=JSON.parse(JSON.stringify(this.pageModel.toJSON()));i.version=window.QoobVersion;for(var n="",o=this.pageModel.get("blocks").models,r=0;r<o.length;r++){var s=o[r];n+=this.layout.getBlockView(s.id).innerBlock.renderedTemplate}this.storage.save(i,n,function(i,n){e.layout.hideSaveLoader(),"function"==typeof t&&t(i,n)})},exit:function(){var t=this;this.autosave?this.save(function(){t.storage.driver.exit(t.storage.pageId)}):this.storage.driver.exit(this.storage.pageId)},showSavePageTemplate:function(){this.layout.navigate("save-template",null,this.isBack),this.isBack=!1},addNewBlock:function(t,e,i){var n=this.storage.getBlockConfig(t,e);this.addBlock(QoobUtils.getDefaultSettings(n,n.name),i)},addBlock:function(t,e,i){i=void 0===i||i;var n=QoobUtils.createModel(t);if(this.pageModel.addBlock(n,e),this.layout.addBlock(n,e),i){var o,r=this,s=this.pageModel.get("blocks").indexOf(n),a=this.pageModel.get("blocks").at(s+1);o=0===s?"top":this.pageModel.get("blocks").length>1&&void 0===a&&"bottom",setTimeout(function(){r.layout.scrollTo(n.id,o)},700)}},startEditBlock:function(t){this.pageModel.get("blocks").get(t)?(this.addHistory(Backbone.history.getFragment()),this.layout.navigate("edit",t,this.isBack)):this.navigate("",{trigger:!0,replace:!0})},stopEditBlock:function(){this.layout.stopEditBlock(),this.navigate("",{trigger:!0})},load:function(t){if(0===t.length)this.layout.triggerBlocksLoader();else for(var e=0;e<t.length;e++)this.addBlock(t[e],null,!1)},deleteBlock:function(t){this.pageModel.deleteBlock(t),this.layout.deleteBlock(t)},moveDownBlock:function(t){this.pageModel.moveDown(t)},moveUpBlock:function(t){this.pageModel.moveUp(t)},triggerIframe:function(){this.layout.triggerIframe()},changeLib:function(t){this.layout.changeLib(t)},current:function(){var t,e=this,i=Backbone.history.fragment,n=_.pairs(e.routes),o=null,r=null;return(t=_.find(n,function(t){return(o=_.isRegExp(t[0])?t[0]:e._routeToRegExp(t[0])).test(i)}))&&(r=e._extractParameters(o,i),o=t[1]),{route:o,fragment:i,params:r}},createPageTemplate:function(t,e){var i=JSON.parse(JSON.stringify(this.pageModel.toJSON())),n=_.extend(t,i);if(i.blocks.length>0&&""!==t.title)this.storage.createPageTemplate(n,function(t){e(t,status)});else{var o={};""===t.title&&(o.title=!0),0===i.blocks.length&&(o.blocks=!0),e(o)}},removeTemplateBlock:function(t){this.storage.removePageTemplate(t)},changeDefaultPage:function(t){this.layout.changeDefaultPage(t)},removePageData:function(){var t=this;_.each(_.clone(this.pageModel.get("blocks").models),function(e){t.deleteBlock(e)})},showImportExportWindow:function(){this.layout.showImportExportWindow()},removeEmptyDraggableElement:function(){this.layout.removeEmptyDraggableElement()},showSwipeMenu:function(){this.layout.showSwipeMenu()},hideSwipeMenu:function(){this.layout.hideSwipeMenu()}}),BlockModel=Backbone.Model.extend({toJSON:function(){for(var t=Backbone.Model.prototype.toJSON.apply(this,arguments),e=0;e<t.length;e++)t[e]instanceof Backbone.Collection&&(t[e]=JSON.parse(JSON.stringify(t[e])));return t}}),PageModel=Backbone.Model.extend({initialize:function(){this.set("blocks",new Backbone.Collection)},addBlock:function(t,e){if(e=e||null){var i=this.get("blocks").get(e),n=this.get("blocks").indexOf(i);this.get("blocks").add(t,{at:n})}else this.get("blocks").add(t,{at:this.get("blocks").length+1})},deleteBlock:function(t){this.get("blocks").remove(t)},moveUp:function(t){var e=this.get("blocks").indexOf(t);e>0&&(this.swap(e,e-1),this.trigger("block_moveup",t.id))},moveDown:function(t){var e=this.get("blocks").indexOf(t);e<this.get("blocks").models.length&&(this.swap(e,e+1),this.trigger("block_movedown",t.id))},swap:function(t,e){this.get("blocks").models[t]=this.get("blocks").models.splice(e,1,this.get("blocks").models[t])[0]}}),QoobBlockView=Backbone.View.extend({tagName:"div",className:"content-block-inner",renderedTemplate:null,initialize:function(t){this.storage=t.storage,this.controller=t.controller,this.listenTo(this.model,"change",this.render)},render:function(){var t=this;return this.storage.getBlockTemplate(this.model.get("lib"),this.model.get("block"),function(e,i){if("blockNotFound"==e)t.renderedTemplate='<div class="empty-block"><div class="empty-block-text">The block '+t.model.get("block")+" is not found in the library "+t.model.get("lib")+"</div></div>";else{var n=t.storage.getBlockConfig(t.model.get("lib"),t.model.get("block")).blockTemplateAdapter||t.storage.getDefaultTemplateAdapter(),o=QoobExtensions.templating[n];t.renderedTemplate=o(i)(JSON.parse(JSON.stringify(t.model)))}t.controller.layout.viewPort.getWindowIframe().jQuery(t.el).html(t.renderedTemplate),"blockNotFound"==e&&(t.renderedTemplate=""),t.trigger("loaded"),t.controller.triggerIframe()}),t},dispose:function(){this.remove(),this.off(),this.model.off(null,null,this)}}),QoobBlockWrapperView=Backbone.View.extend({tagName:"div",events:{"click .qoob-overlay":"clickStartEditBlock"},attributes:function(){return{id:"outer-block-"+this.model.id}},initialize:function(t){this.storage=t.storage,this.controller=t.controller,this.innerBlock=new QoobBlockView({model:this.model,storage:this.storage,controller:this.controller})},render:function(){var t=this;return this.innerBlock.once("loaded",function(){var e=_.template(t.storage.getSkinTemplate("block-droppable-preview"))({blockId:t.model.id,text:this.storage.__("text_droppable_zone","Drop here to create a new block")}),i=_.template(t.storage.getSkinTemplate("block-overlay-preview"))({blockId:t.model.id});t.controller.layout.viewPort.getWindowIframe().jQuery(t.el).html([e,i,t.innerBlock.el]),t.$el.addClass("content-show content-block-outer"),t.droppable(),t.trigger("loaded"),t.controller.layout.viewPort.getWindowIframe().focus()}),t.$el.html(_.template(this.storage.getSkinTemplate("block-pleasewait-preview"))({text:this.storage.__("block_pleasewait_preview","Please wait")})),this.innerBlock.render(),this},clickStartEditBlock:function(){if("desktop"!==this.controller.layout.getDeviceState()&&this.controller.layout.viewPort.viewportTapTriggered)return this.controller.layout.viewPort.viewportTapTriggered=!1,!1;this.controller.layout.menu.getSettingsView(this.model.id)&&this.controller.navigate("edit-"+this.model.id,{trigger:!0}),this.controller.layout.$el.hasClass("close-panel")&&this.controller.showSwipeMenu()},droppable:function(){var t=this;this.$el.find("#droppable-"+t.model.id).droppable({activeClass:"ui-droppable-active",hoverClass:"ui-droppable-hover",tolerance:"pointer",drop:function(e,i){var n=jQuery(this),o=i.draggable.attr("id").replace("preview-block-",""),r=n.attr("id").replace("droppable-",""),s=i.draggable.data("lib");t.controller.addNewBlock(s,o,r)}})},dispose:function(){var t=this;this.$el.addClass("content-hide").one("animationend AnimationEnd",function(){t.$el.remove(),t.off(),t.model.off(null,null,t)})}}),QoobEditModeButtonView=Backbone.View.extend({className:"edit-mode-button",events:{click:"clickEditMode",touchstart:"clickEditMode"},initialize:function(t){this.storage=t.storage,this.controller=t.controller},clickEditMode:function(){this.controller.setEditMode()},setPreviewMode:function(){var t=this;this.controller.layout.sidebar.$el.on("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(e){e.target==this&&(t.$el.addClass("edit-mode-button-show"),t.controller.layout.sidebar.$el.off("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"))})},setEditMode:function(){this.$el.removeClass("edit-mode-button-show")}}),QoobFieldView=Backbone.View.extend({className:"settings-item",initialize:function(t){this.model=t.model,this.side=t.side,this.name=t.name,this.storage=t.storage,this.settings=t.settings,this.defaults=t.defaults,this.controller=t.controller,this.parent=t.parent},getValue:function(){if(void 0===this.model.get(this.settings.name)){var t=_.isArray(this.defaults)?QoobUtils.createCollection(this.defaults):this.defaults;this.model.set(this.settings.name,t)}return this.model.get(this.settings.name)}}),QoobFieldsView=Backbone.View.extend({tagName:"div",className:"settings-block-items",initialize:function(t){this.model=t.model,this.name=t.name,this.storage=t.storage,this.settings=t.settings,this.defaults=t.defaults,this.controller=t.controller,this.parent=t.parent,this.fields=[],this.side=this},getHtml:function(){for(var t=[],e=0;e<this.settings.length;e++){if(!Fields[this.settings[e].type])throw new Error("Field "+this.settings[e].type+" not found!");var i=new Fields[this.settings[e].type]({name:this.settings[e].name,model:this.model,storage:this.storage,settings:this.settings[e],defaults:this.defaults[this.settings[e].name],controller:this.controller,parent:this,side:this});this.fields.push(i),t.push(i.render().el)}return t}}),QoobLayout=Backbone.View.extend({tagName:"div",id:"qoob",initialize:function(t){var e=this;this.inner=null,this.storage=t.storage,this.controller=t.controller,this.sidebar=new QoobSidebarView({model:this.model,storage:this.storage,controller:this.controller}),this.menu=new QoobMenuView({model:this.model,storage:this.storage,controller:this.controller}),this.toolbar=new QoobToolbarView({model:this.model,storage:this.storage,controller:this.controller}),this.editModeButton=new QoobEditModeButtonView({model:this.model,storage:this.storage,controller:this.controller}),this.viewPort=new QoobViewportView({model:this.model,storage:this.storage,controller:this.controller}),this.ImportExport=new QoobImportExportView({storage:this.storage,controller:this.controller});new Hammer(document.documentElement,{touchAction:"auto",inputClass:Hammer.SUPPORT_POINTER_EVENTS?Hammer.PointerEventInput:Hammer.TouchInput,recognizers:[[Hammer.Swipe,{direction:Hammer.DIRECTION_HORIZONTAL}]]}).on("swipeleft swiperight",function(t){"swipeleft"===t.type?e.hideSwipeMenu():"swiperight"===t.type&&e.showSwipeMenu()});var i=function(){e.$el.removeClass("mobile tablet desktop");var t=e.getDeviceState();"mobile"===t?e.$el.addClass("mobile"):"tablet"===t?e.$el.addClass("tablet"):e.$el.addClass("desktop")};Hammer.on(window,"resize",function(){i()}),i()},navigate:function(t,e,i){if("index"==t)this.menu.showIndex(i),this.stopEditBlock();else if("save-template"==t)this.stopEditBlock(),this.menu.hideNotice(),this.menu.showSavePageTemplate();else if("group"==t)this.menu.showIndex(i),this.stopEditBlock(),this.menu.showGroup(e);else if("edit"==t)this.startEditBlock(e,i),this.scrollTo(e);else if("inner"==t){var n,o,r,s,a=this.menu.currentView,l=a.name+"_"+e,c=this.menu.getView(l),u=e.split("-")[0],h=e.split("-")[1],d=_.findWhere(a.settings,{name:u});if(n=h?a.model.get(u).get(h):a.model,"accordion_flip"==d.type)c||(r=(o=_.find(a.fields,function(t){if(t.settings.name==u)return t})).getAccordionMenuViews(h),(c=new AccordionFlipItemSettingsView({name:l,storage:this.storage,controller:this.controller,model:n,settings:d.settings,defaults:r.defaults,parent:a,side:a.side})).side=c,this.menu.setInnerSettingsView(c)),this.menu.currentView=c,this.menu.showInnerSettingsView(l,i),(s=c.$el.find(".accordion")).length>0&&s.accordion("option","active",!1);else if("accordion"==d.type){void 0!=(r=(o=_.find(a.fields,function(t){if(t.settings.name==u)return t})).getAccordionMenuViews(h))?this.menu.currentView=r.settingsView:this.controller.navigate("",{trigger:!0,replace:!0});var f=null;(s=o.$el.find(".accordion")).find(".field-accordion-item").each(function(t,e){jQuery(e).data("model-id")==h&&(f=t)}),s.accordion("option","active",f)}else if("image"==d.type){if(!c){var p=_.find(a.fields,function(t){if(t.settings.name==u)return t});(c=new ImageCenterView({name:l,storage:this.storage,controller:this.controller,model:n,curSrc:p.getValue(),assets:this.storage.getAssets(),tags:p.tags?p.tags.join(", "):"",cb:p.changeImage.bind(p),parent:a})).side=c,this.menu.setInnerSettingsView(c)}this.menu.showInnerSettingsView(l,i)}else if("icon"==d.type){if(!c){var m=_.find(a.fields,function(t){if(t.settings.name==u)return t}),g=m.findByClasses(m.getValue());(c=new IconCenterView({name:l,storage:this.storage,controller:this.controller,model:n,icon:g?{classes:g.classes,tags:g.tags}:"",icons:m.icons,cb:m.changeIcon.bind(m),parent:a})).side=c,this.menu.setInnerSettingsView(c)}this.menu.showInnerSettingsView(l,i)}else if("video"==d.type){if(!c){var v=_.find(a.fields,function(t){if(t.settings.name==u)return t});(c=new VideoCenterView({name:l,storage:this.storage,controller:this.controller,model:n,src:v.getValue(),assets:v.storage.getAssets(),tags:v.tags?v.tags.join(", "):"",cb:v.changeVideo.bind(v),parent:a})).side=c,this.menu.setInnerSettingsView(c)}this.menu.showInnerSettingsView(l,i)}}},backward:function(t){if(0==t.length)this.controller.exit();else if(t.length>0){var e=t.split("/");if(e.length>1){e.pop();this.menu.currentView.parent.$el.hasClass("field-accordion-settings")&&e.pop(),this.controller.navigate(e.join("/"),{trigger:!0,replace:!0})}else for(var i=["edit","group","save-template"],n=0;n<i.length;n++)if(-1!==e[0].indexOf(i[n])){this.controller.navigate("",{trigger:!0,replace:!0});break}}},scrollTo:function(t,e){this.viewPort.scrollTo(t,e)},render:function(){this.sidebar.$el.html([this.toolbar.render().el,this.menu.render().el]),this.$el.html([this.sidebar.render().el,this.viewPort.render().el,this.ImportExport.render().el,this.editModeButton.render().el]);return"mobile"===this.getDeviceState()&&this.showSwipeMenu(),this},resize:function(){this.viewPort.resize()},setPreviewMode:function(){this.editModeButton.setPreviewMode(),this.menu.setPreviewMode(),this.sidebar.setPreviewMode(),this.viewPort.setPreviewMode(),this.resize()},setEditMode:function(){this.editModeButton.setEditMode(),this.sidebar.setEditMode(),this.viewPort.setEditMode()},setDeviceMode:function(t){this.viewPort.setDeviceMode(t)},startEditBlock:function(t,e){this.menu.startEditBlock(t,e),this.viewPort.startEditBlock(t)},stopEditBlock:function(){this.viewPort.stopEditBlock()},showSaveLoader:function(){this.toolbar.showSaveLoader()},hideSaveLoader:function(){this.toolbar.hideSaveLoader()},getBlockView:function(t){return this.viewPort.getBlockView(t)},addBlock:function(t,e){this.menu.addSettings(t),this.viewPort.addBlock(t,e)},deleteBlock:function(t){this.viewPort.delBlockView(t),this.menu.deleteSettings(t),this.viewPort.triggerIframe()},triggerIframe:function(){this.viewPort.triggerIframe()},changeLib:function(t){this.storage.currentLib=t,this.menu.hideLibsExcept(t)},changeDefaultPage:function(t){this.viewPort.changeDefaultPage(t)},showImportExportWindow:function(){this.ImportExport.showImportExportWindow()},removeEmptyDraggableElement:function(){this.viewPort.removeEmptyDraggableElement()},showSwipeMenu:function(){this.sidebar.showSwipeMenu()},hideSwipeMenu:function(){var t=this.controller.layout.getDeviceState(),e=this.controller.current();if("desktop"==t&&0==e.route.indexOf("index"))this.sidebar.hideSwipeMenu(),this.menu.hideSwipeMenu();else if("desktop"!=t){var i=this;this.sidebar.hideSwipeMenu(),this.sidebar.$el.on("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(t){t.target==this&&(i.menu.hideSwipeMenu(),i.sidebar.$el.off("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"))})}},triggerBlocksLoader:function(){this.viewPort.trigger("blocks_loaded")},getDeviceState:function(){var t,e=jQuery(window).width();return device.mobile()||e>=320&&e<=767?t="mobile":device.tablet()||e>=768&&e<=991?t="tablet":e>=992&&(t="desktop"),t}}),QoobSidebarView=Backbone.View.extend({attributes:function(){return{id:"qoob-sidebar"}},initialize:function(t){this.storage=t.storage,this.controller=t.controller},render:function(){return this.afterRender(),this},afterRender:function(){var t,e=this,i=0,n=function(t){var i=e.controller.current();-1==["startEditBlock","default"].indexOf(i.route)&&t.stopImmediatePropagation()};this.$el.on("drag dragstart dragend dragover dragenter dragleave drop",function(t){n(t)}).on("dragenter",function(o){if(n(o),1===++i&&(t=e.controller.layout.menu.currentView.fields,function(t){for(var e,i=["image","video"],n=0;n<t.length;n++){if(i.indexOf(t[n].settings.type)>-1){e=!0;break}if("accordion"==t[n].settings.type||"accordion_flip"==t[n].settings.type){if(_.some(t[n].settings.settings,function(t){if(i.indexOf(t.type)>-1)return t})){e=!0;break}}else e=!1}return e}(t))){for(var r=0;r<t.length;r++)t[r].$el.trigger("global_drag_start");e.controller.layout.sidebar.$el.addClass("overlay")}}).on("dragleave",function(t){n(t),0===--i&&e.controller.layout.sidebar.$el.removeClass("overlay")}).on("dragover",function(t){t.preventDefault()}).on("drop",function(t){t.preventDefault(),n(t),e.controller.layout.sidebar.$el.removeClass("overlay"),i=0})},setPreviewMode:function(){this.$el.addClass("hide-sidebar")},setEditMode:function(){var t=this;this.controller.layout.editModeButton.$el.on("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(e){e.target==this&&(t.$el.removeClass("hide-sidebar"),t.controller.layout.resize(),t.controller.layout.editModeButton.$el.off("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"))})},showSwipeMenu:function(){this.controller.layout.$el.removeClass("close-panel")},hideSwipeMenu:function(){this.controller.layout.$el.hasClass("close-panel")||this.controller.layout.$el.addClass("close-panel")}}),QoobMenuView=Backbone.View.extend({id:"qoob-menu",menuViews:[],groupActiveClass:"group-list__link-active",initialize:function(t){this.controller=t.controller,this.storage=t.storage,this.currentSide=null,this.currentView=null},addSettings:function(t){var e=this.storage.getBlockConfig(t.get("lib"),t.get("block"));e&&this.addView(new QoobMenuSettingsView({id:"edit-"+t.id,name:"edit-"+t.id,model:t,settings:e.settings,defaults:e.defaults,storage:this.storage,controller:this.controller}),"main")},render:function(){this.$el.html(_.template(this.storage.getSkinTemplate("qoob-menu-preview"))());var t=this.storage.getGroups();this.addView(new QoobMenuGroupsView({id:"catalog-groups",storage:this.storage,groups:t,controller:this.controller}),"main");for(var e=0;e<t.length;e++)this.addView(new QoobMenuBlocksPreviewView({id:t[e].id,storage:this.storage,controller:this.controller,group:t[e]}),"right");return this.addView(new QoobMenuSavePageTemplateView({name:"save-template",storage:this.storage,controller:this.controller}),"main"),this.draggable(),this},draggable:function(){var t=this,e=!1;this.$el.find(".preview-block").data("blockPreventDefault",!0);var i=this.controller.layout.getDeviceState();this.$el.find(".preview-block").draggable({appendTo:"body",helper:"clone",distance:10,iframeFix:!0,iframeScroll:!0,scrollSensitivity:100,scrollSpeed:15,containment:"document",opacity:.5,start:function(){if(!e)return t.controller.removeEmptyDraggableElement(),!1;"mobile"!==i&&"tablet"!==i||t.controller.hideSwipeMenu(),device.ios()||t.controller.navigate("",{trigger:!0})},stop:function(){t.controller.removeEmptyDraggableElement()}}),this.$el.find(".preview-block").each(function(){jQuery(this).on("mousedown",function(t){0===t.buttons||device.ios()||(e=!0)}),jQuery(this).on("touchstart",function(t){var i;$this=jQuery(this),parent=$this.parent(".preview-blocks"),i=setTimeout(function(){e=!0;var i=jQuery.Event("mousemove"),n=t.originalEvent.touches[0]||t.originalEvent.changedTouches[0];i.pageX=n.pageX+10,i.pageY=n.pageY,$this.trigger(i)},500),$this.one("touchend",function(){e=!1,clearTimeout(i)}),$this.one("touchmove",function(t){t.preventDefault(),clearTimeout(i)})})})},showGroup:function(t){this.showSide("right",t)},showIndex:function(t){this.hideSide("right");var e=this.getView("catalog-groups");this.currentSide&&this.currentSide.side?this.changeSide(this.currentSide.side,e.side,t):this.changeSide(null,e.side,t),this.currentView=e,this.currentSide=e.side},startEditBlock:function(t,e){this.hideSide("right");var i=this.getSettingsView(t);this.currentSide&&this.currentSide.side?this.changeSide(this.currentSide.side,i.side,e):this.changeSide(null,i.side,e),this.currentView=i,this.currentSide=i.side;var n=i.$el.find(".accordion");n.length>0&&n.accordion("option","active",!1)},showSavePageTemplate:function(t){this.hideSide("right");var e=this.getView("save-template");this.currentSide&&this.currentSide.side?this.changeSide(this.currentSide,e,t):this.changeSide(null,e.side,t),this.currentView=e,this.currentSide=e.side},addView:function(t,e){this.menuViews.push(t),this.$el.find(".qoob-menu-"+e+"-side").append(t.render().el)},setInnerSettingsView:function(t){this.addView(t,"main")},showInnerSettingsView:function(t,e){var i=this.getView(t);this.changeSide(this.currentSide,i.side,e),this.currentView=i,this.currentSide=i.side},getView:function(t){for(var e=0;e<this.menuViews.length;e++)if(this.menuViews[e].name==t)return this.menuViews[e]},getSettingsView:function(t){for(var e=0;e<this.menuViews.length;e++)if(this.menuViews[e].model&&this.menuViews[e].model.id==t)return this.menuViews[e]},showSide:function(t,e){var i=this.$el.find(".qoob-menu-"+t+"-side");this.$el.find("[data-group-id]").removeClass(this.groupActiveClass),this.$el.find("[data-group-id="+e+"]").length&&this.$el.find("[data-group-id="+e+"]").addClass(this.groupActiveClass),i.hasClass("show-side")||i.addClass("show-side"),i.find("[data-side-id]").removeClass("side-item-show"),i.find('[data-side-id="'+e+'"]').addClass("side-item-show")},hideSide:function(t){var e=this.$el.find(".qoob-menu-"+t+"-side");e.hasClass("show-side")&&e.removeClass("show-side"),e.on("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(t){t.target==this&&(e.hasClass("show-side")||e.find("[data-side-id]").hasClass("side-item-show")&&e.find("[data-side-id]").removeClass("side-item-show"),jQuery(this).off(t))}),this.$el.find("[data-group-id]").removeClass(this.groupActiveClass)},changeSide:function(t,e,i){var n,o=this;if(t==e)return!1;i?(n=t.$el.clone(),this.$el.find(".qoob-menu-backward-side").append(n.addClass("side-item-show")),t&&t.$el.removeClass("side-item-show"),this.$el.addClass("show-backward"),e.$el.addClass("side-item-show"),this.$el.find(".qoob-menu-backward-side").on("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(t){t.target==this&&(o.$el.find(".qoob-menu-backward-side").html(""),o.$el.removeClass("show-backward"),jQuery(this).off(t))})):void 0!==e&&(n=e.$el.clone(),this.$el.find(".qoob-menu-forward-side").append(n.addClass("side-item-show")),this.$el.addClass("show-forward"),this.$el.find(".qoob-menu-forward-side").on("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(i){i.target==this&&(t&&t.$el.removeClass("side-item-show"),e.$el.addClass("side-item-show"),o.$el.find(".qoob-menu-forward-side").html(""),o.$el.removeClass("show-forward"),e.$el.trigger("shown"),jQuery(this).off(i))}))},onEditMode:function(){this.$el.fadeIn(300)},deleteSettings:function(t){this.controller.stopEditBlock();this.getSettingsView(t.id).dispose()},hideLibsExcept:function(t){var e=this,i=this.$el.find("ul.catalog-list li"),n=this.$el.find(".preview-block");i.hide(),n.hide(),e.controller.navigate("",{trigger:!0}),"all"!==t&&(n=n.filter(function(i){return e.$(n[i]).data("lib")==t}),i=i.filter(function(n){return-1!=e.$(i[n]).data("lib").indexOf(t)})),i.show(),n.show()},hideNotice:function(){var t=_.findWhere(this.menuViews,{id:"save-template"}).$el;t.find(".save-template-settings").hasClass("show-notice")&&(t.find(".remove").trigger("click"),t.find(".input-text").val(""),t.find(".save-template-settings").removeClass("show-notice"),t.find(".field-text").show()),t.find(".save-template-settings .button-save-template").show(),t.find(".error-block").hide(),t.find(".field-text").hasClass("error")&&t.find(".field-text").removeClass("error")},hideSwipeMenu:function(){0!=this.controller.current().route.indexOf("index")&&(this.controller.isBack=!0,this.controller.navigate("",{trigger:!0,replace:!0}))},setPreviewMode:function(){"desktop"==this.controller.layout.getDeviceState()&&"catalog-groups"==this.currentView.name&&(this.hideSide("right"),this.controller.navigate("",{trigger:!0,replace:!0}))}}),QoobToolbarView=Backbone.View.extend({tagName:"div",customMenu:null,events:{"click .view-preview":"clickPreviewMode","change .lib-select":"changeLib","change .preview-modes":"changeDeviceMode","click .save":"clickSave","click .autosave-checkbox":"clickAutosave","click .backward":"clickBackward","click [data-id]":"clickAction"},attributes:function(){return{id:"qoob-toolbar"}},initialize:function(t){this.storage=t.storage,this.controller=t.controller},clickAction:function(t){t.preventDefault();var e=jQuery(t.currentTarget).data("id");if("function"==typeof this.storage.driver.mainMenu){var i=this.customMenu.find(function(t){return t.id===e});i.action&&i.action(this)}},render:function(){var t=this,e={libs:this.storage.librariesData,curLib:this.storage.currentLib,device:this.controller.layout.getDeviceState(),allThemes:this.storage.__("all_libs","All Libs"),save:this.storage.__("save","Save"),close:this.storage.__("close","close"),more:this.storage.__("more","More"),desktop:this.storage.__("desktop","Desktop"),tablet:this.storage.__("tablet","Tablet"),phone:this.storage.__("phone","Phone"),save_template:this.storage.__("save_template","Save as template"),autosave:this.storage.__("autosave","Autosave"),customMenu:null};if("function"==typeof this.storage.driver.mainMenu){var i=[{id:"import-export",label:"Import/export",action:function(){t.controller.showImportExportWindow()},icon:""},{id:"empty-page",label:"Empty page",action:function(){t.controller.removePageData()},icon:""}];e.customMenu=this.customMenu=this.storage.driver.mainMenu(i)}return this.$el.html(_.template(this.storage.getSkinTemplate("qoob-toolbar-preview"))(e)),this.$el.find(".qoob-select-item").qoobSelect(),this},showSaveLoader:function(){this.$el.find(".save .save-clock").css("display","block")},hideSaveLoader:function(){this.$el.find(".save .save-clock").css("display","")},clickPreviewMode:function(){this.controller.setPreviewMode()},changeDeviceMode:function(t){this.controller.setDeviceMode(t.target.value)},clickSave:function(){this.controller.save()},clickAutosave:function(t){this.controller.setAutoSave(t.target.checked)},changeLib:function(t){this.controller.changeLib(t.target.value)},clickBackward:function(){this.controller.backward()}}),QoobViewportView=Backbone.View.extend({id:"qoob-viewport",deviceMode:"pc",previewMode:!1,blocksCounter:0,blockViews:[],viewportTapTriggered:!1,initialize:function(t){this.controller=t.controller,this.storage=t.storage,this.model.on("block_moveup",this.moveUpBlockView.bind(this)),this.model.on("block_movedown",this.moveDownBlockView.bind(this))},render:function(){var t=this,e=this.storage.driver.getIframePageUrl();this.$el.html(_.template(this.storage.getSkinTemplate("qoob-viewport-preview"))({url:e,text_droppable_zone:this.storage.__("text_droppable_zone","Drop here to create a new block")})),this.$el.find("#qoob-iframe").on("libraries_loaded",this.iframeLoaded.bind(this));var i=new Hammer.Manager(this.$el[0]);return i.add(new Hammer.Tap({event:"singletap",inputClass:Hammer.SUPPORT_POINTER_EVENTS?Hammer.PointerEventInput:Hammer.TouchInput})),i.on("singletap",function(){t.controller.layout.$el.hasClass("close-panel")||(t.viewportTapTriggered=!0,t.controller.layout.hideSwipeMenu())}),this},iframeLoaded:function(){this.trigger("iframe_loaded"),this.triggerIframe(),this.defaultDroppable(),this.initSwipe()},initSwipe:function(){var t=this;new Hammer.Manager(this.getWindowIframe().document.documentElement,{touchAction:"auto",inputClass:Hammer.SUPPORT_POINTER_EVENTS?Hammer.PointerEventInput:Hammer.TouchInput,recognizers:[[Hammer.Swipe,{direction:Hammer.DIRECTION_HORIZONTAL}]]}).on("swipeleft swiperight",function(e){"swipeleft"===e.type?t.controller.layout.hideSwipeMenu():"swiperight"===e.type&&t.controller.layout.showSwipeMenu()})},defaultDroppable:function(){var t=this;this.$el.find("#droppable-default").droppable({tolerance:"pointer",drop:function(e,i){var n=i.draggable.attr("id").replace("preview-block-",""),o=i.draggable.data("lib");t.controller.addNewBlock(o,n)}})},startEditBlock:function(t){var e=this.getWindowIframe();e.jQuery(".qoob-overlay").removeClass("active").addClass("no-active"),e.jQuery("#outer-block-"+t).find(".qoob-overlay").removeClass("no-active").addClass("active")},stopEditBlock:function(){this.getWindowIframe().jQuery(".qoob-overlay").removeClass("active").removeClass("no-active")},setPreviewMode:function(){this.previewMode=!0,this.getIframeContents().find("#qoob-blocks").addClass("preview")},setEditMode:function(){var t=this;this.previewMode=!1,this.controller.layout.editModeButton.$el.on("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(e){e.target==this&&(t.controller.layout.resize(),t.getIframeContents().find("#qoob-blocks").removeClass("preview"),t.controller.layout.editModeButton.$el.off("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"))})},setDeviceMode:function(t){var e=this;this.deviceMode=t;this.getIframe().stop().animate({pc:{width:"100%"},tablet:{width:"768px"},phone:{width:"375px"}}[t],500,function(){var t=e.controller.current();"startEditBlock"==t.route&&e.controller.layout.scrollTo(t.params[0])})},resize:function(){var t=this.previewMode?0:parseInt(jQuery("#qoob-sidebar").css("width"),10);this.$el.css("width",jQuery(window).width()-t),this.getIframe().height(jQuery(window).height()),"pc"==this.deviceMode&&this.getIframe().width("100%")},scrollTo:function(t,e){var i=null,n=this.getWindowIframe();if("top"===e)i=0;else if("bottom"===e)i=n.jQuery("#qoob-blocks").outerHeight()-n.jQuery("#qoob-blocks .content-block-outer").last().outerHeight();else if(this.getBlockView(t)){var o=this.getBlockView(t).$el,r=this.getIframe().height();i=device.ios()||device.mobile()?o.offset().top:Math.round(o.offset().top-(r-o.outerHeight(!0))/2)}null!==i&&(device.ios()?jQuery("html, body").animate({scrollTop:i},800):this.getWindowIframe().jQuery("html, body").animate({scrollTop:i},800))},getBlockView:function(t){for(var e=0;e<this.blockViews.length;e++)if(this.blockViews[e].model.id==t)return this.blockViews[e]},delBlockView:function(t){for(var e=0;e<this.blockViews.length;e++)this.blockViews[e].model.id==t.id&&(this.blockViews[e].dispose(),this.blockViews.splice(e,1));0==this.blockViews.length&&this.controller.changeDefaultPage("show")},addBlock:function(t,e){var i=this,n=this.getWindowIframe(),o=new QoobBlockWrapperView({model:t,storage:this.storage,controller:this.controller});o.setElement(i.controller.layout.viewPort.getWindowIframe().jQuery('<div id="outer-block-'+t.id+'">')),this.blockViews.push(o),this.blocksCounter++,o.once("loaded",function(){i.trigger("block_loaded"),i.blocksCounter--,0===i.blocksCounter&&i.trigger("blocks_loaded")}),e>0?n.jQuery("#outer-block-"+e).before(o.render().el):n.jQuery("#qoob-blocks").append(o.render().el),this.blockViews.length>0&&1==this.blockViews.length&&this.controller.changeDefaultPage("hide"),this.$el.find("#qoob-iframe").next("div").length>0&&this.$el.find("#qoob-iframe").nextAll("div").remove(),this.controller.removeEmptyDraggableElement(),this.triggerIframe()},removeEmptyDraggableElement:function(){this.getIframe().next("div").length>0&&this.getIframe().nextAll("div").remove()},triggerIframe:function(){var t=this.getWindowIframe();t.jQuery("#qoob-blocks").trigger("change"),t.jQuery('a, .btn, input[type="submit"]').attr("onclick","return false;")},getIframe:function(){return this.$el.find("#qoob-iframe")},getIframeContents:function(){return this.getIframe().contents()},getWindowIframe:function(){return window.frames["qoob-iframe"]},moveUpBlockView:function(t){var e=this.getBlockView(t);e.$el.after(e.$el.prev()),this.scrollTo(t)},moveDownBlockView:function(t){var e=this.getBlockView(t);e.$el.before(e.$el.next()),this.scrollTo(t)},createBlankPage:function(){var t=this.getWindowIframe(),e=new QoobPageTemplatesView({storage:this.storage,controller:this.controller});t.jQuery("#qoob-blocks").append(e.render().el),this.storage.loadPageTemplates(function(t,i){i&&i.length>0&&e.render()})},changeDefaultPage:function(t){var e=this.getWindowIframe().jQuery("#qoob-blocks");"hide"===t?(e.find(".qoob-templates").hide(),this.$el.find("#droppable-default").hide()):"show"===t&&(e.find(".qoob-templates").show(),this.$el.find("#droppable-default").show())},getIframeUrl:function(t){return void 0===t||/^((http|https):\/\/)/.test(t)||"function"!=typeof this.storage.driver.getFrontendPageUrl?t:this.storage.driver.getFrontendPageUrl()+t}}),QoobMenuBlocksPreviewView=Backbone.View.extend({className:"preview-block-wrap",events:{"click .preview-block":"clickPreviewBlock"},attributes:function(){return{"data-side-id":this.id}},clickPreviewBlock:function(t){var e=t.currentTarget.id.replace("preview-block-",""),i=this.$(t.currentTarget).data("lib");this.controller.addNewBlock(i,e),device.ios()||this.controller.navigate("",{trigger:!0});var n=this.controller.layout.getDeviceState();"mobile"!==n&&"tablet"!==n||this.controller.layout.hideSwipeMenu()},initialize:function(t){this.controller=t.controller,this.storage=t.storage,this.group=t.group},render:function(){var t={group:this.group,items:this.storage.getBlocksByGroup(this.group.id)};return this.$el.html(_.template(this.storage.getSkinTemplate("menu-blocks-preview"))(t)),this}}),QoobMenuGroupsView=Backbone.View.extend({name:"catalog-groups",className:"catalog-groups",attributes:function(){return{"data-side-id":"catalog-groups"}},events:{"click .group-list__link-active":"clickLinkGroupActive"},initialize:function(t){this.storage=t.storage,this.groups=t.groups,this.controller=t.controller,this.side=this},clickLinkGroupActive:function(t){t.preventDefault(),jQuery(t.currentTarget).removeClass("group-list__link-active"),this.controller.navigate("",{trigger:!0,replace:!0})},render:function(){return this.$el.html(_.template(this.storage.getSkinTemplate("menu-groups-preview"))({groups_arr:this.groups})),this}}),QoobMenuSavePageTemplateView=Backbone.View.extend({id:"save-template",events:{"click .create-template":"clickCreateTemplate","keyup .input-text":"changeInput"},settingsModel:null,config:[{name:"title",label:"Title",type:"text",placeholder:"Enter name template"}],defaults:{title:"",image:""},attributes:function(){return{"data-side-id":"save-template",class:"save-template settings"}},initialize:function(t){this.controller=t.controller,this.storage=t.storage,this.name=t.name,this.side=this},changeInput:function(t){var e=jQuery(t.currentTarget).parent(".field-text");e.hasClass("error")&&jQuery(t.currentTarget).val().length>0&&(e.removeClass("error"),this.$el.find(".error-block").hide(),this.$el.find(".save-template-settings .button-save-template").show())},clickCreateTemplate:function(t){t.preventDefault();var e=this,i=this.$(t.currentTarget),n=_.sortBy(this.storage.pageTemplatesCollection.models,function(t){return t.id}),o={id:n.length?n[n.length-1].id+1:1,title:this.settingsModel.get("title"),image:null};i.addClass("active"),this.controller.layout.viewPort.getIframeContents().scrollTop(0),html2canvas(this.controller.layout.viewPort.getIframeContents().find("body"),{scale:2}).then(function(t){var n=document.createElement("canvas");n.setAttribute("width",264),n.setAttribute("height",431);n.getContext("2d").drawImage(t,0,0,t.width,t.height,0,0,264,431);var r=n.toDataURL();o.image=r,e.controller.createPageTemplate(o,function(t){i.removeClass("active"),null===t?(e.$el.find(".save-template-settings").addClass("show-notice"),e.$el.find(".save-template-settings .error-block").hide(),e.settingsModel.set("image",""),e.settingsModel.set("title",""),e.$el.find(".field-text").removeClass("error").hide(),e.$el.find(".save-template-settings .button-save-template").hide()):(t.title&&(e.$el.find(".field-text").addClass("error"),e.$el.find(".save-template-settings .error-block-empty-title").show(),e.$el.find(".save-template-settings .button-save-template").hide()),t.blocks&&(e.$el.find(".save-template-settings .button-save-template").hide(),e.$el.find(".save-template-settings .error-block-empty-page").show()))})})},render:function(){var t=QoobUtils.createModel(this.config),e={save_template:this.storage.__("save_template","Save template"),save_loading:this.storage.__("save_process","Save..."),save_notice_title:this.storage.__("save_notice_title","Your template has been saved successfully!"),you_cant_save_empty_template:this.storage.__("you_cant_save_empty_template","You can't save empty template"),you_cant_save_empty_title:this.storage.__("you_cant_save_empty_title","The name of the template must be at least 1 character")};return this.settingsView=new QoobFieldsView({model:t,settings:this.config,defaults:this.defaults,storage:this.storage,controller:this.controller,parentId:this.id}),this.settingsModel=this.settingsView.model,this.$el.html(_.template(this.storage.getSkinTemplate("menu-more-preview"))(e)).find(".settings-blocks-full").prepend(this.settingsView.getHtml()),this}}),QoobMenuSettingsView=QoobFieldsView.extend({tagName:"div",className:"settings",config:null,events:{"click .delete-block":"clickDelete","click .movedown":"clickMoveDown","click .moveup":"clickMoveUp"},attributes:function(){return{"data-side-id":this.model.id,id:"settings-block-"+this.model.id}},render:function(){var t=QoobFieldsView.prototype.getHtml.apply(this,arguments);return this.$el.html(_.template(this.storage.getSkinTemplate("menu-settings-preview"))({config:this.config,back:this.storage.__("back","Back"),move:this.storage.__("move","Move")})).find(".settings-blocks").html(t),this},clickDelete:function(){if(!confirm(this.storage.__("confirm_delete_block","Are you sure you want to delete the block?")))return!1;this.controller.deleteBlock(this.model),this.controller.layout.$el.hasClass("mobile")&&this.controller.hideSwipeMenu()},clickMoveDown:function(){this.controller.moveDownBlock(this.model)},clickMoveUp:function(){this.controller.moveUpBlock(this.model)},dispose:function(){this.$el.remove(),this.off(),this.model.off(null,null,this)}}),QoobImportExportView=Backbone.View.extend({id:"qoob-import-export",events:{"click .save-changes":"clickSaveChanges","click .close":"clickClose",click:"clickOverlay"},initialize:function(t){this.controller=t.controller,this.storage=t.storage},clickClose:function(){this.$el.removeClass("show")},clickOverlay:function(t){jQuery(t.target).prop("id")==this.id&&this.$el.removeClass("show")},clickSaveChanges:function(t){t.preventDefault();var e;this.controller.pageModel.get("blocks").models.length>0&&this.controller.removePageData(),e=0==this.$el.find(".qoob-import-export-textarea").val().length?{blocks:[]}:JSON.parse(this.$el.find(".qoob-import-export-textarea").val()),this.controller.load(e.blocks)},showImportExportWindow:function(){var t=this;this.render(),this.$el.addClass("show"),this.controller.layout.viewPort.once("blocks_loaded",function(){t.$el.removeClass("show")})},render:function(){var t=JSON.parse(JSON.stringify(this.controller.pageModel.toJSON()));return t.version=window.QoobVersion,this.$el.html(_.template(this.storage.getSkinTemplate("block-import-export-preview"))({page_data_text:this.storage.__("page_data","Page data"),cancel:this.storage.__("cancel","Cancel"),Close:this.storage.__("Close","Close"),save_changes:this.storage.__("save_changes","Save changes"),page_data:JSON.stringify(t)})),this}}),QoobPageTemplatesView=Backbone.View.extend({tagName:"div",className:"qoob-templates",events:{"click .template .image-bg, .template .title":"clickChoiceTemplateBlock","click .remove":"clickRemoveTemplateBlock"},initialize:function(t){this.storage=t.storage,this.controller=t.controller,this.listenTo(this.storage.pageTemplatesCollection,"add remove",this.render)},clickChoiceTemplateBlock:function(t){var e=this,i=jQuery(t.currentTarget).parents("[data-id]").data("id");this.storage.pageTemplatesCollection.each(function(t){parseInt(t.id)===i&&e.controller.load(t.get("blocks"))})},clickRemoveTemplateBlock:function(t){t.preventDefault();var e=jQuery(t.currentTarget).data("id");this.controller.removeTemplateBlock(e)},render:function(){return this.$el.html(_.template(this.storage.getSkinTemplate("block-default-templates"))({templates:this.storage.pageTemplatesCollection.toJSON(),block_default_templates_text:this.storage.__("block_default_templates_text","Choose one from amazing templates"),text_default_blank:this.storage.__("block_default_blank","Pick a block to add to the page"),template:this.storage.__("template","Template")})),this}});(Fields=Fields||{}).accordion=QoobFieldView.extend({className:"field-accordion field-group",uniqueId:null,accordionMenuViews:[],events:{"drop .accordion":"changePosition"},initialize:function(t){QoobFieldView.prototype.initialize.call(this,t),this.tpl=_.template(this.storage.getSkinTemplate("field-accordion-preview"))},remove:function(){this.$el.find("#"+this.uniqueId).parent().find(".add-item").off("click",this.addNewItem),Backbone.View.prototype.remove.apply(this,arguments)},removeItem:function(){this.getValue().trigger("change"),this.changePosition()},changePosition:function(){var t=this,e=this.getValue();this.$el.find("#"+this.getUniqueId()).children(".field-accordion-item").each(function(i,n){var o=t.$(n).data("model-id"),r=e.get(o);r&&r.set("order",t.$(n).index()-1)})},getUniqueId:function(){return this.uniqueId=this.uniqueId||_.uniqueId("accordion-")},addNewItem:function(t){t.preventDefault();for(var e,i=this.getValue(),n=this.settings.settings,o=this.defaults[0],r=[],s=[],a=0;a<n.length;a++)r.push({name:n[a].name,default:o[n[a].name]});for(var l=0;l<r.length;l++)s[r[l].name]=r[l].default;(e=QoobUtils.createModel(s)).owner_id=this.model.id,i.add(e),i.listenTo(e,"change",function(){this.trigger("change",this)}),e.on("remove_item",this.removeItem.bind(this));var c=new FieldAccordionItem({name:this.name+"_"+e.id,model:e,settings:n,defaults:o,storage:this.storage,controller:this.controller,parent:this,side:this.side});c.model.set("order",i.models?i.models.length-1:0),this.accordionMenuViews.push(c),this.$el.find("#"+this.getUniqueId()).append(c.render().el),this.$el.find("#"+this.getUniqueId()).accordion("refresh"),i.trigger("change")},render:function(){var t=this.getValue(),e=[];if(t.models=_.sortBy(t.models,function(t){return t.get("order")}),t.length&&t.length>0)for(var i=0;i<t.models.length;i++){var n=new FieldAccordionItem({name:this.name+"_"+t.models[i].id,model:t.models[i],settings:this.settings.settings,defaults:this.defaults[i]||this.defaults[0],storage:this.storage,controller:this.controller,parent:this,side:this.side});this.accordionMenuViews.push(n),e.push(n.render().el),t.models[i].on("remove_item",this.removeItem.bind(this))}var o={label:this.settings.label,uniqueId:this.getUniqueId(),settings:this.settings.settings,add_new_tab:this.storage.__("add_new_tab","Add a new item"),Delete:this.storage.__("delete","Delete")};return(void 0===this.settings.show||this.settings.show(this.model))&&(this.$el.html(this.tpl(o)).find("#"+this.getUniqueId()).append(e),this.sortableInit()),this.$el.find("#"+this.uniqueId).parent().find(".add-item").on("click",this.addNewItem.bind(this)),this},sortableInit:function(){var t=this,e=this.getUniqueId();this.$el.find("#"+e).accordion({header:"> div > h3.inner-settings-expand",icons:!1,animate:500,collapsible:!0,active:!1,heightStyle:"content"}).sortable({items:".field-accordion-item",revert:!1,axis:"y",helper:"clone",handle:".draggable",connectWith:"#drop-"+e,scope:"accordion",start:function(){t.controller.layout.viewPort.getIframeContents().find(".droppable").css("visibility","hidden"),jQuery(this).addClass("is-droppable")},stop:function(e,i){jQuery(this).removeClass("is-droppable"),i.item.trigger("drop",i.item.index()),i.item.children("h3").triggerHandler("focusout"),t.$(this).accordion("refresh"),t.controller.layout.viewPort.getIframeContents().find(".droppable").removeAttr("style")}}),this.$el.find("#drop-"+e).droppable({scope:"accordion",hoverClass:"ui-state-hover",drop:function(e,i){var n=i.draggable.data("model-id");t.getAccordionMenuViews(n).deleteModel()}})},getAccordionMenuViews:function(t){for(var e=0;e<this.accordionMenuViews.length;e++)if(this.accordionMenuViews[e].model&&this.accordionMenuViews[e].model.id==t)return this.accordionMenuViews[e]}});var FieldAccordionItem=Backbone.View.extend({className:"field-accordion-item",events:{click:"showSettings"},attributes:function(){return{"data-model-id":this.model.id}},initialize:function(t){var e=this;this.name=t.name,this.model=t.model,this.storage=t.storage,this.settings=t.settings,this.defaults=t.defaults,this.controller=t.controller,this.parent=t.parent,this.side=t.side,this.listenTo(this.model,"change",function(){var t=e.controller.layout.viewPort.getIframeUrl(this.model.get("image"));this.$el.find(".title-item").first().html(this.model.get("title")),""!=this.model.get("image")?(this.$el.find(".preview-image").is(":visible")||this.$el.find(".preview-image").show(),this.$el.find(".preview-image img").first().prop("src",t)):this.$el.find(".preview-image").hide()})},showSettings:function(t){var e=this.model.id,i=this.controller.currentUrl(),n=i.split("/"),o=n[n.length-1].split("-"),r=_.findWhere(this.parent.parent.settings,{name:o[0]});return o.length>0&&(o[0]==this.parent.settings.name||r&&"accordion"==r.type)&&(i=n.slice(0,-1).join("/")),this.controller.navigate(i+(jQuery(t.currentTarget).find(".inner-settings-expand").hasClass("ui-state-active")?"/"+this.parent.settings.name+"-"+e:""),{trigger:!1,replace:!0}),jQuery(t.currentTarget).find(".inner-settings-expand").hasClass("ui-state-active")&&(this.controller.layout.menu.currentView=this.settingsView),!0},render:function(){var t={image:this.controller.layout.viewPort.getIframeUrl(this.model.get("image")),title:this.model.get("title")},e=_.template(this.storage.getSkinTemplate("field-accordion-item-expand-preview"))(t);return this.$el.html(e),this.settingsView=new FieldAccordionItemSettings({name:this.name,model:this.model,settings:this.settings,storage:this.storage,defaults:this.defaults,controller:this.controller,parent:this.parent,side:this.side}),this.$el.find(".settings-blocks").html(this.settingsView.render().el),this},deleteModel:function(){this.model.stopListening(),this.model.trigger("destroy",this.model,this.model.collection),this.remove(),this.model.trigger("remove_item")}}),FieldAccordionItemSettings=QoobFieldsView.extend({className:"field-accordion-settings",initialize:function(t){QoobFieldsView.prototype.initialize.call(this,t)},render:function(){return this.$el.html(QoobFieldsView.prototype.getHtml.apply(this,arguments)),this}});(Fields=Fields||{}).accordion_flip=QoobFieldView.extend({className:"field-accordion field-group",uniqueId:null,classNameItem:"",accordionMenuViews:[],events:{"drop .accordion":"changePosition"},initialize:function(t){QoobFieldView.prototype.initialize.call(this,t),this.tpl=_.template(this.storage.getSkinTemplate("field-accordion-preview"))},remove:function(){this.$el.find("#"+this.uniqueId).parent().find(".add-item").off("click",this.addNewItem),Backbone.View.prototype.remove.apply(this,arguments)},removeItem:function(){this.getValue().trigger("change"),this.changePosition()},changePosition:function(){var t=this,e=this.getValue();this.$el.find("#"+this.getUniqueId()).children(".field-accordion-item").each(function(i,n){var o=t.$(n).data("model-id"),r=e.get(o);r&&r.set("order",t.$(n).index()-1)})},getUniqueId:function(){return this.uniqueId=this.uniqueId||_.uniqueId("accordion-")},addNewItem:function(t){t.preventDefault();for(var e,i=this.getValue(),n=this.settings.settings,o=this.defaults[0],r=[],s=[],a=0;a<n.length;a++)r.push({name:n[a].name,default:o[n[a].name]});for(var l=0;l<r.length;l++)s[r[l].name]=r[l].default;(e=QoobUtils.createModel(s)).owner_id=this.model.id,i.add(e),i.listenTo(e,"change",function(){this.trigger("change",this)}),e.on("remove_item",this.removeItem.bind(this));var c=new FieldAccordionFlipItem({name:this.name+"_"+e.id,model:e,settings:n,defaults:o,storage:this.storage,controller:this.controller,parent:this,side:this.side});c.model.set("order",i.models?i.models.length-1:0),this.accordionMenuViews.push(c),this.$el.find("#"+this.getUniqueId()).append(c.render().el),this.$el.find("#"+this.getUniqueId()).accordion("refresh"),i.trigger("change")},render:function(){var t=this.getValue(),e=[];if(t.models=_.sortBy(t.models,function(t){return t.get("order")}),t.length&&t.length>0)for(var i=0;i<t.models.length;i++){var n=new FieldAccordionFlipItem({name:this.name+"_"+t.models[i].id,model:t.models[i],settings:this.settings.settings,defaults:this.defaults[i]||this.defaults[0],storage:this.storage,controller:this.controller,parent:this,side:this.side});this.accordionMenuViews.push(n),e.push(n.render().el),t.models[i].on("remove_item",this.removeItem.bind(this))}var o={label:this.settings.label,uniqueId:this.getUniqueId(),settings:this.settings.settings,add_new_tab:this.storage.__("add_new_tab","Add a new item"),Delete:this.storage.__("delete","Delete")};return(void 0===this.settings.show||this.settings.show(this.model))&&(this.$el.html(this.tpl(o)).find("#"+this.getUniqueId()).append(e),this.sortableInit()),this.$el.find("#"+this.uniqueId).parent().find(".add-item").on("click",this.addNewItem.bind(this)),this},sortableInit:function(){var t=this,e=this.getUniqueId();this.$el.find("#"+e).accordion({header:"> div > h3.inner-settings-flip",animate:500,collapsible:!0,active:!1,heightStyle:"content"}).sortable({items:".field-accordion-flip-item",revert:!1,axis:"y",helper:"clone",handle:".draggable",connectWith:"#drop-"+e,scope:"accordion",start:function(){t.controller.layout.viewPort.getIframeContents().find(".droppable").css("visibility","hidden"),jQuery(this).addClass("is-droppable")},stop:function(e,i){jQuery(this).removeClass("is-droppable"),i.item.trigger("drop",i.item.index()),i.item.children("h3").triggerHandler("focusout"),t.$(this).accordion("refresh"),t.controller.layout.viewPort.getIframeContents().find(".droppable").removeAttr("style")}}),this.$el.find("#drop-"+e).droppable({scope:"accordion",hoverClass:"ui-state-hover",drop:function(e,i){var n=i.draggable.data("model-id");t.getAccordionMenuViews(n).deleteModel()}})},getAccordionMenuViews:function(t){for(var e=0;e<this.accordionMenuViews.length;e++)if(this.accordionMenuViews[e].model&&this.accordionMenuViews[e].model.id==t)return this.accordionMenuViews[e]}});var FieldAccordionFlipItem=Backbone.View.extend({className:"field-accordion-item field-accordion-flip-item",events:{click:"showSettings"},attributes:function(){return{"data-model-id":this.model.id}},initialize:function(t){var e=this;this.name=t.name,this.model=t.model,this.storage=t.storage,this.settings=t.settings,this.defaults=t.defaults,this.controller=t.controller,this.parent=t.parent,this.side=t.side,this.model.on("delete_model",this.deleteModel.bind(this)),this.listenTo(this.model,"change",function(){var t=e.controller.layout.viewPort.getIframeUrl(this.model.get("image"));this.$el.find(".title-item").first().html(this.model.get("title")),""!=this.model.get("image")?(this.$el.find(".preview-image").is(":visible")&&this.$el.find(".preview-image").show(),this.$el.find(".preview-image img").first().prop("src",t)):this.$el.find(".preview-image").hide()})},showSettings:function(){var t=this.model.id;this.controller.navigate(this.controller.currentUrl()+"/"+this.parent.settings.name+"-"+t,!0)},render:function(){var t={image:this.controller.layout.viewPort.getIframeUrl(this.model.get("image")),title:this.model.get("title")},e=_.template(this.storage.getSkinTemplate("field-accordion-item-flip-preview"))(t);return this.$el.html(e),this},deleteModel:function(){this.model.stopListening(),this.model.trigger("destroy",this.model,this.model.collection),this.remove(),this.model.trigger("remove_item")}}),AccordionFlipItemSettingsView=QoobFieldsView.extend({className:"settings menu-block accordion-item",attributes:function(){return{id:"settings-block-"+this.model.id,"data-side-id":this.model.id}},events:{"click .delete-item-accordion":"deleteInnerSettings"},initialize:function(t){QoobFieldsView.prototype.initialize.call(this,t)},render:function(){return this.$el.html(_.template(this.storage.getSkinTemplate("field-accordion-item-flip-view-preview"))()),this.$el.find(".settings-blocks").html(QoobFieldsView.prototype.getHtml.apply(this,arguments)),this},deleteInnerSettings:function(){this.model.trigger("delete_model",this)},dispose:function(){this.$el.remove(),this.off(),this.model.off(null,null,this)}});(Fields=Fields||{}).checkbox_switch=QoobFieldView.extend({className:"field-checkbox-switch field-group",events:{"change input":"changeSwitch"},changeSwitch:function(t){var e=jQuery(t.target);this.model.set(e.attr("name"),0==e[0].checked?0:1)},getBool:function(t){if(void 0==t)return!1;var e=+t;return isNaN(e)?!!String(t).toLowerCase().replace(!1,""):!!e},checked:function(){return this.model.get(this.settings.name)?this.getBool(this.model.get(this.settings.name)):this.getBool(this.settings.default)},getUniqueId:function(){return this.uniqueId=this.uniqueId||_.uniqueId("checkbox-switch-")},render:function(){var t={label:this.settings.label,name:this.settings.name,uniqueId:this.getUniqueId(),checked:this.checked()?"checked":""};return this.$el.html(_.template(this.storage.getSkinTemplate("field-checkbox-switch-preview"))(t)),this}});(Fields=Fields||{}).checkbox=QoobFieldView.extend({className:"field-checkbox field-group",events:{"change input":"changeInput"},changeInput:function(t){var e=jQuery(t.target);this.model.set(e.attr("name"),0==e[0].checked?0:1)},getBool:function(t){if(void 0==t)return!1;var e=+t;return isNaN(e)?!!String(t).toLowerCase().replace(!1,""):!!e},checked:function(){return this.model.get(this.settings.name)?this.getBool(this.model.get(this.settings.name)):this.getBool(this.settings.default)},render:function(){var t={label:this.settings.label,name:this.settings.name,checked:this.checked()?"checked":""};return this.$el.html(_.template(this.storage.getSkinTemplate("field-checkbox-preview"))(t)),this}});(Fields=Fields||{}).colorpicker=QoobFieldView.extend({className:"field-color-picker field-group",events:{"click .theme-colors":"changeColor","keyup input":"changeInput"},changeColor:function(t){var e=jQuery(t.currentTarget),i=e.closest(".field-color-picker").find(".colorpicker-input"),n=e.data("color");i.val(n),i.css("color",this.inputColor(n)),i.css({backgroundColor:n}),this.model.set(i.prop("name"),n)},hexToRgb:function(t){var e=parseInt(t.replace(/#/,""),16);return"rgb("+(e>>16&255)+","+(e>>8&255)+","+(255&e)+")"},inputColor:function(t){var e=this.hexToRgb(t).match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/),i=e[1],n=e[2],o=e[3];return"rgb("+Math.floor(1*(255-i))+","+Math.floor(1*(255-n))+","+Math.floor(1*(255-o))+")"},changeInput:function(t){var e=jQuery(t.target),i=e.val();7===i.length&&(jQuery(t.target).css("color",this.inputColor(i)),jQuery(t.target).css({backgroundColor:e.val()})),this.model.set(e.attr("name"),e.val())},render:function(){if(void 0!==this.getValue())var t=this.inputColor(this.getValue());var e={label:this.settings.label,name:this.settings.name,value:this.getValue(),arr_colors:jQuery.inArray(this.getValue(),this.settings.colors),colors:this.settings.colors,inputColor:t};return this.$el.html(_.template(this.storage.getSkinTemplate("field-colorpicker-preview"))(e)),this}});(Fields=Fields||{}).icon=QoobFieldView.extend({className:"field-icon field-group",events:{"click .show-media-center":"clickMediaCenter","click .field-icon__remove-icon":"clickRemoveIcon","click .reset":"clickResetIconToDefault","click .other-icon":"clickOtherIcon"},initialize:function(t){QoobFieldView.prototype.initialize.call(this,t),this.options=t;var e=this.storage.getAssets();this.icons=[];for(var i=0;i<e.length;i++)for(var n=0,o=e[i].length;n<o;n++)"icon"===e[i][n].type&&this.icons.push({classes:e[i][n].classes,tags:e[i][n].tags});this.tpl=_.template(this.storage.getSkinTemplate("field-icon-preview"))},clickRemoveIcon:function(t){t.stopImmediatePropagation(),this.changeIcon("")},clickResetIconToDefault:function(t){t.preventDefault(),this.changeIcon(this.options.defaults)},changeIcon:function(t){var e=this.findByClasses(t);this.$el.find(".field-icon__preview-icon span").attr({class:t,"data-icon-tags":e?e.tags:""}),void 0===e?this.$el.find(".field-icon-container").addClass("empty"):this.$el.find(".field-icon-container").removeClass("empty"),this.$el.find('input[type="hidden"]').val(t),this.model.set(this.$el.find('input[type="hidden"]').attr("name"),t)},clickOtherIcon:function(t){var e=this.$(t.currentTarget).find("span").prop("class");this.changeIcon(e)},clickMediaCenter:function(){return this.controller.navigate(this.controller.currentUrl()+"/"+this.settings.name,!0),!1},render:function(){var t={label:this.settings.label,name:this.settings.name,icons:_.map(this.settings.presets,function(t){return this.findByClasses(t)}.bind(this)),icon:this.findByClasses(this.getValue())||this.getValue(),hideDeleteButton:this.settings.hideDeleteButton,icon_center:this.storage.__("icon_center","Icon center"),reset_to_default:this.storage.__("reset_to_default","Reset to default")};return(void 0===this.settings.show||this.settings.show(this.model))&&this.$el.html(this.tpl(t)),this},findByClasses:function(t){return _.findWhere(this.icons,{classes:t})}});(Fields=Fields||{}).image=QoobFieldView.extend({className:"field-image field-group",customItems:null,counterDropZone:0,events:{"click .show-media-center":"clickMediaCenter","click .field-image__remove-image":"clickRemoveImage","click .others-item__image":"clickOtherImage","drop .field-drop-zone":"dropImage","dragenter .field-drop-zone":"dragOnDropZone","dragleave .field-drop-zone":"dragLeaveDropZone",global_drag_start:"globalDragStart","click [data-id]":"clickAction"},initialize:function(t){QoobFieldView.prototype.initialize.call(this,t),this.options=t,this.tags=t.settings.tags||null,this.tpl=_.template(this.storage.getSkinTemplate("field-image-preview"))},clickAction:function(t){t.preventDefault();var e=jQuery(t.currentTarget).data("id");if("function"==typeof this.storage.driver.fieldImageActions){var i=this.customItems.find(function(t){return t.id===e});i.action&&i.action(this)}},changeImage:function(t){this.$el.find(".field-image-container").removeClass("empty"),t||this.$el.find(".field-image-container").addClass("empty"),this.$el.find(".field-image__preview-image").attr("src",t),this.model.set(this.$el.find(".field-image__url-hidden").attr("name"),t),this.$el.find(".field-image__url-hidden").val(t)},clickOtherImage:function(t){var e=this.$(t.currentTarget).css("background-image").replace("url(","").replace(")","").replace(/\"/gi,"");this.changeImage(e)},clickRemoveImage:function(){this.$el.find(".field-image-container").addClass("empty"),this.changeImage("")},dropImage:function(t){var e=this,i=this.$el.find(".field-image-container"),n=t.originalEvent.dataTransfer.files;n[0].size>2097152?i.addClass("upload-error"):n[0].name.match(/.(jpg|jpeg|png|gif)$/i)?this.storage.driver.uploadImage(n,function(t,n){""!==n&&(e.changeImage(n),(i.hasClass("empty")||i.hasClass("upload-error"))&&i.removeClass("empty upload-error"))}):console.error("file format is not appropriate"),this.counterDropZone=0},globalDragStart:function(){var t=this.$el.find(".field-upload-error");t.hasClass("field-upload-error-active")&&t.removeClass("field-upload-error-active")},dragOnDropZone:function(){this.counterDropZone++,this.$el.find(".field-drop-zone").addClass("hover")},dragLeaveDropZone:function(){this.counterDropZone--,0===this.counterDropZone&&this.$el.find(".field-drop-zone").removeClass("hover")},clickMediaCenter:function(){return this.controller.navigate(this.controller.currentUrl()+"/"+this.settings.name,!0),!1},render:function(){var t=[];if(this.settings.presets)for(var e=0;e<this.settings.presets.length;e++)t.push(this.controller.layout.viewPort.getIframeUrl(this.settings.presets[e]));var i={hideDeleteButton:this.settings.hideDeleteButton,label:this.settings.label,name:this.settings.name,images:t,value:this.controller.layout.viewPort.getIframeUrl(this.getValue()),media_center:this.storage.__("media_center","Media center"),drop_here:this.storage.__("drop_here","Drop here"),error:this.storage.__("error","Error!"),error_text:this.storage.__("error_text","Image size can not exceed 2 mb")};if("function"==typeof this.storage.driver.mainMenu){i.customItems=this.customItems=this.storage.driver.fieldImageActions([])}return(void 0===this.settings.show||this.settings.show(this.model))&&this.$el.html(this.tpl(i)),this}});(Fields=Fields||{}).select=QoobFieldView.extend({className:"field-select",events:{"change select":"changeSelect","change input":"changeInput","click .theme-colors":"changeColor"},changeInput:function(t){var e=jQuery(t.target);this.model.set(e.attr("name"),e.parent().find(".active").attr("id"))},changeSelect:function(t){var e=jQuery(t.target);this.model.set(e.attr("name"),e.val())},changeColor:function(t){var e=jQuery(t.currentTarget);this.$el.find(".other-color").removeClass("active"),e.addClass("active"),this.$el.find("input").trigger("change")},render:function(){var t={label:this.settings.label,name:this.settings.name,current:this.model.get(this.settings.name)||this.settings.default,options:this.settings.options,visible_color:this.settings.visible_color};return this.$el.html(_.template(this.storage.getSkinTemplate("field-select-preview"))(t)),this}});(Fields=Fields||{}).radio=QoobFieldView.extend({className:"field-radio field-group",events:{"change .radio__input":"changeInput"},changeInput:function(t){var e=jQuery(t.target);this.model.set(e.attr("name"),e.attr("id"))},render:function(){var t={label:this.settings.label,name:this.settings.name,current:this.model.get(this.settings.name)||this.settings.default,options:this.settings.options};return this.$el.html(_.template(this.storage.getSkinTemplate("field-radio-preview"))(t)),this}});(Fields=Fields||{}).slider=QoobFieldView.extend({className:"field-slider field-group",events:{"change input":"changeInput"},changeInput:function(t){var e=jQuery(t.target);this.model.set(e.attr("name"),e.val())},render:function(){var t={sliderId:_.uniqueId("slider"),sizeId:_.uniqueId("size"),label:this.settings.label,name:this.settings.name,min:this.settings.min||0,max:this.settings.max||100,value:this.getValue()||0};return this.$el.html(_.template(this.storage.getSkinTemplate("field-slider-preview"))(t)),this}});(Fields=Fields||{}).text_autocomplete=QoobFieldView.extend({uniqueId:null,className:"field-input-autocomplete field-group",events:{"keyup input":"changeInput"},changeInput:function(t){var e=jQuery(t.target);this.model.set(e.attr("name"),e.val())},getUniqueId:function(){return this.uniqueId=this.uniqueId||_.uniqueId("text-")},render:function(){var t={label:this.settings.label,name:this.settings.name,value:this.getValue(),placeholder:this.settings.placeholder,uniqueId:this.getUniqueId()};return this.$el.html(_.template(this.storage.getSkinTemplate("field-text-autocomplete-preview"))(t)),this}});(Fields=Fields||{}).text=QoobFieldView.extend({className:"field-text field-group",events:{"keyup input":"changeInput"},changeInput:function(t){var e=jQuery(t.target);this.model.set(e.attr("name"),e.val())},render:function(){var t={label:this.settings.label,name:this.settings.name,value:this.getValue(),placeholder:this.settings.placeholder};return this.$el.html(_.template(this.storage.getSkinTemplate("field-text-preview"))(t)),this}});(Fields=Fields||{}).textarea=QoobFieldView.extend({className:"field-textarea field-group",events:{change:"changeTextarea"},changeTextarea:function(t,e){this.model.set(this.settings.name,e.root.innerHTML)},render:function(){var t={label:this.settings.label,name:this.settings.name,value:this.getValue(),textareaId:_.uniqueId("textarea")};return this.$el.html(_.template(this.storage.getSkinTemplate("field-textarea-preview"))(t)),this}});(Fields=Fields||{}).video=QoobFieldView.extend({className:"field-video field-group",customItems:null,counterDropZone:0,events:{"click .show-media-center":"clickMediaCenter","click .field-video__remove-video":"clickRemoveVideo","click .others-item__image":"clickOtherVideo","drop .field-drop-zone":"dropVideo","dragenter .field-drop-zone":"dragOnDropZone","dragleave .field-drop-zone":"dragLeaveDropZone",global_drag_start:"globalDragStart","click [data-id]":"clickAction"},initialize:function(t){QoobFieldView.prototype.initialize.call(this,t),this.options=t,this.tags=t.settings.tags||null,this.tpl=_.template(this.storage.getSkinTemplate("field-video-preview"))},clickAction:function(t){t.preventDefault();var e=jQuery(t.currentTarget).data("id");if("function"==typeof this.storage.driver.fieldVideoActions){var i=this.customItems.find(function(t){return t.id===e});i.action&&i.action(this)}},changeVideo:function(t){this.$el.find(".field-video-container").removeClass("empty"),t||this.$el.find(".field-video-container").addClass("empty"),this.$el.find(".field-video-container").removeClass("empty-preview"),t||this.$el.find(".field-video-container").addClass("empty-preview"),""!==t?(this.$el.find(".field-video__preview-image").attr("src",t.preview),this.model.set(this.$el.find(".field-video__url-hidden").attr("name"),t),this.$el.find(".field-video__url-hidden").val(t.url),this.$el.find(".field-video__preview-hidden").val(t.preview)):(this.$el.find(".field-video__preview-image").attr("src",""),this.model.set(this.$el.find(".field-video__url-hidden").attr("name"),""),this.$el.find(".field-video__url-hidden").val(""),this.$el.find(".field-video__preview-hidden").val(""))},clickOtherVideo:function(t){var e={url:this.$(t.currentTarget).data("src-video"),preview:this.$(t.currentTarget).data("src-preview")};this.changeVideo(e)},clickRemoveVideo:function(t){t.preventDefault(),this.$el.find(".field-video-container").addClass("empty"),this.changeVideo("")},dropVideo:function(t){var e=this,i=this.$el.find(".field-video-container"),n=t.originalEvent.dataTransfer.files;n[0].size>31457280?i.addClass("upload-error"):n[0].name.match(/.(mp4|ogv|webm)$/i)?this.storage.driver.uploadVideo(n,function(t,n){""!==n&&(e.changeVideo({url:n,preview:""}),(i.hasClass("empty")||i.hasClass("upload-error"))&&i.removeClass("empty upload-error"),i.hasClass("empty-preview")||i.addClass("empty-preview"))}):console.error("file format is not appropriate"),this.counterDropZone=0},globalDragStart:function(){var t=this.$el.find(".field-upload-error");t.hasClass("field-upload-error-active")&&t.removeClass("field-upload-error-active")},dragOnDropZone:function(){this.counterDropZone++,this.$el.find(".field-drop-zone").addClass("hover")},dragLeaveDropZone:function(){this.counterDropZone--,0===this.counterDropZone&&this.$el.find(".field-drop-zone").removeClass("hover")},clickMediaCenter:function(){return this.controller.navigate(this.controller.currentUrl()+"/"+this.settings.name,!0),!1},render:function(){var t,e=/^((http|https):\/\/)/;t=_.isObject(this.getValue())?e.test(this.getValue().preview)||"function"!=typeof this.storage.driver.getFrontendPageUrl?"":this.storage.driver.getFrontendPageUrl():e.test(this.getValue())||"function"!=typeof this.storage.driver.getFrontendPageUrl?"":this.storage.driver.getFrontendPageUrl();var i={label:this.settings.label,name:this.settings.name,videos:this.settings.presets,src:this.getValue(),iframeUrl:t,hideDeleteButton:this.settings.hideDeleteButton,media_center:this.storage.__("media_center","Media center"),drop_here:this.storage.__("drop_here","Drop here"),no_poster:this.storage.__("no_poster","No poster"),error:this.storage.__("error","Error!"),error_text:this.storage.__("error_text","Video size can not exceed 30 mb")};if("function"==typeof this.storage.driver.mainMenu){i.customItems=this.customItems=this.storage.driver.fieldVideoActions([])}return(void 0===this.settings.show||this.settings.show(this.model))&&this.$el.html(this.tpl(i)),this}});var Fields;(Fields=Fields||{}).datepicker=QoobFieldView.extend({className:"field-datepicker field-group",events:{"change .field-datepicker__input":"changeInput"},changeInput:function(t){var e=jQuery(t.target);this.model.set(e.attr("name"),e.val())},getUniqueId:function(){return this.uniqueId=this.uniqueId||_.uniqueId("dt-")},render:function(){var t={label:this.settings.label,name:this.settings.name,value:this.getValue(),uniqueId:this.getUniqueId(),dateFormat:void 0!=this.settings.dateFormat?this.settings.dateFormat:"dd-MM-yyyy"};return this.$el.html(_.template(this.storage.getSkinTemplate("field-datepicker-preview"))(t)),this}});var IconCenterView=Backbone.View.extend({className:"inner-settings-icon settings inner-settings",offset:0,limit:12,events:{keydown:"keyAction","click .ajax-icon":"selectIcon","keyup .icon-search":"searchFilter",shown:"afterRender"},attributes:function(){return{id:"settings-block-media","data-side-id":"settings-block-media"}},initialize:function(t){this.name=t.name,this.storage=t.storage,this.controller=t.controller,this.icons=t.icons,this.icon=t.icon,this.tags=t.icon.tags||"",this.cb=t.cb,this.parent=t.parent,this.model=t.model,this.listenTo(this.model,"change",function(t){var e=Object.keys(t.changed)[0];this.changeIcon(t.changed[e])})},checkLoadMore:function(){var t=this.$el.find(".filtered-icons");return this.$el.find(".inview-icons").offset().top<t.offset().top+t.height()},keyAction:function(t){if(13==t.keyCode){var e=this.$el.find(".icon-search").val().split(",");return this.search(e),this.$el.find(".icon-search").autocomplete("search",""),!1}},search:function(t){this.$el.find(".filtered-icons").find(".ajax-icon").remove(),this.tags=t,this.offset=0,this.loadMore()},loadMore:function(){var t=this.$el.find(".filtered-icons"),e=this.getIcons(this.tags,this.offset);e&&(this.offset=this.offset+this.limit,t.find(".inview-icons").before(e),this.checkLoadMore()&&this.loadMore())},getIcons:function(t,e){var i=t,n=[];if(_.isString(i)?i=i.split(","):_.isArray(i)&&(i=i.join("").split(",")),i.length<=1&&""===i[0]||!i)for(var o=this.icons.slice(e,e+this.limit),r=0;r<o.length;r++)n.push('<div class="ajax-icon'+(""!=this.icon&&o[r].classes===this.icon.classes?" chosen ":"")+'"><span data-icon-tags="'+o[r].tags+'" class="'+o[r].classes+'"></span> </div>');else{for(var s=[],a=0;a<this.icons.length;a++)for(var l=0;l<i.length;l++){var c=new RegExp(i[l].replace(/ /g," "));""!==i[l]&&this.icons[a].tags&&this.icons[a].tags.match(c)&&s.indexOf(this.icons[a])<0&&s.push(this.icons[a])}for(var u=s.slice(e,e+this.limit),h=0;h<u.length;h++)n.push('<div class="ajax-icon'+(""!=this.icon&&u[h].classes===this.icon.classes?" chosen ":"")+'"><span  data-icon-tags="'+u[h].tags+'" class="'+u[h].classes+'"></span></div>')}return n.join("")},selectIcon:function(t){if(!t.currentTarget.classList.contains("chosen")){var e=this.$(t.currentTarget).find("span");this.$el.find(".ajax-icon").removeClass("chosen"),t.currentTarget.classList.add("chosen"),this.changeIcon(e.attr("class"))}},changeIcon:function(t){if(void 0===t||""==t)this.$el.find(".field-icon-container-inner").hasClass("empty")||this.$el.find(".field-icon-container-inner").addClass("empty"),this.$el.find(".field-icon__selected-icon span").attr({class:"","data-icon-tags":""}),this.tags="",this.$el.find(".ajax-icon").removeClass("chosen"),this.$el.find(".icon-search").val("");else{var e=this.findByClasses(t);this.$el.find(".field-icon-container-inner").removeClass("empty"),this.$el.find(".field-icon__selected-icon span").attr({class:t,"data-icon-tags":e?e.tags:""}),this.icon={class:t,tags:e?e.tags:""},this.cb(t)}},searchFilter:function(){for(var t=this,e=[],i=this.icons,n=0;n<i.length;n++)_.isUndefined(i[n].tags)||e.push(i[n].tags);var o=_.union(_.flatten(e));this.$el.find(".icon-search").autocomplete({source:o,select:function(e,i){t.search(i.item.value)}}).data("ui-autocomplete")._renderItem=function(t,e){return t.addClass("field-input-autocomplete-list field-input-autocomplete-list-inner"),jQuery("<li>").attr("data-value",e.value).append("<div>"+e.label+"</div>").appendTo(t)}},findByClasses:function(t){return _.findWhere(this.icons,{classes:t})},dispose:function(){this.$el.remove(),this.off()},render:function(){return this.$el.html(_.template(this.storage.getSkinTemplate("field-icon-setting-preview"))({search:this.storage.__("search","Search"),icon:this.icon})),this},afterRender:function(){var t=this;this.tags&&this.$el.find(".icon-search").val(this.tags),this.loadMore(),this.$el.find(".filtered-icons").on("scroll",function(){t.checkLoadMore()&&t.loadMore()})}}),ImageCenterView=Backbone.View.extend({className:"inner-settings-image settings inner-settings",dataImages:null,offset:0,limit:12,events:{keydown:"keyAction","click .ajax-image":"clickListImage","keyup .img-search":"searchFilter","change .image-url":"changeInputUrlImage",shown:"afterRender"},attributes:function(){return{id:"settings-block-media","data-side-id":"settings-block-media"}},initialize:function(t){this.name=t.name,this.side=t.side,this.storage=t.storage,this.controller=t.controller,this.curSrc=t.curSrc,this.assets=t.assets,this.tags=t.tags,this.iframeUrl=t.iframeUrl,this.cb=t.cb,this.parent=t.parent,this.listenTo(this.model,"change",function(t){var e=Object.keys(t.changed)[0];this.changeImage(t.changed[e])}),this.dataImages=[];for(var e=0;e<this.assets.length;e++)for(var i=0,n=this.assets[e];i<n.length;i++)"image"===n[i].type&&this.dataImages.push({src:this.assets[e][i].src,tags:this.assets[e][i].tags})},render:function(){return this.$el.html(_.template(this.storage.getSkinTemplate("field-image-setting-preview"))({curSrc:this.curSrc,search:this.storage.__("search","Search"),url:this.storage.__("url","url")})),this},afterRender:function(){var t=this;this.tags&&this.$el.find(".img-search").val(this.tags),this.loadMore(),this.$el.find(".filtered-images").on("scroll",function(){t.checkLoadMore()&&t.loadMore()})},checkLoadMore:function(){var t=this.$el.find(".filtered-images");return this.$el.find(".inview-images").offset().top<t.offset().top+t.height()},keyAction:function(t){if(13==t.keyCode)return this.search(),this.$el.find(".img-search").autocomplete("search",""),!1},changeInputUrlImage:function(t){var e=jQuery(t.target).val();e.match(/.(jpg|jpeg|png|gif)$/i)?this.changeImage(e):console.error("Invalid file format")},search:function(){var t=this.$el.find(".img-search").val().split(",");this.$el.find(".filtered-images").find(".ajax-image").remove(),this.tags=t,this.offset=0,this.loadMore()},loadMore:function(){var t=this.$el.find(".filtered-images"),e=this.getImages(this.tags,this.offset);e&&(this.offset=this.offset+this.limit,t.find(".inview-images").before(e),this.checkLoadMore()&&this.loadMore())},getImages:function(t,e){var i=t,n=[];if(_.isString(i)?i=i.split(","):_.isArray(i)&&(i=i.join("").split(" ")),i.length<=1&&""===i[0]||!i)for(var o=this.dataImages.slice(e,e+this.limit),r=0;r<o.length;r++)n.push('<div class="ajax-image'+(o[r].src===this.curSrc?" chosen":"")+'" style="background-image: url('+o[r].src+');" data-url="'+o[r].src+'"></div>');else{for(var s=[],a=0;a<this.dataImages.length;a++)for(var l=0;l<i.length;l++)""!==i[l]&&void 0!==this.dataImages[a].tags&&-1!=this.dataImages[a].tags.indexOf(i[l])&&-1==s.indexOf(this.dataImages[a])&&s.push(this.dataImages[a]);for(var c=s.slice(e,e+this.limit),u=0;u<c.length;u++)n.push('<div class="ajax-image'+(c[u].src===this.curSrc?" chosen":"")+'" style="background-image: url('+c[u].src+');" data-url="'+c[u].src+'"></div>')}return n.join("")},clickListImage:function(t){if(!t.currentTarget.classList.contains("chosen")){this.$el.find(".ajax-image").removeClass("chosen"),t.currentTarget.classList.add("chosen");var e=this.$(t.currentTarget).data("url");this.changeImage(e),this.cb(e)}},changeImage:function(t){this.$el.find(".field-image__selected-image img").attr("src",t),this.$el.find(".field-image-container-inner").hasClass("empty")&&this.$el.find(".field-image-container-inner").removeClass("empty"),this.$el.find(".image-url").val(t),this.$el.find(".ajax-image").removeClass("chosen"),this.curSrc=t,this.search()},searchFilter:function(){for(var t=this,e=[],i=this.dataImages,n=0;n<i.length;n++)_.isUndefined(i[n].tags)||e.push(i[n].tags);var o=_.union(_.flatten(e));this.$el.find(".img-search").autocomplete({source:o,select:function(){t.search()}}).data("ui-autocomplete")._renderItem=function(t,e){return t.addClass("field-input-autocomplete-list field-input-autocomplete-list-inner"),jQuery("<li>").attr("data-value",e.value).append("<div>"+e.label+"</div>").appendTo(t)}},dispose:function(){this.$el.remove(),this.off()}}),VideoCenterView=Backbone.View.extend({className:"inner-settings-video settings inner-settings",dataVideos:null,offset:0,limit:12,events:{keydown:"keyAction","click .ajax-video":"clickListVideo","keyup .video-search":"searchFilter",shown:"afterRender"},attributes:function(){return{id:"settings-block-media","data-side-id":"settings-block-media"}},initialize:function(t){this.name=t.name,this.side=t.side,this.storage=t.storage,this.controller=t.controller,this.tpl=_.template(this.storage.getSkinTemplate("field-video-setting-preview")),this.src=t.src,this.assets=t.assets,this.tags=t.tags,this.cb=t.cb,this.parent=t.parent,this.listenTo(this.model,"change",function(t){var e=Object.keys(t.changed)[0];this.changeVideo({url:t.changed[e].url,preview:t.changed[e].preview})}),this.dataVideos=[];for(var e=0;e<this.assets.length;e++)for(var i=0;i<this.assets[e].length;i++)"video"===this.assets[e][i].type&&this.dataVideos.push({src:this.assets[e][i].src,pack:this.assets[e][i].pack,tags:this.assets[e][i].tags,title:this.assets[e][i].title?this.assets[e][i].title:"",preview:this.assets[e][i].preview?this.assets[e][i].preview:""})},render:function(){return this.$el.html(this.tpl({search:this.storage.__("search","Search"),src:this.src})),this},afterRender:function(){var t=this;this.tags&&this.$el.find(".video-search").val(this.tags),this.loadMore(),this.$el.find(".filtered-videos").on("scroll",function(){t.checkLoadMore()&&t.loadMore()})},keyAction:function(t){if(13==t.keyCode)return this.search(),this.$el.find(".video-search").autocomplete("search",""),!1},search:function(){var t=this.$el.find(".video-search").val().split(",");this.$el.find(".filtered-videos").find(".ajax-video").remove(),this.tags=t,this.offset=0,this.loadMore()},checkLoadMore:function(){var t=this.$el.find(".filtered-videos");return this.$el.find(".inview-videos").offset().top<t.offset().top+t.height()},loadMore:function(){var t=this.$el.find(".filtered-videos"),e=this.getVideos(this.tags,this.offset);e&&(this.offset=this.offset+this.limit,t.find(".inview-videos").before(e),this.checkLoadMore()&&this.loadMore())},getVideos:function(t,e){var i=t,n=[];if(_.isString(i)?i=i.split(","):_.isArray(i)&&(i=i.join("").split(" ")),i.length<=1&&""===i[0]||!i)for(var o=this.dataVideos.slice(e,e+this.limit),r=0;r<o.length;r++)n.push('<div class="ajax-video'+(o[r].src===this.src.url?" chosen ":"")+'" data-src="'+o[r].src+'" data-preview="'+o[r].preview+'" style="background-image: url('+o[r].preview+');"></div>');else{for(var s=[],a=0;a<this.dataVideos.length;a++)for(var l=0;l<i.length;l++)""!==i[l]&&-1!=this.dataVideos[a].tags.indexOf(i[l])&&-1==s.indexOf(this.dataVideos[a])&&s.push(this.dataVideos[a]);for(var c=s.slice(e,e+this.limit),u=0;u<c.length;u++)n.push('<div class="ajax-video'+(c[u].src===this.src.url?" chosen ":"")+'" data-src="'+c[u].src+'" data-preview="'+c[u].preview+'" style="background-image: url('+c[u].preview+');"></div>')}return n.join("")},clickListVideo:function(t){if(!t.currentTarget.classList.contains("chosen")){this.$el.find(".ajax-video").removeClass("chosen"),t.currentTarget.classList.add("chosen");var e=this.$(t.currentTarget).data("src"),i=this.$(t.currentTarget).data("preview"),n={url:e,preview:i};this.changeVideo({url:e,preview:i}),this.cb(n)}},changeVideo:function(t){this.$el.find(".field-video__selected-video img").attr("src",t.preview),this.$el.find(".field-video-container-inner").hasClass("empty")&&this.$el.find(".field-video-container-inner").removeClass("empty"),this.$el.find(".ajax-video").removeClass("chosen"),this.src=t,this.search()},searchFilter:function(){for(var t=this,e=[],i=this.dataVideos,n=0;n<i.length;n++)_.isUndefined(i[n].tags)||e.push(i[n].tags);var o=_.union(_.flatten(e));this.$el.find(".video-search").autocomplete({source:o,select:function(){t.search()}}).data("ui-autocomplete")._renderItem=function(t,e){return t.addClass("field-input-autocomplete-list field-input-autocomplete-list-inner"),jQuery("<li>").attr("data-value",e.value).append("<div>"+e.label+"</div>").appendTo(t)}},dispose:function(){this.$el.remove(),this.off()}});(QoobExtensions=QoobExtensions||{}).templating=QoobExtensions.templating||[],QoobExtensions.templating.handlebars=QoobExtensions.templating.hbs=function(t){var e=Handlebars.compile(t);return function(t){return e(t)}};var QoobExtensions;(QoobExtensions=QoobExtensions||{}).templating=QoobExtensions.templating||[],QoobExtensions.templating.underscore=function(t){var e=_.template(t);return function(t){return e(t)}},QoobStorage.prototype.getGroups=function(t){var e=[];return _.each(this.librariesData,function(i){null!=t&&t!=i.name||void 0!==i.groups&&(e=_.reduce(i.groups,function(t,e){var n=_.findWhere(t,{id:e.id});if(n)n.position=(parseInt(n.position)+parseInt(e.position))/2,n.libs.push(i.name);else{var o=_.clone(e);o.libs=[i.name],t.push(o)}return t},e))}),_.sortBy(e,"position")},QoobStorage.prototype.getBlocksByGroup=function(t,e){var i=[],n=this.librariesData;e&&(n=n.filter(function(t){return-1!==e.indexOf(t.name)}));for(var o=0;o<n.length;o++)void 0!==n[o].blocks&&(i=i.concat(n[o].blocks.filter(function(e){return e.lib=n[o].name,t?!!e.settings&&e.groups===t:!!e.settings})));return i},QoobStorage.prototype.getSkinTemplate=function(t){return this.skinTemplates[t]},QoobStorage.prototype.getDefaultTemplateAdapter=function(){return this.blockTemplateAdapter},QoobStorage.prototype.getBlockConfig=function(t,e){var i,n=_.findWhere(this.librariesData,{name:t});return void 0!=n&&(i=_.findWhere(n.blocks,{name:e})),i},QoobStorage.prototype.getBlockTemplate=function(t,e,i){var n=this;if(this.blockTemplates[t+"_"+e])i(null,this.blockTemplates[t+"_"+e]);else{var o=_.findWhere(this.librariesData,{name:t});if(void 0===o)i("blockNotFound",null);else{var r=_.findWhere(o.blocks,{name:e});if(void 0===r)i("blockNotFound",null);else{var s=r.url+r.template;this.loader.add({type:"data",name:"block_"+t+"_"+e,src:s,onloaded:function(o){n.blockTemplates[t+"_"+e]=o,i(null,o)}})}}}},QoobStorage.prototype.save=function(t,e,i){var n={data:t,html:e,libs:this.librariesData};this.driver.savePageData(n,function(t,e){i(t,e)})},QoobStorage.prototype.__=function(t,e){return null!==this.translations&&void 0!==this.translations[t]?this.translations[t]:e},QoobStorage.prototype.getAssets=function(){var t=this.librariesData;if(0==this.assets.length)for(var e=0;e<t.length;e++){if(void 0!==t[e].blocks)for(var i=0;i<t[e].blocks.length;i++)t[e].blocks[i].assets&&this.assets.push(t[e].blocks[i].assets);void 0!==t[e].assets&&this.assets.push(t[e].assets)}return this.assets},QoobStorage.prototype.loadPageTemplates=function(t){var e=this;this.driver.loadPageTemplates(function(i,n){n&&n.length>0&&e.pageTemplatesCollection.add(n),t(i)})},QoobStorage.prototype.createPageTemplate=function(t,e){this.pageTemplatesCollection.add(t);var i=this.pageTemplatesCollection.filter(function(t){return!0!==t.get("external")});this.driver.savePageTemplate(i,function(t,i){i&&e(t,i)})},QoobStorage.prototype.removePageTemplate=function(t){var e=this.pageTemplatesCollection.get(t);this.pageTemplatesCollection.remove(e);var i=this.pageTemplatesCollection.filter(function(t){return!0!==t.get("external")});this.driver.savePageTemplate(i,function(t,e){e&&console.log("Done",e)})},QoobStorage.prototype.getLibraryByUrl=function(t,e){jQuery.ajax({dataType:"json",url:t,error:function(t,i){e(i)},success:function(t){e(null,t)}})};var QoobUtils={genId:function(t){window.usedQoobIds=window.usedQoobIds||[];for(var e=t||parseInt(_.uniqueId());-1!=window.usedQoobIds.indexOf(e);)e=parseInt(_.uniqueId());return window.usedQoobIds.push(e),e},createModel:function(t){t.id=QoobUtils.genId(t.id);var e=new BlockModel,i={};for(var n in t)_.isArray(t[n])?(i[n]=this.createCollection(t[n]),e.listenTo(i[n],"change",function(){this.trigger("change",this)}),i[n].forEach(function(e){e.owner_id=t.id})):i[n]=t[n],e.set(n,i[n]);return e},createCollection:function(t){for(var e=new Backbone.Collection,i=0;i<t.length;i++){var n=this.createModel(t[i]);e.add(n),e.listenTo(n,"change",function(){this.trigger("change",this)})}return e},getDefaultSettings:function(t,e){var i={},n={},o={};Array.isArray(t)?(n=_.findWhere(t,{name:e}).settings,o=_.findWhere(t,{name:e}).defaults):(n=t.settings,o=t.defaults);for(var r=0;r<n.length;r++)i[n[r].name]=o[n[r].name];return i.block=e,i.lib=t.lib,i}};!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Quill=e():t.Quill=e()}(this,function(){return function(t){function e(n){if(i[n])return i[n].exports;var o=i[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var i={};return e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=45)}([function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(17),o=i(18),r=i(19),s=i(48),a=i(49),l=i(50),c=i(51),u=i(52),h=i(11),d=i(29),f=i(30),p=i(28),m=i(1),g={Scope:m.Scope,create:m.create,find:m.find,query:m.query,register:m.register,Container:n.default,Format:o.default,Leaf:r.default,Embed:c.default,Scroll:s.default,Block:l.default,Inline:a.default,Text:u.default,Attributor:{Attribute:h.default,Class:d.default,Style:f.default,Store:p.default}};e.default=g},function(t,e,i){function n(t,i){return void 0===i&&(i=!1),null==t?null:null!=t[e.DATA_KEY]?t[e.DATA_KEY].blot:i?n(t.parentNode,i):null}function o(t,e){void 0===e&&(e=d.ANY);var i;if("string"==typeof t)i=h[t]||l[t];else if(t instanceof Text||t.nodeType===Node.TEXT_NODE)i=h.text;else if("number"==typeof t)t&d.LEVEL&d.BLOCK?i=h.block:t&d.LEVEL&d.INLINE&&(i=h.inline);else if(t instanceof HTMLElement){var n=(t.getAttribute("class")||"").split(/\s+/);for(var o in n)if(i=c[n[o]])break;i=i||u[t.tagName]}return null==i?null:e&d.LEVEL&i.scope&&e&d.TYPE&i.scope?i:null}function r(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(t.length>1)return t.map(function(t){return r(t)});var i=t[0];if("string"!=typeof i.blotName&&"string"!=typeof i.attrName)throw new a("Invalid definition");if("abstract"===i.blotName)throw new a("Cannot register abstract class");if(h[i.blotName||i.attrName]=i,"string"==typeof i.keyName)l[i.keyName]=i;else if(null!=i.className&&(c[i.className]=i),null!=i.tagName){Array.isArray(i.tagName)?i.tagName=i.tagName.map(function(t){return t.toUpperCase()}):i.tagName=i.tagName.toUpperCase();(Array.isArray(i.tagName)?i.tagName:[i.tagName]).forEach(function(t){null!=u[t]&&null!=i.className||(u[t]=i)})}return i}var s=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(e){var i=this;return e="[Parchment] "+e,i=t.call(this,e)||this,i.message=e,i.name=i.constructor.name,i}return s(e,t),e}(Error);e.ParchmentError=a;var l={},c={},u={},h={};e.DATA_KEY="__blot";var d;!function(t){t[t.TYPE=3]="TYPE",t[t.LEVEL=12]="LEVEL",t[t.ATTRIBUTE=13]="ATTRIBUTE",t[t.BLOT=14]="BLOT",t[t.INLINE=7]="INLINE",t[t.BLOCK=11]="BLOCK",t[t.BLOCK_BLOT=10]="BLOCK_BLOT",t[t.INLINE_BLOT=6]="INLINE_BLOT",t[t.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",t[t.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",t[t.ANY=15]="ANY"}(d=e.Scope||(e.Scope={})),e.create=function(t,e){var i=o(t);if(null==i)throw new a("Unable to create "+t+" blot");var n=i;return new n(t instanceof Node||t.nodeType===Node.TEXT_NODE?t:n.create(e),e)},e.find=n,e.query=o,e.register=r},function(t,e){var i=Object.prototype.hasOwnProperty,n=Object.prototype.toString,o=function(t){return"function"==typeof Array.isArray?Array.isArray(t):"[object Array]"===n.call(t)},r=function(t){if(!t||"[object Object]"!==n.call(t))return!1;var e=i.call(t,"constructor"),o=t.constructor&&t.constructor.prototype&&i.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!e&&!o)return!1;var r;for(r in t);return void 0===r||i.call(t,r)};t.exports=function t(){var e,i,n,s,a,l,c=arguments[0],u=1,h=arguments.length,d=!1;for("boolean"==typeof c&&(d=c,c=arguments[1]||{},u=2),(null==c||"object"!=typeof c&&"function"!=typeof c)&&(c={});u<h;++u)if(null!=(e=arguments[u]))for(i in e)n=c[i],s=e[i],c!==s&&(d&&s&&(r(s)||(a=o(s)))?(a?(a=!1,l=n&&o(n)?n:[]):l=n&&r(n)?n:{},c[i]=t(d,l,s)):void 0!==s&&(c[i]=s));return c}},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null==t?e:("function"==typeof t.formats&&(e=(0,u.default)(e,t.formats())),null==t.parent||"scroll"==t.parent.blotName||t.parent.statics.scope!==t.statics.scope?e:a(t.parent,e))}Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.BlockEmbed=e.bubbleFormats=void 0;var l=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),c=function t(e,i,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0},u=n(i(2)),h=n(i(4)),d=n(i(0)),f=n(i(14)),p=n(i(5)),m=n(i(8)),g=function(t){function e(){return o(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,d.default.Embed),l(e,[{key:"attach",value:function(){c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"attach",this).call(this),this.attributes=new d.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return(new h.default).insert(this.value(),(0,u.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(t,e){var i=d.default.query(t,d.default.Scope.BLOCK_ATTRIBUTE);null!=i&&this.attributes.attribute(i,e)}},{key:"formatAt",value:function(t,e,i,n){this.format(i,n)}},{key:"insertAt",value:function(t,i,n){if("string"==typeof i&&i.endsWith("\n")){var o=d.default.create(v.blotName);this.parent.insertBefore(o,0===t?this:this.next),o.insertAt(0,i.slice(0,-1))}else c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"insertAt",this).call(this,t,i,n)}}]),e}();g.scope=d.default.Scope.BLOCK_BLOT;var v=function(t){function e(t){o(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.cache={},i}return s(e,d.default.Block),l(e,[{key:"delta",value:function(){return null==this.cache.delta&&(this.cache.delta=this.descendants(d.default.Leaf).reduce(function(t,e){return 0===e.length()?t:t.insert(e.value(),a(e))},new h.default).insert("\n",a(this))),this.cache.delta}},{key:"deleteAt",value:function(t,i){c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"deleteAt",this).call(this,t,i),this.cache={}}},{key:"formatAt",value:function(t,i,n,o){i<=0||(d.default.query(n,d.default.Scope.BLOCK)?t+i===this.length()&&this.format(n,o):c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"formatAt",this).call(this,t,Math.min(i,this.length()-t-1),n,o),this.cache={})}},{key:"insertAt",value:function(t,i,n){if(null!=n)return c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"insertAt",this).call(this,t,i,n);if(0!==i.length){var o=i.split("\n"),r=o.shift();r.length>0&&(t<this.length()-1||null==this.children.tail?c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"insertAt",this).call(this,Math.min(t,this.length()-1),r):this.children.tail.insertAt(this.children.tail.length(),r),this.cache={});var s=this;o.reduce(function(t,e){return(s=s.split(t,!0)).insertAt(0,e),e.length},t+r.length)}}},{key:"insertBefore",value:function(t,i){var n=this.children.head;c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"insertBefore",this).call(this,t,i),n instanceof f.default&&n.remove(),this.cache={}}},{key:"length",value:function(){return null==this.cache.length&&(this.cache.length=c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"length",this).call(this)+1),this.cache.length}},{key:"moveChildren",value:function(t,i){c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"moveChildren",this).call(this,t,i),this.cache={}}},{key:"optimize",value:function(t){c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"optimize",this).call(this,t),this.cache={}}},{key:"path",value:function(t){return c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"path",this).call(this,t,!0)}},{key:"removeChild",value:function(t){c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removeChild",this).call(this,t),this.cache={}}},{key:"split",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(i&&(0===t||t>=this.length()-1)){var n=this.clone();return 0===t?(this.parent.insertBefore(n,this),this):(this.parent.insertBefore(n,this.next),n)}var o=c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"split",this).call(this,t,i);return this.cache={},o}}]),e}();v.blotName="block",v.tagName="P",v.defaultChild="break",v.allowedChildren=[p.default,d.default.Embed,m.default],e.bubbleFormats=a,e.BlockEmbed=g,e.default=v},function(t,e,i){var n=i(54),o=i(12),r=i(2),s=i(20),a=String.fromCharCode(0),l=function(t){Array.isArray(t)?this.ops=t:null!=t&&Array.isArray(t.ops)?this.ops=t.ops:this.ops=[]};l.prototype.insert=function(t,e){var i={};return 0===t.length?this:(i.insert=t,null!=e&&"object"==typeof e&&Object.keys(e).length>0&&(i.attributes=e),this.push(i))},l.prototype.delete=function(t){return t<=0?this:this.push({delete:t})},l.prototype.retain=function(t,e){if(t<=0)return this;var i={retain:t};return null!=e&&"object"==typeof e&&Object.keys(e).length>0&&(i.attributes=e),this.push(i)},l.prototype.push=function(t){var e=this.ops.length,i=this.ops[e-1];if(t=r(!0,{},t),"object"==typeof i){if("number"==typeof t.delete&&"number"==typeof i.delete)return this.ops[e-1]={delete:i.delete+t.delete},this;if("number"==typeof i.delete&&null!=t.insert&&(e-=1,"object"!=typeof(i=this.ops[e-1])))return this.ops.unshift(t),this;if(o(t.attributes,i.attributes)){if("string"==typeof t.insert&&"string"==typeof i.insert)return this.ops[e-1]={insert:i.insert+t.insert},"object"==typeof t.attributes&&(this.ops[e-1].attributes=t.attributes),this;if("number"==typeof t.retain&&"number"==typeof i.retain)return this.ops[e-1]={retain:i.retain+t.retain},"object"==typeof t.attributes&&(this.ops[e-1].attributes=t.attributes),this}}return e===this.ops.length?this.ops.push(t):this.ops.splice(e,0,t),this},l.prototype.chop=function(){var t=this.ops[this.ops.length-1];return t&&t.retain&&!t.attributes&&this.ops.pop(),this},l.prototype.filter=function(t){return this.ops.filter(t)},l.prototype.forEach=function(t){this.ops.forEach(t)},l.prototype.map=function(t){return this.ops.map(t)},l.prototype.partition=function(t){var e=[],i=[];return this.forEach(function(n){(t(n)?e:i).push(n)}),[e,i]},l.prototype.reduce=function(t,e){return this.ops.reduce(t,e)},l.prototype.changeLength=function(){return this.reduce(function(t,e){return e.insert?t+s.length(e):e.delete?t-e.delete:t},0)},l.prototype.length=function(){return this.reduce(function(t,e){return t+s.length(e)},0)},l.prototype.slice=function(t,e){t=t||0,"number"!=typeof e&&(e=1/0);for(var i=[],n=s.iterator(this.ops),o=0;o<e&&n.hasNext();){var r;o<t?r=n.next(t-o):(r=n.next(e-o),i.push(r)),o+=s.length(r)}return new l(i)},l.prototype.compose=function(t){for(var e=s.iterator(this.ops),i=s.iterator(t.ops),n=new l;e.hasNext()||i.hasNext();)if("insert"===i.peekType())n.push(i.next());else if("delete"===e.peekType())n.push(e.next());else{var o=Math.min(e.peekLength(),i.peekLength()),r=e.next(o),a=i.next(o);if("number"==typeof a.retain){var c={};"number"==typeof r.retain?c.retain=o:c.insert=r.insert;var u=s.attributes.compose(r.attributes,a.attributes,"number"==typeof r.retain);u&&(c.attributes=u),n.push(c)}else"number"==typeof a.delete&&"number"==typeof r.retain&&n.push(a)}return n.chop()},l.prototype.concat=function(t){var e=new l(this.ops.slice());return t.ops.length>0&&(e.push(t.ops[0]),e.ops=e.ops.concat(t.ops.slice(1))),e},l.prototype.diff=function(t,e){if(this.ops===t.ops)return new l;var i=[this,t].map(function(e){return e.map(function(i){if(null!=i.insert)return"string"==typeof i.insert?i.insert:a;var n=e===t?"on":"with";throw new Error("diff() called "+n+" non-document")}).join("")}),r=new l,c=n(i[0],i[1],e),u=s.iterator(this.ops),h=s.iterator(t.ops);return c.forEach(function(t){for(var e=t[1].length;e>0;){var i=0;switch(t[0]){case n.INSERT:i=Math.min(h.peekLength(),e),r.push(h.next(i));break;case n.DELETE:i=Math.min(e,u.peekLength()),u.next(i),r.delete(i);break;case n.EQUAL:i=Math.min(u.peekLength(),h.peekLength(),e);var a=u.next(i),l=h.next(i);o(a.insert,l.insert)?r.retain(i,s.attributes.diff(a.attributes,l.attributes)):r.push(l).delete(i)}e-=i}}),r.chop()},l.prototype.eachLine=function(t,e){e=e||"\n";for(var i=s.iterator(this.ops),n=new l,o=0;i.hasNext();){if("insert"!==i.peekType())return;var r=i.peek(),a=s.length(r)-i.peekLength(),c="string"==typeof r.insert?r.insert.indexOf(e,a)-a:-1;if(c<0)n.push(i.next());else if(c>0)n.push(i.next(c));else{if(!1===t(n,i.next(1).attributes||{},o))return;o+=1,n=new l}}n.length()>0&&t(n,{},o)},l.prototype.transform=function(t,e){if(e=!!e,"number"==typeof t)return this.transformPosition(t,e);for(var i=s.iterator(this.ops),n=s.iterator(t.ops),o=new l;i.hasNext()||n.hasNext();)if("insert"!==i.peekType()||!e&&"insert"===n.peekType())if("insert"===n.peekType())o.push(n.next());else{var r=Math.min(i.peekLength(),n.peekLength()),a=i.next(r),c=n.next(r);if(a.delete)continue;c.delete?o.push(c):o.retain(r,s.attributes.transform(a.attributes,c.attributes,e))}else o.retain(s.length(i.next()));return o.chop()},l.prototype.transformPosition=function(t,e){e=!!e;for(var i=s.iterator(this.ops),n=0;i.hasNext()&&n<=t;){var o=i.peekLength(),r=i.peekType();i.next(),"delete"!==r?("insert"===r&&(n<t||!e)&&(t+=o),n+=o):t-=Math.min(o,t-n)}return t},t.exports=l},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function t(e,i,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0},s=n(i(8)),a=n(i(0)),l=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default.Inline),o(e,[{key:"formatAt",value:function(t,i,n,o){if(e.compare(this.statics.blotName,n)<0&&a.default.query(n,a.default.Scope.BLOT)){var s=this.isolate(t,i);o&&s.wrap(n,o)}else r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"formatAt",this).call(this,t,i,n,o)}},{key:"optimize",value:function(t){if(r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"optimize",this).call(this,t),this.parent instanceof e&&e.compare(this.statics.blotName,this.parent.statics.blotName)>0){var i=this.parent.isolate(this.offset(),this.length());this.moveChildren(i),i.wrap(this)}}}],[{key:"compare",value:function(t,i){var n=e.order.indexOf(t),o=e.order.indexOf(i);return n>=0||o>=0?n-o:t===i?0:t<i?-1:1}}]),e}();l.allowedChildren=[l,a.default.Embed,s.default],l.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],e.default=l},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}function o(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function r(t,e){if((e=(0,b.default)(!0,{container:t,modules:{clipboard:!0,keyboard:!0,history:!0}},e)).theme&&e.theme!==x.DEFAULTS.theme){if(e.theme=x.import("themes/"+e.theme),null==e.theme)throw new Error("Invalid theme "+e.theme+". Did you register it?")}else e.theme=w.default;var i=(0,b.default)(!0,{},e.theme.DEFAULTS);[i,e].forEach(function(t){t.modules=t.modules||{},Object.keys(t.modules).forEach(function(e){!0===t.modules[e]&&(t.modules[e]={})})});var n=Object.keys(i.modules).concat(Object.keys(e.modules)).reduce(function(t,e){var i=x.import("modules/"+e);return null==i?k.error("Cannot load "+e+" module. Are you sure you registered it?"):t[e]=i.DEFAULTS||{},t},{});return null!=e.modules&&e.modules.toolbar&&e.modules.toolbar.constructor!==Object&&(e.modules.toolbar={container:e.modules.toolbar}),e=(0,b.default)(!0,{},x.DEFAULTS,{modules:n},i,e),["bounds","container","scrollingContainer"].forEach(function(t){"string"==typeof e[t]&&(e[t]=document.querySelector(e[t]))}),e.modules=Object.keys(e.modules).reduce(function(t,i){return e.modules[i]&&(t[i]=e.modules[i]),t},{}),e}function s(t,e,i,n){if(this.options.strict&&!this.isEnabled()&&e===p.default.sources.USER)return new d.default;var o=null==i?null:this.getSelection(),r=this.editor.delta,s=t();if(null!=o&&(!0===i&&(i=o.index),null==n?o=l(o,s,e):0!==n&&(o=l(o,i,n,e)),this.setSelection(o,p.default.sources.SILENT)),s.length()>0){var a,c=[p.default.events.TEXT_CHANGE,s,r,e];if((a=this.emitter).emit.apply(a,[p.default.events.EDITOR_CHANGE].concat(c)),e!==p.default.sources.SILENT){var u;(u=this.emitter).emit.apply(u,c)}}return s}function a(t,e,i,n,o){var r={};return"number"==typeof t.index&&"number"==typeof t.length?"number"!=typeof e?(o=n,n=i,i=e,e=t.length,t=t.index):(e=t.length,t=t.index):"number"!=typeof e&&(o=n,n=i,i=e,e=0),"object"===(void 0===i?"undefined":c(i))?(r=i,o=n):"string"==typeof i&&(null!=n?r[i]=n:o=i),o=o||p.default.sources.API,[t,e,r,o]}function l(t,e,i,n){if(null==t)return null;var o=void 0,r=void 0;if(e instanceof d.default){var s=[t.index,t.index+t.length].map(function(t){return e.transformPosition(t,n!==p.default.sources.USER)}),a=u(s,2);o=a[0],r=a[1]}else{var l=[t.index,t.index+t.length].map(function(t){return t<e||t===e&&n===p.default.sources.USER?t:i>=0?t+i:Math.max(e,t+i)}),c=u(l,2);o=c[0],r=c[1]}return new v.Range(o,r-o)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.overload=e.expandConfig=void 0;var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],n=!0,o=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(i.push(s.value),!e||i.length!==e);n=!0);}catch(t){o=!0,r=t}finally{try{!n&&a.return&&a.return()}finally{if(o)throw r}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();i(53);var d=n(i(4)),f=n(i(57)),p=n(i(9)),m=n(i(7)),g=n(i(0)),v=i(22),y=n(v),b=n(i(2)),_=n(i(10)),w=n(i(32)),k=(0,_.default)("quill"),x=function(){function t(e){var i=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=r(e,n),this.container=this.options.container,null==this.container)return k.error("Invalid Quill container",e);this.options.debug&&t.debug(this.options.debug);var o=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new p.default,this.scroll=g.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new f.default(this.scroll),this.selection=new y.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(p.default.events.EDITOR_CHANGE,function(t){t===p.default.events.TEXT_CHANGE&&i.root.classList.toggle("ql-blank",i.editor.isBlank())}),this.emitter.on(p.default.events.SCROLL_UPDATE,function(t,e){var n=i.selection.lastRange,o=n&&0===n.length?n.index:void 0;s.call(i,function(){return i.editor.update(null,e,o)},t)});var a=this.clipboard.convert("<div class='ql-editor' style=\"white-space: normal;\">"+o+"<p><br></p></div>");this.setContents(a),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return h(t,null,[{key:"debug",value:function(t){!0===t&&(t="log"),_.default.level(t)}},{key:"find",value:function(t){return t.__quill||g.default.find(t)}},{key:"import",value:function(t){return null==this.imports[t]&&k.error("Cannot import "+t+". Are you sure it was registered?"),this.imports[t]}},{key:"register",value:function(t,e){var i=this,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("string"!=typeof t){var o=t.attrName||t.blotName;"string"==typeof o?this.register("formats/"+o,t,e):Object.keys(t).forEach(function(n){i.register(n,t[n],e)})}else null==this.imports[t]||n||k.warn("Overwriting "+t+" with",e),this.imports[t]=e,(t.startsWith("blots/")||t.startsWith("formats/"))&&"abstract"!==e.blotName?g.default.register(e):t.startsWith("modules")&&"function"==typeof e.register&&e.register()}}]),h(t,[{key:"addContainer",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("string"==typeof t){var i=t;(t=document.createElement("div")).classList.add(i)}return this.container.insertBefore(t,e),t}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(t,e,i){var n=this,o=a(t,e,i),r=u(o,4);return t=r[0],e=r[1],i=r[3],s.call(this,function(){return n.editor.deleteText(t,e)},i,t,-1*e)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.scroll.enable(t),this.container.classList.toggle("ql-disabled",!t)}},{key:"focus",value:function(){var t=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=t,this.scrollIntoView()}},{key:"format",value:function(t,e){var i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:p.default.sources.API;return s.call(this,function(){var n=i.getSelection(!0),r=new d.default;if(null==n)return r;if(g.default.query(t,g.default.Scope.BLOCK))r=i.editor.formatLine(n.index,n.length,o({},t,e));else{if(0===n.length)return i.selection.format(t,e),r;r=i.editor.formatText(n.index,n.length,o({},t,e))}return i.setSelection(n,p.default.sources.SILENT),r},n)}},{key:"formatLine",value:function(t,e,i,n,o){var r=this,l=void 0,c=a(t,e,i,n,o),h=u(c,4);return t=h[0],e=h[1],l=h[2],o=h[3],s.call(this,function(){return r.editor.formatLine(t,e,l)},o,t,0)}},{key:"formatText",value:function(t,e,i,n,o){var r=this,l=void 0,c=a(t,e,i,n,o),h=u(c,4);return t=h[0],e=h[1],l=h[2],o=h[3],s.call(this,function(){return r.editor.formatText(t,e,l)},o,t,0)}},{key:"getBounds",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=void 0;i="number"==typeof t?this.selection.getBounds(t,e):this.selection.getBounds(t.index,t.length);var n=this.container.getBoundingClientRect();return{bottom:i.bottom-n.top,height:i.height,left:i.left-n.left,right:i.right-n.left,top:i.top-n.top,width:i.width}}},{key:"getContents",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-t,i=a(t,e),n=u(i,2);return t=n[0],e=n[1],this.editor.getContents(t,e)}},{key:"getFormat",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getSelection(!0),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"number"==typeof t?this.editor.getFormat(t,e):this.editor.getFormat(t.index,t.length)}},{key:"getIndex",value:function(t){return t.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(t){return this.scroll.leaf(t)}},{key:"getLine",value:function(t){return this.scroll.line(t)}},{key:"getLines",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE;return"number"!=typeof t?this.scroll.lines(t.index,t.length):this.scroll.lines(t,e)}},{key:"getModule",value:function(t){return this.theme.modules[t]}},{key:"getSelection",value:function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-t,i=a(t,e),n=u(i,2);return t=n[0],e=n[1],this.editor.getText(t,e)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(e,i,n){var o=this,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.sources.API;return s.call(this,function(){return o.editor.insertEmbed(e,i,n)},r,e)}},{key:"insertText",value:function(t,e,i,n,o){var r=this,l=void 0,c=a(t,0,i,n,o),h=u(c,4);return t=h[0],l=h[2],o=h[3],s.call(this,function(){return r.editor.insertText(t,e,l)},o,t,e.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(t,e,i){this.clipboard.dangerouslyPasteHTML(t,e,i)}},{key:"removeFormat",value:function(t,e,i){var n=this,o=a(t,e,i),r=u(o,4);return t=r[0],e=r[1],i=r[3],s.call(this,function(){return n.editor.removeFormat(t,e)},i,t)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p.default.sources.API;return s.call(this,function(){t=new d.default(t);var i=e.getLength(),n=e.editor.deleteText(0,i),o=e.editor.applyDelta(t),r=o.ops[o.ops.length-1];return null!=r&&"string"==typeof r.insert&&"\n"===r.insert[r.insert.length-1]&&(e.editor.deleteText(e.getLength()-1,1),o.delete(1)),n.compose(o)},i)}},{key:"setSelection",value:function(e,i,n){if(null==e)this.selection.setRange(null,i||t.sources.API);else{var o=a(e,i,n),r=u(o,4);e=r[0],i=r[1],n=r[3],this.selection.setRange(new v.Range(e,i),n),n!==p.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p.default.sources.API,i=(new d.default).insert(t);return this.setContents(i,e)}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p.default.sources.USER,e=this.scroll.update(t);return this.selection.update(t),e}},{key:"updateContents",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p.default.sources.API;return s.call(this,function(){return t=new d.default(t),e.editor.applyDelta(t,i)},i,!0)}}]),t}();x.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},x.events=p.default.events,x.sources=p.default.sources,x.version="1.3.3",x.imports={delta:d.default,parchment:g.default,"core/module":m.default,"core/theme":w.default},e.expandConfig=r,e.overload=a,e.default=x},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.quill=e,this.options=i};n.DEFAULTS={},e.default=n},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){return t&&t.__esModule?t:{default:t}}(i(0)),o=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,n.default.Text),e}();e.default=o},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=n(i(58)),s=(0,n(i(10)).default)("quill:events");["selectionchange","mousedown","mouseup","click"].forEach(function(t){document.addEventListener(t,function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(t){if(t.__quill&&t.__quill.emitter){var i;(i=t.__quill.emitter).handleDOM.apply(i,e)}})})});var a=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.listeners={},t.on("error",s.error),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.default),o(e,[{key:"emit",value:function(){s.log.apply(s,arguments),function t(e,i,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(t){for(var e=arguments.length,i=Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];(this.listeners[t.type]||[]).forEach(function(e){var n=e.node,o=e.handler;(t.target===n||n.contains(t.target))&&o.apply(void 0,[t].concat(i))})}},{key:"listenDOM",value:function(t,e,i){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push({node:e,handler:i})}}]),e}();a.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},a.sources={API:"api",SILENT:"silent",USER:"user"},e.default=a},function(t,e,i){function n(t){if(r.indexOf(t)<=r.indexOf(s)){for(var e,i=arguments.length,n=Array(i>1?i-1:0),o=1;o<i;o++)n[o-1]=arguments[o];(e=console)[t].apply(e,n)}}function o(t){return r.reduce(function(e,i){return e[i]=n.bind(console,i,t),e},{})}Object.defineProperty(e,"__esModule",{value:!0});var r=["error","warn","log","info"],s="warn";n.level=o.level=function(t){s=t},e.default=o},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(1),o=function(){function t(t,e,i){void 0===i&&(i={}),this.attrName=t,this.keyName=e;var o=n.Scope.TYPE&n.Scope.ATTRIBUTE;null!=i.scope?this.scope=i.scope&n.Scope.LEVEL|o:this.scope=n.Scope.ATTRIBUTE,null!=i.whitelist&&(this.whitelist=i.whitelist)}return t.keys=function(t){return[].map.call(t.attributes,function(t){return t.name})},t.prototype.add=function(t,e){return!!this.canAdd(t,e)&&(t.setAttribute(this.keyName,e),!0)},t.prototype.canAdd=function(t,e){return null!=n.query(t,n.Scope.BLOT&(this.scope|n.Scope.TYPE))&&(null==this.whitelist||this.whitelist.indexOf(e)>-1)},t.prototype.remove=function(t){t.removeAttribute(this.keyName)},t.prototype.value=function(t){var e=t.getAttribute(this.keyName);return this.canAdd(t,e)?e:""},t}();e.default=o},function(t,e,i){function n(t){return null===t||void 0===t}function o(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length||"function"!=typeof t.copy||"function"!=typeof t.slice||t.length>0&&"number"!=typeof t[0])}var r=Array.prototype.slice,s=i(55),a=i(56),l=t.exports=function(t,e,i){return i||(i={}),t===e||(t instanceof Date&&e instanceof Date?t.getTime()===e.getTime():!t||!e||"object"!=typeof t&&"object"!=typeof e?i.strict?t===e:t==e:function(t,e,i){var c,u;if(n(t)||n(e))return!1;if(t.prototype!==e.prototype)return!1;if(a(t))return!!a(e)&&(t=r.call(t),e=r.call(e),l(t,e,i));if(o(t)){if(!o(e))return!1;if(t.length!==e.length)return!1;for(c=0;c<t.length;c++)if(t[c]!==e[c])return!1;return!0}try{var h=s(t),d=s(e)}catch(t){return!1}if(h.length!=d.length)return!1;for(h.sort(),d.sort(),c=h.length-1;c>=0;c--)if(h[c]!=d[c])return!1;for(c=h.length-1;c>=0;c--)if(u=h[c],!l(t[u],e[u],i))return!1;return typeof t==typeof e}(t,e,i))}},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.Code=void 0;var a=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],n=!0,o=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(i.push(s.value),!e||i.length!==e);n=!0);}catch(t){o=!0,r=t}finally{try{!n&&a.return&&a.return()}finally{if(o)throw r}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),c=function t(e,i,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0},u=n(i(4)),h=n(i(0)),d=n(i(3)),f=n(i(5)),p=n(i(8)),m=function(t){function e(){return o(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,f.default),e}();m.blotName="code",m.tagName="CODE";var g=function(t){function e(){return o(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,d.default),l(e,[{key:"delta",value:function(){var t=this,e=this.domNode.textContent;return e.endsWith("\n")&&(e=e.slice(0,-1)),e.split("\n").reduce(function(e,i){return e.insert(i).insert("\n",t.formats())},new u.default)}},{key:"format",value:function(t,i){if(t!==this.statics.blotName||!i){var n=this.descendant(p.default,this.length()-1),o=a(n,1)[0];null!=o&&o.deleteAt(o.length()-1,1),c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"format",this).call(this,t,i)}}},{key:"formatAt",value:function(t,i,n,o){if(0!==i&&null!=h.default.query(n,h.default.Scope.BLOCK)&&(n!==this.statics.blotName||o!==this.statics.formats(this.domNode))){var r=this.newlineIndex(t);if(!(r<0||r>=t+i)){var s=this.newlineIndex(t,!0)+1,a=r-s+1,l=this.isolate(s,a),c=l.next;l.format(n,o),c instanceof e&&c.formatAt(0,t-s+i-a,n,o)}}}},{key:"insertAt",value:function(t,e,i){if(null==i){var n=this.descendant(p.default,t),o=a(n,2),r=o[0],s=o[1];r.insertAt(s,e)}}},{key:"length",value:function(){var t=this.domNode.textContent.length;return this.domNode.textContent.endsWith("\n")?t:t+1}},{key:"newlineIndex",value:function(t){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1])return this.domNode.textContent.slice(0,t).lastIndexOf("\n");var e=this.domNode.textContent.slice(t).indexOf("\n");return e>-1?t+e:-1}},{key:"optimize",value:function(t){this.domNode.textContent.endsWith("\n")||this.appendChild(h.default.create("text","\n")),c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"optimize",this).call(this,t);var i=this.next;null!=i&&i.prev===this&&i.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===i.statics.formats(i.domNode)&&(i.optimize(t),i.moveChildren(this),i.remove())}},{key:"replace",value:function(t){c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"replace",this).call(this,t),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(t){var e=h.default.find(t);null==e?t.parentNode.removeChild(t):e instanceof h.default.Embed?e.remove():e.unwrap()})}}],[{key:"create",value:function(t){var i=c(e.__proto__||Object.getPrototypeOf(e),"create",this).call(this,t);return i.setAttribute("spellcheck",!1),i}},{key:"formats",value:function(){return!0}}]),e}();g.blotName="code-block",g.tagName="PRE",g.TAB="  ",e.Code=m,e.default=g},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=function(t){return t&&t.__esModule?t:{default:t}}(i(0)),r=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.default.Embed),n(e,[{key:"insertInto",value:function(t,i){0===t.children.length?function t(e,i,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"insertInto",this).call(this,t,i):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),e}();r.blotName="break",r.tagName="BR",e.default=r},function(t,e,i){function n(t,e){var i=document.createElement("a");i.href=t;var n=i.href.slice(0,i.href.indexOf(":"));return e.indexOf(n)>-1}Object.defineProperty(e,"__esModule",{value:!0}),e.sanitize=e.default=void 0;var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function t(e,i,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0},s=function(t){return t&&t.__esModule?t:{default:t}}(i(5)),a=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.default),o(e,[{key:"format",value:function(t,i){if(t!==this.statics.blotName||!i)return r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"format",this).call(this,t,i);i=this.constructor.sanitize(i),this.domNode.setAttribute("href",i)}}],[{key:"create",value:function(t){var i=r(e.__proto__||Object.getPrototypeOf(e),"create",this).call(this,t);return t=this.sanitize(t),i.setAttribute("href",t),i.setAttribute("target","_blank"),i}},{key:"formats",value:function(t){return t.getAttribute("href")}},{key:"sanitize",value:function(t){return n(t,this.PROTOCOL_WHITELIST)?t:this.SANITIZED_URL}}]),e}();a.blotName="link",a.tagName="A",a.SANITIZED_URL="about:blank",a.PROTOCOL_WHITELIST=["http","https","mailto","tel"],e.default=a,e.sanitize=n},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(t){return t&&t.__esModule?t:{default:t}}(i(106)),s=function(){function t(e){var i=this;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.select=e,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){i.container.classList.toggle("ql-expanded")}),this.select.addEventListener("change",this.update.bind(this))}return o(t,[{key:"buildItem",value:function(t){var e=this,i=document.createElement("span");return i.classList.add("ql-picker-item"),t.hasAttribute("value")&&i.setAttribute("data-value",t.getAttribute("value")),t.textContent&&i.setAttribute("data-label",t.textContent),i.addEventListener("click",function(){e.selectItem(i,!0)}),i}},{key:"buildLabel",value:function(){var t=document.createElement("span");return t.classList.add("ql-picker-label"),t.innerHTML=r.default,this.container.appendChild(t),t}},{key:"buildOptions",value:function(){var t=this,e=document.createElement("span");e.classList.add("ql-picker-options"),[].slice.call(this.select.options).forEach(function(i){var n=t.buildItem(i);e.appendChild(n),!0===i.selected&&t.selectItem(n)}),this.container.appendChild(e)}},{key:"buildPicker",value:function(){var t=this;[].slice.call(this.select.attributes).forEach(function(e){t.container.setAttribute(e.name,e.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"close",value:function(){this.container.classList.remove("ql-expanded")}},{key:"selectItem",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.container.querySelector(".ql-selected");if(t!==i&&(null!=i&&i.classList.remove("ql-selected"),null!=t&&(t.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(t.parentNode.children,t),t.hasAttribute("data-value")?this.label.setAttribute("data-value",t.getAttribute("data-value")):this.label.removeAttribute("data-value"),t.hasAttribute("data-label")?this.label.setAttribute("data-label",t.getAttribute("data-label")):this.label.removeAttribute("data-label"),e))){if("function"==typeof Event)this.select.dispatchEvent(new Event("change"));else if("object"===("undefined"==typeof Event?"undefined":n(Event))){var o=document.createEvent("Event");o.initEvent("change",!0,!0),this.select.dispatchEvent(o)}this.close()}}},{key:"update",value:function(){var t=void 0;if(this.select.selectedIndex>-1){var e=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];t=this.select.options[this.select.selectedIndex],this.selectItem(e)}else this.selectItem(null);var i=null!=t&&t!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",i)}}]),t}();e.default=s},function(t,e,i){function n(t){var e=a.find(t);if(null==e)try{e=a.create(t)}catch(i){e=a.create(a.Scope.INLINE),[].slice.call(t.childNodes).forEach(function(t){e.domNode.appendChild(t)}),t.parentNode.replaceChild(e.domNode,t),e.attach()}return e}var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(47),s=i(27),a=i(1),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.appendChild=function(t){this.insertBefore(t)},e.prototype.attach=function(){var e=this;t.prototype.attach.call(this),this.children=new r.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(t){try{var i=n(t);e.insertBefore(i,e.children.head)}catch(t){if(t instanceof a.ParchmentError)return;throw t}})},e.prototype.deleteAt=function(t,e){if(0===t&&e===this.length())return this.remove();this.children.forEachAt(t,e,function(t,e,i){t.deleteAt(e,i)})},e.prototype.descendant=function(t,i){var n=this.children.find(i),o=n[0],r=n[1];return null==t.blotName&&t(o)||null!=t.blotName&&o instanceof t?[o,r]:o instanceof e?o.descendant(t,r):[null,-1]},e.prototype.descendants=function(t,i,n){void 0===i&&(i=0),void 0===n&&(n=Number.MAX_VALUE);var o=[],r=n;return this.children.forEachAt(i,n,function(i,n,s){(null==t.blotName&&t(i)||null!=t.blotName&&i instanceof t)&&o.push(i),i instanceof e&&(o=o.concat(i.descendants(t,n,r))),r-=s}),o},e.prototype.detach=function(){this.children.forEach(function(t){t.detach()}),t.prototype.detach.call(this)},e.prototype.formatAt=function(t,e,i,n){this.children.forEachAt(t,e,function(t,e,o){t.formatAt(e,o,i,n)})},e.prototype.insertAt=function(t,e,i){var n=this.children.find(t),o=n[0],r=n[1];if(o)o.insertAt(r,e,i);else{var s=null==i?a.create("text",e):a.create(e,i);this.appendChild(s)}},e.prototype.insertBefore=function(t,e){if(null!=this.statics.allowedChildren&&!this.statics.allowedChildren.some(function(e){return t instanceof e}))throw new a.ParchmentError("Cannot insert "+t.statics.blotName+" into "+this.statics.blotName);t.insertInto(this,e)},e.prototype.length=function(){return this.children.reduce(function(t,e){return t+e.length()},0)},e.prototype.moveChildren=function(t,e){this.children.forEach(function(i){t.insertBefore(i,e)})},e.prototype.optimize=function(e){if(t.prototype.optimize.call(this,e),0===this.children.length)if(null!=this.statics.defaultChild){var i=a.create(this.statics.defaultChild);this.appendChild(i),i.optimize(e)}else this.remove()},e.prototype.path=function(t,i){void 0===i&&(i=!1);var n=this.children.find(t,i),o=n[0],r=n[1],s=[[this,t]];return o instanceof e?s.concat(o.path(r,i)):(null!=o&&s.push([o,r]),s)},e.prototype.removeChild=function(t){this.children.remove(t)},e.prototype.replace=function(i){i instanceof e&&i.moveChildren(this),t.prototype.replace.call(this,i)},e.prototype.split=function(t,e){if(void 0===e&&(e=!1),!e){if(0===t)return this;if(t===this.length())return this.next}var i=this.clone();return this.parent.insertBefore(i,this.next),this.children.forEachAt(t,this.length(),function(t,n,o){t=t.split(n,e),i.appendChild(t)}),i},e.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},e.prototype.update=function(t,e){var i=this,o=[],r=[];t.forEach(function(t){t.target===i.domNode&&"childList"===t.type&&(o.push.apply(o,t.addedNodes),r.push.apply(r,t.removedNodes))}),r.forEach(function(t){if(!(null!=t.parentNode&&"IFRAME"!==t.tagName&&document.body.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var e=a.find(t);null!=e&&(null!=e.domNode.parentNode&&e.domNode.parentNode!==i.domNode||e.detach())}}),o.filter(function(t){return t.parentNode==i.domNode}).sort(function(t,e){return t===e?0:t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(t){var e=null;null!=t.nextSibling&&(e=a.find(t.nextSibling));var o=n(t);o.next==e&&null!=o.next||(null!=o.parent&&o.parent.removeChild(i),i.insertBefore(o,e))})},e}(s.default);e.default=l},function(t,e,i){var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=i(11),r=i(28),s=i(17),a=i(1),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.formats=function(t){return"string"==typeof this.tagName||(Array.isArray(this.tagName)?t.tagName.toLowerCase():void 0)},e.prototype.attach=function(){t.prototype.attach.call(this),this.attributes=new r.default(this.domNode)},e.prototype.format=function(t,e){var i=a.query(t);i instanceof o.default?this.attributes.attribute(i,e):e&&(null==i||t===this.statics.blotName&&this.formats()[t]===e||this.replaceWith(t,e))},e.prototype.formats=function(){var t=this.attributes.values(),e=this.statics.formats(this.domNode);return null!=e&&(t[this.statics.blotName]=e),t},e.prototype.replaceWith=function(e,i){var n=t.prototype.replaceWith.call(this,e,i);return this.attributes.copy(n),n},e.prototype.update=function(e,i){var n=this;t.prototype.update.call(this,e,i),e.some(function(t){return t.target===n.domNode&&"attributes"===t.type})&&this.attributes.build()},e.prototype.wrap=function(i,n){var o=t.prototype.wrap.call(this,i,n);return o instanceof e&&o.statics.scope===this.statics.scope&&this.attributes.move(o),o},e}(s.default);e.default=l},function(t,e,i){var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=i(27),r=i(1),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.value=function(t){return!0},e.prototype.index=function(t,e){return this.domNode===t||this.domNode.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(e,1):-1},e.prototype.position=function(t,e){var i=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return t>0&&(i+=1),[this.parent.domNode,i]},e.prototype.value=function(){return t={},t[this.statics.blotName]=this.statics.value(this.domNode)||!0,t;var t},e.scope=r.Scope.INLINE_BLOT,e}(o.default);e.default=s},function(t,e,i){function n(t){this.ops=t,this.index=0,this.offset=0}var o=i(12),r=i(2),s={attributes:{compose:function(t,e,i){"object"!=typeof t&&(t={}),"object"!=typeof e&&(e={});var n=r(!0,{},e);i||(n=Object.keys(n).reduce(function(t,e){return null!=n[e]&&(t[e]=n[e]),t},{}));for(var o in t)void 0!==t[o]&&void 0===e[o]&&(n[o]=t[o]);return Object.keys(n).length>0?n:void 0},diff:function(t,e){"object"!=typeof t&&(t={}),"object"!=typeof e&&(e={});var i=Object.keys(t).concat(Object.keys(e)).reduce(function(i,n){return o(t[n],e[n])||(i[n]=void 0===e[n]?null:e[n]),i},{});return Object.keys(i).length>0?i:void 0},transform:function(t,e,i){if("object"!=typeof t)return e;if("object"==typeof e){if(!i)return e;var n=Object.keys(e).reduce(function(i,n){return void 0===t[n]&&(i[n]=e[n]),i},{});return Object.keys(n).length>0?n:void 0}}},iterator:function(t){return new n(t)},length:function(t){return"number"==typeof t.delete?t.delete:"number"==typeof t.retain?t.retain:"string"==typeof t.insert?t.insert.length:1}};n.prototype.hasNext=function(){return this.peekLength()<1/0},n.prototype.next=function(t){t||(t=1/0);var e=this.ops[this.index];if(e){var i=this.offset,n=s.length(e);if(t>=n-i?(t=n-i,this.index+=1,this.offset=0):this.offset+=t,"number"==typeof e.delete)return{delete:t};var o={};return e.attributes&&(o.attributes=e.attributes),"number"==typeof e.retain?o.retain=t:"string"==typeof e.insert?o.insert=e.insert.substr(i,t):o.insert=e.insert,o}return{retain:1/0}},n.prototype.peek=function(){return this.ops[this.index]},n.prototype.peekLength=function(){return this.ops[this.index]?s.length(this.ops[this.index])-this.offset:1/0},n.prototype.peekType=function(){return this.ops[this.index]?"number"==typeof this.ops[this.index].delete?"delete":"number"==typeof this.ops[this.index].retain?"retain":"insert":"retain"},t.exports=s},function(t,e){var i=function(){function t(t,e){return null!=e&&t instanceof e}function e(i,a,l,c,u){function h(i,l){if(null===i)return null;if(0===l)return i;var m,g;if("object"!=typeof i)return i;if(t(i,o))m=new o;else if(t(i,r))m=new r;else if(t(i,s))m=new s(function(t,e){i.then(function(e){t(h(e,l-1))},function(t){e(h(t,l-1))})});else if(e.__isArray(i))m=[];else if(e.__isRegExp(i))m=new RegExp(i.source,n(i)),i.lastIndex&&(m.lastIndex=i.lastIndex);else if(e.__isDate(i))m=new Date(i.getTime());else{if(p&&Buffer.isBuffer(i))return m=new Buffer(i.length),i.copy(m),m;t(i,Error)?m=Object.create(i):void 0===c?(g=Object.getPrototypeOf(i),m=Object.create(g)):(m=Object.create(c),g=c)}if(a){var v=d.indexOf(i);if(-1!=v)return f[v];d.push(i),f.push(m)}t(i,o)&&i.forEach(function(t,e){var i=h(e,l-1),n=h(t,l-1);m.set(i,n)}),t(i,r)&&i.forEach(function(t){var e=h(t,l-1);m.add(e)});for(var y in i){var b;g&&(b=Object.getOwnPropertyDescriptor(g,y)),b&&null==b.set||(m[y]=h(i[y],l-1))}if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(i);for(y=0;y<_.length;y++){var w=_[y];(!(x=Object.getOwnPropertyDescriptor(i,w))||x.enumerable||u)&&(m[w]=h(i[w],l-1),x.enumerable||Object.defineProperty(m,w,{enumerable:!1}))}}if(u){var k=Object.getOwnPropertyNames(i);for(y=0;y<k.length;y++){var x,C=k[y];(x=Object.getOwnPropertyDescriptor(i,C))&&x.enumerable||(m[C]=h(i[C],l-1),Object.defineProperty(m,C,{enumerable:!1}))}}return m}"object"==typeof a&&(l=a.depth,c=a.prototype,u=a.includeNonEnumerable,a=a.circular);var d=[],f=[],p="undefined"!=typeof Buffer;return void 0===a&&(a=!0),void 0===l&&(l=1/0),h(i,l)}function i(t){return Object.prototype.toString.call(t)}function n(t){var e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),e}var o;try{o=Map}catch(t){o=function(){}}var r;try{r=Set}catch(t){r=function(){}}var s;try{s=Promise}catch(t){s=function(){}}return e.clonePrototype=function(t){if(null===t)return null;var e=function(){};return e.prototype=t,new e},e.__objToStr=i,e.__isDate=function(t){return"object"==typeof t&&"[object Date]"===i(t)},e.__isArray=function(t){return"object"==typeof t&&"[object Array]"===i(t)},e.__isRegExp=function(t){return"object"==typeof t&&"[object RegExp]"===i(t)},e.__getRegExpFlags=n,e}();"object"==typeof t&&t.exports&&(t.exports=i)},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}function o(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){try{e.parentNode}catch(t){return!1}return e instanceof Text&&(e=e.parentNode),t.contains(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.Range=void 0;var a=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],n=!0,o=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(i.push(s.value),!e||i.length!==e);n=!0);}catch(t){o=!0,r=t}finally{try{!n&&a.return&&a.return()}finally{if(o)throw r}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),c=n(i(0)),u=n(i(21)),h=n(i(12)),d=n(i(9)),f=(0,n(i(10)).default)("quill:selection"),p=function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;r(this,t),this.index=e,this.length=i},m=function(){function t(e,i){var n=this;r(this,t),this.emitter=i,this.scroll=e,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=c.default.create("cursor",this),this.lastRange=this.savedRange=new p(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){n.mouseDown||setTimeout(n.update.bind(n,d.default.sources.USER),1)}),this.emitter.on(d.default.events.EDITOR_CHANGE,function(t,e){t===d.default.events.TEXT_CHANGE&&e.length()>0&&n.update(d.default.sources.SILENT)}),this.emitter.on(d.default.events.SCROLL_BEFORE_UPDATE,function(){if(n.hasFocus()){var t=n.getNativeRange();null!=t&&t.start.node!==n.cursor.textNode&&n.emitter.once(d.default.events.SCROLL_UPDATE,function(){try{n.setNativeRange(t.start.node,t.start.offset,t.end.node,t.end.offset)}catch(t){}})}}),this.emitter.on(d.default.events.SCROLL_OPTIMIZE,function(t,e){if(e.range){var i=e.range,o=i.startNode,r=i.startOffset,s=i.endNode,a=i.endOffset;n.setNativeRange(o,r,s,a)}}),this.update(d.default.sources.SILENT)}return l(t,[{key:"handleComposition",value:function(){var t=this;this.root.addEventListener("compositionstart",function(){t.composing=!0}),this.root.addEventListener("compositionend",function(){if(t.composing=!1,t.cursor.parent){var e=t.cursor.restore();if(!e)return;setTimeout(function(){t.setNativeRange(e.startNode,e.startOffset,e.endNode,e.endOffset)},1)}})}},{key:"handleDragging",value:function(){var t=this;this.emitter.listenDOM("mousedown",document.body,function(){t.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){t.mouseDown=!1,t.update(d.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(t,e){if(null==this.scroll.whitelist||this.scroll.whitelist[t]){this.scroll.update();var i=this.getNativeRange();if(null!=i&&i.native.collapsed&&!c.default.query(t,c.default.Scope.BLOCK)){if(i.start.node!==this.cursor.textNode){var n=c.default.find(i.start.node,!1);if(null==n)return;if(n instanceof c.default.Leaf){var o=n.split(i.start.offset);n.parent.insertBefore(this.cursor,o)}else n.insertBefore(this.cursor,i.start.node);this.cursor.attach()}this.cursor.format(t,e),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=this.scroll.length();t=Math.min(t,i-1),e=Math.min(t+e,i-1)-t;var n=void 0,o=this.scroll.leaf(t),r=a(o,2),s=r[0],l=r[1];if(null==s)return null;var c=s.position(l,!0),u=a(c,2);n=u[0],l=u[1];var h=document.createRange();if(e>0){h.setStart(n,l);var d=this.scroll.leaf(t+e),f=a(d,2);if(s=f[0],l=f[1],null==s)return null;var p=s.position(l,!0),m=a(p,2);return n=m[0],l=m[1],h.setEnd(n,l),h.getBoundingClientRect()}var g="left",v=void 0;return n instanceof Text?(l<n.data.length?(h.setStart(n,l),h.setEnd(n,l+1)):(h.setStart(n,l-1),h.setEnd(n,l),g="right"),v=h.getBoundingClientRect()):(v=s.domNode.getBoundingClientRect(),l>0&&(g="right")),{bottom:v.top+v.height,height:v.height,left:v[g],right:v[g],top:v.top,width:0}}},{key:"getNativeRange",value:function(){var t=document.getSelection();if(null==t||t.rangeCount<=0)return null;var e=t.getRangeAt(0);if(null==e)return null;var i=this.normalizeNative(e);return f.info("getNativeRange",i),i}},{key:"getRange",value:function(){var t=this.getNativeRange();return null==t?[null,null]:[this.normalizedToRange(t),t]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(t){var e=this,i=[[t.start.node,t.start.offset]];t.native.collapsed||i.push([t.end.node,t.end.offset]);var n=i.map(function(t){var i=a(t,2),n=i[0],o=i[1],r=c.default.find(n,!0),s=r.offset(e.scroll);return 0===o?s:r instanceof c.default.Container?s+r.length():s+r.index(n,o)}),r=Math.min(Math.max.apply(Math,o(n)),this.scroll.length()-1),s=Math.min.apply(Math,[r].concat(o(n)));return new p(s,r-s)}},{key:"normalizeNative",value:function(t){if(!s(this.root,t.startContainer)||!t.collapsed&&!s(this.root,t.endContainer))return null;var e={start:{node:t.startContainer,offset:t.startOffset},end:{node:t.endContainer,offset:t.endOffset},native:t};return[e.start,e.end].forEach(function(t){for(var e=t.node,i=t.offset;!(e instanceof Text)&&e.childNodes.length>0;)if(e.childNodes.length>i)e=e.childNodes[i],i=0;else{if(e.childNodes.length!==i)break;i=(e=e.lastChild)instanceof Text?e.data.length:e.childNodes.length+1}t.node=e,t.offset=i}),e}},{key:"rangeToNative",value:function(t){var e=this,i=t.collapsed?[t.index]:[t.index,t.index+t.length],n=[],o=this.scroll.length();return i.forEach(function(t,i){t=Math.min(o-1,t);var r=void 0,s=e.scroll.leaf(t),l=a(s,2),c=l[0],u=l[1],h=c.position(u,0!==i),d=a(h,2);r=d[0],u=d[1],n.push(r,u)}),n.length<2&&(n=n.concat(n)),n}},{key:"scrollIntoView",value:function(t){var e=this.lastRange;if(null!=e){var i=this.getBounds(e.index,e.length);if(null!=i){var n=this.scroll.length()-1,o=this.scroll.line(Math.min(e.index,n)),r=a(o,1)[0],s=r;if(e.length>0){var l=this.scroll.line(Math.min(e.index+e.length,n));s=a(l,1)[0]}if(null!=r&&null!=s){var c=t.getBoundingClientRect();i.top<c.top?t.scrollTop-=c.top-i.top:i.bottom>c.bottom&&(t.scrollTop+=i.bottom-c.bottom)}}}}},{key:"setNativeRange",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(f.info("setNativeRange",t,e,i,n),null==t||null!=this.root.parentNode&&null!=t.parentNode&&null!=i.parentNode){var r=document.getSelection();if(null!=r)if(null!=t){this.hasFocus()||this.root.focus();var s=(this.getNativeRange()||{}).native;if(null==s||o||t!==s.startContainer||e!==s.startOffset||i!==s.endContainer||n!==s.endOffset){"BR"==t.tagName&&(e=[].indexOf.call(t.parentNode.childNodes,t),t=t.parentNode),"BR"==i.tagName&&(n=[].indexOf.call(i.parentNode.childNodes,i),i=i.parentNode);var a=document.createRange();a.setStart(t,e),a.setEnd(i,n),r.removeAllRanges(),r.addRange(a)}}else r.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d.default.sources.API;if("string"==typeof e&&(i=e,e=!1),f.info("setRange",t),null!=t){var n=this.rangeToNative(t);this.setNativeRange.apply(this,o(n).concat([e]))}else this.setNativeRange(null);this.update(i)}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d.default.sources.USER,e=this.lastRange,i=this.getRange(),n=a(i,2),o=n[0],r=n[1];if(this.lastRange=o,null!=this.lastRange&&(this.savedRange=this.lastRange),!(0,h.default)(e,this.lastRange)){var s;!this.composing&&null!=r&&r.native.collapsed&&r.start.node!==this.cursor.textNode&&this.cursor.restore();var l=[d.default.events.SELECTION_CHANGE,(0,u.default)(this.lastRange),(0,u.default)(e),t];if((s=this.emitter).emit.apply(s,[d.default.events.EDITOR_CHANGE].concat(l)),t!==d.default.sources.SILENT){var c;(c=this.emitter).emit.apply(c,l)}}}}]),t}();e.Range=p,e.default=m},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(0)),r=i(3),s=n(r),a=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.default.Container),e}();a.allowedChildren=[s.default,r.BlockEmbed,a],e.default=a},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=n(i(0)),s=n(i(8)),a="\ufeff",l=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.contentNode=document.createElement("span"),i.contentNode.setAttribute("contenteditable",!1),[].slice.call(i.domNode.childNodes).forEach(function(t){i.contentNode.appendChild(t)}),i.leftGuard=document.createTextNode(a),i.rightGuard=document.createTextNode(a),i.domNode.appendChild(i.leftGuard),i.domNode.appendChild(i.contentNode),i.domNode.appendChild(i.rightGuard),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.default.Embed),o(e,[{key:"index",value:function(t,i){return t===this.leftGuard?0:t===this.rightGuard?1:function t(e,i,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"index",this).call(this,t,i)}},{key:"restore",value:function(t){var e=void 0,i=void 0,n=t.data.split(a).join("");if(t===this.leftGuard)if(this.prev instanceof s.default){var o=this.prev.length();this.prev.insertAt(o,n),e={startNode:this.prev.domNode,startOffset:o+n.length}}else i=document.createTextNode(n),this.parent.insertBefore(r.default.create(i),this),e={startNode:i,startOffset:n.length};else t===this.rightGuard&&(this.next instanceof s.default?(this.next.insertAt(0,n),e={startNode:this.next.domNode,startOffset:n.length}):(i=document.createTextNode(n),this.parent.insertBefore(r.default.create(i),this.next),e={startNode:i,startOffset:n.length}));return t.data=a,e}},{key:"update",value:function(t,e){var i=this;t.forEach(function(t){if("characterData"===t.type&&(t.target===i.leftGuard||t.target===i.rightGuard)){var n=i.restore(t.target);n&&(e.range=n)}})}}]),e}();e.default=l},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.ColorStyle=e.ColorClass=e.ColorAttributor=void 0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=function(t){return t&&t.__esModule?t:{default:t}}(i(0)),r=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.default.Attributor.Style),n(e,[{key:"value",value:function(t){var i=function t(e,i,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"value",this).call(this,t);return i.startsWith("rgb(")?"#"+(i=i.replace(/^[^\d]+/,"").replace(/[^\d]+$/,"")).split(",").map(function(t){return("00"+parseInt(t).toString(16)).slice(-2)}).join(""):i}}]),e}(),s=new o.default.Attributor.Class("color","ql-color",{scope:o.default.Scope.INLINE}),a=new r("color","color",{scope:o.default.Scope.INLINE});e.ColorAttributor=r,e.ColorClass=s,e.ColorStyle=a},function(t,e,i){t.exports={align:{"":i(75),center:i(76),right:i(77),justify:i(78)},background:i(79),blockquote:i(80),bold:i(81),clean:i(82),code:i(40),"code-block":i(40),color:i(83),direction:{"":i(84),rtl:i(85)},float:{center:i(86),full:i(87),left:i(88),right:i(89)},formula:i(90),header:{1:i(91),2:i(92)},italic:i(93),image:i(94),indent:{"+1":i(95),"-1":i(96)},link:i(97),list:{ordered:i(98),bullet:i(99),check:i(100)},script:{sub:i(101),super:i(102)},strike:i(103),underline:i(104),video:i(105)}},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(1),o=function(){function t(t){this.domNode=t,this.attach()}return Object.defineProperty(t.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),t.create=function(t){if(null==this.tagName)throw new n.ParchmentError("Blot definition missing tagName");var e;return Array.isArray(this.tagName)?("string"==typeof t&&(t=t.toUpperCase(),parseInt(t).toString()===t&&(t=parseInt(t))),e="number"==typeof t?document.createElement(this.tagName[t-1]):this.tagName.indexOf(t)>-1?document.createElement(t):document.createElement(this.tagName[0])):e=document.createElement(this.tagName),this.className&&e.classList.add(this.className),e},t.prototype.attach=function(){this.domNode[n.DATA_KEY]={blot:this}},t.prototype.clone=function(){var t=this.domNode.cloneNode(!1);return n.create(t)},t.prototype.detach=function(){null!=this.parent&&this.parent.removeChild(this),delete this.domNode[n.DATA_KEY]},t.prototype.deleteAt=function(t,e){this.isolate(t,e).remove()},t.prototype.formatAt=function(t,e,i,o){var r=this.isolate(t,e);if(null!=n.query(i,n.Scope.BLOT)&&o)r.wrap(i,o);else if(null!=n.query(i,n.Scope.ATTRIBUTE)){var s=n.create(this.statics.scope);r.wrap(s),s.format(i,o)}},t.prototype.insertAt=function(t,e,i){var o=null==i?n.create("text",e):n.create(e,i),r=this.split(t);this.parent.insertBefore(o,r)},t.prototype.insertInto=function(t,e){if(null!=this.parent&&this.parent.children.remove(this),t.children.insertBefore(this,e),null!=e)var i=e.domNode;null!=this.next&&this.domNode.nextSibling==i||t.domNode.insertBefore(this.domNode,void 0!==i?i:null),this.parent=t,this.scroll=t.scroll},t.prototype.isolate=function(t,e){var i=this.split(t);return i.split(e),i},t.prototype.length=function(){return 1},t.prototype.offset=function(t){return void 0===t&&(t=this.parent),null==this.parent||this==t?0:this.parent.children.offset(this)+this.parent.offset(t)},t.prototype.optimize=function(t){null!=this.domNode[n.DATA_KEY]&&delete this.domNode[n.DATA_KEY].mutations},t.prototype.remove=function(){null!=this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},t.prototype.replace=function(t){null!=t.parent&&(t.parent.insertBefore(this,t.next),t.remove())},t.prototype.replaceWith=function(t,e){var i="string"==typeof t?n.create(t,e):t;return i.replace(this),i},t.prototype.split=function(t,e){return 0===t?this:this.next},t.prototype.update=function(t,e){},t.prototype.wrap=function(t,e){var i="string"==typeof t?n.create(t,e):t;return null!=this.parent&&this.parent.insertBefore(i,this.next),i.appendChild(this),i},t.blotName="abstract",t}();e.default=o},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(11),o=i(29),r=i(30),s=i(1),a=function(){function t(t){this.attributes={},this.domNode=t,this.build()}return t.prototype.attribute=function(t,e){e?t.add(this.domNode,e)&&(null!=t.value(this.domNode)?this.attributes[t.attrName]=t:delete this.attributes[t.attrName]):(t.remove(this.domNode),delete this.attributes[t.attrName])},t.prototype.build=function(){var t=this;this.attributes={};var e=n.default.keys(this.domNode),i=o.default.keys(this.domNode),a=r.default.keys(this.domNode);e.concat(i).concat(a).forEach(function(e){var i=s.query(e,s.Scope.ATTRIBUTE);i instanceof n.default&&(t.attributes[i.attrName]=i)})},t.prototype.copy=function(t){var e=this;Object.keys(this.attributes).forEach(function(i){var n=e.attributes[i].value(e.domNode);t.format(i,n)})},t.prototype.move=function(t){var e=this;this.copy(t),Object.keys(this.attributes).forEach(function(t){e.attributes[t].remove(e.domNode)}),this.attributes={}},t.prototype.values=function(){var t=this;return Object.keys(this.attributes).reduce(function(e,i){return e[i]=t.attributes[i].value(t.domNode),e},{})},t}();e.default=a},function(t,e,i){function n(t,e){return(t.getAttribute("class")||"").split(/\s+/).filter(function(t){return 0===t.indexOf(e+"-")})}var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.keys=function(t){return(t.getAttribute("class")||"").split(/\s+/).map(function(t){return t.split("-").slice(0,-1).join("-")})},e.prototype.add=function(t,e){return!!this.canAdd(t,e)&&(this.remove(t),t.classList.add(this.keyName+"-"+e),!0)},e.prototype.remove=function(t){n(t,this.keyName).forEach(function(e){t.classList.remove(e)}),0===t.classList.length&&t.removeAttribute("class")},e.prototype.value=function(t){var e=(n(t,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(t,e)?e:""},e}(i(11).default);e.default=r},function(t,e,i){function n(t){var e=t.split("-"),i=e.slice(1).map(function(t){return t[0].toUpperCase()+t.slice(1)}).join("");return e[0]+i}var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.keys=function(t){return(t.getAttribute("style")||"").split(";").map(function(t){return t.split(":")[0].trim()})},e.prototype.add=function(t,e){return!!this.canAdd(t,e)&&(t.style[n(this.keyName)]=e,!0)},e.prototype.remove=function(t){t.style[n(this.keyName)]="",t.getAttribute("style")||t.removeAttribute("style")},e.prototype.value=function(t){var e=t.style[n(this.keyName)];return this.canAdd(t,e)?e:""},e}(i(11).default);e.default=r},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],n=!0,o=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(i.push(s.value),!e||i.length!==e);n=!0);}catch(t){o=!0,r=t}finally{try{!n&&a.return&&a.return()}finally{if(o)throw r}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=function t(e,i,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0},s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=n(i(0)),l=n(i(8)),c=function(t){function e(t,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.selection=i,n.textNode=document.createTextNode(e.CONTENTS),n.domNode.appendChild(n.textNode),n._length=0,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default.Embed),s(e,null,[{key:"value",value:function(){}}]),s(e,[{key:"detach",value:function(){null!=this.parent&&this.parent.removeChild(this)}},{key:"format",value:function(t,i){if(0!==this._length)return r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"format",this).call(this,t,i);for(var n=this,o=0;null!=n&&n.statics.scope!==a.default.Scope.BLOCK_BLOT;)o+=n.offset(n.parent),n=n.parent;null!=n&&(this._length=e.CONTENTS.length,n.optimize(),n.formatAt(o,e.CONTENTS.length,t,i),this._length=0)}},{key:"index",value:function(t,i){return t===this.textNode?0:r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"index",this).call(this,t,i)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!this.selection.composing&&null!=this.parent){var t=this.textNode,i=this.selection.getNativeRange(),n=void 0,r=void 0,s=void 0;if(null!=i&&i.start.node===t&&i.end.node===t){var c=[t,i.start.offset,i.end.offset];n=c[0],r=c[1],s=c[2]}for(;null!=this.domNode.lastChild&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==e.CONTENTS){var u=this.textNode.data.split(e.CONTENTS).join("");this.next instanceof l.default?(n=this.next.domNode,this.next.insertAt(0,u),this.textNode.data=e.CONTENTS):(this.textNode.data=u,this.parent.insertBefore(a.default.create(this.textNode),this),this.textNode=document.createTextNode(e.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),null!=r){var h=[r,s].map(function(t){return Math.max(0,Math.min(n.data.length,t-1))}),d=o(h,2);return r=d[0],s=d[1],{startNode:n,startOffset:r,endNode:n,endOffset:s}}}}},{key:"update",value:function(t,e){var i=this;if(t.some(function(t){return"characterData"===t.type&&t.target===i.textNode})){var n=this.restore();n&&(e.range=n)}}},{key:"value",value:function(){return""}}]),e}();c.blotName="cursor",c.className="ql-cursor",c.tagName="span",c.CONTENTS="\ufeff",e.default=c},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=function(){function t(e,i){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.quill=e,this.options=i,this.modules={}}return n(t,[{key:"init",value:function(){var t=this;Object.keys(this.options.modules).forEach(function(e){null==t.modules[e]&&t.addModule(e)})}},{key:"addModule",value:function(t){var e=this.quill.constructor.import("modules/"+t);return this.modules[t]=new e(this.quill,this.options.modules[t]||{}),this.modules[t]}}]),t}();o.DEFAULTS={modules:{}},o.themes={default:o},e.default=o},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.AlignStyle=e.AlignClass=e.AlignAttribute=void 0;var n=function(t){return t&&t.__esModule?t:{default:t}}(i(0)),o={scope:n.default.Scope.BLOCK,whitelist:["right","center","justify"]},r=new n.default.Attributor.Attribute("align","align",o),s=new n.default.Attributor.Class("align","ql-align",o),a=new n.default.Attributor.Style("align","text-align",o);e.AlignAttribute=r,e.AlignClass=s,e.AlignStyle=a},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.BackgroundStyle=e.BackgroundClass=void 0;var n=function(t){return t&&t.__esModule?t:{default:t}}(i(0)),o=i(25),r=new n.default.Attributor.Class("background","ql-bg",{scope:n.default.Scope.INLINE}),s=new o.ColorAttributor("background","background-color",{scope:n.default.Scope.INLINE});e.BackgroundClass=r,e.BackgroundStyle=s},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.DirectionStyle=e.DirectionClass=e.DirectionAttribute=void 0;var n=function(t){return t&&t.__esModule?t:{default:t}}(i(0)),o={scope:n.default.Scope.BLOCK,whitelist:["rtl"]},r=new n.default.Attributor.Attribute("direction","dir",o),s=new n.default.Attributor.Class("direction","ql-direction",o),a=new n.default.Attributor.Style("direction","direction",o);e.DirectionAttribute=r,e.DirectionClass=s,e.DirectionStyle=a},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.FontClass=e.FontStyle=void 0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=function(t){return t&&t.__esModule?t:{default:t}}(i(0)),r={scope:o.default.Scope.INLINE,whitelist:["serif","monospace"]},s=new o.default.Attributor.Class("font","ql-font",r),a=new(function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.default.Attributor.Style),n(e,[{key:"value",value:function(t){return function t(e,i,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"value",this).call(this,t).replace(/["']/g,"")}}]),e}())("font","font-family",r);e.FontStyle=a,e.FontClass=s},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.SizeStyle=e.SizeClass=void 0;var n=function(t){return t&&t.__esModule?t:{default:t}}(i(0)),o=new n.default.Attributor.Class("size","ql-size",{scope:n.default.Scope.INLINE,whitelist:["small","large","huge"]}),r=new n.default.Attributor.Style("size","font-size",{scope:n.default.Scope.INLINE,whitelist:["10px","18px","32px"]});e.SizeClass=o,e.SizeStyle=r},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}function o(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function r(t,e){var i,n=t===O.keys.LEFT?"prefix":"suffix";return i={key:t,shiftKey:e},o(i,n,/^$/),o(i,"handler",function(i){var n=i.index;t===O.keys.RIGHT&&(n+=i.length+1);var o=this.quill.getLeaf(n);return!(p(o,1)[0]instanceof k.default&&(t===O.keys.LEFT?e?this.quill.setSelection(i.index-1,i.length+1,x.default.sources.USER):this.quill.setSelection(i.index-1,x.default.sources.USER):e?this.quill.setSelection(i.index,i.length+1,x.default.sources.USER):this.quill.setSelection(i.index+i.length+1,x.default.sources.USER),1))}),i}function s(t,e){if(!(0===t.index||this.quill.getLength()<=1)){var i=this.quill.getLine(t.index),n=p(i,1)[0],o={};if(0===e.offset){var r=this.quill.getLine(t.index-1),s=p(r,1)[0];if(null!=s&&s.length()>1){var a=n.formats(),l=this.quill.getFormat(t.index-1,1);o=_.default.attributes.diff(a,l)||{}}}var c=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(e.prefix)?2:1;this.quill.deleteText(t.index-c,c,x.default.sources.USER),Object.keys(o).length>0&&this.quill.formatLine(t.index-c,c,o,x.default.sources.USER),this.quill.focus()}}function a(t,e){var i=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(e.suffix)?2:1;if(!(t.index>=this.quill.getLength()-i)){var n={},o=0,r=this.quill.getLine(t.index),s=p(r,1)[0];if(e.offset>=s.length()-1){var a=this.quill.getLine(t.index+1),l=p(a,1)[0];if(l){var c=s.formats(),u=this.quill.getFormat(t.index,1);n=_.default.attributes.diff(c,u)||{},o=l.length()}}this.quill.deleteText(t.index,i,x.default.sources.USER),Object.keys(n).length>0&&this.quill.formatLine(t.index+o-1,i,n,x.default.sources.USER)}}function l(t){var e=this.quill.getLines(t),i={};if(e.length>1){var n=e[0].formats(),o=e[e.length-1].formats();i=_.default.attributes.diff(o,n)||{}}this.quill.deleteText(t,x.default.sources.USER),Object.keys(i).length>0&&this.quill.formatLine(t.index,1,i,x.default.sources.USER),this.quill.setSelection(t.index,x.default.sources.SILENT),this.quill.focus()}function c(t,e){var i=this;t.length>0&&this.quill.scroll.deleteAt(t.index,t.length);var n=Object.keys(e.format).reduce(function(t,i){return w.default.query(i,w.default.Scope.BLOCK)&&!Array.isArray(e.format[i])&&(t[i]=e.format[i]),t},{});this.quill.insertText(t.index,"\n",n,x.default.sources.USER),this.quill.setSelection(t.index+1,x.default.sources.SILENT),this.quill.focus(),Object.keys(e.format).forEach(function(t){null==n[t]&&(Array.isArray(e.format[t])||"link"!==t&&i.quill.format(t,e.format[t],x.default.sources.USER))})}function u(t){return{key:O.keys.TAB,shiftKey:!t,format:{"code-block":!0},handler:function(e){var i=w.default.query("code-block"),n=e.index,o=e.length,r=this.quill.scroll.descendant(i,n),s=p(r,2),a=s[0],l=s[1];if(null!=a){var c=this.quill.getIndex(a),u=a.newlineIndex(l,!0)+1,h=a.newlineIndex(c+l+o),d=a.domNode.textContent.slice(u,h).split("\n");l=0,d.forEach(function(e,r){t?(a.insertAt(u+l,i.TAB),l+=i.TAB.length,0===r?n+=i.TAB.length:o+=i.TAB.length):e.startsWith(i.TAB)&&(a.deleteAt(u+l,i.TAB.length),l-=i.TAB.length,0===r?n-=i.TAB.length:o-=i.TAB.length),l+=e.length+1}),this.quill.update(x.default.sources.USER),this.quill.setSelection(n,o,x.default.sources.SILENT)}}}}function h(t){return{key:t[0].toUpperCase(),shortKey:!0,handler:function(e,i){this.quill.format(t,!i.format[t],x.default.sources.USER)}}}function d(t){if("string"==typeof t||"number"==typeof t)return d({key:t});if("object"===(void 0===t?"undefined":f(t))&&(t=(0,g.default)(t,!1)),"string"==typeof t.key)if(null!=O.keys[t.key.toUpperCase()])t.key=O.keys[t.key.toUpperCase()];else{if(1!==t.key.length)return null;t.key=t.key.toUpperCase().charCodeAt(0)}return t.shortKey&&(t[E]=t.shortKey,delete t.shortKey),t}Object.defineProperty(e,"__esModule",{value:!0}),e.SHORTKEY=e.default=void 0;var f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],n=!0,o=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(i.push(s.value),!e||i.length!==e);n=!0);}catch(t){o=!0,r=t}finally{try{!n&&a.return&&a.return()}finally{if(o)throw r}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),m=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),g=n(i(21)),v=n(i(12)),y=n(i(2)),b=n(i(4)),_=n(i(20)),w=n(i(0)),k=n(i(24)),x=n(i(6)),C=n(i(10)),T=n(i(7)),D=(0,C.default)("quill:keyboard"),E=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",O=function(t){function e(t,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i));return n.bindings={},Object.keys(n.options.bindings).forEach(function(e){("list autofill"!==e||null==t.scroll.whitelist||t.scroll.whitelist.list)&&n.options.bindings[e]&&n.addBinding(n.options.bindings[e])}),n.addBinding({key:e.keys.ENTER,shiftKey:null},c),n.addBinding({key:e.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(n.addBinding({key:e.keys.BACKSPACE},{collapsed:!0},s),n.addBinding({key:e.keys.DELETE},{collapsed:!0},a)):(n.addBinding({key:e.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},s),n.addBinding({key:e.keys.DELETE},{collapsed:!0,suffix:/^.?$/},a)),n.addBinding({key:e.keys.BACKSPACE},{collapsed:!1},l),n.addBinding({key:e.keys.DELETE},{collapsed:!1},l),n.addBinding({key:e.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},s),n.listen(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,T.default),m(e,null,[{key:"match",value:function(t,e){return e=d(e),!["altKey","ctrlKey","metaKey","shiftKey"].some(function(i){return!!e[i]!==t[i]&&null!==e[i]})&&e.key===(t.which||t.keyCode)}}]),m(e,[{key:"addBinding",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=d(t);if(null==n||null==n.key)return D.warn("Attempted to add invalid keyboard binding",n);"function"==typeof e&&(e={handler:e}),"function"==typeof i&&(i={handler:i}),n=(0,y.default)(n,e,i),this.bindings[n.key]=this.bindings[n.key]||[],this.bindings[n.key].push(n)}},{key:"listen",value:function(){var t=this;this.quill.root.addEventListener("keydown",function(i){if(!i.defaultPrevented){var n=i.which||i.keyCode,o=(t.bindings[n]||[]).filter(function(t){return e.match(i,t)});if(0!==o.length){var r=t.quill.getSelection();if(null!=r&&t.quill.hasFocus()){var s=t.quill.getLine(r.index),a=p(s,2),l=a[0],c=a[1],u=t.quill.getLeaf(r.index),h=p(u,2),d=h[0],m=h[1],g=0===r.length?[d,m]:t.quill.getLeaf(r.index+r.length),y=p(g,2),b=y[0],_=y[1],k=d instanceof w.default.Text?d.value().slice(0,m):"",x=b instanceof w.default.Text?b.value().slice(_):"",C={collapsed:0===r.length,empty:0===r.length&&l.length()<=1,format:t.quill.getFormat(r),offset:c,prefix:k,suffix:x};o.some(function(e){if(null!=e.collapsed&&e.collapsed!==C.collapsed)return!1;if(null!=e.empty&&e.empty!==C.empty)return!1;if(null!=e.offset&&e.offset!==C.offset)return!1;if(Array.isArray(e.format)){if(e.format.every(function(t){return null==C.format[t]}))return!1}else if("object"===f(e.format)&&!Object.keys(e.format).every(function(t){return!0===e.format[t]?null!=C.format[t]:!1===e.format[t]?null==C.format[t]:(0,v.default)(e.format[t],C.format[t])}))return!1;return!(null!=e.prefix&&!e.prefix.test(C.prefix)||null!=e.suffix&&!e.suffix.test(C.suffix)||!0===e.handler.call(t,r,C))})&&i.preventDefault()}}}})}}]),e}();O.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},O.DEFAULTS={bindings:{bold:h("bold"),italic:h("italic"),underline:h("underline"),indent:{key:O.keys.TAB,format:["blockquote","indent","list"],handler:function(t,e){if(e.collapsed&&0!==e.offset)return!0;this.quill.format("indent","+1",x.default.sources.USER)}},outdent:{key:O.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(t,e){if(e.collapsed&&0!==e.offset)return!0;this.quill.format("indent","-1",x.default.sources.USER)}},"outdent backspace":{key:O.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(t,e){null!=e.format.indent?this.quill.format("indent","-1",x.default.sources.USER):null!=e.format.list&&this.quill.format("list",!1,x.default.sources.USER)}},"indent code-block":u(!0),"outdent code-block":u(!1),"remove tab":{key:O.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(t){this.quill.deleteText(t.index-1,1,x.default.sources.USER)}},tab:{key:O.keys.TAB,handler:function(t){this.quill.history.cutoff();var e=(new b.default).retain(t.index).delete(t.length).insert("\t");this.quill.updateContents(e,x.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(t.index+1,x.default.sources.SILENT)}},"list empty enter":{key:O.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(t,e){this.quill.format("list",!1,x.default.sources.USER),e.format.indent&&this.quill.format("indent",!1,x.default.sources.USER)}},"checklist enter":{key:O.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(t){var e=this.quill.getLine(t.index),i=p(e,2),n=i[0],o=i[1],r=(new b.default).retain(t.index).insert("\n",{list:"checked"}).retain(n.length()-o-1).retain(1,{list:"unchecked"});this.quill.updateContents(r,x.default.sources.USER),this.quill.setSelection(t.index+1,x.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:O.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(t,e){var i=this.quill.getLine(t.index),n=p(i,2),o=n[0],r=n[1],s=(new b.default).retain(t.index).insert("\n",e.format).retain(o.length()-r-1).retain(1,{header:null});this.quill.updateContents(s,x.default.sources.USER),this.quill.setSelection(t.index+1,x.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\[ ?\]|\[x\])$/,handler:function(t,e){var i=e.prefix.length,n=this.quill.getLine(t.index),o=p(n,2),r=o[0],s=o[1];if(s>i)return!0;var a=void 0;switch(e.prefix.trim()){case"[]":case"[ ]":a="unchecked";break;case"[x]":a="checked";break;case"-":a="bullet";break;default:a="ordered"}this.quill.insertText(t.index," ",x.default.sources.USER),this.quill.history.cutoff();var l=(new b.default).retain(t.index-s).delete(i+1).retain(r.length()-2-s).retain(1,{list:a});this.quill.updateContents(l,x.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(t.index-i,x.default.sources.SILENT)}},"code exit":{key:O.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(t){var e=this.quill.getLine(t.index),i=p(e,2),n=i[0],o=i[1],r=(new b.default).retain(t.index+n.length()-o-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(r,x.default.sources.USER)}},"embed left":r(O.keys.LEFT,!1),"embed left shift":r(O.keys.LEFT,!0),"embed right":r(O.keys.RIGHT,!1),"embed right shift":r(O.keys.RIGHT,!0)}},e.default=O,e.SHORTKEY=E},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=function t(e,i,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0},r=function(t){return t&&t.__esModule?t:{default:t}}(i(5)),s=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.default),n(e,[{key:"optimize",value:function(t){o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"optimize",this).call(this,t),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return o(e.__proto__||Object.getPrototypeOf(e),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),e}();s.blotName="bold",s.tagName=["STRONG","B"],e.default=s},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=function t(e,i,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0},r=function(t){return t&&t.__esModule?t:{default:t}}(i(16)),s=function(t){function e(t,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.label.innerHTML=i,n.container.classList.add("ql-color-picker"),[].slice.call(n.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(t){t.classList.add("ql-primary")}),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.default),n(e,[{key:"buildItem",value:function(t){var i=o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"buildItem",this).call(this,t);return i.style.backgroundColor=t.getAttribute("value")||"",i}},{key:"selectItem",value:function(t,i){o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"selectItem",this).call(this,t,i);var n=this.label.querySelector(".ql-color-label"),r=t?t.getAttribute("data-value")||"":"";n&&("line"===n.tagName?n.style.stroke=r:n.style.fill=r)}}]),e}();e.default=s},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=function(t){return t&&t.__esModule?t:{default:t}}(i(16)),r=function(t){function e(t,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.container.classList.add("ql-icon-picker"),[].forEach.call(n.container.querySelectorAll(".ql-picker-item"),function(t){t.innerHTML=i[t.getAttribute("data-value")||""]}),n.defaultItem=n.container.querySelector(".ql-selected"),n.selectItem(n.defaultItem),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.default),n(e,[{key:"selectItem",value:function(t,i){(function t(e,i,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0})(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"selectItem",this).call(this,t,i),t=t||this.defaultItem,this.label.innerHTML=t.innerHTML}}]),e}();e.default=r},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=function(){function t(e,i){var n=this;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.quill=e,this.boundsContainer=i||document.body,this.root=e.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){n.root.style.marginTop=-1*n.quill.root.scrollTop+"px"}),this.hide()}return n(t,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(t){var e=t.left+t.width/2-this.root.offsetWidth/2,i=t.bottom+this.quill.root.scrollTop;this.root.style.left=e+"px",this.root.style.top=i+"px",this.root.classList.remove("ql-flip");var n=this.boundsContainer.getBoundingClientRect(),o=this.root.getBoundingClientRect(),r=0;if(o.right>n.right&&(r=n.right-o.right,this.root.style.left=e+r+"px"),o.left<n.left&&(r=n.left-o.left,this.root.style.left=e+r+"px"),o.bottom>n.bottom){var s=o.bottom-o.top,a=t.bottom-t.top+s;this.root.style.top=i-a+"px",this.root.classList.add("ql-flip")}return r}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),t}();e.default=o},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e.forEach(function(e){var n=document.createElement("option");e===i?n.setAttribute("selected","selected"):n.setAttribute("value",e),t.appendChild(n)})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.BaseTooltip=void 0;var l=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),c=n(i(2)),u=n(i(4)),h=n(i(9)),d=n(i(38)),f=n(i(32)),p=n(i(41)),m=n(i(42)),g=n(i(16)),v=n(i(43)),y=[!1,"center","right","justify"],b=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],_=[!1,"serif","monospace"],w=["1","2","3",!1],k=["small",!1,"large","huge"],x=function(t){function e(t,i){o(this,e);var n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i));return t.emitter.listenDOM("click",document.body,function e(i){if(!document.body.contains(t.root))return document.body.removeEventListener("click",e);null==n.tooltip||n.tooltip.root.contains(i.target)||document.activeElement===n.tooltip.textbox||n.quill.hasFocus()||n.tooltip.hide(),null!=n.pickers&&n.pickers.forEach(function(t){t.container.contains(i.target)||t.close()})}),n}return s(e,f.default),l(e,[{key:"addModule",value:function(t){var i=function t(e,i,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"addModule",this).call(this,t);return"toolbar"===t&&this.extendToolbar(i),i}},{key:"buildButtons",value:function(t,e){t.forEach(function(t){(t.getAttribute("class")||"").split(/\s+/).forEach(function(i){if(i.startsWith("ql-")&&(i=i.slice("ql-".length),null!=e[i]))if("direction"===i)t.innerHTML=e[i][""]+e[i].rtl;else if("string"==typeof e[i])t.innerHTML=e[i];else{var n=t.value||"";null!=n&&e[i][n]&&(t.innerHTML=e[i][n])}})})}},{key:"buildPickers",value:function(t,e){var i=this;this.pickers=t.map(function(t){if(t.classList.contains("ql-align"))return null==t.querySelector("option")&&a(t,y),new m.default(t,e.align);if(t.classList.contains("ql-background")||t.classList.contains("ql-color")){var i=t.classList.contains("ql-background")?"background":"color";return null==t.querySelector("option")&&a(t,b,"background"===i?"#ffffff":"#000000"),new p.default(t,e[i])}return null==t.querySelector("option")&&(t.classList.contains("ql-font")?a(t,_):t.classList.contains("ql-header")?a(t,w):t.classList.contains("ql-size")&&a(t,k)),new g.default(t)});this.quill.on(h.default.events.EDITOR_CHANGE,function(){i.pickers.forEach(function(t){t.update()})})}}]),e}();x.DEFAULTS=(0,c.default)(!0,{},f.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var t=this,e=this.container.querySelector("input.ql-image[type=file]");null==e&&((e=document.createElement("input")).setAttribute("type","file"),e.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),e.classList.add("ql-image"),e.addEventListener("change",function(){if(null!=e.files&&null!=e.files[0]){var i=new FileReader;i.onload=function(i){var n=t.quill.getSelection(!0);t.quill.updateContents((new u.default).retain(n.index).delete(n.length).insert({image:i.target.result}),h.default.sources.USER),t.quill.setSelection(n.index+1,h.default.sources.SILENT),e.value=""},i.readAsDataURL(e.files[0])}}),this.container.appendChild(e)),e.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var C=function(t){function e(t,i){o(this,e);var n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i));return n.textbox=n.root.querySelector('input[type="text"]'),n.listen(),n}return s(e,v.default),l(e,[{key:"listen",value:function(){var t=this;this.textbox.addEventListener("keydown",function(e){d.default.match(e,"enter")?(t.save(),e.preventDefault()):d.default.match(e,"escape")&&(t.cancel(),e.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"link",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),null!=e?this.textbox.value=e:t!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+t)||""),this.root.setAttribute("data-mode",t)}},{key:"restoreFocus",value:function(){var t=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=t}},{key:"save",value:function(){var t=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":var e=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",t,h.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",t,h.default.sources.USER)),this.quill.root.scrollTop=e;break;case"video":t=function(t){var e=t.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||t.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return e?(e[1]||"https")+"://www.youtube.com/embed/"+e[2]+"?showinfo=0":(e=t.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(e[1]||"https")+"://player.vimeo.com/video/"+e[2]+"/":t}(t);case"formula":if(!t)break;var i=this.quill.getSelection(!0);if(null!=i){var n=i.index+i.length;this.quill.insertEmbed(n,this.root.getAttribute("data-mode"),t,h.default.sources.USER),"formula"===this.root.getAttribute("data-mode")&&this.quill.insertText(n+1," ",h.default.sources.USER),this.quill.setSelection(n+2,h.default.sources.USER)}}this.textbox.value="",this.hide()}}]),e}();e.BaseTooltip=C,e.default=x},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(46)),r=i(33),s=i(35),a=i(62),l=n(i(63)),c=n(i(64)),u=i(65),h=n(u),d=i(34),f=i(25),p=i(36),m=i(37),g=n(i(39)),v=n(i(66)),y=n(i(15)),b=n(i(67)),_=n(i(68)),w=n(i(69)),k=n(i(70)),x=n(i(71)),C=i(13),T=n(C),D=n(i(72)),E=n(i(73)),O=n(i(74)),S=n(i(26)),M=n(i(16)),I=n(i(41)),A=n(i(42)),P=n(i(43)),N=n(i(107)),j=n(i(108));o.default.register({"attributors/attribute/direction":s.DirectionAttribute,"attributors/class/align":r.AlignClass,"attributors/class/background":d.BackgroundClass,"attributors/class/color":f.ColorClass,"attributors/class/direction":s.DirectionClass,"attributors/class/font":p.FontClass,"attributors/class/size":m.SizeClass,"attributors/style/align":r.AlignStyle,"attributors/style/background":d.BackgroundStyle,"attributors/style/color":f.ColorStyle,"attributors/style/direction":s.DirectionStyle,"attributors/style/font":p.FontStyle,"attributors/style/size":m.SizeStyle},!0),o.default.register({"formats/align":r.AlignClass,"formats/direction":s.DirectionClass,"formats/indent":a.IndentClass,"formats/background":d.BackgroundStyle,"formats/color":f.ColorStyle,"formats/font":p.FontClass,"formats/size":m.SizeClass,"formats/blockquote":l.default,"formats/code-block":T.default,"formats/header":c.default,"formats/list":h.default,"formats/bold":g.default,"formats/code":C.Code,"formats/italic":v.default,"formats/link":y.default,"formats/script":b.default,"formats/strike":_.default,"formats/underline":w.default,"formats/image":k.default,"formats/video":x.default,"formats/list/item":u.ListItem,"modules/formula":D.default,"modules/syntax":E.default,"modules/toolbar":O.default,"themes/bubble":N.default,"themes/snow":j.default,"ui/icons":S.default,"ui/picker":M.default,"ui/icon-picker":A.default,"ui/color-picker":I.default,"ui/tooltip":P.default},!0),e.default=o.default},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(0)),r=n(i(6)),s=i(3),a=n(s),l=n(i(14)),c=n(i(23)),u=n(i(31)),h=n(i(24)),d=n(i(5)),f=n(i(59)),p=n(i(8)),m=n(i(60)),g=n(i(61)),v=n(i(38));r.default.register({"blots/block":a.default,"blots/block/embed":s.BlockEmbed,"blots/break":l.default,"blots/container":c.default,"blots/cursor":u.default,"blots/embed":h.default,"blots/inline":d.default,"blots/scroll":f.default,"blots/text":p.default,"modules/clipboard":m.default,"modules/history":g.default,"modules/keyboard":v.default}),o.default.register(a.default,l.default,u.default,d.default,f.default,p.default),e.default=r.default},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){this.head=this.tail=void 0,this.length=0}return t.prototype.append=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.insertBefore(t[0],void 0),t.length>1&&this.append.apply(this,t.slice(1))},t.prototype.contains=function(t){for(var e,i=this.iterator();e=i();)if(e===t)return!0;return!1},t.prototype.insertBefore=function(t,e){t.next=e,null!=e?(t.prev=e.prev,null!=e.prev&&(e.prev.next=t),e.prev=t,e===this.head&&(this.head=t)):null!=this.tail?(this.tail.next=t,t.prev=this.tail,this.tail=t):(t.prev=void 0,this.head=this.tail=t),this.length+=1},t.prototype.offset=function(t){for(var e=0,i=this.head;null!=i;){if(i===t)return e;e+=i.length(),i=i.next}return-1},t.prototype.remove=function(t){this.contains(t)&&(null!=t.prev&&(t.prev.next=t.next),null!=t.next&&(t.next.prev=t.prev),t===this.head&&(this.head=t.next),t===this.tail&&(this.tail=t.prev),this.length-=1)},t.prototype.iterator=function(t){return void 0===t&&(t=this.head),function(){var e=t;return null!=t&&(t=t.next),e}},t.prototype.find=function(t,e){void 0===e&&(e=!1);for(var i,n=this.iterator();i=n();){var o=i.length();if(t<o||e&&t===o&&(null==i.next||0!==i.next.length()))return[i,t];t-=o}return[null,0]},t.prototype.forEach=function(t){for(var e,i=this.iterator();e=i();)t(e)},t.prototype.forEachAt=function(t,e,i){if(!(e<=0))for(var n,o=this.find(t),r=o[0],s=o[1],a=t-s,l=this.iterator(r);(n=l())&&a<t+e;){var c=n.length();t>a?i(n,t-a,Math.min(e,a+c-t)):i(n,0,Math.min(c,t+e-a)),a+=c}},t.prototype.map=function(t){return this.reduce(function(e,i){return e.push(t(i)),e},[])},t.prototype.reduce=function(t,e){for(var i,n=this.iterator();i=n();)e=t(e,i);return e},t}();e.default=n},function(t,e,i){var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=i(17),r=i(1),s={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},a=function(t){function e(e){var i=t.call(this,e)||this;return i.parent=null,i.observer=new MutationObserver(function(t){i.update(t)}),i.observer.observe(i.domNode,s),i.scroll=i,i}return n(e,t),e.prototype.detach=function(){t.prototype.detach.call(this),this.observer.disconnect()},e.prototype.deleteAt=function(e,i){this.update(),0===e&&i===this.length()?this.children.forEach(function(t){t.remove()}):t.prototype.deleteAt.call(this,e,i)},e.prototype.formatAt=function(e,i,n,o){this.update(),t.prototype.formatAt.call(this,e,i,n,o)},e.prototype.insertAt=function(e,i,n){this.update(),t.prototype.insertAt.call(this,e,i,n)},e.prototype.optimize=function(e,i){var n=this;void 0===e&&(e=[]),void 0===i&&(i={}),t.prototype.optimize.call(this,i);for(var s=[].slice.call(this.observer.takeRecords());s.length>0;)e.push(s.pop());for(var a=function(t,e){void 0===e&&(e=!0),null!=t&&t!==n&&null!=t.domNode.parentNode&&(null==t.domNode[r.DATA_KEY].mutations&&(t.domNode[r.DATA_KEY].mutations=[]),e&&a(t.parent))},l=function(t){null!=t.domNode[r.DATA_KEY]&&null!=t.domNode[r.DATA_KEY].mutations&&(t instanceof o.default&&t.children.forEach(l),t.optimize(i))},c=e,u=0;c.length>0;u+=1){if(u>=100)throw new Error("[Parchment] Maximum optimize iterations reached");for(c.forEach(function(t){var e=r.find(t.target,!0);null!=e&&(e.domNode===t.target&&("childList"===t.type?(a(r.find(t.previousSibling,!1)),[].forEach.call(t.addedNodes,function(t){var e=r.find(t,!1);a(e,!1),e instanceof o.default&&e.children.forEach(function(t){a(t,!1)})})):"attributes"===t.type&&a(e.prev)),a(e))}),this.children.forEach(l),s=(c=[].slice.call(this.observer.takeRecords())).slice();s.length>0;)e.push(s.pop())}},e.prototype.update=function(e,i){var n=this;void 0===i&&(i={}),(e=e||this.observer.takeRecords()).map(function(t){var e=r.find(t.target,!0);if(null!=e)return null==e.domNode[r.DATA_KEY].mutations?(e.domNode[r.DATA_KEY].mutations=[t],e):(e.domNode[r.DATA_KEY].mutations.push(t),null)}).forEach(function(t){null!=t&&t!==n&&null!=t.domNode[r.DATA_KEY]&&t.update(t.domNode[r.DATA_KEY].mutations||[],i)}),null!=this.domNode[r.DATA_KEY].mutations&&t.prototype.update.call(this,this.domNode[r.DATA_KEY].mutations,i),this.optimize(e,i)},e.blotName="scroll",e.defaultChild="block",e.scope=r.Scope.BLOCK_BLOT,e.tagName="DIV",e}(o.default);e.default=a},function(t,e,i){var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=i(18),r=i(1),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.formats=function(i){if(i.tagName!==e.tagName)return t.formats.call(this,i)},e.prototype.format=function(i,n){var r=this;i!==this.statics.blotName||n?t.prototype.format.call(this,i,n):(this.children.forEach(function(t){t instanceof o.default||(t=t.wrap(e.blotName,!0)),r.attributes.copy(t)}),this.unwrap())},e.prototype.formatAt=function(e,i,n,o){null!=this.formats()[n]||r.query(n,r.Scope.ATTRIBUTE)?this.isolate(e,i).format(n,o):t.prototype.formatAt.call(this,e,i,n,o)},e.prototype.optimize=function(i){t.prototype.optimize.call(this,i);var n=this.formats();if(0===Object.keys(n).length)return this.unwrap();var o=this.next;o instanceof e&&o.prev===this&&function(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var i in t)if(t[i]!==e[i])return!1;return!0}(n,o.formats())&&(o.moveChildren(this),o.remove())},e.blotName="inline",e.scope=r.Scope.INLINE_BLOT,e.tagName="SPAN",e}(o.default);e.default=s},function(t,e,i){var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=i(18),r=i(1),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.formats=function(i){var n=r.query(e.blotName).tagName;if(i.tagName!==n)return t.formats.call(this,i)},e.prototype.format=function(i,n){null!=r.query(i,r.Scope.BLOCK)&&(i!==this.statics.blotName||n?t.prototype.format.call(this,i,n):this.replaceWith(e.blotName))},e.prototype.formatAt=function(e,i,n,o){null!=r.query(n,r.Scope.BLOCK)?this.format(n,o):t.prototype.formatAt.call(this,e,i,n,o)},e.prototype.insertAt=function(e,i,n){if(null==n||null!=r.query(i,r.Scope.INLINE))t.prototype.insertAt.call(this,e,i,n);else{var o=this.split(e),s=r.create(i,n);o.parent.insertBefore(s,o)}},e.prototype.update=function(e,i){navigator.userAgent.match(/Trident/)?this.attach():t.prototype.update.call(this,e,i)},e.blotName="block",e.scope=r.Scope.BLOCK_BLOT,e.tagName="P",e}(o.default);e.default=s},function(t,e,i){var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.formats=function(t){},e.prototype.format=function(e,i){t.prototype.formatAt.call(this,0,this.length(),e,i)},e.prototype.formatAt=function(e,i,n,o){0===e&&i===this.length()?this.format(n,o):t.prototype.formatAt.call(this,e,i,n,o)},e.prototype.formats=function(){return this.statics.formats(this.domNode)},e}(i(19).default);e.default=o},function(t,e,i){var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=i(19),r=i(1),s=function(t){function e(e){var i=t.call(this,e)||this;return i.text=i.statics.value(i.domNode),i}return n(e,t),e.create=function(t){return document.createTextNode(t)},e.value=function(t){var e=t.data;return e.normalize&&(e=e.normalize()),e},e.prototype.deleteAt=function(t,e){this.domNode.data=this.text=this.text.slice(0,t)+this.text.slice(t+e)},e.prototype.index=function(t,e){return this.domNode===t?e:-1},e.prototype.insertAt=function(e,i,n){null==n?(this.text=this.text.slice(0,e)+i+this.text.slice(e),this.domNode.data=this.text):t.prototype.insertAt.call(this,e,i,n)},e.prototype.length=function(){return this.text.length},e.prototype.optimize=function(i){t.prototype.optimize.call(this,i),this.text=this.statics.value(this.domNode),0===this.text.length?this.remove():this.next instanceof e&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},e.prototype.position=function(t,e){return void 0===e&&(e=!1),[this.domNode,t]},e.prototype.split=function(t,e){if(void 0===e&&(e=!1),!e){if(0===t)return this;if(t===this.length())return this.next}var i=r.create(this.domNode.splitText(t));return this.parent.insertBefore(i,this.next),this.text=this.statics.value(this.domNode),i},e.prototype.update=function(t,e){var i=this;t.some(function(t){return"characterData"===t.type&&t.target===i.domNode})&&(this.text=this.statics.value(this.domNode))},e.prototype.value=function(){return this.text},e.blotName="text",e.scope=r.Scope.INLINE_BLOT,e}(o.default);e.default=s},function(t,e,i){var n=document.createElement("div");if(n.classList.toggle("test-class",!1),n.classList.contains("test-class")){var o=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(t,e){return arguments.length>1&&!this.contains(t)==!e?e:o.call(this,t)}}String.prototype.startsWith||(String.prototype.startsWith=function(t,e){return e=e||0,this.substr(e,t.length)===t}),String.prototype.endsWith||(String.prototype.endsWith=function(t,e){var i=this.toString();("number"!=typeof e||!isFinite(e)||Math.floor(e)!==e||e>i.length)&&(e=i.length),e-=t.length;var n=i.indexOf(t,e);return-1!==n&&n===e}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(t){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var e,i=Object(this),n=i.length>>>0,o=arguments[1],r=0;r<n;r++)if(e=i[r],t.call(o,e,r,i))return e}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(t,e){function i(t,e,h){if(t==e)return t?[[u,t]]:[];(h<0||t.length<h)&&(h=null);var d=o(t,e),f=t.substring(0,d);d=r(t=t.substring(d),e=e.substring(d));var p=t.substring(t.length-d),m=function(t,e){var s;if(!t)return[[c,e]];if(!e)return[[l,t]];var a=t.length>e.length?t:e,h=t.length>e.length?e:t,d=a.indexOf(h);if(-1!=d)return s=[[c,a.substring(0,d)],[u,h],[c,a.substring(d+h.length)]],t.length>e.length&&(s[0][0]=s[2][0]=l),s;if(1==h.length)return[[l,t],[c,e]];var f=function(t,e){function i(t,e,i){for(var n,s,a,l,c=t.substring(i,i+Math.floor(t.length/4)),u=-1,h="";-1!=(u=e.indexOf(c,u+1));){var d=o(t.substring(i),e.substring(u)),f=r(t.substring(0,i),e.substring(0,u));h.length<f+d&&(h=e.substring(u-f,u)+e.substring(u,u+d),n=t.substring(0,i-f),s=t.substring(i+d),a=e.substring(0,u-f),l=e.substring(u+d))}return 2*h.length>=t.length?[n,s,a,l,h]:null}var n=t.length>e.length?t:e,s=t.length>e.length?e:t;if(n.length<4||2*s.length<n.length)return null;var a,l=i(n,s,Math.ceil(n.length/4)),c=i(n,s,Math.ceil(n.length/2));if(!l&&!c)return null;a=c?l&&l[4].length>c[4].length?l:c:l;var u,h,d,f;return t.length>e.length?(u=a[0],h=a[1],d=a[2],f=a[3]):(d=a[0],f=a[1],u=a[2],h=a[3]),[u,h,d,f,a[4]]}(t,e);if(f){var p=f[0],m=f[1],g=f[2],v=f[3],y=f[4],b=i(p,g),_=i(m,v);return b.concat([[u,y]],_)}return function(t,e){for(var i=t.length,o=e.length,r=Math.ceil((i+o)/2),s=r,a=2*r,u=new Array(a),h=new Array(a),d=0;d<a;d++)u[d]=-1,h[d]=-1;u[s+1]=0,h[s+1]=0;for(var f=i-o,p=f%2!=0,m=0,g=0,v=0,y=0,b=0;b<r;b++){for(var _=-b+m;_<=b-g;_+=2){for(var w=s+_,k=(E=_==-b||_!=b&&u[w-1]<u[w+1]?u[w+1]:u[w-1]+1)-_;E<i&&k<o&&t.charAt(E)==e.charAt(k);)E++,k++;if(u[w]=E,E>i)g+=2;else if(k>o)m+=2;else if(p){var x=s+f-_;if(x>=0&&x<a&&-1!=h[x]){var C=i-h[x];if(E>=C)return n(t,e,E,k)}}}for(var T=-b+v;T<=b-y;T+=2){for(var x=s+T,D=(C=T==-b||T!=b&&h[x-1]<h[x+1]?h[x+1]:h[x-1]+1)-T;C<i&&D<o&&t.charAt(i-C-1)==e.charAt(o-D-1);)C++,D++;if(h[x]=C,C>i)y+=2;else if(D>o)v+=2;else if(!p){var w=s+f-T;if(w>=0&&w<a&&-1!=u[w]){var E=u[w],k=s+E-w;if(C=i-C,E>=C)return n(t,e,E,k)}}}}return[[l,t],[c,e]]}(t,e)}(t=t.substring(0,t.length-d),e=e.substring(0,e.length-d));return f&&m.unshift([u,f]),p&&m.push([u,p]),s(m),null!=h&&(m=function(t,e){var i=function(t,e){if(0===e)return[u,t];for(var i=0,n=0;n<t.length;n++){var o=t[n];if(o[0]===l||o[0]===u){var r=i+o[1].length;if(e===r)return[n+1,t];if(e<r){t=t.slice();var s=e-i,a=[o[0],o[1].slice(0,s)],c=[o[0],o[1].slice(s)];return t.splice(n,1,a,c),[n+1,t]}i=r}}throw new Error("cursor_pos is out of bounds!")}(t,e),n=i[1],o=i[0],r=n[o],s=n[o+1];if(null==r)return t;if(r[0]!==u)return t;if(null!=s&&r[1]+s[1]===s[1]+r[1])return n.splice(o,2,s,r),a(n,o,2);if(null!=s&&0===s[1].indexOf(r[1])){n.splice(o,2,[s[0],r[1]],[0,r[1]]);var c=s[1].slice(r[1].length);return c.length>0&&n.splice(o+2,0,[s[0],c]),a(n,o,3)}return t}(m,h)),m=function(t){for(var e=!1,i=function(t){return t.charCodeAt(0)>=56320&&t.charCodeAt(0)<=57343},n=2;n<t.length;n+=1)t[n-2][0]===u&&function(t){return t.charCodeAt(t.length-1)>=55296&&t.charCodeAt(t.length-1)<=56319}(t[n-2][1])&&t[n-1][0]===l&&i(t[n-1][1])&&t[n][0]===c&&i(t[n][1])&&(e=!0,t[n-1][1]=t[n-2][1].slice(-1)+t[n-1][1],t[n][1]=t[n-2][1].slice(-1)+t[n][1],t[n-2][1]=t[n-2][1].slice(0,-1));if(!e)return t;for(var o=[],n=0;n<t.length;n+=1)t[n][1].length>0&&o.push(t[n]);return o}(m)}function n(t,e,n,o){var r=t.substring(0,n),s=e.substring(0,o),a=t.substring(n),l=e.substring(o),c=i(r,s),u=i(a,l);return c.concat(u)}function o(t,e){if(!t||!e||t.charAt(0)!=e.charAt(0))return 0;for(var i=0,n=Math.min(t.length,e.length),o=n,r=0;i<o;)t.substring(r,o)==e.substring(r,o)?(i=o,r=i):n=o,o=Math.floor((n-i)/2+i);return o}function r(t,e){if(!t||!e||t.charAt(t.length-1)!=e.charAt(e.length-1))return 0;for(var i=0,n=Math.min(t.length,e.length),o=n,r=0;i<o;)t.substring(t.length-o,t.length-r)==e.substring(e.length-o,e.length-r)?(i=o,r=i):n=o,o=Math.floor((n-i)/2+i);return o}function s(t){t.push([u,""]);for(var e,i=0,n=0,a=0,h="",d="";i<t.length;)switch(t[i][0]){case c:a++,d+=t[i][1],i++;break;case l:n++,h+=t[i][1],i++;break;case u:n+a>1?(0!==n&&0!==a&&(0!==(e=o(d,h))&&(i-n-a>0&&t[i-n-a-1][0]==u?t[i-n-a-1][1]+=d.substring(0,e):(t.splice(0,0,[u,d.substring(0,e)]),i++),d=d.substring(e),h=h.substring(e)),0!==(e=r(d,h))&&(t[i][1]=d.substring(d.length-e)+t[i][1],d=d.substring(0,d.length-e),h=h.substring(0,h.length-e))),0===n?t.splice(i-a,n+a,[c,d]):0===a?t.splice(i-n,n+a,[l,h]):t.splice(i-n-a,n+a,[l,h],[c,d]),i=i-n-a+(n?1:0)+(a?1:0)+1):0!==i&&t[i-1][0]==u?(t[i-1][1]+=t[i][1],t.splice(i,1)):i++,a=0,n=0,h="",d=""}""===t[t.length-1][1]&&t.pop();var f=!1;for(i=1;i<t.length-1;)t[i-1][0]==u&&t[i+1][0]==u&&(t[i][1].substring(t[i][1].length-t[i-1][1].length)==t[i-1][1]?(t[i][1]=t[i-1][1]+t[i][1].substring(0,t[i][1].length-t[i-1][1].length),t[i+1][1]=t[i-1][1]+t[i+1][1],t.splice(i-1,1),f=!0):t[i][1].substring(0,t[i+1][1].length)==t[i+1][1]&&(t[i-1][1]+=t[i+1][1],t[i][1]=t[i][1].substring(t[i+1][1].length)+t[i+1][1],t.splice(i+1,1),f=!0)),i++;f&&s(t)}function a(t,e,i){for(var n=e+i-1;n>=0&&n>=e-1;n--)if(n+1<t.length){var o=t[n],r=t[n+1];o[0]===r[1]&&t.splice(n,2,[o[0],o[1]+r[1]])}return t}var l=-1,c=1,u=0,h=i;h.INSERT=c,h.DELETE=l,h.EQUAL=u,t.exports=h},function(t,e){function i(t){var e=[];for(var i in t)e.push(i);return e}(t.exports="function"==typeof Object.keys?Object.keys:i).shim=i},function(t,e){function i(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function n(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Object.prototype.hasOwnProperty.call(t,"callee")&&!Object.prototype.propertyIsEnumerable.call(t,"callee")||!1}var o="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();(e=t.exports=o?i:n).supported=i,e.unsupported=n},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}function o(t,e){return Object.keys(e).reduce(function(i,n){return null==t[n]?i:(e[n]===t[n]?i[n]=e[n]:Array.isArray(e[n])?e[n].indexOf(t[n])<0&&(i[n]=e[n].concat([t[n]])):i[n]=[e[n],t[n]],i)},{})}Object.defineProperty(e,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],n=!0,o=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(i.push(s.value),!e||i.length!==e);n=!0);}catch(t){o=!0,r=t}finally{try{!n&&a.return&&a.return()}finally{if(o)throw r}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=n(i(4)),c=n(i(20)),u=n(i(0)),h=n(i(13)),d=n(i(31)),f=i(3),p=n(f),m=n(i(14)),g=n(i(21)),v=n(i(12)),y=n(i(2)),b=/^[ -~]*$/,_=function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.scroll=e,this.delta=this.getDelta()}return a(t,[{key:"applyDelta",value:function(t){var e=this,i=!1;this.scroll.update();var n=this.scroll.length();return this.scroll.batchStart(),(t=function(t){return t.reduce(function(t,e){if(1===e.insert){var i=(0,g.default)(e.attributes);return delete i.image,t.insert({image:e.attributes.image},i)}if(null==e.attributes||!0!==e.attributes.list&&!0!==e.attributes.bullet||((e=(0,g.default)(e)).attributes.list?e.attributes.list="ordered":(e.attributes.list="bullet",delete e.attributes.bullet)),"string"==typeof e.insert){var n=e.insert.replace(/\r\n/g,"\n").replace(/\r/g,"\n");return t.insert(n,e.attributes)}return t.push(e)},new l.default)}(t)).reduce(function(t,o){var a=o.retain||o.delete||o.insert.length||1,l=o.attributes||{};if(null!=o.insert){if("string"==typeof o.insert){var h=o.insert;h.endsWith("\n")&&i&&(i=!1,h=h.slice(0,-1)),t>=n&&!h.endsWith("\n")&&(i=!0),e.scroll.insertAt(t,h);var d=e.scroll.line(t),m=s(d,2),g=m[0],v=m[1],b=(0,y.default)({},(0,f.bubbleFormats)(g));if(g instanceof p.default){var _=g.descendant(u.default.Leaf,v),w=s(_,1)[0];b=(0,y.default)(b,(0,f.bubbleFormats)(w))}l=c.default.attributes.diff(b,l)||{}}else if("object"===r(o.insert)){var k=Object.keys(o.insert)[0];if(null==k)return t;e.scroll.insertAt(t,k,o.insert[k])}n+=a}return Object.keys(l).forEach(function(i){e.scroll.formatAt(t,a,i,l[i])}),t+a},0),t.reduce(function(t,i){return"number"==typeof i.delete?(e.scroll.deleteAt(t,i.delete),t):t+(i.retain||i.insert.length||1)},0),this.scroll.batchEnd(),this.update(t)}},{key:"deleteText",value:function(t,e){return this.scroll.deleteAt(t,e),this.update((new l.default).retain(t).delete(e))}},{key:"formatLine",value:function(t,e){var i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.scroll.update(),Object.keys(n).forEach(function(o){if(null==i.scroll.whitelist||i.scroll.whitelist[o]){var r=i.scroll.lines(t,Math.max(e,1)),s=e;r.forEach(function(e){var r=e.length();if(e instanceof h.default){var a=t-e.offset(i.scroll),l=e.newlineIndex(a+s)-a+1;e.formatAt(a,l,o,n[o])}else e.format(o,n[o]);s-=r})}}),this.scroll.optimize(),this.update((new l.default).retain(t).retain(e,(0,g.default)(n)))}},{key:"formatText",value:function(t,e){var i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object.keys(n).forEach(function(o){i.scroll.formatAt(t,e,o,n[o])}),this.update((new l.default).retain(t).retain(e,(0,g.default)(n)))}},{key:"getContents",value:function(t,e){return this.delta.slice(t,t+e)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(t,e){return t.concat(e.delta())},new l.default)}},{key:"getFormat",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=[],n=[];0===e?this.scroll.path(t).forEach(function(t){var e=s(t,1)[0];e instanceof p.default?i.push(e):e instanceof u.default.Leaf&&n.push(e)}):(i=this.scroll.lines(t,e),n=this.scroll.descendants(u.default.Leaf,t,e));var r=[i,n].map(function(t){if(0===t.length)return{};for(var e=(0,f.bubbleFormats)(t.shift());Object.keys(e).length>0;){var i=t.shift();if(null==i)return e;e=o((0,f.bubbleFormats)(i),e)}return e});return y.default.apply(y.default,r)}},{key:"getText",value:function(t,e){return this.getContents(t,e).filter(function(t){return"string"==typeof t.insert}).map(function(t){return t.insert}).join("")}},{key:"insertEmbed",value:function(t,e,i){return this.scroll.insertAt(t,e,i),this.update((new l.default).retain(t).insert(function(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}({},e,i)))}},{key:"insertText",value:function(t,e){var i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e=e.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),this.scroll.insertAt(t,e),Object.keys(n).forEach(function(o){i.scroll.formatAt(t,e.length,o,n[o])}),this.update((new l.default).retain(t).insert(e,(0,g.default)(n)))}},{key:"isBlank",value:function(){if(0==this.scroll.children.length)return!0;if(this.scroll.children.length>1)return!1;var t=this.scroll.children.head;return t.statics.blotName===p.default.blotName&&!(t.children.length>1)&&t.children.head instanceof m.default}},{key:"removeFormat",value:function(t,e){var i=this.getText(t,e),n=this.scroll.line(t+e),o=s(n,2),r=o[0],a=o[1],c=0,u=new l.default;null!=r&&(c=r instanceof h.default?r.newlineIndex(a)-a+1:r.length()-a,u=r.delta().slice(a,a+c-1).insert("\n"));var d=this.getContents(t,e+c).diff((new l.default).insert(i).concat(u)),f=(new l.default).retain(t).concat(d);return this.applyDelta(f)}},{key:"update",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,n=this.delta;if(1===e.length&&"characterData"===e[0].type&&e[0].target.data.match(b)&&u.default.find(e[0].target)){var o=u.default.find(e[0].target),r=(0,f.bubbleFormats)(o),s=o.offset(this.scroll),a=e[0].oldValue.replace(d.default.CONTENTS,""),c=(new l.default).insert(a),h=(new l.default).insert(o.value());t=(new l.default).retain(s).concat(c.diff(h,i)).reduce(function(t,e){return e.insert?t.insert(e.insert,r):t.push(e)},new l.default),this.delta=n.compose(t)}else this.delta=this.getDelta(),t&&(0,v.default)(n.compose(t),this.delta)||(t=n.diff(this.delta,i));return t}}]),t}();e.default=_},function(t,e){function i(){}function n(t,e,i){this.fn=t,this.context=e,this.once=i||!1}function o(){this._events=new i,this._eventsCount=0}var r=Object.prototype.hasOwnProperty,s="~";Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(s=!1)),o.prototype.eventNames=function(){var t,e,i=[];if(0===this._eventsCount)return i;for(e in t=this._events)r.call(t,e)&&i.push(s?e.slice(1):e);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(t)):i},o.prototype.listeners=function(t,e){var i=s?s+t:t,n=this._events[i];if(e)return!!n;if(!n)return[];if(n.fn)return[n.fn];for(var o=0,r=n.length,a=new Array(r);o<r;o++)a[o]=n[o].fn;return a},o.prototype.emit=function(t,e,i,n,o,r){var a=s?s+t:t;if(!this._events[a])return!1;var l,c,u=this._events[a],h=arguments.length;if(u.fn){switch(u.once&&this.removeListener(t,u.fn,void 0,!0),h){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,e),!0;case 3:return u.fn.call(u.context,e,i),!0;case 4:return u.fn.call(u.context,e,i,n),!0;case 5:return u.fn.call(u.context,e,i,n,o),!0;case 6:return u.fn.call(u.context,e,i,n,o,r),!0}for(c=1,l=new Array(h-1);c<h;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var d,f=u.length;for(c=0;c<f;c++)switch(u[c].once&&this.removeListener(t,u[c].fn,void 0,!0),h){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,e);break;case 3:u[c].fn.call(u[c].context,e,i);break;case 4:u[c].fn.call(u[c].context,e,i,n);break;default:if(!l)for(d=1,l=new Array(h-1);d<h;d++)l[d-1]=arguments[d];u[c].fn.apply(u[c].context,l)}}return!0},o.prototype.on=function(t,e,i){var o=new n(e,i||this),r=s?s+t:t;return this._events[r]?this._events[r].fn?this._events[r]=[this._events[r],o]:this._events[r].push(o):(this._events[r]=o,this._eventsCount++),this},o.prototype.once=function(t,e,i){var o=new n(e,i||this,!0),r=s?s+t:t;return this._events[r]?this._events[r].fn?this._events[r]=[this._events[r],o]:this._events[r].push(o):(this._events[r]=o,this._eventsCount++),this},o.prototype.removeListener=function(t,e,n,o){var r=s?s+t:t;if(!this._events[r])return this;if(!e)return 0==--this._eventsCount?this._events=new i:delete this._events[r],this;var a=this._events[r];if(a.fn)a.fn!==e||o&&!a.once||n&&a.context!==n||(0==--this._eventsCount?this._events=new i:delete this._events[r]);else{for(var l=0,c=[],u=a.length;l<u;l++)(a[l].fn!==e||o&&!a[l].once||n&&a[l].context!==n)&&c.push(a[l]);c.length?this._events[r]=1===c.length?c[0]:c:0==--this._eventsCount?this._events=new i:delete this._events[r]}return this},o.prototype.removeAllListeners=function(t){var e;return t?(e=s?s+t:t,this._events[e]&&(0==--this._eventsCount?this._events=new i:delete this._events[e])):(this._events=new i,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prototype.setMaxListeners=function(){return this},o.prefixed=s,o.EventEmitter=o,void 0!==t&&(t.exports=o)},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}function o(t){return t instanceof h.default||t instanceof u.BlockEmbed}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],n=!0,o=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(i.push(s.value),!e||i.length!==e);n=!0);}catch(t){o=!0,r=t}finally{try{!n&&a.return&&a.return()}finally{if(o)throw r}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=function t(e,i,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0},l=n(i(0)),c=n(i(9)),u=i(3),h=n(u),d=n(i(14)),f=n(i(13)),p=n(i(23)),m=function(t){function e(t,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.emitter=i.emitter,Array.isArray(i.whitelist)&&(n.whitelist=i.whitelist.reduce(function(t,e){return t[e]=!0,t},{})),n.domNode.addEventListener("DOMNodeInserted",function(){}),n.optimize(),n.enable(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,l.default.Scroll),s(e,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(t,i){var n=this.line(t),o=r(n,2),s=o[0],l=o[1],c=this.line(t+i),h=r(c,1)[0];if(a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"deleteAt",this).call(this,t,i),null!=h&&s!==h&&l>0){if(s instanceof u.BlockEmbed||h instanceof u.BlockEmbed)return void this.optimize();if(s instanceof f.default){var p=s.newlineIndex(s.length(),!0);if(p>-1&&(s=s.split(p+1))===h)return void this.optimize()}else if(h instanceof f.default){var m=h.newlineIndex(0);m>-1&&h.split(m+1)}var g=h.children.head instanceof d.default?null:h.children.head;s.moveChildren(h,g),s.remove()}this.optimize()}},{key:"enable",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.domNode.setAttribute("contenteditable",t)}},{key:"formatAt",value:function(t,i,n,o){(null==this.whitelist||this.whitelist[n])&&(a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"formatAt",this).call(this,t,i,n,o),this.optimize())}},{key:"insertAt",value:function(t,i,n){if(null==n||null==this.whitelist||this.whitelist[i]){if(t>=this.length())if(null==n||null==l.default.query(i,l.default.Scope.BLOCK)){var o=l.default.create(this.statics.defaultChild);this.appendChild(o),null==n&&i.endsWith("\n")&&(i=i.slice(0,-1)),o.insertAt(0,i,n)}else{var r=l.default.create(i,n);this.appendChild(r)}else a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"insertAt",this).call(this,t,i,n);this.optimize()}}},{key:"insertBefore",value:function(t,i){if(t.statics.scope===l.default.Scope.INLINE_BLOT){var n=l.default.create(this.statics.defaultChild);n.appendChild(t),t=n}a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"insertBefore",this).call(this,t,i)}},{key:"leaf",value:function(t){return this.path(t).pop()||[null,-1]}},{key:"line",value:function(t){return t===this.length()?this.line(t-1):this.descendant(o,t)}},{key:"lines",value:function(){return function t(e,i,n){var r=[],s=n;return e.children.forEachAt(i,n,function(e,i,n){o(e)?r.push(e):e instanceof l.default.Container&&(r=r.concat(t(e,i,s))),s-=n}),r}(this,arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE)}},{key:"optimize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!0!==this.batch&&(a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"optimize",this).call(this,t,i),t.length>0&&this.emitter.emit(c.default.events.SCROLL_OPTIMIZE,t,i))}},{key:"path",value:function(t){return a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"path",this).call(this,t).slice(1)}},{key:"update",value:function(t){if(!0!==this.batch){var i=c.default.sources.USER;"string"==typeof t&&(i=t),Array.isArray(t)||(t=this.observer.takeRecords()),t.length>0&&this.emitter.emit(c.default.events.SCROLL_BEFORE_UPDATE,i,t),a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"update",this).call(this,t.concat([])),t.length>0&&this.emitter.emit(c.default.events.SCROLL_UPDATE,i,t)}}}]),e}();m.blotName="scroll",m.className="ql-editor",m.tagName="DIV",m.defaultChild="block",m.allowedChildren=[h.default,u.BlockEmbed,p.default],e.default=m},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}function o(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function r(t,e,i){return"object"===(void 0===e?"undefined":g(e))?Object.keys(e).reduce(function(t,i){return r(t,i,e[i])},t):t.reduce(function(t,n){return n.attributes&&n.attributes[e]?t.push(n):t.insert(n.insert,(0,b.default)({},o({},e,i),n.attributes))},new _.default)}function s(t){return t.nodeType!==Node.ELEMENT_NODE?{}:t["__ql-computed-style"]||(t["__ql-computed-style"]=window.getComputedStyle(t))}function a(t,e){for(var i="",n=t.ops.length-1;n>=0&&i.length<e.length;--n){var o=t.ops[n];if("string"!=typeof o.insert)break;i=o.insert+i}return i.slice(-1*e.length)===e}function l(t){return 0!==t.childNodes.length&&["block","list-item"].indexOf(s(t).display)>-1}function c(t,e,i){return t.nodeType===t.TEXT_NODE?i.reduce(function(e,i){return i(t,e)},new _.default):t.nodeType===t.ELEMENT_NODE?[].reduce.call(t.childNodes||[],function(n,o){var r=c(o,e,i);return o.nodeType===t.ELEMENT_NODE&&(r=e.reduce(function(t,e){return e(o,t)},r),r=(o[P]||[]).reduce(function(t,e){return e(o,t)},r)),n.concat(r)},new _.default):new _.default}function u(t,e,i){return r(i,t,!0)}function h(t,e){var i=w.default.Attributor.Attribute.keys(t),n=w.default.Attributor.Class.keys(t),o=w.default.Attributor.Style.keys(t),s={};return i.concat(n).concat(o).forEach(function(e){var i=w.default.query(e,w.default.Scope.ATTRIBUTE);null!=i&&(s[i.attrName]=i.value(t),s[i.attrName])||(null!=(i=j[e])&&i.attrName===e&&(s[i.attrName]=i.value(t)||void 0),null!=(i=L[e])&&i.attrName===e&&(i=L[e],s[i.attrName]=i.value(t)||void 0))}),Object.keys(s).length>0&&(e=r(e,s)),e}function d(t,e){var i=w.default.query(t);if(null==i)return e;if(i.prototype instanceof w.default.Embed){var n={},o=i.value(t);null!=o&&(n[i.blotName]=o,e=(new _.default).insert(n,i.formats(t)))}else"function"==typeof i.formats&&(e=r(e,i.blotName,i.formats(t)));return e}function f(t,e){return a(e,"\n")||(l(t)||e.length()>0&&t.nextSibling&&l(t.nextSibling))&&e.insert("\n"),e}function p(t,e){if(l(t)&&null!=t.nextElementSibling&&!a(e,"\n\n")){var i=t.offsetHeight+parseFloat(s(t).marginTop)+parseFloat(s(t).marginBottom);t.nextElementSibling.offsetTop>t.offsetTop+1.5*i&&e.insert("\n")}return e}function m(t,e){var i=t.data;if("O:P"===t.parentNode.tagName)return e.insert(i.trim());if(0===i.trim().length&&t.parentNode.classList.contains("ql-clipboard"))return e;if(!s(t.parentNode).whiteSpace.startsWith("pre")){var n=function(t,e){return(e=e.replace(/[^\u00a0]/g,"")).length<1&&t?" ":e};i=(i=i.replace(/\r\n/g," ").replace(/\n/g," ")).replace(/\s\s+/g,n.bind(n,!0)),(null==t.previousSibling&&l(t.parentNode)||null!=t.previousSibling&&l(t.previousSibling))&&(i=i.replace(/^\s+/,n.bind(n,!1))),(null==t.nextSibling&&l(t.parentNode)||null!=t.nextSibling&&l(t.nextSibling))&&(i=i.replace(/\s+$/,n.bind(n,!1)))}return e.insert(i)}Object.defineProperty(e,"__esModule",{value:!0}),e.matchText=e.matchSpacing=e.matchNewline=e.matchBlot=e.matchAttributor=e.default=void 0;var g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],n=!0,o=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(i.push(s.value),!e||i.length!==e);n=!0);}catch(t){o=!0,r=t}finally{try{!n&&a.return&&a.return()}finally{if(o)throw r}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),y=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),b=n(i(2)),_=n(i(4)),w=n(i(0)),k=n(i(6)),x=n(i(10)),C=n(i(7)),T=i(33),D=i(34),E=n(i(13)),O=i(25),S=i(35),M=i(36),I=i(37),A=(0,x.default)("quill:clipboard"),P="__ql-matcher",N=[[Node.TEXT_NODE,m],[Node.TEXT_NODE,f],["br",function(t,e){return a(e,"\n")||e.insert("\n"),e}],[Node.ELEMENT_NODE,f],[Node.ELEMENT_NODE,d],[Node.ELEMENT_NODE,p],[Node.ELEMENT_NODE,h],[Node.ELEMENT_NODE,function(t,e){var i={},n=t.style||{};return n.fontStyle&&"italic"===s(t).fontStyle&&(i.italic=!0),n.fontWeight&&(s(t).fontWeight.startsWith("bold")||parseInt(s(t).fontWeight)>=700)&&(i.bold=!0),Object.keys(i).length>0&&(e=r(e,i)),parseFloat(n.textIndent||0)>0&&(e=(new _.default).insert("\t").concat(e)),e}],["li",function(t,e){var i=w.default.query(t);if(null==i||"list-item"!==i.blotName||!a(e,"\n"))return e;for(var n=-1,o=t.parentNode;!o.classList.contains("ql-clipboard");)"list"===(w.default.query(o)||{}).blotName&&(n+=1),o=o.parentNode;return n<=0?e:e.compose((new _.default).retain(e.length()-1).retain(1,{indent:n}))}],["b",u.bind(u,"bold")],["i",u.bind(u,"italic")],["style",function(){return new _.default}]],j=[T.AlignAttribute,S.DirectionAttribute].reduce(function(t,e){return t[e.keyName]=e,t},{}),L=[T.AlignStyle,D.BackgroundStyle,O.ColorStyle,S.DirectionStyle,M.FontStyle,I.SizeStyle].reduce(function(t,e){return t[e.keyName]=e,t},{}),q=function(t){function e(t,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i));return n.quill.root.addEventListener("paste",n.onPaste.bind(n)),n.container=n.quill.addContainer("ql-clipboard"),n.container.setAttribute("contenteditable",!0),n.container.setAttribute("tabindex",-1),n.matchers=[],N.concat(n.options.matchers).forEach(function(t){var e=v(t,2),o=e[0],r=e[1];(i.matchVisual||r!==p)&&n.addMatcher(o,r)}),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,C.default),y(e,[{key:"addMatcher",value:function(t,e){this.matchers.push([t,e])}},{key:"convert",value:function(t){if("string"==typeof t)return this.container.innerHTML=t.replace(/\>\r?\n +\</g,"><"),this.convert();var e=this.quill.getFormat(this.quill.selection.savedRange.index);if(e[E.default.blotName]){var i=this.container.innerText;return this.container.innerHTML="",(new _.default).insert(i,o({},E.default.blotName,e[E.default.blotName]))}var n=this.prepareMatching(),r=v(n,2),s=r[0],l=r[1],u=c(this.container,s,l);return a(u,"\n")&&null==u.ops[u.ops.length-1].attributes&&(u=u.compose((new _.default).retain(u.length()-1).delete(1))),A.log("convert",this.container.innerHTML,u),this.container.innerHTML="",u}},{key:"dangerouslyPasteHTML",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:k.default.sources.API;if("string"==typeof t)return this.quill.setContents(this.convert(t),e);var n=this.convert(e);return this.quill.updateContents((new _.default).retain(t).concat(n),i)}},{key:"onPaste",value:function(t){var e=this;if(!t.defaultPrevented&&this.quill.isEnabled()){var i=this.quill.getSelection(),n=(new _.default).retain(i.index),o=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(k.default.sources.SILENT),setTimeout(function(){n=n.concat(e.convert()).delete(i.length),e.quill.updateContents(n,k.default.sources.USER),e.quill.setSelection(n.length()-i.length,k.default.sources.SILENT),e.quill.scrollingContainer.scrollTop=o,e.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var t=this,e=[],i=[];return this.matchers.forEach(function(n){var o=v(n,2),r=o[0],s=o[1];switch(r){case Node.TEXT_NODE:i.push(s);break;case Node.ELEMENT_NODE:e.push(s);break;default:[].forEach.call(t.container.querySelectorAll(r),function(t){t[P]=t[P]||[],t[P].push(s)})}}),[e,i]}}]),e}();q.DEFAULTS={matchers:[],matchVisual:!0},e.default=q,e.matchAttributor=h,e.matchBlot=d,e.matchNewline=f,e.matchSpacing=p,e.matchText=m},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}function o(t){var e=t.reduce(function(t,e){return t+=e.delete||0},0),i=t.length()-e;return function(t){var e=t.ops[t.ops.length-1];return null!=e&&(null!=e.insert?"string"==typeof e.insert&&e.insert.endsWith("\n"):null!=e.attributes&&Object.keys(e.attributes).some(function(t){return null!=s.default.query(t,s.default.Scope.BLOCK)}))}(t)&&(i-=1),i}Object.defineProperty(e,"__esModule",{value:!0}),e.getLastChangeIndex=e.default=void 0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=n(i(0)),a=n(i(6)),l=n(i(7)),c=function(t){function e(t,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i));return n.lastRecorded=0,n.ignoreChange=!1,n.clear(),n.quill.on(a.default.events.EDITOR_CHANGE,function(t,e,i,o){t!==a.default.events.TEXT_CHANGE||n.ignoreChange||(n.options.userOnly&&o!==a.default.sources.USER?n.transform(e):n.record(e,i))}),n.quill.keyboard.addBinding({key:"Z",shortKey:!0},n.undo.bind(n)),n.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},n.redo.bind(n)),/Win/i.test(navigator.platform)&&n.quill.keyboard.addBinding({key:"Y",shortKey:!0},n.redo.bind(n)),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,l.default),r(e,[{key:"change",value:function(t,e){if(0!==this.stack[t].length){var i=this.stack[t].pop();this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(i[t],a.default.sources.USER),this.ignoreChange=!1;var n=o(i[t]);this.quill.setSelection(n),this.stack[e].push(i)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(t,e){if(0!==t.ops.length){this.stack.redo=[];var i=this.quill.getContents().diff(e),n=Date.now();if(this.lastRecorded+this.options.delay>n&&this.stack.undo.length>0){var o=this.stack.undo.pop();i=i.compose(o.undo),t=o.redo.compose(t)}else this.lastRecorded=n;this.stack.undo.push({redo:t,undo:i}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(t){this.stack.undo.forEach(function(e){e.undo=t.transform(e.undo,!0),e.redo=t.transform(e.redo,!0)}),this.stack.redo.forEach(function(e){e.undo=t.transform(e.undo,!0),e.redo=t.transform(e.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),e}();c.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1},e.default=c,e.getLastChangeIndex=o},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.IndentClass=void 0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=function t(e,i,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0},r=function(t){return t&&t.__esModule?t:{default:t}}(i(0)),s=new(function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.default.Attributor.Class),n(e,[{key:"add",value:function(t,i){if("+1"===i||"-1"===i){var n=this.value(t)||0;i="+1"===i?n+1:n-1}return 0===i?(this.remove(t),!0):o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"add",this).call(this,t,i)}},{key:"canAdd",value:function(t,i){return o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"canAdd",this).call(this,t,i)||o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"canAdd",this).call(this,t,parseInt(i))}},{key:"value",value:function(t){return parseInt(o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"value",this).call(this,t))||void 0}}]),e}())("indent","ql-indent",{scope:r.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});e.IndentClass=s},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){return t&&t.__esModule?t:{default:t}}(i(3)),o=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,n.default),e}();o.blotName="blockquote",o.tagName="blockquote",e.default=o},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=function(t){return t&&t.__esModule?t:{default:t}}(i(3)),r=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.default),n(e,null,[{key:"formats",value:function(t){return this.tagName.indexOf(t.tagName)+1}}]),e}();r.blotName="header",r.tagName=["H1","H2","H3","H4","H5","H6"],e.default=r},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.ListItem=void 0;var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=function t(e,i,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0},c=n(i(0)),u=n(i(3)),h=n(i(23)),d=function(t){function e(){return o(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,u.default),a(e,[{key:"format",value:function(t,i){t!==f.blotName||i?l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"format",this).call(this,t,i):this.replaceWith(c.default.create(this.statics.scope))}},{key:"remove",value:function(){null==this.prev&&null==this.next?this.parent.remove():l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(t,i){return this.parent.isolate(this.offset(this.parent),this.length()),t===this.parent.statics.blotName?(this.parent.replaceWith(t,i),this):(this.parent.unwrap(),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"replaceWith",this).call(this,t,i))}}],[{key:"formats",value:function(t){return t.tagName===this.tagName?void 0:l(e.__proto__||Object.getPrototypeOf(e),"formats",this).call(this,t)}}]),e}();d.blotName="list-item",d.tagName="LI";var f=function(t){function e(t){o(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),n=function(e){if(e.target.parentNode===t){var n=i.statics.formats(t),o=c.default.find(e.target);"checked"===n?o.format("list","unchecked"):"unchecked"===n&&o.format("list","checked")}};return t.addEventListener("touchstart",n),t.addEventListener("mousedown",n),i}return s(e,h.default),a(e,null,[{key:"create",value:function(t){var i="ordered"===t?"OL":"UL",n=l(e.__proto__||Object.getPrototypeOf(e),"create",this).call(this,i);return"checked"!==t&&"unchecked"!==t||n.setAttribute("data-checked","checked"===t),n}},{key:"formats",value:function(t){return"OL"===t.tagName?"ordered":"UL"===t.tagName?t.hasAttribute("data-checked")?"true"===t.getAttribute("data-checked")?"checked":"unchecked":"bullet":void 0}}]),a(e,[{key:"format",value:function(t,e){this.children.length>0&&this.children.tail.format(t,e)}},{key:"formats",value:function(){return function(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(t,i){if(t instanceof d)l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"insertBefore",this).call(this,t,i);else{var n=null==i?this.length():i.offset(this),o=this.split(n);o.parent.insertBefore(t,o)}}},{key:"optimize",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"optimize",this).call(this,t);var i=this.next;null!=i&&i.prev===this&&i.statics.blotName===this.statics.blotName&&i.domNode.tagName===this.domNode.tagName&&i.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(i.moveChildren(this),i.remove())}},{key:"replace",value:function(t){if(t.statics.blotName!==this.statics.blotName){var i=c.default.create(this.statics.defaultChild);t.moveChildren(i),this.appendChild(i)}l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"replace",this).call(this,t)}}]),e}();f.blotName="list",f.scope=c.default.Scope.BLOCK_BLOT,f.tagName=["OL","UL"],f.defaultChild="list-item",f.allowedChildren=[d],e.ListItem=d,e.default=f},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){return t&&t.__esModule?t:{default:t}}(i(39)),o=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,n.default),e}();o.blotName="italic",o.tagName=["EM","I"],e.default=o},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=function(t){return t&&t.__esModule?t:{default:t}}(i(5)),r=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.default),n(e,null,[{key:"create",value:function(t){return"super"===t?document.createElement("sup"):"sub"===t?document.createElement("sub"):function t(e,i,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0}(e.__proto__||Object.getPrototypeOf(e),"create",this).call(this,t)}},{key:"formats",value:function(t){return"SUB"===t.tagName?"sub":"SUP"===t.tagName?"super":void 0}}]),e}();r.blotName="script",r.tagName=["SUB","SUP"],e.default=r},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){return t&&t.__esModule?t:{default:t}}(i(5)),o=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,n.default),e}();o.blotName="strike",o.tagName="S",e.default=o},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){return t&&t.__esModule?t:{default:t}}(i(5)),o=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,n.default),e}();o.blotName="underline",o.tagName="U",e.default=o},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=function t(e,i,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0},r=function(t){return t&&t.__esModule?t:{default:t}}(i(0)),s=i(15),a=["alt","height","width"],l=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.default.Embed),n(e,[{key:"format",value:function(t,i){a.indexOf(t)>-1?i?this.domNode.setAttribute(t,i):this.domNode.removeAttribute(t):o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"format",this).call(this,t,i)}}],[{key:"create",value:function(t){var i=o(e.__proto__||Object.getPrototypeOf(e),"create",this).call(this,t);return"string"==typeof t&&i.setAttribute("src",this.sanitize(t)),i}},{key:"formats",value:function(t){return a.reduce(function(e,i){return t.hasAttribute(i)&&(e[i]=t.getAttribute(i)),e},{})}},{key:"match",value:function(t){return/\.(jpe?g|gif|png)$/.test(t)||/^data:image\/.+;base64/.test(t)}},{key:"sanitize",value:function(t){return(0,s.sanitize)(t,["http","https","data"])?t:"//:0"}},{key:"value",value:function(t){return t.getAttribute("src")}}]),e}();l.blotName="image",l.tagName="IMG",e.default=l},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=function t(e,i,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0},r=i(3),s=function(t){return t&&t.__esModule?t:{default:t}}(i(15)),a=["height","width"],l=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.BlockEmbed),n(e,[{key:"format",value:function(t,i){a.indexOf(t)>-1?i?this.domNode.setAttribute(t,i):this.domNode.removeAttribute(t):o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"format",this).call(this,t,i)}}],[{key:"create",value:function(t){var i=o(e.__proto__||Object.getPrototypeOf(e),"create",this).call(this,t);return i.setAttribute("frameborder","0"),i.setAttribute("allowfullscreen",!0),i.setAttribute("src",this.sanitize(t)),i}},{key:"formats",value:function(t){return a.reduce(function(e,i){return t.hasAttribute(i)&&(e[i]=t.getAttribute(i)),e},{})}},{key:"sanitize",value:function(t){return s.default.sanitize(t)}},{key:"value",value:function(t){return t.getAttribute("src")}}]),e}();l.blotName="video",l.className="ql-video",l.tagName="IFRAME",e.default=l},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.FormulaBlot=void 0;var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=n(i(24)),c=n(i(6)),u=n(i(7)),h=function(t){function e(){return o(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,l.default),a(e,null,[{key:"create",value:function(t){var i=function t(e,i,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0}(e.__proto__||Object.getPrototypeOf(e),"create",this).call(this,t);return"string"==typeof t&&(window.katex.render(t,i,{throwOnError:!1,errorColor:"#f00"}),i.setAttribute("data-value",t)),i}},{key:"value",value:function(t){return t.getAttribute("data-value")}}]),e}();h.blotName="formula",h.className="ql-formula",h.tagName="SPAN";var d=function(t){function e(){o(this,e);var t=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));if(null==window.katex)throw new Error("Formula module requires KaTeX.");return t}return s(e,u.default),a(e,null,[{key:"register",value:function(){c.default.register(h,!0)}}]),e}();e.FormulaBlot=h,e.default=d},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.CodeToken=e.CodeBlock=void 0;var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=n(i(0)),c=n(i(6)),u=n(i(7)),h=n(i(13)),d=function(t){function e(){return o(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,h.default),a(e,[{key:"replaceWith",value:function(t){this.domNode.textContent=this.domNode.textContent,this.attach(),function t(e,i,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"replaceWith",this).call(this,t)}},{key:"highlight",value:function(t){var e=this.domNode.textContent;this.cachedText!==e&&((e.trim().length>0||null==this.cachedText)&&(this.domNode.innerHTML=t(e),this.domNode.normalize(),this.attach()),this.cachedText=e)}}]),e}();d.className="ql-syntax";var f=new l.default.Attributor.Class("token","hljs",{scope:l.default.Scope.INLINE}),p=function(t){function e(t,i){o(this,e);var n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i));if("function"!=typeof n.options.highlight)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var s=null;return n.quill.on(c.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(s),s=setTimeout(function(){n.highlight(),s=null},n.options.interval)}),n.highlight(),n}return s(e,u.default),a(e,null,[{key:"register",value:function(){c.default.register(f,!0),c.default.register(d,!0)}}]),a(e,[{key:"highlight",value:function(){var t=this;if(!this.quill.selection.composing){this.quill.update(c.default.sources.USER);var e=this.quill.getSelection();this.quill.scroll.descendants(d).forEach(function(e){e.highlight(t.options.highlight)}),this.quill.update(c.default.sources.SILENT),null!=e&&this.quill.setSelection(e,c.default.sources.SILENT)}}}]),e}();p.DEFAULTS={highlight:null==window.hljs?null:function(t){return window.hljs.highlightAuto(t).value},interval:1e3},e.CodeBlock=d,e.CodeToken=f,e.default=p},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e,i){var n=document.createElement("button");n.setAttribute("type","button"),n.classList.add("ql-"+e),null!=i&&(n.value=i),t.appendChild(n)}function s(t,e){Array.isArray(e[0])||(e=[e]),e.forEach(function(e){var i=document.createElement("span");i.classList.add("ql-formats"),e.forEach(function(t){if("string"==typeof t)r(i,t);else{var e=Object.keys(t)[0],n=t[e];Array.isArray(n)?function(t,e,i){var n=document.createElement("select");n.classList.add("ql-"+e),i.forEach(function(t){var e=document.createElement("option");!1!==t?e.setAttribute("value",t):e.setAttribute("selected","selected"),n.appendChild(e)}),t.appendChild(n)}(i,e,n):r(i,e,n)}}),t.appendChild(i)})}Object.defineProperty(e,"__esModule",{value:!0}),e.addControls=e.default=void 0;var a=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],n=!0,o=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(i.push(s.value),!e||i.length!==e);n=!0);}catch(t){o=!0,r=t}finally{try{!n&&a.return&&a.return()}finally{if(o)throw r}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),c=n(i(4)),u=n(i(0)),h=n(i(6)),d=n(i(10)),f=n(i(7)),p=(0,d.default)("quill:toolbar"),m=function(t){function e(t,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i));if(Array.isArray(n.options.container)){var r=document.createElement("div");s(r,n.options.container),t.container.parentNode.insertBefore(r,t.container),n.container=r}else"string"==typeof n.options.container?n.container=document.querySelector(n.options.container):n.container=n.options.container;if(!(n.container instanceof HTMLElement)){var l;return l=p.error("Container required for toolbar",n.options),o(n,l)}return n.container.classList.add("ql-toolbar"),n.controls=[],n.handlers={},Object.keys(n.options.handlers).forEach(function(t){n.addHandler(t,n.options.handlers[t])}),[].forEach.call(n.container.querySelectorAll("button, select"),function(t){n.attach(t)}),n.quill.on(h.default.events.EDITOR_CHANGE,function(t,e){t===h.default.events.SELECTION_CHANGE&&n.update(e)}),n.quill.on(h.default.events.SCROLL_OPTIMIZE,function(){var t=n.quill.selection.getRange(),e=a(t,1)[0];n.update(e)}),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,f.default),l(e,[{key:"addHandler",value:function(t,e){this.handlers[t]=e}},{key:"attach",value:function(t){var e=this,i=[].find.call(t.classList,function(t){return 0===t.indexOf("ql-")});if(i){if(i=i.slice("ql-".length),"BUTTON"===t.tagName&&t.setAttribute("type","button"),null==this.handlers[i]){if(null!=this.quill.scroll.whitelist&&null==this.quill.scroll.whitelist[i])return void p.warn("ignoring attaching to disabled format",i,t);if(null==u.default.query(i))return void p.warn("ignoring attaching to nonexistent format",i,t)}var n="SELECT"===t.tagName?"change":"click";t.addEventListener(n,function(n){var o=void 0;if("SELECT"===t.tagName){if(t.selectedIndex<0)return;var r=t.options[t.selectedIndex];o=!r.hasAttribute("selected")&&(r.value||!1)}else o=!t.classList.contains("ql-active")&&(t.value||!t.hasAttribute("value")),n.preventDefault();e.quill.focus();var s=e.quill.selection.getRange(),l=a(s,1)[0];if(null!=e.handlers[i])e.handlers[i].call(e,o);else if(u.default.query(i).prototype instanceof u.default.Embed){if(!(o=prompt("Enter "+i)))return;e.quill.updateContents((new c.default).retain(l.index).delete(l.length).insert(function(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}({},i,o)),h.default.sources.USER)}else e.quill.format(i,o,h.default.sources.USER);e.update(l)}),this.controls.push([i,t])}}},{key:"update",value:function(t){var e=null==t?{}:this.quill.getFormat(t);this.controls.forEach(function(i){var n=a(i,2),o=n[0],r=n[1];if("SELECT"===r.tagName){var s=void 0;if(null==t)s=null;else if(null==e[o])s=r.querySelector("option[selected]");else if(!Array.isArray(e[o])){var l=e[o];"string"==typeof l&&(l=l.replace(/\"/g,'\\"')),s=r.querySelector('option[value="'+l+'"]')}null==s?(r.value="",r.selectedIndex=-1):s.selected=!0}else if(null==t)r.classList.remove("ql-active");else if(r.hasAttribute("value")){var c=e[o]===r.getAttribute("value")||null!=e[o]&&e[o].toString()===r.getAttribute("value")||null==e[o]&&!r.getAttribute("value");r.classList.toggle("ql-active",c)}else r.classList.toggle("ql-active",null!=e[o])})}}]),e}();m.DEFAULTS={},m.DEFAULTS={container:null,handlers:{clean:function(){var t=this,e=this.quill.getSelection();if(null!=e)if(0==e.length){var i=this.quill.getFormat();Object.keys(i).forEach(function(e){null!=u.default.query(e,u.default.Scope.INLINE)&&t.quill.format(e,!1)})}else this.quill.removeFormat(e,h.default.sources.USER)},direction:function(t){var e=this.quill.getFormat().align;"rtl"===t&&null==e?this.quill.format("align","right",h.default.sources.USER):t||"right"!==e||this.quill.format("align",!1,h.default.sources.USER),this.quill.format("direction",t,h.default.sources.USER)},indent:function(t){var e=this.quill.getSelection(),i=this.quill.getFormat(e),n=parseInt(i.indent||0);if("+1"===t||"-1"===t){var o="+1"===t?1:-1;"rtl"===i.direction&&(o*=-1),this.quill.format("indent",n+o,h.default.sources.USER)}},link:function(t){!0===t&&(t=prompt("Enter link URL:")),this.quill.format("link",t,h.default.sources.USER)},list:function(t){var e=this.quill.getSelection(),i=this.quill.getFormat(e);"check"===t?"checked"===i.list||"unchecked"===i.list?this.quill.format("list",!1,h.default.sources.USER):this.quill.format("list","unchecked",h.default.sources.USER):this.quill.format("list",t,h.default.sources.USER)}}},e.default=m,e.addControls=s},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(t,e){t.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(t,e){t.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(t,e){t.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(t,e){t.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.BubbleTooltip=void 0;var a=function t(e,i,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0},l=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),c=n(i(2)),u=n(i(9)),h=i(44),d=n(h),f=i(22),p=n(i(26)),m=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],g=function(t){function e(t,i){o(this,e),null!=i.modules.toolbar&&null==i.modules.toolbar.container&&(i.modules.toolbar.container=m);var n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i));return n.quill.container.classList.add("ql-bubble"),n}return s(e,d.default),l(e,[{key:"extendToolbar",value:function(t){this.tooltip=new v(this.quill,this.options.bounds),this.tooltip.root.appendChild(t.container),this.buildButtons([].slice.call(t.container.querySelectorAll("button")),p.default),this.buildPickers([].slice.call(t.container.querySelectorAll("select")),p.default)}}]),e}();g.DEFAULTS=(0,c.default)(!0,{},d.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(t){t?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var v=function(t){function e(t,i){o(this,e);var n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i));return n.quill.on(u.default.events.EDITOR_CHANGE,function(t,e,i,o){if(t===u.default.events.SELECTION_CHANGE)if(null!=e&&e.length>0&&o===u.default.sources.USER){n.show(),n.root.style.left="0px",n.root.style.width="",n.root.style.width=n.root.offsetWidth+"px";var r=n.quill.getLines(e.index,e.length);if(1===r.length)n.position(n.quill.getBounds(e));else{var s=r[r.length-1],a=n.quill.getIndex(s),l=Math.min(s.length()-1,e.index+e.length-a),c=n.quill.getBounds(new f.Range(a,l));n.position(c)}}else document.activeElement!==n.textbox&&n.quill.hasFocus()&&n.hide()}),n}return s(e,h.BaseTooltip),l(e,[{key:"listen",value:function(){var t=this;a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){t.root.classList.remove("ql-editing")}),this.quill.on(u.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!t.root.classList.contains("ql-hidden")){var e=t.quill.getSelection();null!=e&&t.position(t.quill.getBounds(e))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(t){var i=a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"position",this).call(this,t),n=this.root.querySelector(".ql-tooltip-arrow");if(n.style.marginLeft="",0===i)return i;n.style.marginLeft=-1*i-n.offsetWidth/2+"px"}}]),e}();v.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),e.BubbleTooltip=v,e.default=g},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],n=!0,o=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(i.push(s.value),!e||i.length!==e);n=!0);}catch(t){o=!0,r=t}finally{try{!n&&a.return&&a.return()}finally{if(o)throw r}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function t(e,i,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0},c=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),u=n(i(2)),h=n(i(9)),d=i(44),f=n(d),p=n(i(15)),m=i(22),g=n(i(26)),v=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],y=function(t){function e(t,i){o(this,e),null!=i.modules.toolbar&&null==i.modules.toolbar.container&&(i.modules.toolbar.container=v);var n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i));return n.quill.container.classList.add("ql-snow"),n}return s(e,f.default),c(e,[{key:"extendToolbar",value:function(t){t.container.classList.add("ql-snow"),this.buildButtons([].slice.call(t.container.querySelectorAll("button")),g.default),this.buildPickers([].slice.call(t.container.querySelectorAll("select")),g.default),this.tooltip=new b(this.quill,this.options.bounds),t.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(e,i){t.handlers.link.call(t,!i.format.link)})}}]),e}();y.DEFAULTS=(0,u.default)(!0,{},f.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(t){if(t){var e=this.quill.getSelection();if(null==e||0==e.length)return;var i=this.quill.getText(e);/^\S+@\S+\.\S+$/.test(i)&&0!==i.indexOf("mailto:")&&(i="mailto:"+i),this.quill.theme.tooltip.edit("link",i)}else this.quill.format("link",!1)}}}}});var b=function(t){function e(t,i){o(this,e);var n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i));return n.preview=n.root.querySelector("a.ql-preview"),n}return s(e,d.BaseTooltip),c(e,[{key:"listen",value:function(){var t=this;l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(e){t.root.classList.contains("ql-editing")?t.save():t.edit("link",t.preview.textContent),e.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(e){if(null!=t.linkRange){var i=t.linkRange;t.restoreFocus(),t.quill.formatText(i,"link",!1,h.default.sources.USER),delete t.linkRange}e.preventDefault(),t.hide()}),this.quill.on(h.default.events.SELECTION_CHANGE,function(e,i,n){if(null!=e){if(0===e.length&&n===h.default.sources.USER){var o=t.quill.scroll.descendant(p.default,e.index),r=a(o,2),s=r[0],l=r[1];if(null!=s){t.linkRange=new m.Range(e.index-l,s.length());var c=p.default.formats(s.domNode);return t.preview.textContent=c,t.preview.setAttribute("href",c),t.show(),void t.position(t.quill.getBounds(t.linkRange))}}else delete t.linkRange;t.hide()}})}},{key:"show",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),e}();b.TEMPLATE=['<a class="ql-preview" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),e.default=y}]).default});